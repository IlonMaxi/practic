define(["pgadmin.browser.constants","pgadmin.browser.endpoints","pgadmin.browser.messages","pgadmin.browser.utils","pgadmin.server.supported_servers","pgadmin.user_management.current_user","translations"],((e,t,n,r,o,a,i)=>(()=>{"use strict";var l={41959:(e,t,n)=>{var r=n(95318),o=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(67294)),i=(0,r(n(2108)).default)(a.createElement("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");t.default=i},66735:(e,t,n)=>{var r=n(95318),o=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(67294)),i=(0,r(n(2108)).default)(a.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");t.default=i},13410:(e,t,n)=>{var r=n(95318),o=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(67294)),i=(0,r(n(2108)).default)(a.createElement("path",{d:"M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"}),"FastForward");t.default=i},89354:(e,t,n)=>{var r=n(95318),o=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(67294)),i=(0,r(n(2108)).default)(a.createElement("path",{d:"M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"}),"FastRewind");t.default=i},81400:(e,t,n)=>{var r,o;n(32564),n(82772),n(26699),n(32023),n(15306),n(74916),n(73210),n(71151),n(76916),n(90491),n(72126),n(5878),n(24482),n(11769),n(24149),n(57455),n(44588),n(68169),n(75945),n(32138),n(55520),n(23612),n(76385),n(84102),n(22226),n(61561),n(9603),n(79487),n(26772),n(92971),n(30160),n(50581),n(82319),n(78030),n(87091),n(14767),n(42654),n(17195),n(53794),n(92660),n(7215),n(40559),n(74119),n(60465),n(49606),n(52225),n(69096),n(2961),n(67872),n(98050),n(70929),n(28969),n(66668),n(57617),n(40708),n(79099),n(12e3),n(21532),n(94386),n(27587),n(76994),r=[n(91669),n(28008),n(19755),n(81311),n(55455),n(55112),n(20811),n(81240),n(72316),n(52934),n(7167),n(85530),n(9807),n(44092),n(35816)],void 0===(o=function(e,t,n,r,o,a,i,l,s,u,c,d,f,p){var b=window.wcDocker,m=a.Browser;return a.DataGrid||(a.DataGrid=r.extend({init:function(){if(!this.initialized){this.initialized=!0,this.title_index=1;var t=this,n=setInterval((function(){m.preference_version()>0&&(t.preferences=m.get_preferences_for_module("sqleditor"),clearInterval(n))}),0);m.onPreferencesChange("sqleditor",(function(){t.preferences=m.get_preferences_for_module("sqleditor")}));for(var o=["table","view","mview","foreign_table","catalog_object","partition"],i=function(t){var n=!r.isUndefined(t)&&!r.isNull(t)&&-1!==r.indexOf(o,t._type);return d.enable(e("View Data"),n),d.enable(e("Filtered Rows"),n),n},l=[{name:"query_tool",module:this,applies:["tools"],callback:"show_query_tool",enable:function(t){var n=!(r.isUndefined(t)||r.isNull(t)||-1!=r.indexOf(a.unsupported_nodes,t._type)||("database"!=t._type||!t.allowConn)&&"database"==t._type);return d.enable(e("Query Tool"),n),n},priority:1,label:e("Query Tool"),icon:"pg-font-icon icon-query_tool",data:{applies:"tools",data_disabled:e("Please select a database from the browser tree to access Query Tool.")}}],s=0;s<o.length;s++)l.push({name:"view_all_rows_context_"+o[s],node:o[s],module:this,data:{mnuid:3},applies:["context","object"],callback:"show_data_grid",enable:i,category:"view_data",priority:101,label:e("All Rows")},{name:"view_first_100_rows_context_"+o[s],node:o[s],module:this,data:{mnuid:1},applies:["context","object"],callback:"show_data_grid",enable:i,category:"view_data",priority:102,label:e("First 100 Rows")},{name:"view_last_100_rows_context_"+o[s],node:o[s],module:this,data:{mnuid:2},applies:["context","object"],callback:"show_data_grid",enable:i,category:"view_data",priority:103,label:e("Last 100 Rows")},{name:"view_filtered_rows_context_"+o[s],node:o[s],module:this,data:{mnuid:4},applies:["context","object"],callback:"show_filtered_row",enable:i,category:"view_data",priority:104,label:e("Filtered Rows...")});a.Browser.add_menu_category("view_data",e("View/Edit Data"),100,""),a.Browser.add_menus(l),new a.Browser.Frame({name:"frm_datagrid",showTitle:!0,isCloseable:!0,isRenamable:!0,isPrivate:!0,url:"about:blank"}).load(m.docker),this.on("pgadmin-datagrid:transaction:created",(function(e){this.launch_grid(e)}))}},show_data_grid:function(e,t){var n=p.getRandomInt(1,9999999);u.showDataGrid(this,m,o,e,t,n)},show_filtered_row:function(e,t){var n=p.getRandomInt(1,9999999);u.showDataGrid(this,m,o,e,t,n,!0,this.preferences)},show_query_tool:function(t,n){var r=p.getRandomInt(1,9999999),a=m.tree,i=n||a.selected(),l=i?a.itemData(i):void 0;if(!m.get_preference("sqleditor","copy_sql_to_query_tool").value||l._type.includes("coll-")||""!==t&&"tools"!==t.applies)l._type.includes("coll-")&&(t=""),c.showQueryTool(this,m,o,t,n,r);else{var s={script:l._type.toLowerCase(),data_disabled:e("The selected tree node does not support this option.")};m.Node.callbacks.show_script(s)}},launch_grid:function(a,i,l,s){var d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,h='\n          <form id="queryToolForm" action="'.concat(i,'" method="post">\n            <input id="title" name="title" hidden />');d&&(h+='<input name="query_url" value="'.concat(d,'" hidden />')),y&&(h+='<textarea name="sql_filter" hidden>'.concat(y,"</textarea>")),h+='\n          </form>\n            <script>\n              document.getElementById("title").value = "'.concat(r.escape(s.replace("\\","\\\\")),'";\n              document.getElementById("queryToolForm").submit();\n            <\/script>\n          ');var g=m.get_preferences_for_module("browser"),v=g.new_browser_tab_open;if(v&&v.includes("qt")){var _=window.open("","_blank");if(!_)return!1;_.document.write(h),_.document.title=s,setTimeout((function(){m.send_signal_to_runtime("Runtime new window opened")}),500)}else{var w=m.docker.findPanels("properties"),O=m.docker.addPanel("frm_datagrid",b.DOCK.STACKED,w[0]);O.trans_id=a,c._set_dynamic_tab(m,g.dynamic_tabs),f.setQueryToolDockerTitle(O,l,r.unescape(s)),O.focus(),O.isVisible()&&O.on(b.EVENT.CLOSED,(function(){n.ajax({url:t("datagrid.close",{trans_id:a}),method:"DELETE"})})),O.on(b.EVENT.VISIBILITY_CHANGED,(function(){O.trigger(b.EVENT.RESIZED)})),p.registerDetachEvent(O),O.on(b.EVENT.RENAME,(function(t){var n=t.$titleText[0].textContent,a=!!O.is_dirty_editor&&O.is_dirty_editor,i=O.is_dirty_editor?t.$titleText[0].textContent.replace(/.$/,""):n;o.prompt("",i,(function(e,n){if(n=n.trim()){var o=!1;t.$titleText[0].innerHTML.includes("File - ")&&(o=!0);var i=m.tree.selected(),s="";s=l?f.getPanelTitle(m,i,n):u.generateDatagridTitle(m,i,n),a&&(s+=" *"),f.setQueryToolDockerTitle(O,l,r.unescape(s),o)}}),(function(e){e.cancel=!1})).set({title:e("Rename Panel")})}));var S=function(e){var t=n('<div class="pg-sp-container">\n                    <div class="pg-sp-content">\n                        <div class="row">\n                            <div class="col-12 pg-sp-icon"></div>\n                        </div>\n                    </div>\n                </div>').appendTo(n(e).data("embeddedFrame").$container),r=setInterval((function(){if(n(e).data("frameInitialized")){clearInterval(r);var o=n(e).data("embeddedFrame");o&&(o.onLoaded((function(){t.remove()})),o.openHTML(h))}}),100)};S(O)}return!0}},s.Events)),a.DataGrid}.apply(t,r))||(e.exports=o)},89918:(e,t,n)=>{var r,o;n(70655),n(76310),n(58386),n(34408),n(92887),n(45736),n(49525),n(86695),n(87113),n(92959),n(22074),n(32351),n(23792),n(44316),n(26889),n(95566),n(68001),r=[n(33883),n(84059),n(10474),n(19577)],void 0===(o=function(e){e.init()}.apply(t,r))||(e.exports=o)},97548:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(68304),n(30489);var o=l(n(91669)),a=l(n(89406)),i=n(76055);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,a=b(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return d(this,l),(e=a.call(this,u({name:void 0,encoding:"UTF8",srctyp:void 0,trgtyp:void 0,proname:void 0,castcontext:!1,syscast:void 0,description:void 0},n))).fieldOptions=t,e}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",editable:!1,type:"text",readonly:!0,cellHeaderClasses:"width_percent_50"},{id:"oid",label:(0,o.default)("OID"),cell:"string",editable:!1,type:"text",mode:["properties"]},{id:"srctyp",label:(0,o.default)("Source type"),type:"select",group:(0,o.default)("Definition"),readonly:function(t){return!e.isNew(t)},mode:["create"],options:this.fieldOptions.getTypeOptions,depChange:function(e){var t=e.srctyp,n=e.trgtyp;return e.name=null!=t&&""!=t&&null!=n&&""!=n?t+"->"+n:""}},{id:"srctyp",label:(0,o.default)("Source type"),type:"text",group:(0,o.default)("Definition"),readonly:!0,mode:["properties","edit"]},{id:"trgtyp",label:(0,o.default)("Target type"),type:"select",group:(0,o.default)("Definition"),readonly:function(t){return!e.isNew(t)},mode:["create"],options:this.fieldOptions.getTypeOptions,depChange:function(e){var t=e.srctyp,n=e.trgtyp;return e.name=null!=t&&""!=t&&null!=n&&""!=n?t+"->"+n:""}},{id:"trgtyp",label:(0,o.default)("Target type"),type:"text",group:(0,o.default)("Definition"),readonly:!0,mode:["properties","edit"]},{id:"proname",label:(0,o.default)("Function"),deps:["srctyp","trgtyp"],readonly:function(t){return!e.isNew(t)},group:(0,o.default)("Definition"),mode:["create"],first_empty:!0,type:function(t){return{type:"select",options:function(){return e.fieldOptions.getFuncOptions(t.srctyp,t.trgtyp)},optionsReloadBasis:t.srctyp+t.trgtyp}}},{id:"proname",label:(0,o.default)("Function"),type:"text",group:(0,o.default)("Definition"),readonly:!0,mode:["properties","edit"]},{id:"castcontext",label:(0,o.default)("Context"),type:"toggle",options:[{label:(0,o.default)("IMPLICIT"),value:!0},{label:(0,o.default)("EXPLICIT"),value:!1}],group:(0,o.default)("Definition"),mode:["create"]},{id:"castcontext",label:(0,o.default)("Context"),readonly:!0,options:[{label:"IMPLICIT",value:"IMPLICIT"},{label:"EXPLICIT",value:"EXPLICIT"},{label:"ASSIGNMENT",value:"ASSIGNMENT"}],type:"select",group:(0,o.default)("Definition"),mode:["properties","edit"],controlProps:{editable:!1}},{id:"syscast",label:(0,o.default)("System cast?"),cell:"switch",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),type:"multiline",cellHeaderClasses:"width_percent_50"}]}},{key:"validate",value:function(e,t){return(0,i.isEmptyString)(e.srctyp)?(t("srctyp",(0,o.default)("Source type must be selected.")),!0):(t("srctyp",null),(0,i.isEmptyString)(e.trgtyp)?(t("trgtyp",(0,o.default)("Target type must be selected.")),!0):(t("trgtyp",null),!1))}}])&&f(t.prototype,n),r&&f(t,r),l}(a.default);t.default=h},18272:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var a=u(n(91669)),i=u(n(89406)),l=u(n(67091)),s=n(76055);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,o,i=y(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return p(this,u),(e=i.call(this,d({oid:void 0,name:void 0,eventowner:void 0,is_sys_obj:void 0,comment:void 0,enabled:"O",eventfuncoid:void 0,eventfunname:void 0,eventname:"DDL_COMMAND_START",when:void 0,xmin:void 0,source:void 0,language:void 0},n))).fieldOptions=d({role:[],function_names:[]},t),e}return t=u,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"name",label:(0,a.default)("Name"),cell:"text",type:"text",noEmpty:!0},{id:"oid",label:(0,a.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"eventowner",label:(0,a.default)("Owner"),type:"select",mode:["properties","edit","create"],node:"role",options:this.fieldOptions.role},{id:"is_sys_obj",label:(0,a.default)("System event trigger?"),cell:"switch",type:"switch",mode:["properties"]},{id:"comment",label:(0,a.default)("Comment"),type:"multiline"},{id:"enabled",label:(0,a.default)("Trigger enabled?"),group:(0,a.default)("Definition"),mode:["properties","edit","create"],options:[{label:(0,a.default)("Enable"),value:"O"},{label:(0,a.default)("Disable"),value:"D"},{label:(0,a.default)("Replica"),value:"R"},{label:(0,a.default)("Always"),value:"A"}],type:"select",controlProps:{allowClear:!1,width:"100%"}},{id:"eventfunname",label:(0,a.default)("Trigger function"),type:"select",group:(0,a.default)("Definition"),options:this.fieldOptions.function_names},{id:"eventname",label:(0,a.default)("Event"),group:(0,a.default)("Definition"),cell:"text",options:[{label:(0,a.default)("DDL COMMAND START"),value:"DDL_COMMAND_START"},{label:(0,a.default)("DDL COMMAND END"),value:"DDL_COMMAND_END"},{label:(0,a.default)("SQL DROP"),value:"SQL_DROP"}],type:"select",controlProps:{allowClear:!1,width:"100%"}},{id:"when",label:(0,a.default)("When TAG in"),cell:"string",type:"sql",group:(0,a.default)("Definition"),controlProps:{className:["custom_height_css_class"]}},{id:"seclabels",label:(0,a.default)("Security labels"),type:"collection",schema:new l.default,editable:!1,group:(0,a.default)("Security"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,uniqueCol:["provider"],min_version:90200}]}},{key:"validate",value:function(e,t){var n=null;if((0,s.isEmptyString)(e.service)){if((0,s.isEmptyString)(e.eventfunname))return n=(0,a.default)("Event trigger function cannot be empty."),t("eventfunname",n),!0;t("eventfunname",n=null)}else n=null,r.each(["eventfunname"],(function(e){t(e,n)}))}}])&&b(t.prototype,n),o&&b(t,o),u}(i.default);t.default=v},72876:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(89554),n(54747),n(68309),n(68304),n(30489);var a=s(n(91669)),i=s(n(89406)),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(s,e);var t,n,o,i=m(s);function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,s),e=i.call(this,{name:null,oid:void 0,version:"",schema:"",relocatable:!1,is_sys_obj:!1,comment:null}),t=c({extensionsList:[],schemaList:[]},t),e.extensionsList=t.extensionsList,e.schemaList=t.schemaList,e}return t=s,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,a.default)("Name"),mode:["properties","create","edit"],editable:!1,noEmpty:!0,readonly:function(e){return!t.isNew(e)},type:function(e){return{type:"select",options:t.extensionsList,optionsLoaded:function(e){t.extensionData=e},controlProps:{allowClear:!1,filter:function(n){var r=[];return e&&t.isNew(e)?n.forEach((function(e){null===e.data.installed_version&&r.push({label:e.label,value:e.value})})):r=n,r}}}},depChange:function(e){var n=t.extensionData;e&&t.isNew(e)&&n.forEach((function(t){if(e.name==t.data.name){var n=t.data;e.version="",e.relocatable=r.isNull(n.relocatable[0])||r.isUndefined(n.relocatable[0])?"":n.relocatable[0]}}))}},{id:"oid",label:(0,a.default)("OID"),type:"text",mode:["properties"]},{id:"schema",label:(0,a.default)("Schema"),type:"select",mode:["properties","create","edit"],group:(0,a.default)("Definition"),first_empty:!0,deps:["name"],controlProps:{allowClear:!1},editable:!1,options:this.schemaList,disabled:function(e){return!e.relocatable}},{id:"relocatable",label:(0,a.default)("Relocatable?"),cell:"switch",group:(0,a.default)("Definition"),type:"switch",mode:["properties"],deps:["name"]},{id:"version",label:(0,a.default)("Version"),mode:["properties","create","edit"],group:(0,a.default)("Definition"),first_empty:!0,deps:["name"],type:function(t){return{type:"select",options:e.extensionsList,controlProps:{allowClear:!1,filter:function(e){var n=[];return t?t.name&&e.forEach((function(e){if(t.name==e.data.name){var o=e.data;o.version&&r.isArray(o.version)&&r.each(o.version,(function(e){n.push({label:e,value:e})}))}})):e.forEach((function(e){var t=e.data;t.version&&r.isArray(t.version)&&r.each(t.version,(function(e){n.push({label:e,value:e})}))})),n}}}}},{id:"is_sys_obj",label:(0,a.default)("System extension?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"comment",label:(0,a.default)("Comment"),cell:"string",type:"multiline",readonly:!0}]}},{key:"validate",value:function(e,t){return(0,l.isEmptyString)(e.name)?(t("name",(0,a.default)("Name cannot be empty.")),!0):(t("name",null),!1)}}])&&p(t.prototype,n),o&&p(t,o),s}(i.default);t.default=g},30860:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=l(n(91669)),a=l(n(89406)),i=l(n(28296));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,a=b(l);function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return d(this,l),(t=a.call(this,u({name:void 0,fsrvtype:void 0,fsrvversion:void 0,fsrvvalue:void 0,fsrvoptions:[],fsrvowner:void 0,is_sys_obj:void 0,description:void 0,fsrvacl:[]},r))).getPrivilegeRoleSchema=e,t.fieldOptions=u({role:[]},n),t}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"fsrvowner",label:(0,o.default)("Owner"),editable:!1,type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1}},{id:"is_sys_obj",label:(0,o.default)("System foreign server?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"text",type:"multiline"},{id:"fsrvtype",label:(0,o.default)("Type"),type:"text",group:(0,o.default)("Definition"),readonly:function(t){return!e.isNew(t)}},{id:"fsrvversion",label:(0,o.default)("Version"),type:"text",group:(0,o.default)("Definition")},{id:"fsrvoptions",label:(0,o.default)("Options"),type:"collection",schema:new i.default("fsrvoption","fsrvvalue"),group:(0,o.default)("Options"),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["fsrvoption"]},{id:"security",label:(0,o.default)("Security"),type:"group"},{id:"fsrvacl",label:(0,o.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["U"]),uniqueCol:["grantee"],editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]}]}}])&&f(t.prototype,n),r&&f(t,r),l}(a.default);t.default=h},91161:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=l(n(91669)),a=l(n(89406)),i=l(n(28296));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,a=b(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return d(this,l),(e=a.call(this,u({name:void 0,is_sys_obj:void 0,um_options:[]},n))).fieldOptions=u({role:[]},t),e}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("User"),type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1},readonly:function(t){return!e.isNew(t)},mode:["edit","create","properties"]},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"is_sys_obj",label:(0,o.default)("System user mapping?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"umoptions",label:(0,o.default)("Options"),type:"collection",schema:new i.default("umoption","umvalue"),group:(0,o.default)("Options"),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["umoption"]}]}}])&&f(t.prototype,n),r&&f(t,r),l}(a.default);t.default=h},35626:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=l(n(91669)),a=l(n(89406)),i=l(n(28296));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,a=b(l);function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return d(this,l),(t=a.call(this,u({name:void 0,fdwowner:void 0,is_sys_obj:void 0,comment:void 0,fdwvalue:void 0,fdwhan:void 0,fdwoption:void 0,fdwacl:[]},r))).getPrivilegeRoleSchema=e,t.fieldOptions=u({role:[],fdwhan:[],fdwvalue:[]},n),t}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",noEmpty:!0,readonly:function(t){return!e.isNew(t)}},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"fdwowner",label:(0,o.default)("Owner"),editable:!1,type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1}},{id:"is_sys_obj",label:(0,o.default)("System foreign data wrapper?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"text",type:"multiline"},{id:"fdwhan",label:(0,o.default)("Handler"),editable:!1,type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.fdwhan,mode:["edit","create","properties"]},{id:"fdwvalue",label:(0,o.default)("Validator"),editable:!1,type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.fdwvalue,mode:["edit","create","properties"]},{id:"fdwoptions",label:(0,o.default)("Options"),type:"collection",schema:new i.default("fdwoption","fdwvalue"),group:(0,o.default)("Options"),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["fdwoption"]},{id:"security",label:(0,o.default)("Security"),type:"group"},{id:"fdwacl",label:(0,o.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["U"]),uniqueCol:["grantee"],editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]}]}}])&&f(t.prototype,n),r&&f(t,r),l}(a.default);t.default=h},80861:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(5212),n(89554),n(54747),n(68304),n(30489);var o=u(n(91669)),a=u(n(89406)),i=n(76055),l=u(n(67091)),s=u(n(96486));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,r,a=y(u);function u(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return p(this,u),(t=a.call(this,d({name:void 0,lanowner:r?r.node_info.user.name:void 0,comment:void 0,lanacl:[],seclabels:[],trusted:!0,lanproc:void 0,laninl:void 0,lanval:void 0},o))).fieldOptions=n,t.getPrivilegeRoleSchema=e,t.node_info=r,t.templateList=[],t.isTemplate=!1,t}return t=u,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"isLessThan13",value:function(){return!s.default.isUndefined(this.node_info)&&!s.default.isUndefined(this.node_info.node_info)&&!s.default.isUndefined(this.node_info.node_info.version)&&this.node_info.node_info.version<13e4}},{key:"isDisabled",value:function(e){return this.templateList.some((function(t){return t.tmplname===e.name}))?(this.isTemplate=!1,!0):(this.isTemplate=!0,!1)}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),noEmpty:!0,mode:["properties","create","edit"],optionsLoaded:function(e){t.templateList=e},type:function(n){return t.isLessThan13()?{type:"select",options:e.fieldOptions.templates_data,controlProps:{allowClear:!1,multiple:!1,creatable:!0,filter:function(e){var r=[];return n&&t.isNew()?e.forEach((function(e){r.push({label:e.tmplname,value:e.tmplname})})):r.push({label:n.name,value:n.name}),r}}}:{type:"text"}}},{id:"oid",label:(0,o.default)("OID"),cell:"string",mode:["properties"],type:"text"},{id:"lanowner",label:(0,o.default)("Owner"),type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1},mode:["edit","properties","create"]},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"is_sys_obj",label:(0,o.default)("System language?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline"},{id:"trusted",label:(0,o.default)("Trusted?"),type:"switch",group:(0,o.default)("Definition"),mode:["edit","properties","create"],disabled:t.isDisabled,deps:["name"],readonly:function(e){return!t.isNew(e)}},{id:"lanproc",label:(0,o.default)("Handler function"),group:(0,o.default)("Definition"),mode:["properties"],type:"text"},{id:"lanproc",label:(0,o.default)("Handler function"),deps:["name"],group:(0,o.default)("Definition"),mode:["edit","create"],type:function(t){return{type:"select",options:e.fieldOptions.lan_functions,controlProps:{allowClear:!1,filter:function(e){var n=[];return t&&e.forEach((function(e){"handler"==e.prop_type&&n.push({label:e.label,value:e.label})})),n}}}},disabled:t.isDisabled,readonly:function(e){return!t.isNew(e)}},{id:"laninl",label:(0,o.default)("Inline function"),group:(0,o.default)("Definition"),mode:["edit","create"],deps:["name"],first_empty:!1,type:function(t){return{type:"select",options:e.fieldOptions.lan_functions,controlProps:{allowClear:!1,filter:function(e){var n=[];return t&&e.forEach((function(e){"inline"==e.prop_type&&n.push({label:e.label,value:e.label})})),n}}}},disabled:t.isDisabled,readonly:function(e){return!t.isNew(e)}},{id:"laninl",label:(0,o.default)("Inline function"),group:(0,o.default)("Definition"),mode:["properties"],type:"text"},{id:"lanval",label:(0,o.default)("Validator function"),deps:["name"],group:(0,o.default)("Definition"),mode:["edit","create"],type:function(t){return{type:"select",options:e.fieldOptions.lan_functions,optionsLoaded:function(t){e.fieldOptions.lan_functions=t},controlProps:{allowClear:!1,filter:function(e){var n=[];return t&&e.forEach((function(e){"validator"==e.prop_type&&n.push({label:e.label,value:e.label})})),n}}}},disabled:t.isDisabled,readonly:function(e){return!t.isNew(e)}},{id:"lanval",label:(0,o.default)("Validator function"),group:(0,o.default)("Definition"),mode:["properties"],type:"text"},{id:"lanacl",label:(0,o.default)("Privileges"),type:"collection",group:(0,o.default)("Security"),mode:["edit","create"],schema:this.getPrivilegeRoleSchema(["U"]),canAdd:!0,canDelete:!0,uniqueCol:["grantee"]},{id:"seclabels",label:(0,o.default)("Security labels"),mode:["edit","create"],schema:new l.default,editable:!1,type:"collection",group:(0,o.default)("Security"),min_version:90200,canAdd:!0,canEdit:!1,canDelete:!0}]}},{key:"validate",value:function(e,t){return this.isTemplate&&(0,i.isEmptyString)(e.lanproc)?(t("lanproc",(0,o.default)("Handler function cannot be empty.")),!0):(t("lanproc",null),!1)}}])&&b(t.prototype,n),r&&b(t,r),u}(a.default);t.default=v},78047:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DefaultWithSchema=void 0,n(68309),n(68304),n(30489);var o=l(n(91669)),a=l(n(89406)),i=l(n(96486));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){b(n,e);var t=y(n);function n(e){var r;return d(this,n),(r=t.call(this)).node_info=e,r}return p(n,[{key:"baseFields",get:function(){return[{id:"evnt_insert",label:(0,o.default)("INSERT"),type:"switch",mode:["create","edit","properties"],group:(0,o.default)("With")},{id:"evnt_update",label:(0,o.default)("UPDATE"),type:"switch",mode:["create","edit","properties"],group:(0,o.default)("With")},{id:"evnt_delete",label:(0,o.default)("DELETE"),type:"switch",mode:["create","edit","properties"],group:(0,o.default)("With")},{id:"evnt_truncate",label:(0,o.default)("TRUNCATE"),type:"switch",group:(0,o.default)("With"),visible:function(){return!i.default.isUndefined(this.node_info.node_info)&&!i.default.isUndefined(this.node_info.node_info)&&!i.default.isUndefined(this.node_info.node_info.version)&&this.node_info.node_info.version>=11e4}},{id:"publish_via_partition_root",label:(0,o.default)("Publish via root?"),type:"switch",group:(0,o.default)("With"),visible:function(){return!i.default.isUndefined(this.node_info.node_info)&&!i.default.isUndefined(this.node_info.node_info)&&!i.default.isUndefined(this.node_info.node_info.version)&&this.node_info.node_info.version>=13e4}}]}}]),n}(a.default);t.DefaultWithSchema=v;var _=function(e){b(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return d(this,n),(e=t.call(this,u({name:void 0,pubowner:o?o.node_info.user.name:void 0,pubtable:void 0,all_table:void 0,evnt_insert:!0,evnt_delete:!0,evnt_update:!0,evnt_truncate:!0,only_table:void 0,publish_via_partition_root:!1},a))).fieldOptions=u({role:[],publicationTable:[]},r),e.node_info=o,e}return p(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"isAllTable",value:function(e){return!!e.all_table&&(e.pubtable="",!0)}},{key:"isTable",value:function(e){var t=e.all_table,n=e.pubtable;return(t||!(!i.default.isUndefined(n)&&n.length>0&&!i.default.isEqual(this._origData.pubtable,e.pubtable)))&&(e.only_table=!1,!0)}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",mode:["properties","create","edit"],noEmpty:!0,visible:function(){return!i.default.isUndefined(this.node_info.node_info)&&!i.default.isUndefined(this.node_info.node_info.version)&&this.node_info.node_info.version>=1e5}},{id:"oid",label:(0,o.default)("OID"),cell:"string",mode:["properties"],type:"text"},{id:"pubowner",label:(0,o.default)("Owner"),type:"select",options:this.fieldOptions.role,disabled:function(){return!!e.isNew()},mode:["edit","properties","create"],controlProps:{allowClear:!1}},{id:"all_table",label:(0,o.default)("All tables?"),type:"switch",group:(0,o.default)("Definition"),mode:["edit","properties","create"],deps:["name"],readonly:function(t){return!e.isNew(t)}},{id:"only_table",label:(0,o.default)("Only table?"),type:"switch",group:(0,o.default)("Definition"),mode:["edit","create"],deps:["name","pubtable","all_table"],readonly:e.isTable,helpMessageMode:["edit","create"],helpMessage:(0,o.default)("If ONLY is specified before the table name, only that table is added to the publication. If ONLY is not specified, the table and all its descendant tables (if any) are added.")},{id:"pubtable",label:(0,o.default)("Tables"),type:"select",controlProps:{allowClear:!0,multiple:!0,creatable:!0},options:this.fieldOptions.publicationTable,group:(0,o.default)("Definition"),mode:["edit","create"],deps:["all_table"],disabled:e.isAllTable},{id:"pubtable",label:(0,o.default)("Tables"),type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{type:"nested-fieldset",mode:["create","edit","properties"],label:(0,o.default)("With"),group:(0,o.default)("Definition"),schema:new v(this.node_info)}]}}]),n}(a.default);t.default=_},96132:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,a=f(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return u(this,i),(e=a.call(this,l({attname:void 0,attowner:void 0,attnum:void 0,cltype:void 0,collspcname:void 0,attacl:void 0,description:void 0},n))).fieldOptions=l({},t),e}return t=i,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"attname",label:(0,o.default)("Column"),cell:"string",type:"text",readonly:!0},{id:"attowner",label:(0,o.default)("Owner"),cell:"string",type:"text",readonly:!0},{id:"attnum",label:(0,o.default)("Position"),cell:"string",type:"text",readonly:!0},{id:"cltype",label:(0,o.default)("Data type"),cell:"string",group:(0,o.default)("Definition"),type:"text",readonly:!0},{id:"collspcname",label:(0,o.default)("Collation"),cell:"string",group:(0,o.default)("Definition"),type:"text",readonly:!0},{id:"attacl",label:(0,o.default)("Privileges"),cell:"string",group:(0,o.default)("Security"),type:"text",readonly:!0},{id:"is_sys_obj",label:(0,o.default)("System column?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline",readonly:!0}]}}])&&c(t.prototype,n),r&&c(t,r),i}(a(n(89406)).default);t.default=m},40718:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,a=s(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),a.call(this,{name:void 0,is_sys_obj:void 0,description:void 0})}return t=u,(n=[{key:"baseFields",get:function(){return[{id:"name",label:(0,o.default)("Name"),cell:"text",editable:!1,type:"text",mode:["properties","edit"]},{id:"oid",label:(0,o.default)("OID"),cell:"text",editable:!1,type:"text",mode:["properties","edit"]},{id:"owner",label:(0,o.default)("Owner"),editable:!1,type:"text",mode:["properties","edit"]},{id:"is_sys_obj",label:(0,o.default)("System database?"),cell:"switch",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),editable:!1,type:"multiline",mode:["properties","edit"]}]}}])&&i(t.prototype,n),r&&i(t,r),u}(a(n(89406)).default);t.default=d},6624:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(89554),n(54747),n(4723),n(74916),n(68309),n(68304),n(30489);var o=l(n(89406)),a=l(n(91669)),i=n(76055);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,o=b(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return d(this,l),(e=o.call(this,u({name:void 0,oid:void 0,owner:void 0,copy_collation:null,locale:void 0,lc_type:void 0,lc_collate:void 0,description:void 0,schema:null},n))).schemaList=t.schemaList,e.ownerList=t.rolesList,e.collationsList=t.collationsList,e}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,a.default)("Name"),type:"text",mode:["properties","create","edit"]},{id:"oid",label:(0,a.default)("OID"),type:"text",mode:["properties"]},{id:"owner",label:(0,a.default)("Owner"),type:"select",mode:["properties","create","edit"],options:e.ownerList,controlProps:{allowClear:!1}},{id:"schema",label:(0,a.default)("Schema"),mode:["create","edit"],node:"schema",type:function(){return{type:"select",options:e.schemaList,controlProps:{filter:function(e){var t=[];return e.forEach((function(e){e&&e.label.match(/^pg_/)||t.push(e)})),t},allowClear:!1}}}},{id:"copy_collation",label:(0,a.default)("Copy collation"),type:"select",mode:["create","edit"],group:(0,a.default)("Definition"),readonly:function(t){return!e.isNew(t)},options:e.collationsList,disabled:function(e){return!!e.locale||!(!e.lc_collate&&!e.lc_type)},deps:["locale","lc_collate","lc_type"]},{id:"locale",label:(0,a.default)("Locale"),type:"text",mode:["create","edit"],group:(0,a.default)("Definition"),readonly:function(t){return!e.isNew(t)},deps:["lc_collate","lc_type","copy_collation"],disabled:function(e){return!(!e.lc_collate&&!e.lc_type&&!e.copy_collation)}},{id:"lc_collate",label:(0,a.default)("LC_COLLATE"),type:"text",mode:["properties","create","edit"],group:(0,a.default)("Definition"),readonly:function(t){return!e.isNew(t)},disabled:e.disableFields,deps:["locale","copy_collation"]},{id:"lc_type",label:(0,a.default)("LC_TYPE"),type:"text",mode:["properties","create","edit"],group:(0,a.default)("Definition"),readonly:function(t){return!e.isNew(t)},disabled:e.disableFields,deps:["locale","copy_collation"]},{id:"is_sys_obj",label:(0,a.default)("System collation?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,a.default)("Comment"),type:"multiline",mode:["properties","create","edit"]}]}},{key:"disableFields",value:function(e){if(e.locale||e.copy_collation){if(e.locale)return!0;if(e.copy_collation)return!0}return!1}},{key:"validate",value:function(e,t){var n=!1,r=!1,o=!1,l=!1;return(0,i.isEmptyString)(e.name)?(t("name",(0,a.default)("Name cannot be empty.")),!0):((0,i.isEmptyString)(e.locale)&&(n=!0),(0,i.isEmptyString)(e.copy_collation)&&(l=!0),(0,i.isEmptyString)(e.lc_collate)&&(o=!0),(0,i.isEmptyString)(e.lc_type)&&(r=!0),n&&(o||r)&&l?(t("copy_collation",(0,a.default)("Definition incomplete. Please provide Locale OR Copy Collation OR LC_TYPE/LC_COLLATE.")),!0):null)}}])&&f(t.prototype,n),r&&f(t,r),l}(o.default);t.default=h},37055:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(d,e);var t,n,r,a=c(d);function d(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),a.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:void 0,oid:void 0,description:void 0,consrc:void 0,convalidated:!0},e))}return t=d,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",cell:"text",noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"is_sys_obj",label:(0,o.default)("System domain constraint?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),type:"multiline",cell:"text",mode:["properties","create","edit"],min_version:90500},{id:"consrc",label:(0,o.default)("Check"),type:"multiline",group:(0,o.default)("Definition"),mode:["properties","create","edit"],readonly:function(t){return!e.isNew(t)},noEmpty:!0},{id:"convalidated",label:(0,o.default)("Validate?"),type:"switch",cell:"boolean",group:(0,o.default)("Definition"),min_version:90200,mode:["properties","create","edit"],readonly:function(t){return!(e.isNew(t)||!e._origData.convalidated)}}]}}])&&s(t.prototype,n),r&&s(t,r),d}(a(n(89406)).default);t.default=p},97570:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DomainConstSchema=void 0,n(69826),n(68304),n(30489);var o=u(n(91669)),a=u(n(89406)),i=u(n(67091)),l=n(76055),s=u(n(96486));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.call(this,{conoid:void 0,conname:void 0,consrc:void 0,convalidated:!0})}return m(n,[{key:"idAttribute",get:function(){return"conoid"}},{key:"baseFields",get:function(){var e=this;return[{id:"conname",label:(0,o.default)("Name"),cell:"text",type:"text"},{id:"consrc",label:(0,o.default)("Check"),cell:"text",type:"text",editable:function(t){return e.isNew(t)}},{id:"convalidated",label:(0,o.default)("Validate?"),cell:"checkbox",type:"checkbox",readonly:function(t){var n=s.default.find(e.top.origData.constraints,(function(e){return e.conoid==t.conoid}));return!(e.isNew(t)||!n.convalidated)}}]}},{key:"validate",value:function(e,t){return(0,l.isEmptyString)(e.conname)?(t("conname","Constraint Name cannot be empty."),!0):(t("conname",null),(0,l.isEmptyString)(e.consrc)?(t("consrc","Constraint Check cannot be empty."),!0):void t("consrc",null))}}]),n}(a.default);t.DomainConstSchema=w;var O=function(e){y(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return p(this,n),(e=t.call(this,d({name:void 0,oid:void 0,owner:void 0,basensp:void 0,description:void 0,basetype:void 0,typlen:void 0,precision:void 0,typdefault:void 0,typnotnull:void 0,sysdomain:void 0,collname:void 0,constraints:[],seclabels:[]},o))).fieldOptions=d({role:[],schema:[],basetype:[],collation:[]},r),e}return m(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",mode:["properties","create","edit"],noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"owner",label:(0,o.default)("Owner"),editable:!1,type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1}},{id:"basensp",label:(0,o.default)("Schema"),editable:!1,type:"select",options:this.fieldOptions.schema,controlProps:{allowClear:!1},mode:["create","edit"]},{id:"sysdomain",label:(0,o.default)("System domain?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"text",type:"multiline"},{id:"basetype",label:(0,o.default)("Base type"),type:"select",options:this.fieldOptions.basetype,optionsLoaded:function(t){e.type_options=t},mode:["properties","create","edit"],group:(0,o.default)("Definition"),readonly:function(t){return!e.isNew(t)},noEmpty:!0},{id:"typlen",label:(0,o.default)("Length"),cell:"text",type:"text",group:(0,o.default)("Definition"),deps:["basetype"],readonly:function(t){return!e.isNew(t)},disabled:function(t){var n=t.basetype;return e.type_options&&(s.default.each(e.type_options,(function(e){n==e.value&&(e.length?(t.is_tlength=!0,t.min_val=e.min_val,t.max_val=e.max_val):t.is_tlength=!1)})),t.is_tlength||t.typlen&&(t.typlen=null)),!t.is_tlength}},{id:"precision",label:(0,o.default)("Precision"),cell:"text",type:"text",group:(0,o.default)("Definition"),deps:["basetype"],readonly:function(t){return!e.isNew(t)},disabled:function(t){var n=t.basetype;return e.type_options&&(s.default.each(e.type_options,(function(e){n==e.value&&(e.precision?(t.is_precision=!0,t.min_val=e.min_val,t.max_val=e.max_val):t.is_precision=!1)})),t.is_precision||t.precision&&(t.precision=null)),!t.is_precision}},{id:"typdefault",label:(0,o.default)("Default"),cell:"text",type:"text",group:(0,o.default)("Definition"),controlProps:{placeholder:(0,o.default)("Enter an expression or a value.")}},{id:"typnotnull",label:(0,o.default)("Not NULL?"),cell:"boolean",type:"switch",group:(0,o.default)("Definition")},{id:"collname",label:(0,o.default)("Collation"),cell:"text",type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.collation,readonly:function(t){return!e.isNew(t)}},{id:"constraints",label:(0,o.default)("Constraints"),type:"collection",schema:new w,editable:!1,group:(0,o.default)("Constraints"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,uniqueCol:["conname"]},{id:"seclabels",label:(0,o.default)("Security labels"),type:"collection",schema:new i.default,editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,uniqueCol:["provider"],min_version:90200}]}}]),n}(a.default);t.default=O},49289:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(47042),n(68309),n(91038),n(78783),n(41817),n(32165),n(66992),n(33948),n(79753),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeColumnSchema=E,t.CheckConstraintSchema=t.ColumnSchema=t.default=void 0,n(88674),n(41539),n(21249),n(92222),n(68304),n(30489);var o=f(n(91669)),a=f(n(67091)),i=f(n(89406)),l=f(n(28296)),s=n(76055),u=f(n(96486)),c=n(40345),d=n(77077);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){O(n,e);var t=j(n);function n(e,r,o){var a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4?arguments[4]:void 0;return v(this,n),(a=t.call(this,h({name:void 0,oid:void 0,owner:void 0,basensp:void 0,is_sys_obj:void 0,description:void 0,ftsrvname:void 0,strftoptions:void 0,inherits:[],columns:[],ftoptions:[],relacl:[],stracl:[],seclabels:[]},l))).getPrivilegeRoleSchema=e,a.getVariableSchema=r,a.getColumns=o,a.inheritedTableList=[],a.fieldOptions=h({role:[],schema:[],foreignServers:[],tables:[],nodeInfo:null},i),a.columnsObj=E(a.fieldOptions.nodeInfo,a.fieldOptions.nodeData,a.fieldOptions.pgBrowser),a}return w(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"canEditDeleteRowColumns",value:function(e){return!!(0,s.isEmptyString)(e.inheritedfrom)}},{key:"getTableOid",value:function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=b(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(this.inheritedTableList);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.value===e)return r.value}}catch(e){n.e(e)}finally{n.f()}}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",mode:["properties","create","edit"],noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"owner",label:(0,o.default)("Owner"),cell:"text",type:"select",controlProps:{allowClear:!1},options:t.fieldOptions.role},{id:"basensp",label:(0,o.default)("Schema"),cell:"text",type:"select",mode:["create","edit"],options:t.fieldOptions.schema},{id:"is_sys_obj",label:(0,o.default)("System foreign table?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"text",type:"multiline"},{id:"ftsrvname",label:(0,o.default)("Foreign server"),cell:"text",type:"select",group:(0,o.default)("Definition"),options:t.fieldOptions.foreignServers,readonly:function(e){return!t.isNew(e)}},{id:"inherits",label:(0,o.default)("Inherits"),group:(0,o.default)("Definition"),type:"select",min_version:90500,controlProps:{multiple:!0},options:t.fieldOptions.tables,optionsLoaded:function(e){return t.inheritedTableList=e},deferredDepChange:function(n,r,o,a){return new Promise((function(r){var o,i,l=n.inherits||[],s=a.oldState.inherits||[],c=void 0;l.length>1&&l.length>s.length?(c=u.default.difference(l,s),o=t.getColumns({attrelid:e.getTableOid(c[0])})):1==l.length&&(o=t.getColumns({attrelid:e.getTableOid(l[0])})),o&&o.then((function(e){r((function(n){var r=e.map((function(e){return t.columnsObj.getNewData(e)}));return{adding_inherit_cols:!1,columns:r=[].concat(p(n.columns),p(r))}}))})),l.length>0&&l.length<s.length?(c=u.default.difference(s,l),i=e.getTableOid(c[0])):1===s.length&&l.length<1&&(c=s[0],i=e.getTableOid(c)),i&&r((function(e){var t=e.columns;return u.default.remove(e.columns,(function(e){return e.inheritedid==i})),{adding_inherit_cols:!1,columns:t}}))}))}},{id:"columns",label:(0,o.default)("Columns"),cell:"text",type:"collection",group:(0,o.default)("Columns"),mode:["edit","create"],schema:this.columnsObj,canAdd:!0,canDelete:!0,canEdit:!0,columns:["attname","datatype","inheritedfrom"],canEditRow:this.canEditDeleteRowColumns,canDeleteRow:this.canEditDeleteRowColumns},{id:"constraints",label:(0,o.default)("Constraints"),cell:"text",type:"collection",group:(0,o.default)("Constraints"),mode:["edit","create"],schema:new D,canAdd:!0,canDelete:!0,columns:["conname","consrc","connoinherit","convalidated"],canEdit:!0,canDeleteRow:function(e){return!(1!=e.conislocal&&!u.default.isUndefined(e.conislocal))},canEditRow:function(e){return t.isNew(e)}},{id:"strftoptions",label:(0,o.default)("Options"),cell:"text",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"ftoptions",label:(0,o.default)("Options"),type:"collection",schema:new l.default("option","value"),group:(0,o.default)("Options"),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["option"]},{id:"relacl",label:(0,o.default)("Privileges"),cell:"text",type:"text",group:(0,o.default)("Security"),mode:["properties"],min_version:90200},{id:"acl",label:(0,o.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["a","r","w","x"]),uniqueCol:["grantee","grantor"],editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0,min_version:90200},{id:"seclabels",label:(0,o.default)("Security labels"),type:"collection",schema:new a.default,editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,uniqueCol:["provider"],min_version:90100,disabled:t.inCatalog()}]}},{key:"validate",value:function(e,t){if((0,s.isEmptyString)(e.service)){if((0,s.isEmptyString)(e.ftsrvname))return t("ftsrvname",(0,o.default)("Foreign server cannot be empty.")),!0;t("ftsrvname",null)}}}]),n}(i.default);function E(e,t,n){var r=this;return new k({},(function(n){return(0,c.getNodePrivilegeRoleSchema)(r,e,t,n)}),e,(function(){return(0,d.getNodeAjaxOptions)("get_types",n.Nodes.table,e,t,{cacheLevel:"table"})}),(function(){return(0,d.getNodeAjaxOptions)("get_collations",n.Nodes.collation,e,t)}))}t.default=C;var k=function(e){O(n,e);var t=j(n);function n(e,r,o,a,i){var l;return v(this,n),(l=t.call(this,{attname:void 0,datatype:void 0,typlen:void 0,precision:void 0,typdefault:void 0,attnotnull:void 0,collname:void 0,attnum:void 0,inheritedfrom:void 0,inheritedid:void 0,attstattarget:void 0,coloptions:[]})).getPrivilegeRoleSchema=r,l.nodeInfo=o,l.datatypeOptions=a,l.collspcnameOptions=i,l.datatypes=[],l}return w(n,[{key:"idAttribute",get:function(){return"attnum"}},{key:"editable_check_for_column",value:function(e){return!!(u.default.isUndefined(e.inheritedid)||u.default.isNull(e.inheritedid)||u.default.isUndefined(e.inheritedfrom)||u.default.isNull(e.inheritedfrom))}},{key:"baseFields",get:function(){var e=this;return[{id:"attname",label:(0,o.default)("Name"),cell:"text",type:"text",editable:e.editable_check_for_column,noEmpty:!0,minWidth:115},{id:"datatype",label:(0,o.default)("Data type"),minWidth:150,group:(0,o.default)("Definition"),noEmpty:!0,editable:e.editable_check_for_column,options:e.datatypeOptions,optionsLoaded:function(t){e.datatypes=t,e.type_options=t},cell:"select",controlProps:{allowClear:!1},type:"select"},{id:"inheritedfrom",label:(0,o.default)("Inherited From"),cell:"label",type:"label",readonly:!0,editable:!1,mode:["properties","edit"]},{id:"attnum",label:(0,o.default)("Position"),cell:"text",type:"text",disabled:e.inCatalog(),mode:["properties"]},{id:"typlen",label:(0,o.default)("Length"),cell:"int",deps:["datatype"],type:"int",group:(0,o.default)("Definition"),width:120,minWidth:120,disabled:function(t){var n=t.typlen;if(!(u.default.isUndefined(t.inheritedid)||u.default.isNull(t.inheritedid)||u.default.isUndefined(t.inheritedfrom)||u.default.isNull(t.inheritedfrom)))return u.default.isUndefined(n)||(t.typlen=void 0),!0;var r=t.datatype,o=!1;return e.type_options?(t.is_tlength=!1,u.default.each(e.type_options,(function(e){r==e.value&&e.length&&(o=!0,t.is_tlength=!0,t.min_val=e.min_val,t.max_val=e.max_val)})),o||u.default.isUndefined(n)||(t.typlen=void 0),!t.is_tlength):(o||u.default.isUndefined(n)||(t.typlen=void 0),!0)}},{id:"precision",label:(0,o.default)("Precision"),cell:"int",minWidth:60,deps:["datatype"],type:"int",group:(0,o.default)("Definition"),disabled:function(t){var n=t.precision;if(!(u.default.isUndefined(t.inheritedid)||u.default.isNull(t.inheritedid)||u.default.isUndefined(t.inheritedfrom)||u.default.isNull(t.inheritedfrom)))return u.default.isUndefined(n)||(t.precision=void 0),!0;var r=t.datatype,o=!1;return e.type_options?(t.is_precision=!1,u.default.each(e.type_options,(function(e){r==e.value&&e.precision&&(o=!0,t.is_precision=!0,t.min_val=e.min_val,t.max_val=e.max_val)})),o||u.default.isUndefined(n)||(t.precision=void 0),!t.is_precision):(o||u.default.isUndefined(n)||(t.precision=void 0),!0)}},{id:"typdefault",label:(0,o.default)("Default"),cell:"text",type:"text",group:(0,o.default)("Definition"),controlProps:{placeholder:(0,o.default)("Enter an expression or a value.")},editable:function(t){return!!(u.default.isUndefined(t.inheritedid)||u.default.isNull(t.inheritedid)||u.default.isUndefined(t.inheritedfrom)||u.default.isNull(t.inheritedfrom))&&!(e.nodeInfo.server.version<90300)}},{id:"attnotnull",label:(0,o.default)("Not NULL?"),cell:"switch",type:"switch",minWidth:80,group:(0,o.default)("Definition"),editable:e.editable_check_for_column},{id:"attstattarget",label:(0,o.default)("Statistics"),cell:"text",type:"text",disabled:function(t){return!e.isNew()&&(!(e.nodeInfo.server.version<90200)&&!!(u.default.isUndefined(t.inheritedid)||u.default.isNull(t.inheritedid)||u.default.isUndefined(t.inheritedfrom)||u.default.isNull(t.inheritedfrom)))},mode:["properties","edit"],group:(0,o.default)("Definition")},{id:"collname",label:(0,o.default)("Collation"),cell:"select",type:"select",group:(0,o.default)("Definition"),deps:["datatype"],options:e.collspcnameOptions,disabled:function(t){return!(!u.default.isUndefined(e.isNew)&&!e.isNew(t))&&!!(u.default.isUndefined(t.inheritedid)||u.default.isNull(t.inheritedid)||u.default.isUndefined(t.inheritedfrom)||u.default.isNull(t.inheritedfrom))}},{id:"coloptions",label:(0,o.default)("Options"),type:"collection",group:(0,o.default)("Options"),schema:new l.default("option","value"),uniqueCol:["option"],mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0}]}}]),n}(i.default);t.ColumnSchema=k;var D=function(e){O(n,e);var t=j(n);function n(){var e;return v(this,n),(e=t.call(this,{name:void 0,oid:void 0,description:void 0,consrc:void 0,connoinherit:void 0,convalidated:!0})).convalidated_default=!0,e}return w(n,[{key:"idAttribute",get:function(){return"conoid"}},{key:"isReadonly",value:function(e){return!this.isNew(e)}},{key:"baseFields",get:function(){var e=this;return[{id:"conname",label:(0,o.default)("Name"),type:"text",cell:"text",mode:["properties","create","edit"],editable:function(t){return!!u.default.isUndefined(e.isNew)||e.isNew(t)},noEmpty:!0,readonly:e.isReadonly},{id:"consrc",label:(0,o.default)("Check"),type:"multiline",cell:"text",mode:["properties","create","edit"],editable:function(t){return!!u.default.isUndefined(e.isNew)||e.isNew(t)},noEmpty:!0,readonly:e.isReadonly},{id:"connoinherit",label:(0,o.default)("No inherit?"),type:"switch",cell:"switch",mode:["properties","create","edit"],deps:[["is_partitioned"]],editable:function(t){return!!u.default.isUndefined(e.isNew)||e.isNew(t)},readonly:e.isReadonly},{id:"convalidated",label:(0,o.default)("Validate?"),type:"switch",cell:"switch",readonly:e.isReadonly,editable:function(t){return!!u.default.isUndefined(e.isNew)||(!!e.isNew(t)||(!t.convalidated||!e.convalidated_default))},mode:["properties","create","edit"]}]}}]),n}(i.default);t.CheckConstraintSchema=D},22265:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var a=u(n(91669)),i=u(n(89406)),l=u(n(35971)),s=n(76055);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this,{token:void 0})).tokenOptions=e,r.isNewFTSConf=!0,r}return m(n,[{key:"addDisabled",value:function(){return this.isNewFTSConf}},{key:"getNewData",value:function(e){return{token:e.token,dictname:[]}}},{key:"baseFields",get:function(){var e=this;return[{id:"token",label:(0,a.default)("Tokens"),type:"select",editable:!1,options:this.tokenOptions,disabled:function(){return e.isNewFTSConf}}]}}]),n}(i.default),O=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this,{token:void 0,dictname:void 0})).dictOptions=e,r}return m(n,[{key:"baseFields",get:function(){return[{id:"token",label:(0,a.default)("Token"),type:"text",editable:!1,cell:"",minWidth:150,noEmpty:!0},{id:"dictname",label:(0,a.default)("Dictionaries"),editable:!0,controlProps:{multiple:!0},cell:"select",options:this.dictOptions,minWidth:260,noEmpty:!0}]}}]),n}(i.default),S=function(e){y(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return p(this,n),(e=t.call(this,d({name:void 0,owner:void 0,is_sys_obj:void 0,description:void 0,schema:void 0,prsname:void 0,copy_config:void 0,tokens:void 0},o))).fieldOptions=d({role:[],schema:[],parsers:[],copyConfig:[],tokens:[],dictionaries:[]},r),e.tokHeaderSchema=new w(e.fieldOptions.tokens),e.tokColumnSchema=new O(e.fieldOptions.dictionaries),e}return m(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"initialise",value:function(e){this.tokHeaderSchema.isNewFTSConf=this.isNew(e)}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,a.default)("Name"),cell:"text",type:"text",noEmpty:!0},{id:"oid",label:(0,a.default)("OID"),cell:"text",editable:!1,type:"text",mode:["properties"]},{id:"owner",label:(0,a.default)("Owner"),cell:"text",editable:!1,type:"select",options:this.fieldOptions.role,mode:["properties","edit","create"],noEmpty:!0},{id:"schema",label:(0,a.default)("Schema"),editable:!1,type:"select",options:this.fieldOptions.schema,mode:["create","edit"],noEmpty:!0},{id:"is_sys_obj",label:(0,a.default)("System FTS configuration?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,a.default)("Comment"),cell:"text",type:"multiline"},{id:"prsname",label:(0,a.default)("Parser"),editable:!1,type:"select",group:(0,a.default)("Definition"),deps:["copy_config"],options:this.fieldOptions.parsers,disabled:function(e){var t=e.copy_config;return!r.isNull(t)&&!r.isUndefined(t)&&""!==t},readonly:function(t){return!e.isNew(t)}},{id:"copy_config",label:(0,a.default)("Copy config"),editable:!1,type:"select",group:(0,a.default)("Definition"),mode:["create"],deps:["prsname"],options:this.fieldOptions.copyConfig,disabled:function(e){var t=e.prsname;return!r.isNull(t)&&!r.isUndefined(t)&&""!==t},readonly:function(t){return!e.isNew(t)}},{id:"tokens",label:"",type:"collection",group:(0,a.default)("Tokens"),mode:["create","edit"],editable:!1,schema:this.tokColumnSchema,headerSchema:this.tokHeaderSchema,headerVisible:function(){return!0},CustomControl:l.default,uniqueCol:["token"],canAdd:!0,canEdit:!1,canDelete:!0}]}},{key:"validate",value:function(e,t){var n=e.prsname,o=e.copy_config,i=""===n||r.isUndefined(n)||r.isNull(n)?o:n;if((0,s.isEmptyString)(i))return t("prsname",(0,a.default)("Select parser or configuration to copy.")),!0;t("prsname",null)}}]),n}(i.default);t.default=S},81629:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=l(n(91669)),a=l(n(89406)),i=l(n(28296));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,a=b(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return d(this,l),(e=a.call(this,u({name:void 0,owner:void 0,is_sys_obj:void 0,description:void 0,schema:void 0,template:void 0,options:void 0},n))).fieldOptions=u({role:[],schema:[],fts_template:[]},t),e}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",editable:!1,type:"text",mode:["properties"]},{id:"owner",label:(0,o.default)("Owner"),cell:"text",editable:!1,type:"select",options:this.fieldOptions.role,mode:["properties","edit","create"],noEmpty:!0},{id:"schema",label:(0,o.default)("Schema"),editable:!1,type:"select",options:this.fieldOptions.schema,mode:["create","edit"],noEmpty:!0},{id:"is_sys_obj",label:(0,o.default)("System FTS dictionary?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"text",type:"multiline"},{id:"template",label:(0,o.default)("Template"),editable:!1,type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.fts_template,noEmpty:!0,mode:["edit","create","properties"],readonly:function(t){return!e.isNew(t)}},{id:"options",label:(0,o.default)("Options"),type:"collection",schema:new i.default("option","value"),group:(0,o.default)("Options"),mode:["edit","create"],uniqueCol:["option"],canAdd:!0,canEdit:!1,canDelete:!0}]}}])&&f(t.prototype,n),r&&f(t,r),l}(a.default);t.default=h},30572:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(89554),n(54747),n(68304),n(30489);var o=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,a=f(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return u(this,i),(e=a.call(this,l({name:null,oid:void 0,version:"",schema:void 0,description:"",is_sys_obj:!1},n))).fieldOptions=l({prsstartList:[],prstokenList:[],prsendList:[],prslextypeList:[],prsheadlineList:[],schemaList:[]},t),e}return t=i,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",cellHeaderClasses:"width_percent_50",noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"string",editable:!1,type:"text",mode:["properties"]},{id:"schema",label:(0,o.default)("Schema"),cell:"string",type:"select",mode:["create","edit"],node:"schema",noEmpty:!0,options:this.fieldOptions.schemaList},{id:"is_sys_obj",label:(0,o.default)("System FTS parser?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline",cellHeaderClasses:"width_percent_50"},{id:"prsstart",label:(0,o.default)("Start function"),group:(0,o.default)("Definition"),noEmpty:!0,readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.prsstartList,optionsLoaded:function(t){e.fieldOptions.prsstartList=t},controlProps:{allowClear:!0,filter:function(n){var r=[];return t&&e.isNew(t)?n.forEach((function(e){e&&""==e.label||r.push({label:e.label,value:e.value})})):r=n,r}}}}},{id:"prstoken",label:(0,o.default)("Get next token function"),group:(0,o.default)("Definition"),noEmpty:!0,readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.prstokenList,optionsLoaded:function(t){e.fieldOptions.prstokenList=t},controlProps:{allowClear:!0,filter:function(n){var r=[];return t&&e.isNew(t)?n.forEach((function(e){e&&""==e.label||r.push({label:e.label,value:e.value})})):r=n,r}}}}},{id:"prsend",label:(0,o.default)("End function"),group:(0,o.default)("Definition"),noEmpty:!0,readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.prsendList,optionsLoaded:function(t){e.fieldOptions.prsendList=t},controlProps:{allowClear:!0,filter:function(n){var r=[];return t&&e.isNew(t)?n.forEach((function(e){e&&""==e.label||r.push({label:e.label,value:e.value})})):r=n,r}}}}},{id:"prslextype",label:(0,o.default)("Lextypes function"),group:(0,o.default)("Definition"),noEmpty:!0,readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.prslextypeList,optionsLoaded:function(t){e.fieldOptions.prslextypeList=t},controlProps:{allowClear:!0,filter:function(n){var r=[];return t&&e.isNew(t)?n.forEach((function(e){e&&""==e.label||r.push({label:e.label,value:e.value})})):r=n,r}}}}},{id:"prsheadline",label:(0,o.default)("Headline function"),group:(0,o.default)("Definition"),readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.prsheadlineList,optionsLoaded:function(t){e.fieldOptions.prsheadlineList=t},controlProps:{allowClear:!0,filter:function(n){var r=[];return t&&e.isNew(t)?n.forEach((function(e){e&&""==e.label||r.push({label:e.label,value:e.value})})):r=n,r}}}}}]}}])&&c(t.prototype,n),r&&c(t,r),i}(a(n(89406)).default);t.default=m},66023:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(89554),n(54747),n(68304),n(30489);var o=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,a=f(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return u(this,i),(e=a.call(this,l({name:null,oid:void 0,version:"",schema:void 0,description:"",is_sys_obj:!1,tmplinit:void 0,tmpllexize:void 0},n))).fieldOptions=l({schemaList:[],initFunctionList:[],lexisFunctionList:[]},t),e}return t=i,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",cellHeaderClasses:"width_percent_50",noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"string",editable:!1,type:"text",mode:["properties"]},{id:"schema",label:(0,o.default)("Schema"),mode:["create","edit"],node:"schema",type:"select",editable:!1,noEmpty:!0,options:this.fieldOptions.schemaList},{id:"is_sys_obj",label:(0,o.default)("System FTS template?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline",cellHeaderClasses:"width_percent_50"},{id:"tmplinit",label:(0,o.default)("Init function"),group:(0,o.default)("Definition"),cache_level:"database",cache_node:"schema",readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.initFunctionList,optionsLoaded:function(t){e.fieldOptions.initFunctionData=t},controlProps:{allowClear:!0,filter:function(n){var r=[];return t&&e.isNew(t)?n.forEach((function(e){e&&""==e.label||r.push({label:e.label,value:e.value})})):r=n,r}}}}},{id:"tmpllexize",label:(0,o.default)("Lexize function"),group:(0,o.default)("Definition"),noEmpty:!0,cache_level:"database",cache_node:"schema",readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.lexisFunctionList,optionsLoaded:function(t){e.fieldOptions.lexisFunctionData=t},controlProps:{allowClear:!0,filter:function(n){var r=[];return t&&e.isNew(t)?n.forEach((function(e){e&&""==e.label||r.push({label:e.label,value:e.value})})):r=n,r}}}}}]}}])&&c(t.prototype,n),r&&c(t,r),i}(a(n(89406)).default);t.default=m},55066:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DefaultArgumentSchema=void 0,n(89554),n(54747),n(68309),n(68304),n(30489);var o=u(n(91669)),a=u(n(89406)),i=u(n(67091)),l=n(76055),s=u(n(96486));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){y(n,e);var t=g(n);function n(e,r){var o;return p(this,n),(o=t.call(this)).node_info=e,o.getTypes=r,o.type_options={},o}return m(n,[{key:"setTypeOptions",value:function(e){var t=this;e.forEach((function(e){t.type_options[e.value]=d({},e)}))}},{key:"baseFields",get:function(){var e=this;return[{id:"argid",visible:!1,type:"text",mode:["properties","edit","create"]},{id:"argtype",label:(0,o.default)("Data type"),options:this.getTypes,type:"text",cell:function(){return{cell:"select",options:e.getTypes,optionsLoaded:function(t){e.setTypeOptions(t)},controlProps:{allowClear:!1}}},editable:this.isEditable,first_empty:!0},{id:"argmode",label:(0,o.default)("Mode"),type:"text",cell:function(){return{cell:"select",options:[{label:"IN",value:"IN"},{label:"OUT",value:"OUT"},{label:"INOUT",value:"INOUT"},{label:"VARIADIC",value:"VARIADIC"}],optionsLoaded:function(t){e.setTypeOptions(t)},controlProps:{allowClear:!1}}},editable:this.isEditable},{id:"argname",label:(0,o.default)("Argument name"),type:"text",editable:this.isInCatalog,cell:function(){return{cell:"text"}}},{id:"argdefval",label:(0,o.default)("Default"),type:"text",cell:function(){return{cell:"text"}},editable:this.isInCatalog}]}},{key:"isEditable",value:function(){var e=this.node_info;return(!e||!("catalog"in e))&&(!!s.default.isUndefined(this.isNew)||this.isNew())}},{key:"isInCatalog",value:function(e){var t=this.node_info;return(!t||!("catalog"in t))&&!!(s.default.isUndefined(e.argmode)||s.default.isUndefined(e.name)||"argdefval"!=e.name||"INOUT"!=e.argmode&&"OUT"!=e.argmode)}}]),n}(a.default);t.DefaultArgumentSchema=w;var O=function(e){y(n,e);var t=g(n);function n(e,r){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return p(this,n),(o=t.call(this,d({name:void 0,oid:void 0,xmin:void 0,funcowner:void 0,pronamespace:void 0,description:void 0,pronargs:void 0,proargs:void 0,proargtypenames:void 0,prorettypename:void 0,lanname:void 0,provolatile:void 0,proretset:void 0,proisstrict:void 0,prosecdef:void 0,proiswindow:void 0,proparallel:void 0,procost:void 0,prorows:0,proleakproof:void 0,prosupportfunc:void 0,arguments:[],prosrc:void 0,prosrc_c:void 0,probin:"$libdir/",options:[],variables:[],proacl:void 0,seclabels:[],acl:[],sysfunc:void 0,sysproc:void 0},s))).getPrivilegeRoleSchema=e,o.getNodeVariableSchema=r,o.node_info=i,o.type=l.type,o.fieldOptions=d({role:[],schema:[],getTypes:[]},a),o}return m(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"isVisible",value:function(e){return"procedure"!==this.type?!e.sysproc:!e.sysfunc&&!!e.sysproc}},{key:"isGreaterThan95",value:function(e){return(this.node_info.node_info.server.version<90500||"ppas"!=this.node_info.node_info.server.server_type||"edbspl"!=e.lanname)&&(e.provolatile=null,e.proisstrict=!1,e.procost=null,e.proleakproof=!1,!0)}},{key:"isGreaterThan96",value:function(e){return(this.node_info.node_info.server.version<90600||"ppas"!=this.node_info.node_info.server.server_type||"edbspl"!=e.lanname)&&(e.proparallel=null,!0)}},{key:"isReadonly",value:function(){return!this.isNew()}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",mode:["properties","create","edit"],disabled:t.inCatalog(),noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"funcowner",label:(0,o.default)("Owner"),cell:"string",options:this.fieldOptions.role,type:"select",disabled:"procedure"!==this.type?t.inCatalog():t.isGreaterThan95,noEmpty:!0},{id:"pronamespace",label:(0,o.default)("Schema"),cell:"string",type:"select",disabled:t.inCatalog(),mode:["create","edit"],controlProps:{allowClear:!1,first_empty:!1},options:t.fieldOptions.schema,noEmpty:!0},{id:"sysfunc",label:(0,o.default)("System function?"),cell:"boolean",type:"switch",mode:["properties"],visible:t.isVisible},{id:"sysproc",label:(0,o.default)("System procedure?"),cell:"boolean",type:"switch",mode:["properties"],visible:function(){return"procedure"===e.type}},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline",disabled:t.inCatalog()},{id:"pronargs",label:(0,o.default)("Argument count"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"proargs",label:(0,o.default)("Arguments"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"proargtypenames",label:(0,o.default)("Signature arguments"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"prorettypename",label:(0,o.default)("Return type"),cell:"string",type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.getTypes,readonly:t.isReadonly,first_empty:!0,mode:["create"],visible:t.isVisible},{id:"prorettypename",label:(0,o.default)("Return type"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties","edit"],readonly:t.isReadonly,visible:t.isVisible},{id:"lanname",label:(0,o.default)("Language"),cell:"string",noEmpty:!0,options:this.fieldOptions.getLanguage,type:"select",group:(0,o.default)("Definition"),disabled:function(){return"procedure"===this.type?this.node_info.node_info.server.version<11e4:!(!this.node_info||!("catalog"in this.node_info))}},{id:"probin",label:(0,o.default)("Object file"),cell:"string",type:"text",group:(0,o.default)("Definition"),deps:["lanname"],visible:function(e){return"c"==e.lanname},disabled:t.inCatalog()},{id:"prosrc_c",label:(0,o.default)("Link symbol"),cell:"string",type:"text",group:(0,o.default)("Definition"),deps:["lanname"],visible:function(e){return"c"==e.lanname},disabled:t.inCatalog()},{id:"arguments",label:(0,o.default)("Arguments"),cell:"string",group:(0,o.default)("Definition"),type:"collection",canAdd:function(){return t.isNew()},canDelete:!0,mode:["create","edit"],columns:["argtype","argmode","argname","argdefval"],schema:new w(this.node_info,this.fieldOptions.getTypes),disabled:t.inCatalog(),canDeleteRow:function(){return t.isNew()}},{id:"prosrc",label:(0,o.default)("Code"),cell:"text",type:"sql",mode:["properties","create","edit"],group:(0,o.default)("Code"),deps:["lanname"],isFullTab:!0,visible:function(e){return"c"!==e.lanname},disabled:t.inCatalog()},{id:"provolatile",label:(0,o.default)("Volatility"),cell:"text",type:"select",group:(0,o.default)("Options"),deps:["lanname"],options:[{label:"VOLATILE",value:"v"},{label:"STABLE",value:"s"},{label:"IMMUTABLE",value:"i"}],disabled:"procedure"!==this.type?t.inCatalog():t.isGreaterThan95,controlProps:{allowClear:!1}},{id:"proretset",label:(0,o.default)("Returns a set?"),type:"switch",disabled:function(){return!t.isNew()},group:(0,o.default)("Options"),visible:t.isVisible,readonly:t.isReadonly},{id:"proisstrict",label:(0,o.default)("Strict?"),type:"switch",group:(0,o.default)("Options"),disabled:t.inCatalog(),deps:["lanname"]},{id:"prosecdef",label:(0,o.default)("Security of definer?"),group:(0,o.default)("Options"),type:"switch",disabled:"procedure"!==this.type?t.inCatalog():function(){return t.node_info.node_info.server.version<90500}},{id:"proiswindow",label:(0,o.default)("Window?"),group:(0,o.default)("Options"),cell:"boolean",type:"switch",disabled:function(){return!t.isNew()},visible:t.isVisible,readonly:t.isReadonly},{id:"proparallel",label:(0,o.default)("Parallel"),cell:"string",type:"select",group:(0,o.default)("Options"),deps:["lanname"],options:[{label:"UNSAFE",value:"u"},{label:"RESTRICTED",value:"r"},{label:"SAFE",value:"s"}],disabled:"procedure"!==this.type?t.inCatalog():t.isGreaterThan96,min_version:90600,controlProps:{allowClear:!1}},{id:"procost",label:(0,o.default)("Estimated cost"),group:(0,o.default)("Options"),cell:"string",type:"text",deps:["lanname"],disabled:"procedure"!==this.type?t.isDisabled:t.isGreaterThan95},{id:"prorows",label:(0,o.default)("Estimated rows"),type:"text",deps:["proretset"],visible:t.isVisible,readonly:function(e){var t=!0;return 1==e.proretset&&(t=!1),t},group:(0,o.default)("Options")},{id:"proleakproof",label:(0,o.default)("Leak proof?"),group:(0,o.default)("Options"),cell:"boolean",type:"switch",min_version:90200,disabled:"procedure"!==this.type?t.inCatalog():t.isGreaterThan95,deps:["lanname"]},{id:"prosupportfunc",label:(0,o.default)("Support function"),type:"select",disabled:function(){return!(!t.node_info||!("catalog"in t.node_info))||!t.node_info.node_info.server.user.is_superuser},group:(0,o.default)("Options"),visible:t.isVisible,options:this.fieldOptions.getSupportFunctions,min_version:12e4},{id:"proacl",label:(0,o.default)("Privileges"),type:"text",mode:["properties"],group:(0,o.default)("Security")},{id:"variables",label:"",type:"collection",group:(0,o.default)("Parameters"),schema:this.getNodeVariableSchema(),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0},{id:"acl",label:(0,o.default)("Privileges"),editable:!1,schema:this.getPrivilegeRoleSchema(["X"]),uniqueCol:["grantee","grantor"],type:"collection",group:"Security",mode:["edit","create"],canAdd:!0,canDelete:!0,disabled:t.inCatalog()},{id:"seclabels",label:(0,o.default)("Security labels"),canAdd:!0,schema:new i.default,type:"collection",min_version:90100,group:"Security",mode:["edit","create"],canEdit:!1,canDelete:!0,uniqueCol:["provider"],disabled:t.inCatalog(),visible:function(){return this.node_info&&!("procedure"===this.type)}}]}},{key:"validate",value:function(e,t){if("procedure"!==this.type&&(0,l.isEmptyString)(e.prorettypename))return t("prorettypename",(0,o.default)("Return type cannot be empty.")),!0;if(t("prorettypename",null),"c"==String(e.lanname)){if((0,l.isEmptyString)(e.probin))return t("probin",(0,o.default)("Object File cannot be empty.")),!0;if(t("probin",null),(0,l.isEmptyString)(e.prosrc_c))return t("prosrc_c",(0,o.default)("Link Symbol cannot be empty.")),!0;t("prosrc_c",null)}else{if((0,l.isEmptyString)(e.prosrc))return t("prosrc",(0,o.default)("Code cannot be empty.")),!0;t("prosrc",null)}}}]),n}(a.default);t.default=O},37642:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(57327),n(68304),n(30489);var o=s(n(91669)),a=s(n(67091)),i=s(n(89406)),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(s,e);var t,n,r,i=m(s);function s(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;return f(this,s),(n=i.call(this,c({name:null,oid:null,xmin:null,funcowner:null,pronamespace:null,description:null,pronargs:null,proargs:null,proargtypenames:null,prorettypename:"trigger",lanname:"plpgsql",provolatile:null,proretset:null,proisstrict:null,prosecdef:null,proiswindow:null,procost:null,prorows:null,proleakproof:null,args:[],prosrc:null,prosrc_c:null,probin:"$libdir/",options:[],variables:[],proacl:null,seclabels:[],acl:[],sysfunc:null,sysproc:null},o))).getPrivilegeRoleSchema=e,n.getVariableSchema=t,n.fieldOptions=c({role:[],schema:[],language:[],nodeInfo:null},r),n}return t=s,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"isReadonly",value:function(){return!1}},{key:"setReadonlyInEditMode",value:function(){return!this.isNew()}},{key:"isVisible",value:function(e){return"sysproc"!=e.name}},{key:"isDisabled",value:function(){return"catalog"in this.fieldOptions.nodeInfo}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",mode:["properties","create","edit"],disabled:e.isDisabled,readonly:e.isReadonly,noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"funcowner",label:(0,o.default)("Owner"),cell:"text",type:"select",disabled:e.isDisabled,readonly:e.isReadonly,options:e.fieldOptions.role,controlProps:{allowClear:!1}},{id:"pronamespace",label:(0,o.default)("Schema"),cell:"string",type:"select",cache_level:"database",disabled:e.isDisabled,readonly:e.isReadonly,mode:["create","edit"],options:e.fieldOptions.schema,controlProps:{allowClear:!1}},{id:"sysfunc",label:(0,o.default)("System trigger function?"),cell:"boolean",type:"switch",mode:["properties"],visible:e.isVisible},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline",disabled:e.isDisabled,readonly:e.isReadonly},{id:"pronargs",label:(0,o.default)("Argument count"),cell:"text",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"proargs",label:(0,o.default)("Arguments"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties","edit"],disabled:e.isDisabled,readonly:e.setReadonlyInEditMode},{id:"proargtypenames",label:(0,o.default)("Signature arguments"),cell:"text",type:"text",group:(0,o.default)("Definition"),mode:["properties"],disabled:e.isDisabled,readonly:e.setReadonlyInEditMode},{id:"prorettypename",label:(0,o.default)("Return type"),cell:"text",type:"select",group:(0,o.default)("Definition"),disabled:e.isDisabled,readonly:e.setReadonlyInEditMode,controlProps:{width:"100%",allowClear:!1},mode:["create"],visible:e.isVisible,options:[{label:(0,o.default)("trigger"),value:"trigger"},{label:(0,o.default)("event_trigger"),value:"event_trigger"}]},{id:"prorettypename",label:(0,o.default)("Return type"),cell:"text",type:"text",group:(0,o.default)("Definition"),mode:["properties","edit"],disabled:e.isDisabled,readonly:e.setReadonlyInEditMode,visible:e.isVisible},{id:"lanname",label:(0,o.default)("Language"),cell:"text",type:"select",group:(0,o.default)("Definition"),disabled:e.isDisabled,readonly:e.isReadonly,options:e.fieldOptions.language,controlProps:{allowClear:!1,filter:function(e){return(e||[]).filter((function(e){return""!=e.label}))}}},{id:"prosrc",label:(0,o.default)("Code"),cell:"text",type:"sql",isFullTab:!0,mode:["properties","create","edit"],group:(0,o.default)("Code"),deps:["lanname"],visible:function(e){return"c"!=e.lanname},disabled:e.isDisabled,readonly:e.isReadonly},{id:"probin",label:(0,o.default)("Object file"),cell:"string",type:"text",group:(0,o.default)("Definition"),deps:["lanname"],visible:function(e){return"c"==e.lanname},disabled:e.isDisabled,readonly:e.isReadonly},{id:"prosrc_c",label:(0,o.default)("Link symbol"),cell:"string",type:"text",group:(0,o.default)("Definition"),deps:["lanname"],visible:function(e){return"c"==e.lanname},disabled:e.isDisabled,readonly:e.isReadonly},{id:"provolatile",label:(0,o.default)("Volatility"),cell:"text",type:"select",group:(0,o.default)("Options"),options:[{label:"VOLATILE",value:"v"},{label:"STABLE",value:"s"},{label:"IMMUTABLE",value:"i"}],disabled:e.isDisabled,readonly:e.isReadonly,controlProps:{allowClear:!1}},{id:"proretset",label:(0,o.default)("Returns a set?"),type:"switch",group:(0,o.default)("Options"),disabled:e.isDisabled,readonly:e.setReadonlyInEditMode,visible:e.isVisible},{id:"proisstrict",label:(0,o.default)("Strict?"),type:"switch",disabled:e.isDisabled,readonly:e.isReadonly,group:(0,o.default)("Options")},{id:"prosecdef",label:(0,o.default)("Security of definer?"),group:(0,o.default)("Options"),cell:"boolean",type:"switch",disabled:e.isDisabled,readonly:e.isReadonly},{id:"proiswindow",label:(0,o.default)("Window?"),group:(0,o.default)("Options"),cell:"boolean",type:"switch",disabled:e.isDisabled,readonly:e.setReadonlyInEditMode,visible:e.isVisible},{id:"procost",label:(0,o.default)("Estimated cost"),type:"text",group:(0,o.default)("Options"),disabled:e.isDisabled,readonly:e.isReadonly},{id:"prorows",label:(0,o.default)("Estimated rows"),type:"text",group:(0,o.default)("Options"),disabled:function(e){var t=!0;return 1==e.proretset&&(t=!1),t},readonly:e.isReadonly,deps:["proretset"],visible:e.isVisible},{id:"proleakproof",label:(0,o.default)("Leak proof?"),group:(0,o.default)("Options"),cell:"boolean",type:"switch",min_version:90200,disabled:e.isDisabled,readonly:e.isReadonly},{id:"proacl",label:(0,o.default)("Privileges"),mode:["properties"],group:(0,o.default)("Security"),type:"text"},{id:"variables",label:"",type:"collection",group:(0,o.default)("Parameters"),control:"variable-collection",mode:["edit","create"],canEdit:!1,canDelete:!0,disabled:e.isDisabled,readonly:e.isReadonly,schema:this.getVariableSchema(),editable:!1},{id:"acl",label:(0,o.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["X"]),uniqueCol:["grantee"],editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"seclabels",label:(0,o.default)("Security labels"),type:"collection",schema:new a.default,editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canEdit:!0,canDelete:!0,uniqueCol:["provider"],min_version:90200,disabled:e.isDisabled,readonly:e.isReadonly}]}},{key:"validate",value:function(e,t){if((0,l.isEmptyString)(e.service)){if((0,l.isEmptyString)(e.prosrc))return t("prosrc",(0,o.default)("Code cannot be empty.")),!0;t("prosrc",null)}}}])&&p(t.prototype,n),r&&p(t,r),s}(i.default);t.default=g},38630:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(68304),n(30489);var o=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,a=f(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return u(this,i),(e=a.call(this,l({name:void 0,oid:void 0,funcowner:void 0,pronargs:void 0,proargs:void 0,proargtypenames:void 0,prorettypename:void 0,lanname:"sql",prosrc:void 0,proacl:void 0,visibility:"Unknown",warn_text:void 0},n))).fieldOptions=l({},t),e}return t=i,(n=[{key:"isVisible",value:function(e){return"sysfunc"==e.name||"sysproc"==e.name}},{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",mode:["properties"]},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"funcowner",label:(0,o.default)("Owner"),cell:"string",type:"text",readonly:!0},{id:"pronargs",label:(0,o.default)("Argument count"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"proargs",label:(0,o.default)("Arguments"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"proargtypenames",label:(0,o.default)("Signature arguments"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties"]},{id:"prorettypename",label:(0,o.default)("Return type"),cell:"string",type:"text",group:(0,o.default)("Definition"),mode:["properties"],visible:function(t){return e.isVisible(t)}},{id:"visibility",label:(0,o.default)("Visibility"),cell:"string",type:"text",mode:["properties"]},{id:"lanname",label:(0,o.default)("Language"),cell:"string",type:"text",group:(0,o.default)("Definition"),readonly:!0},{id:"prosrc",label:(0,o.default)("Code"),cell:"string",mode:["properties"],group:(0,o.default)("Code"),type:"sql",isFullTab:!0,visible:function(e){return"c"!=e.lanname},disabled:!0}]}}])&&c(t.prototype,n),r&&c(t,r),i}(a(n(89406)).default);t.default=m},63641:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,a=f(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return u(this,i),(e=a.call(this,l({name:void 0,oid:void 0,datatype:void 0,visibility:"Unknown"},n))).fieldOptions=l({},t),e}return t=i,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",mode:["properties"]},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"datatype",label:(0,o.default)("Data type"),cell:"string",type:"text",readonly:!0},{id:"visibility",label:(0,o.default)("Visibility"),cell:"string",type:"text",mode:["properties"]}]}}])&&c(t.prototype,n),r&&c(t,r),i}(a(n(89406)).default);t.default=m},12464:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(89554),n(54747),n(4723),n(74916),n(68304),n(30489);var o=l(n(91669)),a=l(n(89406)),i=n(76055);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,a=b(l);function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return d(this,l),(t=a.call(this,u({name:void 0,oid:void 0,owner:void 0,is_sys_object:void 0,description:void 0,pkgheadsrc:void 0,pkgbodysrc:void 0,acl:void 0,pkgacl:[],warn_text:void 0},r))).fieldOptions=u({schemas:[]},n),t.warningText=null,t.getPrivilegeRoleSchema=e,t}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",mode:["properties","create","edit"],noEmpty:!0,readonly:function(t){return!e.isNew(t)}},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"owner",label:(0,o.default)("Owner"),cell:"string",type:"text",mode:["properties","create","edit"],readonly:!0,editable:!1,visible:function(t){return!e.isNew(t)}},{id:"schema",label:(0,o.default)("Schema"),node:"schema",readonly:function(t){return!e.isNew(t)},noEmpty:!0,type:function(t){return{type:"select",options:e.fieldOptions.schemas,optionsLoaded:function(t){e.fieldOptions.schemas=t},controlProps:{allowClear:!0,filter:function(n){var r=[];return t&&e.isNew(t)?n.forEach((function(e){e&&e.label.match(/^pg_/)||r.push({label:e.label,value:e.value,image:"icon-schema"})})):r=n,r}}}}},{id:"is_sys_object",label:(0,o.default)("System package?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),type:"multiline",mode:["properties","create","edit"]},{id:"pkgheadsrc",type:"sql",isFullTab:!0,cell:"text",mode:["properties","create","edit"],group:(0,o.default)("Header"),depChange:function(t,n,r,a){e._origData.oid&&t.pkgheadsrc!=a.oldState.pkgheadsrc?e.warningText=(0,o.default)("Updating the package header definition may remove its existing body.")+"<br><br><b>"+(0,o.default)("Do you want to continue?")+"</b>":e.warningText=null}},{id:"pkgbodysrc",type:"sql",isFullTab:!0,cell:"text",mode:["properties","create","edit"],group:(0,o.default)("Body"),depChange:function(t,n,r,a){e._origData.oid&&t.pkgbodysrc!=a.oldState.pkgbodysrc?e.warningText=(0,o.default)("Updating the package header definition may remove its existing body.")+"<br><br><b>"+(0,o.default)("Do you want to continue?")+"</b>":e.warningText=null}},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"pkgacl",label:(0,o.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["X"]),uniqueCol:["grantee","grantor"],editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0}]}},{key:"validate",value:function(e,t){return(0,i.isEmptyString)(e.pkgheadsrc)?(t("pkgheadsrc",(0,o.default)("Header cannot be empty.")),!0):(t("pkgheadsrc",null),null)}}])&&f(t.prototype,n),r&&f(t,r),l}(a.default);t.default=h},76547:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47042),n(41539),n(68309),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(79753),n(47941),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OwnedBySchema=void 0,n(91058),n(68304),n(30489);var o=s(n(91669)),a=s(n(89406)),i=s(n(67091)),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){h(n,e);var t=v(n);function n(e,r){var o;return b(this,n),(o=t.call(this,{owned_table:void 0,owned_column:void 0})).allTables=e,o.allTablesOptions=[],o.getColumns=r,o}return y(n,[{key:"getTableOid",value:function(e){var t,n=f(this.allTablesOptions);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.label===e)return r._id}}catch(e){n.e(e)}finally{n.f()}}},{key:"baseFields",get:function(){var e=this;return[{id:"owned_table",label:(0,o.default)("Table"),type:"select",editable:!1,options:e.allTables,optionsLoaded:function(t){return e.allTablesOptions=t}},{id:"owned_column",label:(0,o.default)("Column"),editable:!1,deps:["owned_table"],type:function(t){var n=e.getTableOid(t.owned_table);return{type:"select",options:t.owned_table?function(){return e.getColumns({tid:n})}:[],optionsReloadBasis:t.owned_table}}}]}},{key:"validate",value:function(e,t){if(!(0,l.isEmptyString)(e.owned_table)&&(0,l.isEmptyString)(e.owned_column))return t("owned_column",(0,o.default)("Column cannot be empty.")),!0;t("owned_column",null)}}]),n}(a.default);t.OwnedBySchema=O;var S=function(e){h(n,e);var t=v(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return b(this,n),(r=t.call(this,c({name:void 0,oid:void 0,seqowner:void 0,schema:void 0,is_sys_obj:void 0,comment:void 0,increment:void 0,start:void 0,current_value:void 0,minimum:void 0,maximum:void 0,cache:void 0,cycled:void 0,relacl:[],securities:[]},a))).getPrivilegeRoleSchema=e,r.fieldOptions=c({role:[],schema:[],allTables:[]},o),r.ownedSchemaObj=new O(r.fieldOptions.allTables,r.fieldOptions.getColumns),r}return y(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",mode:["properties","create","edit"],noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"seqowner",label:(0,o.default)("Owner"),editable:!1,type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1}},{id:"schema",label:(0,o.default)("Schema"),editable:!1,type:"select",options:this.fieldOptions.schema,controlProps:{allowClear:!1},mode:["create","edit"],cache_node:"database",cache_level:"database"},{id:"is_sys_obj",label:(0,o.default)("System sequence?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"comment",label:(0,o.default)("Comment"),type:"multiline",mode:["properties","create","edit"]},{id:"current_value",label:(0,o.default)("Current value"),type:"int",mode:["properties","edit"],group:(0,o.default)("Definition")},{id:"increment",label:(0,o.default)("Increment"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Definition")},{id:"start",label:(0,o.default)("Start"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Definition")},{id:"minimum",label:(0,o.default)("Minimum"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Definition")},{id:"maximum",label:(0,o.default)("Maximum"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Definition")},{id:"cache",label:(0,o.default)("Cache"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Definition"),min:1},{id:"cycled",label:(0,o.default)("Cycled"),type:"switch",mode:["properties","create","edit"],group:(0,o.default)("Definition")},{type:"nested-fieldset",label:(0,o.default)("Owned By"),group:(0,o.default)("Definition"),schema:this.ownedSchemaObj},{id:"owned_by_note",type:"note",group:(0,o.default)("Definition"),mode:["create","edit"],text:(0,o.default)("The OWNED BY option causes the sequence to be associated with a specific table column, such that if that column (or its whole table) is dropped, the sequence will be automatically dropped as well. The specified table must have the same owner and be in the same schema as the sequence.")},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"relacl",label:(0,o.default)("Privileges"),group:(0,o.default)("Security"),type:"collection",schema:this.getPrivilegeRoleSchema(["r","w","U"]),uniqueCol:["grantee","grantor"],mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"securities",label:(0,o.default)("Security labels"),type:"collection",editable:!1,group:(0,o.default)("Security"),schema:new i.default,mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,uniqueCol:["provider"],min_version:90200}]}},{key:"validate",value:function(e,t){var n=null,r=e.minimum,a=e.maximum,i=e.start;if(n=(0,l.emptyValidator)("Owner",e.seqowner))return t("seqowner",n),!0;if(t("seqowner",n),n=(0,l.emptyValidator)("Schema",e.schema))return t("schema",n),!0;if(t("schema",n),!this.isNew(e)){if(n=(0,l.emptyValidator)("Current value",e.current_value))return t("current_value",n),!0;if(t("current_value",n),n=(0,l.emptyValidator)("Increment value",e.increment))return t("increment",n),!0;if(t("increment",n),n=(0,l.emptyValidator)("Minimum value",e.minimum))return t("minimum",n),!0;if(t("minimum",n),n=(0,l.emptyValidator)("Maximum value",e.maximum))return t("maximum",n),!0;if(t("maximum",n),n=(0,l.emptyValidator)("Cache value",e.cache))return t("cache",n),!0;t("cache",n)}var s=(0,o.default)("Minimum value must be less than maximum value."),u=(0,o.default)("Start value cannot be less than minimum value."),c=(0,o.default)("Start value cannot be greater than maximum value.");return(0,l.isEmptyString)(r)||(0,l.isEmptyString)(a)?null:0==r&&0==a||parseInt(r,10)>=parseInt(a,10)?(t("minimum",s),!0):(t("minimum",null),i&&r&&parseInt(i)<parseInt(r)?(t("start",u),!0):(t("start",null),i&&a&&parseInt(i)>parseInt(a)?(t("start",c),!0):(t("start",null),null)))}}]),n}(a.default);t.default=S},41551:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,a=f(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return u(this,i),(e=a.call(this,l({name:void 0,namespaceowner:void 0,nspacl:void 0,is_sys_obj:void 0,description:void 0,securitylabel:[]},n))).fieldOptions=l({},t),e}return t=i,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",readonly:!0},{id:"oid",label:(0,o.default)("OID"),cell:"string",mode:["properties"],type:"text"},{id:"namespaceowner",label:(0,o.default)("Owner"),cell:"string",type:"text",readonly:!0},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"is_sys_obj",label:(0,o.default)("System catalog?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline"}]}}])&&c(t.prototype,n),r&&c(t,r),i}(a(n(89406)).default);t.default=m},14497:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(68304),n(30489);var o=u(n(91669)),a=u(n(89406)),i=n(82234),l=u(n(67091)),s=n(76055);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,r,a=y(u);function u(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return p(this,u),(t=a.call(this,d({name:void 0,namespaceowner:void 0,description:void 0,is_system_obj:void 0},r))).fieldOptions=d({roles:[],server_info:[]},n),t.getPrivilegeRoleSchema=e,t}return t=u,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text"},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"namespaceowner",label:(0,o.default)("Owner"),cell:"string",type:"select",options:e.fieldOptions.roles,controlProps:{allowClear:!1}},{id:"is_sys_obj",label:(0,o.default)("System schema?"),cell:"switch",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline"},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"tblacl",label:(0,o.default)("Default TABLE privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"seqacl",label:(0,o.default)("Default SEQUENCE privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"funcacl",label:(0,o.default)("Default FUNCTION privileges"),group:(0,o.default)("Security"),type:"text",mode:["properties"]},{id:"typeacl",label:(0,o.default)("Default TYPE privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"],min_version:90200},{id:"nspacl",label:(0,o.default)("Privileges"),type:"collection",schema:e.getPrivilegeRoleSchema(["C","U"]),uniqueCol:["grantee","grantor"],editable:!1,group:(0,o.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"seclabels",label:(0,o.default)("Security labels"),schema:new l.default,editable:!1,type:"collection",group:(0,o.default)("Security"),mode:["edit","create"],min_version:90200,canAdd:!0,canEdit:!1,canDelete:!0},{type:"nested-tab",group:(0,o.default)("Default privileges"),mode:["create","edit"],schema:new i.DefaultPrivSchema(e.getPrivilegeRoleSchema)}]}},{key:"validate",value:function(e,t){return(0,s.isEmptyString)(e.name)?(t("name",(0,o.default)("Name cannot be empty.")),!0):(0,s.isEmptyString)(e.namespaceowner)?(t("namespaceowner",(0,o.default)("Owner cannot be empty.")),!0):null}}])&&b(t.prototype,n),r&&b(t,r),u}(a.default);t.default=v},47471:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(68304),n(30489);var o=l(n(91669)),a=l(n(89406)),i=n(76055);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,a=b(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return d(this,l),(e=a.call(this,u({targettype:"r"},r))).fieldOptions=t,e.nodeInfo=n,e}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",mode:["properties","create","edit"],readonly:function(t){return!e.isNew(t)}},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"owner",label:(0,o.default)("Owner"),options:this.fieldOptions.role,controlProps:{allowClear:!1,editable:!1},type:"select",mode:["properties","create","edit"],readonly:!0,visible:!1},{id:"schema",label:(0,o.default)("Schema"),type:"select",mode:["properties","create","edit"],options:this.fieldOptions.schema,controlProps:{allowClear:!1,editable:!1},readonly:function(t){return!e.isNew(t)}},{id:"targettype",label:(0,o.default)("Target type"),readonly:e.inCatalog(),group:(0,o.default)("Definition"),controlProps:{allowClear:!1},type:"select",options:[{label:(0,o.default)("Function"),value:"f"},{label:(0,o.default)("Package"),value:"P"},{label:(0,o.default)("Procedure"),value:"p"},{label:(0,o.default)("Public Synonym"),value:"s"},{label:(0,o.default)("Sequence"),value:"S"},{label:(0,o.default)("Table"),value:"r"},{label:(0,o.default)("View"),value:"v"}]},{id:"synobjschema",label:(0,o.default)("Target schema"),type:"select",mode:["properties","create","edit"],group:(0,o.default)("Definition"),deps:["targettype"],controlProps:{allowClear:!1},options:this.fieldOptions.synobjschema,readonly:function(t){return!!e.inCatalog()||"s"==t.targettype},depChange:function(t){if(!e.inCatalog()&&"s"==t.targettype)return{synobjschema:"public"}}},{id:"synobjname",label:(0,o.default)("Target object"),group:(0,o.default)("Definition"),deps:["targettype","synobjschema"],depChange:function(e,t){if("targettype"==t[0]||"synobjschema"==t[0])return{synobjname:null}},type:function(t){return{type:"select",options:function(){return e.fieldOptions.getTargetObjectOptions(t.targettype,t.synobjschema)},optionsReloadBasis:t.targettype+t.synobjschema}},readonly:function(){return!!e.inCatalog()}},{id:"is_sys_obj",label:(0,o.default)("System synonym?"),cell:"boolean",type:"switch",mode:["properties"]}]}},{key:"validate",value:function(e,t){var n=null;return(n=(0,i.emptyValidator)("Name",e.name))?(t("name",n),!0):(t("name",n),(n=(0,i.emptyValidator)("Target schema",e.synobjschema))?(t("synobjschema",n),!0):(t("synobjschema",n),(n=(0,i.emptyValidator)("Target object",e.synobjname))?(t("synobjname",n),!0):void t("synobjname",n)))}}])&&f(t.prototype,n),r&&f(t,r),l}(a.default);t.default=h},15253:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47042),n(41539),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(79753),n(47941),n(38880),n(89554),n(54747),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeColumnSchema=function(e,t,n){var r=this;return new j((function(n){return(0,c.getNodePrivilegeRoleSchema)(r,e,t,n)}),e,(function(){return(0,d.getNodeAjaxOptions)("get_types",n.Nodes.table,e,t,{cacheLevel:"table"})}),(function(){return(0,d.getNodeAjaxOptions)("get_collations",n.Nodes.collation,e,t)}))},t.default=void 0,n(68309),n(57327),n(82772),n(91058),n(68304),n(30489);var o=f(n(91669)),a=f(n(89406)),i=f(n(14511)),l=f(n(67091)),s=f(n(96486)),u=n(76055),c=n(40345),d=n(77077);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(c,e);var t,n,r,a=w(c);function c(e,t,n,r){var o,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return g(this,c),(o=a.call(this,{name:void 0,attowner:void 0,atttypid:void 0,attnum:void 0,cltype:void 0,collspcname:void 0,attacl:void 0,description:void 0,parent_tbl:void 0,min_val_attlen:void 0,min_val_attprecision:void 0,max_val_attlen:void 0,max_val_attprecision:void 0,edit_types:void 0,is_primary_key:!1,inheritedfrom:void 0,attstattarget:void 0,attnotnull:!1,attlen:null,attprecision:null,attidentity:"a",attoptions:[],seqincrement:void 0,seqstart:void 0,seqmin:void 0,seqmax:void 0,seqcache:void 0,seqcycle:void 0,colconstype:"n",genexpr:void 0})).getPrivilegeRoleSchema=e,o.nodeInfo=t,o.cltypeOptions=n,o.collspcnameOptions=r,o.inErd=i,o.datatypes=[],o}return t=c,(n=[{key:"idAttribute",get:function(){return"attnum"}},{key:"inSchemaWithColumnCheck",value:function(e){return!((!this.nodeInfo||!("view"in this.nodeInfo)&&!("mview"in this.nodeInfo))&&(!this.nodeInfo||!("schema"in this.nodeInfo)||s.default.isUndefined(e.inheritedfrom)&&(this.isNew(e)||!s.default.isUndefined(e.attnum)&&e.attnum>0)))}},{key:"editableCheckForTable",value:function(e){return!this.inSchemaWithColumnCheck(e)}},{key:"isIdentityColumn",value:function(e){var t=e.attidentity;return!!(s.default.isUndefined(t)||s.default.isNull(t)||s.default.isEmpty(t))}},{key:"isTypeIdentity",value:function(e){var t=e.colconstype;return!s.default.isUndefined(t)&&!s.default.isNull(t)&&"i"==t}},{key:"isTypeGenerated",value:function(e){var t=e.colconstype;return!s.default.isUndefined(t)&&!s.default.isNull(t)&&"g"==t}},{key:"inSchemaWithModelCheck",value:function(e){return!this.nodeInfo||!("schema"in this.nodeInfo)||!this.isNew(e)}},{key:"attlenRange",value:function(e){var t,n=y(this.datatypes);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.cltype==r.value&&r.length)return{min:r.min_val||0,max:r.max_val}}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"attprecisionRange",value:function(e){var t,n=y(this.datatypes);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.cltype==r.value&&r.precision)return{min:r.min_val||0,max:r.max_val}}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",readonly:t.inSchemaWithColumnCheck,editable:this.editableCheckForTable,noEmpty:!0,width:115},{id:"is_primary_key",label:(0,o.default)("Primary key?"),cell:"switch",type:"switch",width:100,disableResizing:!0,deps:["name"],visible:function(){var e,n;return(null===(e=t.top)||void 0===e?void 0:e.nodeInfo)&&s.default.isUndefined(t.top.nodeInfo.table||t.top.nodeInfo.view||(null===(n=t.top)||void 0===n?void 0:n.nodeInfo.mview))},readonly:function(e){if(t.top&&(!s.default.isUndefined(t.top.origData.oid)&&!s.default.isUndefined(t.top.origData.primary_key)&&t.top.origData.primary_key.length>0&&!s.default.isUndefined(t.top.origData.primary_key[0].oid)||"is_partitioned"in t.top.origData&&t.top.origData.is_partitioned&&t.getServerVersion()<11e3))return!0;var n=e.name;return!(t.inSchemaWithColumnCheck(e)||!s.default.isUndefined(n)&&!s.default.isNull(n)&&""!=n)},editable:function(e){return!(t.top&&!s.default.isUndefined(t.top.origData.oid)&&!s.default.isUndefined(t.top.origData.primary_key)&&t.top.origData.primary_key.length>0&&!s.default.isUndefined(t.top.origData.primary_key[0].oid)||t.top&&"is_partitioned"in t.top.origData&&t.top.origData.is_partitioned&&t.getServerVersion()<11e3||t.inSchemaWithColumnCheck(e))}},{id:"attnum",label:(0,o.default)("Position"),cell:"text",type:"text",disabled:this.inCatalog,mode:["properties"]},{id:"cltype",label:(0,o.default)("Data type"),readonly:t.inSchemaWithColumnCheck,width:150,group:(0,o.default)("Definition"),noEmpty:!0,editable:this.editableCheckForTable,options:this.cltypeOptions,optionsLoaded:function(e){t.datatypes=e},type:function(n){return{type:"select",options:e.cltypeOptions,controlProps:{allowClear:!1,filter:function(r){var o=r,a=(null==n?void 0:n.edit_types)||[];return t.isNew(n)||e.inErd||(o=s.default.filter(r,(function(e){return a.indexOf(e.value)>-1}))),o}}}},cell:function(n){return{cell:"select",options:e.cltypeOptions,controlProps:{allowClear:!1,filter:function(r){var o=r,a=(null==n?void 0:n.edit_types)||[];return t.isNew(n)||e.inErd||(o=s.default.filter(r,(function(e){return a.indexOf(e.value)>-1}))),o}}}}},{id:"inheritedid",label:(0,o.default)(""),type:"text",visible:!1},{id:"inheritedfrom",label:(0,o.default)("Inherited from table"),type:"text",readonly:!0,editable:!1,visible:function(){return!!this.nodeInfo&&s.default.isUndefined(this.nodeInfo.table||this.nodeInfo.view||this.nodeInfo.mview)}},{id:"attlen",label:(0,o.default)("Length/Precision"),deps:["cltype"],type:"int",group:(0,o.default)("Definition"),width:120,disableResizing:!0,cell:function(e){return{cell:t.attlenRange(e)?"int":""}},depChange:function(t){var n=e.attlenRange(t);return b(b({},t),{},n?{min_val_attlen:n.min,max_val_attlen:n.max}:{attlen:null})},disabled:function(e){return!t.attlenRange(e)},editable:function(e){return!!(0,u.isEmptyString)(e.inheritedfrom)&&Boolean(t.attlenRange(e))}},{id:"attprecision",label:(0,o.default)("Scale"),width:60,disableResizing:!0,deps:["cltype"],type:"int",group:(0,o.default)("Definition"),cell:function(e){return{cell:t.attlenRange(e)?"int":""}},depChange:function(t){var n=e.attprecisionRange(t);return b(b({},t),{},n?{min_val_attprecision:n.min,max_val_attprecision:n.max}:{attprecision:null})},disabled:function(e){return!this.attprecisionRange(e)},editable:function(e){return!!(0,u.isEmptyString)(e.inheritedfrom)&&Boolean(this.attprecisionRange(e))}},{id:"collspcname",label:(0,o.default)("Collation"),cell:"select",type:"select",group:(0,o.default)("Definition"),deps:["cltype"],options:this.collspcnameOptions,disabled:function(t){var n,r=y(e.datatypes);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(t.cltype==o.value&&o.is_collatable)return!1}}catch(e){r.e(e)}finally{r.f()}return!0},depChange:function(t){var n,r=y(e.datatypes);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(t.cltype==o.value&&o.is_collatable)return{}}}catch(e){r.e(e)}finally{r.f()}return{collspcname:null}}},{id:"attstattarget",label:(0,o.default)("Statistics"),cell:"text",type:"text",readonly:t.inSchemaWithColumnCheck,mode:["properties","edit"],group:(0,o.default)("Definition")},{id:"attstorage",label:(0,o.default)("Storage"),group:(0,o.default)("Definition"),type:"select",mode:["properties","edit"],cell:"select",readonly:t.inSchemaWithColumnCheck,controlProps:{placeholder:(0,o.default)("Select storage"),allowClear:!1},options:[{label:"PLAIN",value:"p"},{label:"MAIN",value:"m"},{label:"EXTERNAL",value:"e"},{label:"EXTENDED",value:"x"}]},{id:"defval",label:(0,o.default)("Default"),cell:"text",type:"text",group:(0,o.default)("Constraints"),deps:["cltype","colconstype"],readonly:t.inSchemaWithColumnCheck,disabled:function(e){var t=["serial","bigserial","smallserial"].indexOf(e.cltype)>-1;return t=t||"n"!=e.colconstype},depChange:function(e){var n=!1;if(t.inSchemaWithModelCheck(e)||(n=["serial","bigserial","smallserial"].indexOf(e.cltype)>-1),(n=n||"n"!=e.colconstype)&&t.isNew(e))return{defval:void 0}},editable:function(e){return!(!(0,u.isEmptyString)(e.inheritedfrom)||!this.editableCheckForTable(e))}},{id:"attnotnull",label:(0,o.default)("Not NULL?"),cell:"switch",type:"switch",width:80,disableResizing:!0,group:(0,o.default)("Constraints"),editable:this.editableCheckForTable,deps:["colconstype"],readonly:function(e){return t.inSchemaWithColumnCheck(e)},depChange:function(e){if("i"==e.colconstype)return{attnotnull:!0}}},{id:"colconstype",label:(0,o.default)("Type"),cell:"text",group:(0,o.default)("Constraints"),type:function(t){var n=[{label:(0,o.default)("NONE"),value:"n"},{label:(0,o.default)("IDENTITY"),value:"i"}];return e.getServerVersion()>=12e4&&(e.isNew(t)?n.push({label:(0,o.default)("GENERATED"),value:"g"}):n.push({label:(0,o.default)("GENERATED"),value:"g",disabled:!0})),{type:"toggle",options:n}},disabled:function(e){return!this.isNew(e)&&"g"==e.colconstype},min_version:1e5},{id:"attidentity",label:(0,o.default)("Identity"),cell:"select",type:"select",controlProps:{placeholder:(0,o.default)("Select identity"),allowClear:!1},min_version:1e5,group:(0,o.default)("Constraints"),options:[{label:(0,o.default)("ALWAYS"),value:"a"},{label:(0,o.default)("BY DEFAULT"),value:"d"}],deps:["colconstype"],visible:this.isTypeIdentity,disabled:!1},{id:"seqincrement",label:(0,o.default)("Increment"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Constraints"),min:1,deps:["attidentity","colconstype"],disabled:this.isIdentityColumn,visible:this.isTypeIdentity},{id:"seqstart",label:(0,o.default)("Start"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Constraints"),disabled:this.isIdentityColumn,deps:["attidentity","colconstype"],visible:this.isTypeIdentity},{id:"seqmin",label:(0,o.default)("Minimum"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Constraints"),deps:["attidentity","colconstype"],disabled:this.isIdentityColumn,visible:this.isTypeIdentity},{id:"seqmax",label:(0,o.default)("Maximum"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Constraints"),deps:["attidentity","colconstype"],disabled:this.isIdentityColumn,visible:this.isTypeIdentity},{id:"seqcache",label:(0,o.default)("Cache"),type:"int",mode:["properties","create","edit"],group:(0,o.default)("Constraints"),min:1,deps:["attidentity","colconstype"],disabled:this.isIdentityColumn,visible:this.isTypeIdentity},{id:"seqcycle",label:(0,o.default)("Cycled"),type:"switch",mode:["properties","create","edit"],group:(0,o.default)("Constraints"),deps:["attidentity","colconstype"],disabled:this.isIdentityColumn,visible:this.isTypeIdentity},{id:"genexpr",label:(0,o.default)("Expression"),type:"text",mode:["properties","create","edit"],group:(0,o.default)("Constraints"),min_version:12e4,deps:["colconstype"],visible:this.isTypeGenerated,readonly:function(e){return!this.isNew(e)}},{id:"is_pk",label:(0,o.default)("Primary key?"),type:"switch",mode:["properties"],group:(0,o.default)("Definition")},{id:"is_fk",label:(0,o.default)("Foreign key?"),type:"switch",mode:["properties"],group:(0,o.default)("Definition")},{id:"is_inherited",label:(0,o.default)("Inherited?"),type:"switch",mode:["properties"],group:(0,o.default)("Definition")},{id:"tbls_inherited",label:(0,o.default)("Inherited from table(s)"),type:"text",mode:["properties"],deps:["is_inherited"],group:(0,o.default)("Definition"),visible:function(e){return!s.default.isUndefined(e.is_inherited)&&e.is_inherited}},{id:"is_sys_column",label:(0,o.default)("System column?"),cell:"text",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"text",type:"multiline",mode:["properties","create","edit"],disabled:this.inCatalog},{id:"attoptions",label:(0,o.default)("Variables"),type:"collection",group:(0,o.default)("Variables"),schema:new i.default([{label:"n_distinct",value:"n_distinct",vartype:"string"},{label:"n_distinct_inherited",value:"n_distinct_inherited",vartype:"string"}],null,null,["name","value"]),uniqueCol:["name"],mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0},{id:"security",label:(0,o.default)("Security"),type:"group",visible:!this.inErd},{id:"attacl",label:(0,o.default)("Privileges"),type:"collection",group:"security",schema:this.getPrivilegeRoleSchema(["a","r","w","x"]),mode:["edit"],canAdd:!0,canDelete:!0,uniqueCol:["grantee"]},{id:"seclabels",label:(0,o.default)("Security labels"),canAdd:!0,schema:new l.default,group:"security",mode:["edit","create"],editable:!1,type:"collection",min_version:90100,canEdit:!1,canDelete:!0,uniqueCol:["provider"]}]}},{key:"validate",value:function(e,t){var n=void 0;if(!s.default.isUndefined(e.cltype)&&!(0,u.isEmptyString)(e.attlen)&&(e.attlen<e.min_val_attlen&&(n=(0,o.default)("Length/Precision should not be less than: ")+e.min_val_attlen),e.attlen>e.max_val_attlen&&(n=(0,o.default)("Length/Precision should not be greater than: ")+e.max_val_attlen),n))return t("attlen",n),!0;if(!s.default.isUndefined(e.cltype)&&!(0,u.isEmptyString)(e.attprecision)&&(e.attprecision<e.min_val_attprecision&&(n=(0,o.default)("Scale should not be less than: ")+e.min_val_attprecision),e.attprecision>e.max_val_attprecision&&(n=(0,o.default)("Scale should not be greater than: ")+e.max_val_attprecision),n))return t("attprecision",n),!0;if("g"==e.colconstype&&(0,u.isEmptyString)(e.genexpr))return t("genexpr",n=(0,o.default)("Expression value cannot be empty.")),!0;if(!(this.isNew(e)||"i"!=e.colconstype||"a"!=this.origData.attidentity&&"d"!=this.origData.attidentity||"a"!=e.attidentity&&"d"!=e.attidentity)){if((0,u.isEmptyString)(e.seqincrement))return t("seqincrement",n=(0,o.default)("Increment value cannot be empty.")),!0;if((0,u.isEmptyString)(e.seqmin))return t("seqmin",n=(0,o.default)("Minimum value cannot be empty.")),!0;if((0,u.isEmptyString)(e.seqmax))return t("seqmax",n=(0,o.default)("Maximum value cannot be empty.")),!0;if((0,u.isEmptyString)(e.seqcache))return t("seqcache",n=(0,o.default)("Cache value cannot be empty.")),!0}return!((0,u.isEmptyString)(e.seqmin)||(0,u.isEmptyString)(e.seqmax)||(0==e.seqmin&&0==e.seqmax||parseInt(e.seqmin,10)>=parseInt(e.seqmax,10)?(t("seqmin",(0,o.default)("Minimum value must be less than maximum value.")),0):e.seqstart&&e.seqmin&&parseInt(e.seqstart)<parseInt(e.seqmin)?(t("seqstart",(0,o.default)("Start value cannot be less than minimum value.")),0):!(e.seqstart&&e.seqmax&&parseInt(e.seqstart)>parseInt(e.seqmax))||(t("seqstart",(0,o.default)("Start value cannot be greater than maximum value.")),0)))}}])&&v(t.prototype,n),r&&v(t,r),c}(a.default);t.default=j},4847:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ForEventsSchema=void 0,n(68304),n(30489);var a=s(n(91669)),i=s(n(89406)),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){m(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return f(this,n),(e=t.call(this,c({},a))).fieldOptions=c({},r),e.nodeInfo=o,e}return b(n,[{key:"baseFields",get:function(){var e=this;return[{id:"evnt_insert",label:(0,a.default)("INSERT"),type:"switch",readonly:function(t){var n=t.evnt_insert;return!(!r.isUndefined(n)&&"ppas"==e.nodeInfo.server.server_type)&&e.inCatalog()}},{id:"evnt_update",label:(0,a.default)("UPDATE"),type:"switch",readonly:function(t){var n=t.evnt_update;return!(!r.isUndefined(n)&&"ppas"==e.nodeInfo.server.server_type)&&e.inCatalog()}},{id:"evnt_delete",label:(0,a.default)("DELETE"),type:"switch",readonly:function(t){var n=t.evnt_delete;return!(!r.isUndefined(n)&&"ppas"==e.nodeInfo.server.server_type)&&e.inCatalog()}},{id:"evnt_truncate",label:(0,a.default)("TRUNCATE"),type:"switch",readonly:function(t){var n=t.evnt_truncate;return"view"in e.nodeInfo||!(!r.isUndefined(n)&&"ppas"==e.nodeInfo.server.server_type)&&e.inCatalog()}}]}}]),n}(i.default);t.ForEventsSchema=_;var w=function(e){m(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return f(this,n),(e=t.call(this,c({name:void 0},a))).fieldOptions=c({columns:[]},r),e.nodeInfo=o,e}return b(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,a.default)("Name"),cell:"text",type:"text",noEmpty:!0,disabled:e.inCatalog()},{id:"oid",label:(0,a.default)("OID"),cell:"text",type:"int",mode:["properties"]},{id:"is_enable_trigger",label:(0,a.default)("Trigger enabled?"),mode:["edit","properties"],disabled:e.inCatalog(),type:"select",controlProps:{allowClear:!1},options:[{label:(0,a.default)("Enable"),value:"O"},{label:(0,a.default)("Enable Replica"),value:"R"},{label:(0,a.default)("Enable Always"),value:"A"},{label:(0,a.default)("Disable"),value:"D"}]},{type:"nested-fieldset",label:(0,a.default)("FOR Events"),group:(0,a.default)("Events"),schema:new _({},this.nodeInfo)},{id:"whenclause",label:(0,a.default)("When"),group:(0,a.default)("Events"),type:"sql",disabled:e.inCatalog(),readonly:function(t){return!e.isNew(t)}},{id:"columns",label:(0,a.default)("Columns"),group:(0,a.default)("Events"),editable:!1,type:"select",options:this.fieldOptions.columns,controlProps:{allowClear:!1,multiple:!0},deps:["evnt_update"],disabled:function(t){if(e.inCatalog())return!0;var n=t.evnt_update;return!(!r.isUndefined(n)&&n)},readonly:function(t){return!e.isNew(t)}},{id:"prosrc",label:(0,a.default)("Code"),group:(0,a.default)("Code"),type:"sql",mode:["create","edit"],isFullTab:!0,disabled:function(t){return e.isNew(t)&&r.isUndefined(t.prosrc)&&(t.prosrc=e.getCodeTemplate()),!1}},{id:"is_sys_trigger",label:(0,a.default)("System trigger?"),type:"switch",disabled:e.inCatalog(),mode:["properties"],readonly:function(t){return!e.isNew(t)}},{id:"description",label:(0,a.default)("Comment"),type:"multiline",disabled:e.inCatalog()}]}},{key:"validate",value:function(e,t){return e.evnt_truncate||e.evnt_delete||e.evnt_update||e.evnt_insert?(t("evnt_insert",null),(0,l.isEmptyString)(e.prosrc)?(t(e.prosrc,(0,a.default)("Code cannot be empty.")),!0):void t(e.prosrc,null)):(t("evnt_insert",(0,a.default)("Specify at least one event.")),!0)}},{key:"getCodeTemplate",value:function(){return(0,a.default)("-- Enter any global declarations below:\n\n-- BEFORE STATEMENT block. Delete if not required.\nBEFORE STATEMENT IS\n    -- Enter any local declarations here\nBEGIN\n    -- Enter any required code here\nEND;\n\n-- AFTER STATEMENT block. Delete if not required.\nAFTER STATEMENT IS\n    -- Enter any local declarations here\nBEGIN\n    -- Enter any required code here\nEND;\n\n-- BEFORE EACH ROW block. Delete if not required.\nBEFORE EACH ROW IS\n    -- Enter any local declarations here\nBEGIN\n    -- Enter any required code here\nEND;\n\n-- AFTER EACH ROW block. Delete if not required.\nAFTER EACH ROW IS\n    -- Enter any local declarations here\nBEGIN\n    -- Enter any required code here\nEND;\n\n-- INSTEAD OF EACH ROW block. Delete if not required.\nINSTEAD OF EACH ROW IS\n    -- Enter any local declarations here\nBEGIN\n    -- Enter any required code here\nEND;")}}]),n}(i.default);t.default=w},29754:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(68304),n(30489);var o=s(n(91669)),a=s(n(89406)),i=s(n(96486)),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,e);var t,n,r,a=d(s);function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),a.call(this,{name:void 0,oid:void 0,description:void 0,consrc:void 0,connoinherit:void 0,convalidated:!0})}return t=s,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"inTable",get:function(){return!!i.default.isUndefined(this.nodeInfo)||i.default.isUndefined(this.nodeInfo.check_constraint)}},{key:"isReadonly",value:function(e){return this.top?!i.default.isUndefined(e.oid):!this.isNew(e)}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",cell:"text",mode:["properties","create","edit"],editable:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"is_sys_obj",label:(0,o.default)("System check constraint?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"comment",label:(0,o.default)("Comment"),type:"multiline",cell:"text",mode:["properties","create","edit"],deps:["name"],disabled:function(e){return!!(0,l.isEmptyString)(e.name)},depChange:function(e){if((0,l.isEmptyString)(e.name))return{comment:""}}},{id:"consrc",label:(0,o.default)("Check"),type:"multiline",cell:"text",group:(0,o.default)("Definition"),mode:["properties","create","edit"],readonly:e.isReadonly,editable:!1,noEmpty:!0},{id:"connoinherit",label:(0,o.default)("No inherit?"),type:"switch",cell:"switch",group:(0,o.default)("Definition"),mode:["properties","create","edit"],min_version:90200,deps:[["is_partitioned"]],disabled:function(){var t;return!(!e.inTable||null===(t=e.top)||void 0===t||!t.sessData.is_partitioned)},depChange:function(){var t;if(e.inTable&&null!==(t=e.top)&&void 0!==t&&t.sessData.is_partitioned)return{connoinherit:!1}},readonly:e.isReadonly},{id:"convalidated",label:(0,o.default)("Don't validate?"),type:"switch",cell:"switch",group:(0,o.default)("Definition"),min_version:90200,readonly:function(t){return e.inTable&&e.top&&!e.top.isNew()?!(i.default.isUndefined(t.oid)||t.convalidated):!e.isNew(t)&&!e.origData.convalidated},mode:["properties","create","edit"]}]}},{key:"validate",value:function(){return!1}}])&&u(t.prototype,n),r&&u(t,r),s}(a.default);t.default=b},81873:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(74819),n(38880),n(47941),n(82526),n(89554),n(54747),n(49337),n(33321),n(41817),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeExclusionConstraintSchema=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=n.Nodes.table;return new E({columns:r?[]:function(){return(0,c.getNodeListByName)("column",e,t,{includeItemKeys:["datatype"]})},amname:function(){return(0,c.getNodeAjaxOptions)("get_access_methods",o,e,t)},spcname:function(){return(0,c.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},getOperClass:function(n){return(0,c.getNodeAjaxOptions)("get_oper_class",o,e,t,{urlParams:n,useCache:!1},(function(e){var t=[];return e&&i.default.isArray(e)&&i.default.each(e,(function(e){t.push({label:e[0],value:e[1]})})),t}))},getOperator:function(n){return(0,c.getNodeAjaxOptions)("get_operator",o,e,t,{urlParams:n,useCache:!1},(function(e){var t=[];return e&&i.default.isArray(e)&&i.default.each(e,(function(e){t.push({label:e[0],value:e[1]})})),t}))}},e)},t.default=void 0,n(69826),n(21249),n(69600),n(68304),n(30489),n(68309),n(88674),n(41539),n(92222),n(57327),n(47042),n(34553);var o=p(n(91669)),a=p(n(89406)),i=p(n(96486)),l=n(76055),s=n(52237),u=p(n(35971)),c=n(77077),d=n(81922),f=p(n(54851));function p(e){return e&&e.__esModule?e:{default:e}}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){w(n,e);var t=S(n);function n(e){var r;return g(this,n),(r=t.call(this,{is_exp:void 0,column:void 0,expression:void 0})).columns=e,r}return _(n,[{key:"changeColumnOptions",value:function(e){this.columns=e}},{key:"addDisabled",value:function(e){return!(e.is_exp?e.expression:e.column)}},{key:"getNewData",value:function(e){var t,n=e.is_exp?null:null===(t=i.default.find(this.columnOptions,(function(t){return t.value==e.column})))||void 0===t?void 0:t.datatype;return this.exColumnSchema.getNewData({is_exp:e.is_exp,column:e.is_exp?e.expression:e.column,col_type:n})}},{key:"baseFields",get:function(){var e,t=this;return[{id:"is_exp",label:(0,o.default)("Is expression"),type:"switch",editable:!1},{id:"column",label:(0,o.default)("Column"),type:"select",editable:!1,options:this.columns,deps:["is_exp"],optionsReloadBasis:null!==(e=this.columns)&&void 0!==e&&e.map?i.default.join(this.columns.map((function(e){return e.label})),","):null,optionsLoaded:function(e){return t.columnOptions=e},disabled:function(e){return e.is_exp}},{id:"expression",label:(0,o.default)("Expression"),editable:!1,deps:["is_exp"],type:"text",disabled:function(e){return!e.is_exp}}]}}]),n}(a.default),C=function(e){w(n,e);var t=S(n);function n(e){var r;return g(this,n),(r=t.call(this,{column:void 0,is_exp:!1,oper_class:void 0,order:!1,nulls_order:!1,operator:void 0,col_type:void 0,is_sort_nulls_applicable:!1})).operClassOptions=[],r.operatorOptions=[],r.getOperator=e,r.isNewExCons=!0,r.amname=null,r}return _(n,[{key:"isEditable",value:function(){return!!this.isNewExCons&&"btree"===this.amname}},{key:"setOperClassOptions",value:function(e){this.operClassOptions=e}},{key:"changeDefaults",value:function(e){this.defaultColVals=e}},{key:"getNewData",value:function(e){return m(m({},h(P(n.prototype),"getNewData",this).call(this,e)),this.defaultColVals)}},{key:"baseFields",get:function(){var e=this;return[{id:"is_exp",label:"",type:"",cell:"",editable:!1,width:20,disableResizing:!0,controlProps:{formatter:{fromRaw:function(e){return e?"E":"C"}}},visible:!1},{id:"column",label:(0,o.default)("Col/Exp"),type:"",editable:!1,cell:"",width:125},{id:"oper_class",label:(0,o.default)("Operator class"),cell:"select",options:this.operClassOptions,width:185,editable:e.isEditable,controlProps:{allowClear:!0,placeholder:(0,o.default)("Select the operator class")}},{id:"order",label:(0,o.default)("Order"),type:"select",cell:"select",options:[{label:"ASC",value:!0},{label:"DESC",value:!1}],editable:e.isEditable,width:110,disableResizing:!0,controlProps:{allowClear:!1}},{id:"nulls_order",label:(0,o.default)("NULLs order"),type:"select",cell:"select",options:[{label:"FIRST",value:!0},{label:"LAST",value:!1}],controlProps:{allowClear:!1},editable:e.isEditable,width:110,disableResizing:!0},{id:"operator",label:(0,o.default)("Operator"),type:"select",width:95,editable:function(){return e.isNewExCons},cell:function(t){return{cell:"select",options:function(){return e.getOperator({col_type:t.col_type})},controlProps:{allowClear:!1}}}}]}}]),n}(a.default),E=function(e){w(n,e);var t=S(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return g(this,n),(e=t.call(this,{name:void 0,oid:void 0,is_sys_obj:void 0,comment:void 0,spcname:void 0,amname:"gist",fillfactor:void 0,condeferrable:void 0,condeferred:void 0,columns:[],include:[]})).nodeInfo=o,e.fieldOptions=r,e.exHeaderSchema=new x(r.columns),e.exColumnSchema=new C(r.getOperator),e.exHeaderSchema.exColumnSchema=e.exColumnSchema,e}return _(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"inTable",get:function(){return!!(this.top&&this.top instanceof f.default)}},{key:"initialise",value:function(e){this.exColumnSchema.isNewExCons=this.isNew(e),this.amname=e.amname,"btree"===e.amname&&this.exColumnSchema.setOperClassOptions(this.fieldOptions.getOperClass({indextype:e.amname}))}},{key:"changeColumnOptions",value:function(e){this.exHeaderSchema.changeColumnOptions(e),this.fieldOptions.columns=e}},{key:"isReadonly",value:function(e){return this.top?!i.default.isUndefined(e.oid):!this.isNew(e)}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",cell:"text",mode:["properties","create","edit"],editable:!0},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"is_sys_obj",label:(0,o.default)("System exclusion constraint?"),type:"switch",mode:["properties"]},{id:"comment",label:(0,o.default)("Comment"),cell:"text",type:"multiline",mode:["properties","create","edit"],deps:["name"],disabled:function(e){return!!(0,l.isEmptyString)(e.name)},depChange:function(e){if((0,l.isEmptyString)(e.name))return{comment:""}}},{id:"spcname",label:(0,o.default)("Tablespace"),type:"select",group:(0,o.default)("Definition"),controlProps:{allowClear:!1},options:this.fieldOptions.spcname},{id:"amname",label:(0,o.default)("Access method"),type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.amname,deferredDepChange:function(e,n,r,a){return new Promise((function(n){(0,d.pgAlertify)().confirm((0,o.default)("Change access method?"),(0,o.default)("Changing access method will clear columns collection"),(function(){if("btree"==e.amname||(0,l.isEmptyString)(e.amname)){t.exColumnSchema.setOperClassOptions(t.fieldOptions.getOperClass({indextype:"btree"})),t.exColumnSchema.changeDefaults({order:!0,nulls_order:!0,is_sort_nulls_applicable:!0})}else t.exColumnSchema.setOperClassOptions([]),t.exColumnSchema.changeDefaults({order:!1,nulls_order:!1,is_sort_nulls_applicable:!1});t.exColumnSchema.amname=e.amname,n((function(){return{columns:[]}}))}),(function(){n((function(){return{amname:a.oldState.amname}}))}))}))},controlProps:{allowClear:!0},readonly:t.isReadonly},{id:"fillfactor",label:(0,o.default)("Fill factor"),type:"int",group:(0,o.default)("Definition"),allowNull:!0},{id:"condeferrable",label:(0,o.default)("Deferrable?"),type:"switch",group:(0,o.default)("Definition"),readonly:t.isReadonly},{id:"condeferred",label:(0,o.default)("Deferred?"),type:"switch",group:(0,o.default)("Definition"),deps:["condeferrable"],disabled:function(e){return!e.condeferrable},readonly:t.isReadonly,depChange:function(e){if(!e.condeferrable)return{condeferred:!1}}},{id:"indconstraint",label:(0,o.default)("Constraint"),cell:"text",type:"multiline",mode:["create","edit","properties"],editable:!1,group:(0,o.default)("Definition"),readonly:t.isReadonly},{id:"columns",label:(0,o.default)("Columns/Expressions"),group:(0,o.default)("Columns"),type:"collection",mode:["create","edit","properties"],editable:!1,schema:this.exColumnSchema,headerSchema:this.exHeaderSchema,headerVisible:function(e){return t.isNew(e)},CustomControl:u.default,uniqueCol:["column"],canAdd:!1,canDelete:function(e){return t.isNew(e)},readonly:t.isReadonly,cell:function(){return{cell:"",controlProps:{formatter:{fromRaw:function(e){return i.default.map(e||[],"column").join(", ")}}},width:245}},deps:function(){var e=[];return t.inTable&&e.push(["columns"]),e},depChange:function(e,n,r,o){if(!t.inTable||e){var a=e.columns||[];if(t.inTable&&"columns"==n[0])if(o.type==s.SCHEMA_STATE_ACTIONS.DELETE_ROW){var l=i.default.get(o.oldState,o.path.concat(o.value));a=i.default.filter(a,(function(e){return e.local_column!=l.name}))}else if(o.type==s.SCHEMA_STATE_ACTIONS.SET_VALUE){var u=i.default.slice(o.path,0,-1),c=i.default.get(o.oldState,u).name,d=i.default.findIndex(a,(function(e){return e.local_column==c}));d>-1&&(a[d].local_column=i.default.get(r,u).name)}return{columns:a}}}},{id:"include",label:(0,o.default)("Include columns"),group:(0,o.default)("Columns"),type:function(){var t;return{type:"select",options:e.fieldOptions.columns,optionsReloadBasis:null!==(t=e.fieldOptions.columns)&&void 0!==t&&t.map?i.default.join(e.fieldOptions.columns.map((function(e){return e.label})),","):null,controlProps:{multiple:!0}}},editable:!1,canDelete:!0,canAdd:!0,mode:["properties","create","edit"],min_version:11e4,deps:["index"],readonly:function(){if(!t.isNew())return!0},disabled:function(e){return!(i.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return i.default.isUndefined(e.index)||""==e.index?{}:{include:[]}}}]}},{key:"validate",value:function(e,t){return i.default.isUndefined(e.columns)||i.default.isNull(e.columns)||e.columns.length<1?(t("columns",(0,o.default)("Please specify columns for exclusion constraint.")),!0):!!(this.isNew(e)&&e.autoindex&&(0,l.isEmptyString)(e.coveringindex))&&(t("coveringindex",(0,o.default)("Please specify covering index name.")),!0)}}]),n}(a.default);t.default=E},40175:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(68304),n(30489),n(12419),n(78011),n(69070),n(47941),n(82526),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeForeignKeySchema=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return new C({local_column:r?[]:function(){return(0,c.getNodeListByName)("column",e,t)},references:function(){return(0,c.getNodeAjaxOptions)("all_tables",n.Nodes.table,e,t,{cacheLevel:"server"},(function(e){return e.map((function(e){return{value:e.value,image:"icon-table",label:e.label,oid:e.oid}}))}))}},e,(function(r){return(0,c.getNodeAjaxOptions)("get_columns",n.Nodes.table,e,t,{urlParams:r,useCache:!1},(function(e){return e.map((function(e){return{value:e.name,image:"icon-column",label:e.name}}))}))}),o)},t.default=t.ForeignKeyColumnSchema=void 0,n(21249),n(68309),n(69826),n(69600),n(47042),n(89554),n(54747),n(92222),n(57327),n(34553);var o=f(n(91669)),a=f(n(89406)),i=f(n(96486)),l=n(76055),s=n(52237),u=f(n(35971)),c=n(77077),d=f(n(54851));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){v(n,e);var t=w(n);function n(e,r){var o;return y(this,n),(o=t.call(this,{local_column:void 0,references:void 0,referenced:void 0})).fieldOptions=e,o.getColumns=r,o}return g(n,[{key:"changeColumnOptions",value:function(e){this.fieldOptions.local_column=e}},{key:"addDisabled",value:function(e){return!(e.local_column&&e.references&&e.referenced)}},{key:"getNewData",value:function(e){var t,n=null===(t=i.default.find(this.refTables,(function(t){return t.value==e.references})))||void 0===t?void 0:t.label;return{local_column:e.local_column,referenced:e.referenced,references:e.references,references_table_name:n}}},{key:"baseFields",get:function(){var e,t,n=this,r=this;return[{id:"local_column",label:(0,o.default)("Local column"),type:"select",editable:!1,options:this.fieldOptions.local_column,optionsReloadBasis:null!==(e=this.fieldOptions.local_column)&&void 0!==e&&e.map?i.default.join(this.fieldOptions.local_column.map((function(e){return e.label})),","):null},{id:"references",label:(0,o.default)("References"),type:"select",editable:!1,options:this.fieldOptions.references,optionsReloadBasis:null!==(t=this.fieldOptions.references)&&void 0!==t&&t.map?i.default.join(this.fieldOptions.references.map((function(e){return e.label})),","):null,optionsLoaded:function(e){return r.refTables=e}},{id:"referenced",label:(0,o.default)("Referencing"),editable:!1,deps:["references"],type:function(e){return{type:"select",options:e.references?function(){return n.getColumns({tid:e.references})}:[],optionsReloadBasis:e.references}}}]}}]),n}(a.default),x=function(e){v(n,e);var t=w(n);function n(){return y(this,n),t.call(this,{local_column:void 0,referenced:void 0,references:void 0,references_table_name:void 0})}return g(n,[{key:"baseFields",get:function(){return[{id:"local_column",label:(0,o.default)("Local"),type:"text",editable:!1,cell:""},{id:"referenced",label:(0,o.default)("Referenced"),type:"text",editable:!1,cell:""},{id:"references_table_name",label:(0,o.default)("Referenced Table"),type:"text",editable:!1,cell:""}]}}]),n}(a.default);t.ForeignKeyColumnSchema=x;var C=function(e){v(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return y(this,n),(e=t.call(this,b({name:void 0,reftab:void 0,oid:void 0,is_sys_obj:void 0,comment:void 0,condeferrable:void 0,condeferred:void 0,confmatchtype:!1,convalidated:void 0,columns:void 0,confupdtype:"a",confdeltype:"a",autoindex:!0,coveringindex:void 0,hasindex:void 0},i))).nodeInfo=o,e.fkHeaderSchema=new P(r,a),e.fkHeaderSchema.fkObj=S(e),e.fkColumnSchema=new x,e.inErd=l,e}return g(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"inTable",get:function(){return!!(this.top&&this.top instanceof d.default)}},{key:"changeColumnOptions",value:function(e){this.fkHeaderSchema.changeColumnOptions(e)}},{key:"isReadonly",value:function(e){return this.top?!i.default.isUndefined(e.oid):!this.isNew(e)}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",cell:"text",mode:["properties","create","edit"],editable:!0},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"is_sys_obj",label:(0,o.default)("System foreign key?"),type:"switch",mode:["properties"]},{id:"comment",label:(0,o.default)("Comment"),cell:"text",type:"multiline",mode:["properties","create","edit"],deps:["name"],disabled:function(e){return!!(0,l.isEmptyString)(e.name)},depChange:function(e){if((0,l.isEmptyString)(e.name))return{comment:""}}},{id:"condeferrable",label:(0,o.default)("Deferrable?"),type:"switch",group:(0,o.default)("Definition"),readonly:t.isReadonly},{id:"condeferred",label:(0,o.default)("Deferred?"),type:"switch",group:(0,o.default)("Definition"),deps:["condeferrable"],disabled:function(e){return!e.condeferrable},readonly:t.isReadonly,depChange:function(e){if(!e.condeferrable)return{condeferred:!1}}},{id:"confmatchtype",label:(0,o.default)("Match type"),type:"toggle",group:(0,o.default)("Definition"),options:[{label:"FULL",value:!0},{label:"SIMPLE",value:!1}],readonly:t.isReadonly},{id:"convalidated",label:(0,o.default)("Validated?"),type:"switch",group:(0,o.default)("Definition"),readonly:function(e){if(!t.isNew(e)){return(t.inTable&&t.top?i.default.find(t.top.origData.foreign_key,(function(t){return t.cid==e.cid})):t.origData).convalidated}return!1}},{id:"autoindex",label:(0,o.default)("Auto FK index?"),type:"switch",group:(0,o.default)("Definition"),deps:["name","hasindex"],readonly:function(e){return!t.isNew(e)||!!e.hasindex},depChange:function(n,r,o,a){if(!t.isNew(n))return{};if(t.inTable&&!e.inErd&&t.isNew(n)&&t.top.isNew())return{autoindex:!1,coveringindex:""};var s;t.inTable?s="fki_"+i.default.get(a.oldState,i.default.slice(a.path,0,-1)).name:s="fki_"+a.oldState.name;return n.hasindex?{}:n.autoindex?!n.autoindex||(0,l.isEmptyString)(n.name)||!(0,l.isEmptyString)(n.coveringindex)&&s!=n.coveringindex?void 0:{coveringindex:"fki_"+n.name}:{coveringindex:""}}},{id:"coveringindex",label:(0,o.default)("Covering index"),type:"text",mode:["properties","create","edit"],group:(0,o.default)("Definition"),deps:["autoindex","hasindex"],disabled:function(e){return!e.autoindex&&!e.hasindex},readonly:this.isReadonly},{id:"references_table_name",label:(0,o.default)("Referenced Table"),type:"text",group:(0,o.default)("Columns"),editable:!1,visible:!1,deps:["columns"],cell:function(e){return{cell:"",controlProps:{formatter:{fromRaw:function(){var t;return(null===(t=e.columns)||void 0===t?void 0:t.length)>0?i.default.join(i.default.map(e.columns,"references_table_name"),","):""}}}}}},{id:"columns",label:(0,o.default)("Columns"),group:(0,o.default)("Columns"),type:"collection",mode:["create","edit","properties"],editable:!1,schema:this.fkColumnSchema,headerSchema:this.fkHeaderSchema,headerVisible:function(e){return t.isNew(e)},CustomControl:u.default,uniqueCol:["local_column","references","referenced"],canAdd:!1,canDelete:function(e){return t.isNew(e)},readonly:t.isReadonly,cell:function(){return{cell:"",controlProps:{formatter:{fromRaw:function(e){var t=[],n=[];return(null==e?void 0:e.length)>0?(e.forEach((function(e){t.push(e.local_column),n.push(e.referenced)})),"("+t.join(", ")+") -> ("+n.join(", ")+")"):""}}}}},deps:function(){var e=[];return t.inTable&&e.push(["columns"]),e},depChange:function(e,n,r,o){if(!t.inTable||e){var a=e.columns||[];if(t.inTable&&"columns"==n[0])if(o.type==s.SCHEMA_STATE_ACTIONS.DELETE_ROW){var l=i.default.get(o.oldState,o.path.concat(o.value));a=i.default.filter(a,(function(e){return e.local_column!=l.name}))}else if(o.type==s.SCHEMA_STATE_ACTIONS.SET_VALUE){var u=i.default.slice(o.path,0,-1),c=i.default.get(o.oldState,u).name,d=i.default.findIndex(a,(function(e){return e.local_column==c}));d>-1&&(a[d].local_column=i.default.get(r,u).name)}return{columns:a}}}},{id:"confupdtype",label:(0,o.default)("On update"),type:"select",group:(0,o.default)("Action"),mode:["edit","create"],controlProps:{allowClear:!1},options:[{label:"NO ACTION",value:"a"},{label:"RESTRICT",value:"r"},{label:"CASCADE",value:"c"},{label:"SET NULL",value:"n"},{label:"SET DEFAULT",value:"d"}],readonly:t.isReadonly},{id:"confdeltype",label:(0,o.default)("On delete"),type:"select",group:(0,o.default)("Action"),mode:["edit","create"],select2:{allowClear:!1},options:[{label:"NO ACTION",value:"a"},{label:"RESTRICT",value:"r"},{label:"CASCADE",value:"c"},{label:"SET NULL",value:"n"},{label:"SET DEFAULT",value:"d"}],readonly:t.isReadonly}]}},{key:"validate",value:function(e,t){return i.default.isUndefined(e.columns)||i.default.isNull(e.columns)||e.columns.length<1?(t("columns",(0,o.default)("Please specify columns for Foreign key.")),!0):!!(this.isNew(e)&&e.autoindex&&(0,l.isEmptyString)(e.coveringindex))&&(t("coveringindex",(0,o.default)("Please specify covering index name.")),!0)}}]),n}(a.default);t.default=C},29458:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(92222),n(57327),n(47042),n(34553),n(69600),n(21249),n(82772),n(68304),n(30489);var o=c(n(91669)),a=c(n(89406)),i=c(n(96486)),l=n(76055),s=n(52237),u=c(n(54851));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,n,r,a=b(c);function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return d(this,c),(e=a.call(this,{name:void 0,oid:void 0,is_sys_obj:void 0,comment:void 0,spcname:void 0,index:void 0,fillfactor:void 0,condeferrable:void 0,condeferred:void 0,columns:[],include:[]})).fieldOptions=t,e.nodeInfo=n,e}return t=c,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"inTable",get:function(){return!!(this.top&&this.top instanceof u.default)}},{key:"changeColumnOptions",value:function(e){this.fieldOptions.columns=e}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",mode:["properties","create","edit"],editable:!0,cell:"text"},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"],editable:!1},{id:"is_sys_obj",label:(0,o.default)("System primary key?"),cell:"switch",type:"switch",mode:["properties"]},{id:"comment",label:(0,o.default)("Comment"),cell:"multiline",type:"multiline",mode:["properties","create","edit"],deps:["name"],disabled:function(e){return!!(0,l.isEmptyString)(e.name)},depChange:function(e){if((0,l.isEmptyString)(e.name))return{comment:""}}},{id:"columns",label:(0,o.default)("Columns"),deps:function(){var e=["index"];return t.inTable&&e.push(["columns"]),e},depChange:function(e,n,r,o){if(!t.inTable||e){var a=e.columns||[];if(t.inTable&&"columns"==n[0])if(o.type==s.SCHEMA_STATE_ACTIONS.DELETE_ROW){var l=i.default.get(o.oldState,o.path.concat(o.value));a=i.default.filter(a,(function(e){return e.column!=l.name}))}else if(o.type==s.SCHEMA_STATE_ACTIONS.SET_VALUE){var u=i.default.slice(o.path,0,-1),c=i.default.get(o.oldState,u).name,d=i.default.findIndex(a,(function(e){return e.column==c}));d>-1&&(a[d].column=i.default.get(r,u).name)}return{columns:a}}},cell:function(){return{cell:"",controlProps:{formatter:{fromRaw:function(e){return i.default.join((e||[]).map((function(e){return e.column})))}}}}},type:function(){var e;return{type:"select",optionsReloadBasis:null!==(e=t.fieldOptions.columns)&&void 0!==e&&e.map?i.default.join(t.fieldOptions.columns.map((function(e){return e.label})),","):null,options:t.fieldOptions.columns,controlProps:{allowClear:!1,multiple:!0,formatter:{fromRaw:function(e,t){var n=(e||[]).map((function(e){return e.column}));return i.default.filter(t,(function(e){return n.indexOf(e.value)>-1}))},toRaw:function(e){return(e||[]).map((function(e){return{column:e.value}}))}}}}},group:(0,o.default)("Definition"),editable:!1,readonly:function(e){if(!t.isNew(e))return!0},disabled:function(e){return!(i.default.isUndefined(e.index)||""==e.index)}},{id:"include",label:(0,o.default)("Include columns"),type:function(){return{type:"select",options:e.fieldOptions.columns,controlProps:{multiple:!0}}},group:(0,o.default)("Definition"),editable:!1,canDelete:!0,canAdd:!0,mode:["properties","create","edit"],visible:function(){return this.getServerVersion()>=11e4},deps:["index"],readonly:function(e){if(!t.isNew(e))return!0},disabled:function(e){return!(i.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return i.default.isUndefined(e.index)||""==e.index?{}:{include:[]}}},{id:"spcname",label:(0,o.default)("Tablespace"),type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.spcname,deps:["index"],controlProps:{allowClear:!1},disabled:function(e){return!(i.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return i.default.isUndefined(e.index)||""==e.index?{}:{spcname:""}}},{id:"index",label:(0,o.default)("Index"),mode:["create"],type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.index,controlProps:{allowClear:!0},readonly:function(){if(!t.isNew())return!0},visible:function(){return!t.inTable}},{id:"fillfactor",label:(0,o.default)("Fill factor"),deps:["index"],type:"int",group:(0,o.default)("Definition"),min:10,max:100,disabled:function(e){return!(i.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return i.default.isUndefined(e.index)||""==e.index?{}:{fillfactor:null}}},{id:"condeferrable",label:(0,o.default)("Deferrable?"),type:"switch",group:(0,o.default)("Definition"),deps:["index"],readonly:function(e){return!t.isNew(e)},disabled:function(e){return!(i.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return i.default.isUndefined(e.index)||""==e.index?{}:{condeferrable:!1}}},{id:"condeferred",label:(0,o.default)("Deferred?"),type:"switch",group:(0,o.default)("Definition"),deps:["condeferrable"],readonly:function(e){return!t.isNew(e)},disabled:function(e){return!(i.default.isUndefined(e.index)||""==e.index)||!e.condeferrable},depChange:function(e){return e.condeferrable&&(i.default.isUndefined(e.index)||""==e.index)?{}:{condeferred:!1}}}]}},{key:"validate",value:function(e,t){return!(!(0,l.isEmptyString)(e.index)||!(i.default.isUndefined(e.columns)||i.default.isNull(e.columns)||e.columns.length<1)||(t("columns",(0,o.default)("Please specify columns for %s.",(0,o.default)("Primary key"))),0))}}])&&f(t.prototype,n),r&&f(t,r),c}(a.default);t.default=h},42657:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(92222),n(57327),n(47042),n(34553),n(69600),n(21249),n(82772),n(68304),n(30489);var o=c(n(91669)),a=c(n(89406)),i=c(n(96486)),l=n(76055),s=n(52237),u=c(n(54851));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,n,r,a=b(c);function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return d(this,c),(e=a.call(this,{name:void 0,oid:void 0,is_sys_obj:void 0,comment:void 0,spcname:void 0,index:void 0,fillfactor:void 0,condeferrable:void 0,condeferred:void 0,columns:[],include:[]})).fieldOptions=t,e.nodeInfo=n,e}return t=c,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"inTable",get:function(){return!!(this.top&&this.top instanceof u.default)}},{key:"changeColumnOptions",value:function(e){this.fieldOptions.columns=e}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",mode:["properties","create","edit"],editable:!0,cell:"text"},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"],editable:!1},{id:"is_sys_obj",label:(0,o.default)("System primary key?"),cell:"switch",type:"switch",mode:["properties"]},{id:"comment",label:(0,o.default)("Comment"),cell:"multiline",type:"multiline",mode:["properties","create","edit"],deps:["name"],disabled:function(e){return!!(0,l.isEmptyString)(e.name)},depChange:function(e){if((0,l.isEmptyString)(e.name))return{comment:""}}},{id:"columns",label:(0,o.default)("Columns"),deps:function(){var e=["index"];return t.inTable&&e.push(["columns"]),e},depChange:function(e,n,r,o){if(!t.inTable||e){var a=e.columns||[];if(t.inTable&&"columns"==n[0])if(o.type==s.SCHEMA_STATE_ACTIONS.DELETE_ROW){var l=i.default.get(o.oldState,o.path.concat(o.value));a=i.default.filter(a,(function(e){return e.column!=l.name}))}else if(o.type==s.SCHEMA_STATE_ACTIONS.SET_VALUE){var u=i.default.slice(o.path,0,-1),c=i.default.get(o.oldState,u).name,d=i.default.findIndex(a,(function(e){return e.column==c}));d>-1&&(a[d].column=i.default.get(r,u).name)}return{columns:a}}},cell:function(){return{cell:"",controlProps:{formatter:{fromRaw:function(e){return i.default.join((e||[]).map((function(e){return e.column})))}}}}},type:function(){var e;return{type:"select",optionsReloadBasis:null!==(e=t.fieldOptions.columns)&&void 0!==e&&e.map?i.default.join(t.fieldOptions.columns.map((function(e){return e.label})),","):null,options:t.fieldOptions.columns,controlProps:{allowClear:!1,multiple:!0,formatter:{fromRaw:function(e,t){var n=(e||[]).map((function(e){return e.column}));return i.default.filter(t,(function(e){return n.indexOf(e.value)>-1}))},toRaw:function(e){return(e||[]).map((function(e){return{column:e.value}}))}}}}},group:(0,o.default)("Definition"),editable:!1,readonly:function(e){if(!t.isNew(e))return!0},disabled:function(e){return!(i.default.isUndefined(e.index)||""==e.index)}},{id:"include",label:(0,o.default)("Include columns"),type:function(){return{type:"select",options:e.fieldOptions.columns,controlProps:{multiple:!0}}},group:(0,o.default)("Definition"),editable:!1,canDelete:!0,canAdd:!0,mode:["properties","create","edit"],visible:function(){return!i.default.isUndefined(this.nodeInfo)&&!i.default.isUndefined(this.nodeInfo.server)&&!i.default.isUndefined(this.nodeInfo.server.version)&&this.nodeInfo.server.version>=11e4},deps:["index"],readonly:function(e){if(!t.isNew(e))return!0},disabled:function(e){return!(i.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return i.default.isUndefined(e.index)||""==e.index?{}:{include:[]}}},{id:"spcname",label:(0,o.default)("Tablespace"),type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.spcname,deps:["index"],controlProps:{allowClear:!1},disabled:function(e){return!(i.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return i.default.isUndefined(e.index)||""==e.index?{}:{spcname:""}}},{id:"index",label:(0,o.default)("Index"),mode:["create"],type:"select",group:(0,o.default)("Definition"),options:this.fieldOptions.index,controlProps:{allowClear:!0},readonly:function(){if(!t.isNew())return!0},visible:function(){return!t.inTable}},{id:"fillfactor",label:(0,o.default)("Fill factor"),deps:["index"],type:"int",group:(0,o.default)("Definition"),disabled:function(e){return!(i.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return i.default.isUndefined(e.index)||""==e.index?{}:{fillfactor:null}}},{id:"condeferrable",label:(0,o.default)("Deferrable?"),type:"switch",group:(0,o.default)("Definition"),deps:["index"],readonly:function(e){return!t.isNew(e)},disabled:function(e){return!(i.default.isUndefined(e.index)||""==e.index)},depChange:function(e){return i.default.isUndefined(e.index)||""==e.index?{}:{condeferrable:!1}}},{id:"condeferred",label:(0,o.default)("Deferred?"),type:"switch",group:(0,o.default)("Definition"),deps:["condeferrable"],readonly:function(e){return!t.isNew(e)},disabled:function(e){return!(i.default.isUndefined(e.index)||""==e.index)||!e.condeferrable},depChange:function(e){return e.condeferrable&&(i.default.isUndefined(e.index)||""==e.index)?{}:{condeferred:!1}}}]}},{key:"validate",value:function(e,t){return!(!(0,l.isEmptyString)(e.index)||!(i.default.isUndefined(e.columns)||i.default.isNull(e.columns)||e.columns.length<1)||(t("columns",(0,o.default)("Please specify columns for %s.",(0,o.default)("Unique constraint"))),0))}}])&&f(t.prototype,n),r&&f(t,r),c}(a.default);t.default=h},43893:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getColumnSchema=function(e,t,n){return new O({columnList:function(){return(0,i.getNodeListByName)("column",t,n,{})},collationList:function(){return(0,i.getNodeAjaxOptions)("get_collations",e,t,n,{jumpAfterNode:"schema"})},opClassList:function(){return(0,i.getNodeAjaxOptions)("get_op_class",e,t,n,{jumpAfterNode:"schema"})}},{node_info:t})},t.default=t.ColumnSchema=void 0,n(32564),n(40561),n(88674),n(41539),n(68304),n(30489);var o=c(n(91669)),a=c(n(89406)),i=n(77077),l=c(n(96486)),s=n(81922),u=n(76055);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){h(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return b(this,n),(e=t.call(this,f({name:null,oid:void 0,description:"",is_sys_obj:!1,colname:void 0,collspcname:void 0,op_class:void 0,sort_order:!1,nulls:!1,is_sort_nulls_applicable:!0},a))).fieldOptions=f({columnList:[],collationList:[],opClassList:[]},r),e.node_info=f({},o.node_info),e.op_class_types=[],e}return y(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"inSchemaWithModelCheck",value:function(e){return!this.node_info||!("schema"in this.node_info)||!this.isNew(e)}},{key:"setOpClassTypes",value:function(e){if(!e||l.default.isArray(e)&&0==e.length)return this.op_class_types;0==this.op_class_types.length&&(this.op_class_types=e)}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"colname",label:(0,o.default)("Column"),type:"select",cell:"select",noEmpty:!0,disabled:function(){return S(t.node_info)},editable:function(e){return!t.inSchemaWithModelCheck(e)},options:t.fieldOptions.columnList,node:"column"},{id:"collspcname",label:(0,o.default)("Collation"),type:"select",cell:"select",disabled:function(){return S(t.node_info)},editable:function(e){return!t.inSchemaWithModelCheck(e)},options:t.fieldOptions.collationList,node:"index",url_jump_after_node:"schema"},{id:"op_class",label:(0,o.default)("Operator class"),tags:!0,type:"select",cell:function(){return{cell:"select",options:t.fieldOptions.opClassList,optionsLoaded:function(e){t.setOpClassTypes(e)},controlProps:{allowClear:!0,filter:function(n){var r,o,a,i=null!==(r=t._top)&&void 0!==r&&r._sessData?null===(o=t._top)||void 0===o?void 0:o._sessData.amname:null===(a=t._top)||void 0===a?void 0:a._origData.amname;return l.default.isUndefined(i)||l.default.each(e.op_class_types,(function(e,t){i!==t||(n=e)})),n}}}},editable:function(e){return!t.inSchemaWithModelCheck(e)},node:"index",url_jump_after_node:"schema",deps:["amname"]},{id:"sort_order",label:(0,o.default)("Sort order"),type:"select",cell:"select",options:[{label:"ASC",value:!1},{label:"DESC",value:!0}],width:110,disableResizing:!0,controlProps:{allowClear:!1},depChange:function(e,t,n,r){(0,u.isEmptyString)(n.amname)||"btree"===n.amname?1==e.sort_order&&0==r.oldState.sort_order&&setTimeout((function(){e.nulls=!0}),10):e.is_sort_nulls_applicable=!1},editable:function(e){var n=t._top;return!t.inSchemaWithModelCheck(e)&&(n._sessData&&"btree"===n._sessData.amname?(e.is_sort_nulls_applicable=!0,!0):(e.is_sort_nulls_applicable=!1,!1))},deps:["amname"]},{id:"nulls",label:(0,o.default)("NULLs"),editable:function(e){var n=t._top;return!t.inSchemaWithModelCheck(e)&&(n._sessData&&"btree"===n._sessData.amname?(e.is_sort_nulls_applicable=!0,!0):(e.is_sort_nulls_applicable=!1,!1))},deps:["amname","sort_order"],type:"select",cell:"select",options:[{label:"FIRST",value:!0},{label:"LAST",value:!1}],controlProps:{allowClear:!1},width:110,disableResizing:!0}]}}]),n}(a.default);function S(e){return!(!e||!("catalog"in e))}t.ColumnSchema=O;var j=function(e){h(n,e);var t=v(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;return b(this,n),(r=t.call(this,f({name:void 0,oid:void 0,description:"",is_sys_obj:!1,nspname:void 0,tabname:void 0,spcname:void 0,amname:void 0,columns:[]},i))).fieldOptions=f({tablespaceList:[],amnameList:[],columnList:[]},o),r.node_info=f({},a.node_info),r.getColumnSchema=e,r}return y(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",noEmpty:!0,disabled:function(){return S(e.node_info)}},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"int",readonly:!0,mode:["properties"]},{id:"spcname",label:(0,o.default)("Tablespace"),cell:"string",node:"tablespace",mode:["properties","create","edit"],disabled:function(){return S(e.node_info)},type:"select",options:e.fieldOptions.tablespaceList,controlProps:{allowClear:!0}},{id:"amname",label:(0,o.default)("Access Method"),cell:"string",mode:["properties","create","edit"],noEmpty:!0,disabled:function(){return S(e.node_info)},readonly:function(t){return!e.isNew(t)},group:(0,o.default)("Definition"),type:function(){return{type:"select",options:e.fieldOptions.amnameList,optionsLoaded:function(t){e.fieldOptions.amnameList=t},controlProps:{allowClear:!0,filter:function(e){var t=[];return e&&l.default.isArray(e)&&l.default.each(e,(function(e){""!=e.label&&t.push({label:e.label,value:e.value,data:e})})),t}}}},deferredDepChange:function(e,t,n,r){return e.amname!=r.oldState.amname?new Promise((function(t){(0,s.pgAlertify)().confirm((0,o.default)("Changing access method will clear columns collection"),(function(){!function(t){t((function(){return e.columns.splice(0,e.columns.length),{columns:e.columns}}))}(t)}),(function(){t((function(){return e.amname=r.oldState.amname,{amname:e.amname}}))}))})):Promise.resolve((function(){}))}},{id:"include",label:(0,o.default)("Include columns"),group:(0,o.default)("Definition"),editable:!1,canDelete:!0,canAdd:!0,mode:["properties"],disabled:function(){return S(e.node_info)},readonly:function(t){return!e.isNew(t)},type:function(){return{type:"select",options:e.fieldOptions.columnList,optionsLoaded:function(t){e.fieldOptions.columnList=t},controlProps:{allowClear:!1,multiple:!0,placeholder:(0,o.default)("Select the column(s)"),width:"style",filter:function(e){var t=[];return e&&l.default.isArray(e)&&l.default.each(e,(function(e){""!=e.label&&t.push({label:e.label,value:e.value,image:"icon-column"})})),t}}}},visible:function(){return!l.default.isUndefined(this.node_info)&&!l.default.isUndefined(this.node_info.server)&&!l.default.isUndefined(this.node_info.server.version)&&this.node_info.server.version>=11e4},node:"column"},{id:"fillfactor",label:(0,o.default)("Fill factor"),cell:"string",type:"int",disabled:function(){return S(e.node_info)},mode:["create","edit","properties"],min:10,max:100,group:(0,o.default)("Definition")},{id:"indisunique",label:(0,o.default)("Unique?"),cell:"string",type:"switch",disabled:function(){return S(e.node_info)},readonly:function(t){return!e.isNew(t)},group:(0,o.default)("Definition")},{id:"indisclustered",label:(0,o.default)("Clustered?"),cell:"string",type:"switch",disabled:function(){return S(e.node_info)},group:(0,o.default)("Definition")},{id:"indisvalid",label:(0,o.default)("Valid?"),cell:"string",type:"switch",mode:["properties"],group:(0,o.default)("Definition")},{id:"indisprimary",label:(0,o.default)("Primary?"),cell:"string",type:"switch",mode:["properties"],group:(0,o.default)("Definition")},{id:"is_sys_idx",label:(0,o.default)("System index?"),cell:"string",type:"switch",mode:["properties"]},{id:"isconcurrent",label:(0,o.default)("Concurrent build?"),cell:"string",type:"switch",disabled:function(){return S(e.node_info)},readonly:function(t){return!e.isNew(t)},mode:["create"],group:(0,o.default)("Definition")},{id:"indconstraint",label:(0,o.default)("Constraint"),cell:"string",type:"sql",controlProps:{className:["custom_height_css_class"]},disabled:function(){return S(e.node_info)},readonly:function(t){return!e.isNew(t)},mode:["create","edit"],control:"sql-field",visible:!0,group:(0,o.default)("Definition")},{id:"columns",label:(0,o.default)("Columns"),type:"collection",deps:["amname"],group:(0,o.default)("Definition"),schema:e.getColumnSchema(),mode:["edit","create","properties"],canAdd:function(t){return e.isNew(t)},canEdit:!1,canDelete:function(t){return e.isNew(t)},uniqueCol:["colname"],columns:["colname","op_class","sort_order","nulls","collspcname"]},{id:"include",label:(0,o.default)("Include columns"),type:function(){return{type:"select",options:e.fieldOptions.columnList,optionsLoaded:function(t){e.fieldOptions.columnList=t},controlProps:{allowClear:!1,multiple:!0,placeholder:(0,o.default)("Select the column(s)"),width:"style",filter:function(e){var t=[];return e&&l.default.isArray(e)&&l.default.each(e,(function(e){""!=e.label&&t.push({label:e.label,value:e.value,image:"icon-column"})})),t}}}},group:(0,o.default)("Definition"),editable:!1,canDelete:!0,canAdd:!0,mode:["edit","create"],disabled:function(){return S(e.node_info)},readonly:function(t){return!e.isNew(t)},visible:function(){return!l.default.isUndefined(this.node_info)&&!l.default.isUndefined(this.node_info.server)&&!l.default.isUndefined(this.node_info.server.version)&&this.node_info.server.version>=11e4},node:"column"},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:function(){return S(e.node_info)}}]}},{key:"validate",value:function(e,t){var n=e.columns;return l.default.isArray(n)&&0==n.length?(t("columns",(0,o.default)("You must specify at least one column.")),!0):null}}]),n}(a.default);t.default=j},52874:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(68304),n(30489),n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(4129),n(78783),n(66992),n(33948),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodePartitionTableSchema=function(e,t,n){var r=function(){return(0,d.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},o=n.Nodes.partition;return new x({relowner:function(){return(0,d.getNodeListByName)("role",e,t)},schema:function(){return(0,d.getNodeListByName)("schema",e,t,{cacheLevel:"database",cacheNode:"database"},(function(e){return!e||!e.label.match(/^pg_/)}))},spcname:r,coll_inherits:function(){return(0,d.getNodeAjaxOptions)("get_inherits",o,e,t)},typname:function(){return(0,d.getNodeAjaxOptions)("get_oftype",o,e,t)},like_relation:function(){return(0,d.getNodeAjaxOptions)("get_relations",o,e,t)}},e,{constraints:function(){return new s.ConstraintsSchema(e,(function(){return(0,f.getNodeForeignKeySchema)(e,t,n,!0)}),(function(){return(0,p.getNodeExclusionConstraintSchema)(e,t,n,!0)}),{spcname:r})}},(function(n){return(0,c.getNodePrivilegeRoleSchema)(o,e,t,n)}),(function(n){return(0,d.getNodeAjaxOptions)("get_columns",o,e,t,{urlParams:n,useCache:!1})}),(function(){return(0,d.getNodeAjaxOptions)("get_collations",n.Nodes.collation,e,t)}),(function(){return(0,d.getNodeAjaxOptions)("get_op_class",n.Nodes.table,e,t)}),(function(){return(0,d.getNodeAjaxOptions)("get_attach_tables",o,e,t,{useCache:!1,customGenerateUrl:function(e,t){return b.sprintf("table/%s/%s/%s/%s/%s/%s",encodeURIComponent(t),encodeURIComponent(e.server_group._id),encodeURIComponent(e.server._id),encodeURIComponent(e.database._id),encodeURIComponent(e.partition.schema_id),encodeURIComponent(e.partition._id))}})}),{relowner:n.serverInfo[e.server._id].user.name,schema:e.schema._label})},t.default=void 0,n(4723),n(74916),n(68309),n(21249),n(88674),n(41539),n(5212),n(69600),n(82772);var o=y(n(91669)),a=y(n(89406)),i=y(n(67091)),l=y(n(96486)),s=n(54851),u=n(71944),c=n(40345),d=n(77077),f=n(40175),p=n(81873),b=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(44092));function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function y(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(s,e);var t,n,r,a=S(s);function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0,f=arguments.length>8?arguments[8]:void 0;return _(this,s),(e=a.call(this,g({name:void 0,oid:void 0,spcoid:void 0,spcname:void 0,relowner:void 0,relacl:void 0,relhasoids:void 0,relhassubclass:void 0,reltuples:void 0,description:void 0,conname:void 0,conkey:void 0,isrepl:void 0,triggercount:void 0,relpersistence:void 0,fillfactor:void 0,reloftype:void 0,typname:void 0,labels:void 0,providers:void 0,is_sys_table:void 0,coll_inherits:[],hastoasttable:!0,toast_autovacuum_enabled:"x",autovacuum_enabled:"x",primary_key:[],partitions:[],partition_type:"range",is_partitioned:!1,partition_value:void 0},f))).fieldOptions=t,e.schemas=r,e.getPrivilegeRoleSchema=o,e.nodeInfo=n,e.getColumns=i,e.getAttachTables=d,e.partitionKeysObj=new u.PartitionKeysSchema([],l,c),e.partitionsObj=new u.PartitionsSchema(e.nodeInfo,l,c,d),e.constraintsObj=e.schemas.constraints(),e}return t=s,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"initialise",value:function(e){this.changeColumnOptions(e.columns)}},{key:"inSchemaWithModelCheck",value:function(e){return!(!this.nodeInfo||!("schema"in this.nodeInfo)||this.isNew(e))}},{key:"isPartitioned",value:function(e){return!!e.is_partitioned||this.inCatalog()}},{key:"changeColumnOptions",value:function(e){var t=(e||[]).map((function(e){return{label:e.name,value:e.name,image:"icon-column"}}));this.constraintsObj.changeColumnOptions(t),this.partitionKeysObj.changeColumnOptions(t),this.partitionsObj.changeColumnOptions(t)}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",noEmpty:!0,mode:["properties","create","edit"],readonly:this.inCatalog},{id:"oid",label:(0,o.default)("OID"),type:"text",mode:["properties"]},{id:"relowner",label:(0,o.default)("Owner"),type:"select",options:this.fieldOptions.relowner,noEmpty:!0,mode:["properties","create","edit"],controlProps:{allowClear:!1},readonly:this.inCatalog},{id:"schema",label:(0,o.default)("Schema"),type:"select",options:this.fieldOptions.schema,noEmpty:!0,mode:["create","edit"],readonly:this.inCatalog},{id:"spcname",label:(0,o.default)("Tablespace"),type:"select",options:this.fieldOptions.spcname,mode:["properties","create","edit"],deps:["is_partitioned"],readonly:this.inCatalog},{id:"partition",type:"group",label:(0,o.default)("Partitions"),mode:["edit","create"],min_version:1e5,visible:function(t){return!(!e.isNew(t)&&!t.is_partitioned)}},{id:"is_partitioned",label:(0,o.default)("Partitioned table?"),cell:"switch",type:"switch",mode:["properties","create","edit"],min_version:1e5,readonly:function(t){return!e.isNew(t)}},{id:"is_sys_table",label:(0,o.default)("System table?"),cell:"switch",type:"switch",mode:["properties"],disabled:this.inCatalog},{id:"description",label:(0,o.default)("Comment"),type:"multiline",mode:["properties","create","edit"],disabled:this.inCatalog},{id:"advanced",label:(0,o.default)("Advanced"),type:"group",visible:!0},{id:"coll_inherits",label:(0,o.default)("Inherited from table(s)"),type:"text",group:(0,o.default)("Advanced"),mode:["properties"]},{id:"inherited_tables_cnt",label:(0,o.default)("Inherited tables count"),type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog},{type:"nested-tab",group:(0,o.default)("Constraints"),mode:["edit","create"],schema:e.constraintsObj},{id:"fillfactor",label:(0,o.default)("Fill factor"),type:"int",mode:["create","edit"],min:10,max:100,group:"advanced",disabled:e.isPartitioned},{id:"toast_tuple_target",label:(0,o.default)("Toast tuple target"),type:"int",mode:["create","edit"],min:128,min_version:11e4,group:"advanced",disabled:e.isPartitioned},{id:"parallel_workers",label:(0,o.default)("Parallel workers"),type:"int",mode:["create","edit"],group:"advanced",min_version:90600,disabled:e.isPartitioned},{id:"relhasoids",label:(0,o.default)("Has OIDs?"),cell:"switch",type:"switch",mode:["properties","create","edit"],group:"advanced",readonly:!0,disabled:function(){return e.getServerVersion()>=12e4||e.inCatalog()}},{id:"relpersistence",label:(0,o.default)("Unlogged?"),cell:"switch",type:"switch",mode:["properties","create","edit"],disabled:e.inSchemaWithModelCheck,group:"advanced"},{id:"conname",label:(0,o.default)("Primary key"),cell:"text",type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog},{id:"reltuples",label:(0,o.default)("Rows (estimated)"),cell:"text",type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog},{id:"rows_cnt",label:(0,o.default)("Rows (counted)"),cell:"text",type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog,formatter:{fromRaw:function(){return 0},toRaw:function(e){return e}}},{id:"relhassubclass",label:(0,o.default)("Is inherited?"),cell:"switch",type:"switch",mode:["properties"],group:"advanced",disabled:this.inCatalog},{id:"partition_type",label:(0,o.default)("Partition Type"),editable:!1,type:"select",controlProps:{allowClear:!1},group:"partition",deps:["is_partitioned"],options:function(){var t=[{label:(0,o.default)("Range"),value:"range"},{label:(0,o.default)("List"),value:"list"}];return e.getServerVersion()>=11e4&&t.push({label:(0,o.default)("Hash"),value:"hash"}),Promise.resolve(t)},mode:["create"],min_version:1e5,disabled:function(e){return!e.is_partitioned},readonly:function(t){return!e.isNew(t)}},{id:"partition_keys",label:(0,o.default)("Partition Keys"),schema:e.partitionKeysObj,editable:!0,type:"collection",group:"partition",mode:["create"],deps:["is_partitioned","partition_type","typname"],canEdit:!1,canDelete:!0,canAdd:function(t){return!(!e.isNew(t)||!t.is_partitioned)},canAddRow:function(e){var t,n=!1,r=1e3;return e.partition_type&&"list"==e.partition_type&&(r=1),(null===(t=e.columns)||void 0===t?void 0:t.length)>0&&(n=l.default.some(l.default.map(e.columns,"name"))),!e.partition_keys||e.partition_keys.length<r&&n},min_version:1e5,depChange:function(e,t,n,r){if(e.typname!=r.oldState.typname)return{partition_keys:[]}}},{id:"partition_scheme",label:(0,o.default)("Partition Scheme"),group:"partition",mode:["edit"],type:function(e){return{type:"note",text:e.partition_scheme||""}},min_version:1e5},{id:"partition_key_note",label:(0,o.default)("Partition Keys"),type:"note",group:"partition",mode:["create"],text:["<ul><li>",(0,o.default)("Partition table supports two types of keys:"),"</li><li>","<strong>",(0,o.default)("Column: "),"</strong>",(0,o.default)("User can select any column from the list of available columns."),"</li><li>","<strong>",(0,o.default)("Expression: "),"</strong>",(0,o.default)("User can specify expression to create partition key."),"</li><li>","<strong>",(0,o.default)("Example: "),"</strong>",(0,o.default)("Let's say, we want to create a partition table based per year for the column 'saledate', having datatype 'date/timestamp', then we need to specify the expression as 'extract(YEAR from saledate)' as partition key."),"</li></ul>"].join(""),min_version:1e5},{id:"partitions",label:(0,o.default)("Partitions"),schema:this.partitionsObj,editable:!0,type:"collection",group:"partition",mode:["edit","create"],deps:["is_partitioned","partition_type","typname"],depChange:function(t,n){if(["is_partitioned","partition_type","typname"].indexOf(n[0])>=0&&e.isNew(t))return{partitions:[]}},canEdit:!0,canDelete:!0,customDeleteTitle:(0,o.default)("Detach Partition"),customDeleteMsg:(0,o.default)("Are you sure you wish to detach this partition?"),columns:["is_attach","partition_name","is_default","values_from","values_to","values_in","values_modulus","values_remainder"],canAdd:function(e){return!!e.is_partitioned},min_version:1e5},{id:"partition_note",label:(0,o.default)("Partitions"),type:"note",group:"partition",mode:["create"],text:["<ul><li>","<strong>",(0,o.default)("Create a table: "),"</strong>",(0,o.default)("User can create multiple partitions while creating new partitioned table. Operation switch is disabled in this scenario."),"</li><li>","<strong>",(0,o.default)("Edit existing table: "),"</strong>",(0,o.default)("User can create/attach/detach multiple partitions. In attach operation user can select table from the list of suitable tables to be attached."),"</li><li>","<strong>",(0,o.default)("Default: "),"</strong>",(0,o.default)("The default partition can store rows that do not fall into any existing partition’s range or list."),"</li><li>","<strong>",(0,o.default)("From/To/In input: "),"</strong>",(0,o.default)("From/To/In input: Values for these fields must be quoted with single quote. For more than one partition key values must be comma(,) separated."),"</li><li>","<strong>",(0,o.default)("Example: From/To: "),"</strong>",(0,o.default)("Enabled for range partition. Consider partitioned table with multiple keys of type Integer, then values should be specified like '100','200'."),"</li><li>","<strong>",(0,o.default)("In: "),"</strong>",(0,o.default)("Enabled for list partition. Values must be comma(,) separated and quoted with single quote."),"</li><li>","<strong>",(0,o.default)("Modulus/Remainder: "),"</strong>",(0,o.default)("Enabled for hash partition."),"</li></ul>"].join(""),min_version:1e5},{id:"relacl_str",label:(0,o.default)("Privileges"),disabled:this.inCatalog,type:"text",mode:["properties"],group:(0,o.default)("Security")},{id:"relacl",label:(0,o.default)("Privileges"),type:"collection",group:(0,o.default)("Security"),schema:this.getPrivilegeRoleSchema(["a","r","w","d","D","x","t"]),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["grantee"]},{id:"seclabels",label:(0,o.default)("Security labels"),canEdit:!1,schema:new i.default,editable:!1,canAdd:!0,type:"collection",min_version:90100,mode:["edit","create"],group:(0,o.default)("Security"),canDelete:!0,control:"unique-col-collection"},{id:"vacuum_settings_str",label:(0,o.default)("Storage settings"),type:"multiline",group:"advanced",mode:["properties"]}]}},{key:"validate",value:function(e,t){return!(!e.is_partitioned||!this.isNew(e)||e.partition_keys&&!(e.partition_keys&&e.partition_keys.length<=0)||(t("partition_keys",(0,o.default)("Please specify at least one key for partitioned table.")),0))}}])&&w(t.prototype,n),r&&w(t,r),s}(a.default);t.default=x},55923:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(69600),n(68304),n(30489);var o=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,a=f(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return u(this,i),(e=a.call(this,l({name:void 0,policyowner:"public",event:"ALL",using:void 0,using_orig:void 0,withcheck:void 0,withcheck_orig:void 0,type:"PERMISSIVE"},n))).fieldOptions=l({role:[],function_names:[]},t),e.nodeInfo=e.fieldOptions.nodeInfo,e}return t=i,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"disableUsingField",value:function(e){return"INSERT"==e.event}},{key:"disableWithCheckField",value:function(e){var t=e.event;return("SELECT"==t||"DELETE"==t)&&(e.withcheck="",!0)}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",editable:!0,type:"text",readonly:!1,noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"string",editable:!1,type:"text",mode:["properties"]},{id:"event",label:(0,o.default)("Event"),type:"select",group:(0,o.default)("Commands"),disabled:function(){return!e.isNew()},controlProps:{allowClear:!1},options:[{label:"ALL",value:"ALL"},{label:"SELECT",value:"SELECT"},{label:"INSERT",value:"INSERT"},{label:"UPDATE",value:"UPDATE"},{label:"DELETE",value:"DELETE"}]},{id:"using",label:(0,o.default)("Using"),deps:["using","event"],type:"text",disabled:e.disableUsingField,mode:["create","edit","properties"],control:"sql",visible:!0,group:(0,o.default)("Commands")},{id:"withcheck",label:(0,o.default)("With check"),deps:["withcheck","event"],type:"text",mode:["create","edit","properties"],control:"sql",visible:!0,group:(0,o.default)("Commands"),disabled:e.disableWithCheckField},{id:"rls_expression_key_note",label:(0,o.default)("RLS policy expression"),type:"note",group:(0,o.default)("Commands"),mode:["create","edit"],text:["<ul><li>","<strong>",(0,o.default)("Using: "),"</strong>",(0,o.default)("This expression will be added to queries that refer to the table if row level security is enabled. Rows for which the expression returns true will be visible. Any rows for which the expression returns false or null will not be visible to the user (in a SELECT), and will not be available for modification (in an UPDATE or DELETE). Such rows are silently suppressed; no error is reported."),"</li><li>","<strong>",(0,o.default)("With check: "),"</strong>",(0,o.default)("This expression will be used in INSERT and UPDATE queries against the table if row level security is enabled. Only rows for which the expression evaluates to true will be allowed. An error will be thrown if the expression evaluates to false or null for any of the records inserted or any of the records that result from the update."),"</li></ul>"].join("")},{id:"policyowner",label:(0,o.default)("Role"),cell:"text",type:"select",options:e.fieldOptions.role,controlProps:{allowClear:!1}},{id:"type",label:(0,o.default)("Type"),type:"select",deps:["type"],disabled:function(){return!e.isNew()},controlProps:{width:"100%",allowClear:!1},options:[{label:"PERMISSIVE",value:"PERMISSIVE"},{label:"RESTRICTIVE",value:"RESTRICTIVE"}],visible:function(){return e.nodeInfo.server.version>=1e5}}]}}])&&c(t.prototype,n),r&&c(t,r),i}(a(n(89406)).default);t.default=m},49663:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(68304),n(30489);var o=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,a=f(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(this,i),(e=a.call(this,{oid:void 0,name:void 0,schema:void 0})).fieldOptions=l({nodeInfo:void 0,nodeData:void 0},t),e}return t=i,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",disabled:function(t){return"_RETURN"==t.name||!(e.isNew(t)||e.fieldOptions.nodeInfo.server.version>=90400)},noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),type:"text",mode:["properties"]},{id:"schema",label:"",type:"text",visible:!1,disabled:function(t){t.schema=e.fieldOptions.nodeInfo.schema.label}},{id:"view",label:"",type:"text",visible:!1,disabled:function(t){t.view=e.fieldOptions.nodeData.label}},{id:"is_enable_rule",label:(0,o.default)("Rule enabled?"),mode:["edit","properties"],group:(0,o.default)("Definition"),type:"select",disabled:function(){return"catalog"in e.fieldOptions.nodeInfo||"view"in e.fieldOptions.nodeInfo},options:[{label:(0,o.default)("Enable"),value:"O"},{label:(0,o.default)("Enable Replica"),value:"R"},{label:(0,o.default)("Enable Always"),value:"A"},{label:(0,o.default)("Disable"),value:"D"}],controlProps:{allowClear:!1}},{id:"event",label:(0,o.default)("Event"),control:"select2",group:(0,o.default)("Definition"),type:"select",controlProps:{allowClear:!1},options:[{label:"SELECT",value:"SELECT"},{label:"INSERT",value:"INSERT"},{label:"UPDATE",value:"UPDATE"},{label:"DELETE",value:"DELETE"}]},{id:"do_instead",label:(0,o.default)("Do instead?"),group:(0,o.default)("Definition"),type:"switch"},{id:"condition",label:(0,o.default)("Condition"),type:"sql",isFullTab:!0,group:(0,o.default)("Condition")},{id:"statements",label:(0,o.default)("Commands"),type:"sql",isFullTab:!0,group:(0,o.default)("Commands")},{id:"system_rule",label:(0,o.default)("System rule?"),type:"switch",mode:["properties"]},{id:"comment",label:(0,o.default)("Comment"),cell:"text",type:"multiline"}]}}])&&c(t.prototype,n),r&&c(t,r),i}(a(n(89406)).default);t.default=m},86189:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.disableTriggers=function(e,t,n,r){return a(e,t,n,r,{is_enable_trigger:"D"})},t.enableTriggers=function(e,t,n,r){return a(e,t,n,r,{is_enable_trigger:"O"})};var r,o=(r=n(9669))&&r.__esModule?r:{default:r};function a(e,t,n,r,a){var i=function(e,t){var n=(e||{}).item||t.selected();return t.findNodeByDomElement(n)}(r,e);if(!i||null===i.getData()||void 0===i.getData())return!1;o.default.put(n(i.getHtmlIdentifier(),"set_trigger",i.getData(),!0),a).then((function(n){1===n.data.success&&(t.success(n.data.info),i.reload(e))})).catch((function(n){try{var r=n.response.data;0===r.success&&t.error(r.errormsg)}catch(e){console.warn(e.stack||e)}i.unload(e)}))}},71944:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.PartitionsSchema=t.PartitionKeysSchema=void 0,n(69600),n(21249),n(88674),n(41539),n(5212),n(68304),n(30489);var o=s(n(96486)),a=s(n(91669)),i=s(n(89406)),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){f(n,e);var t=b(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return u(this,n),(e=t.call(this,{key_type:"column"})).columns=r,e.columnsReloadBasis=!1,e.getCollations=o,e.getOperatorClass=a,e}return d(n,[{key:"changeColumnOptions",value:function(e){this.columns=e}},{key:"baseFields",get:function(){var e=this;return[{id:"key_type",label:(0,a.default)("Key type"),type:"select",editable:!0,cell:"select",controlProps:{allowClear:!1},noEmpty:!0,options:[{label:(0,a.default)("Column"),value:"column"},{label:(0,a.default)("Expression"),value:"expression"}]},{id:"pt_column",label:(0,a.default)("Column"),type:"select",deps:["key_type",["columns"]],depChange:function(e,t){if("expression"==e.key_type||"columns"==t[0])return{pt_column:void 0}},cell:function(){return{cell:"select",optionsReloadBasis:o.default.join(e.columns.map((function(e){return e.label})),","),options:e.columns,controlProps:{allowClear:!1}}},editable:function(e){return"expression"!=e.key_type}},{id:"expression",label:(0,a.default)("Expression"),type:"text",cell:"text",deps:["key_type"],depChange:function(e){if("column"==e.key_type)return{expression:void 0}},editable:function(e){return"expression"==e.key_type}},{id:"collationame",label:(0,a.default)("Collation"),cell:"select",type:"select",group:(0,a.default)("partition"),deps:["key_type"],options:e.getCollations,mode:["create","properties","edit"],editable:function(e){return"expression"!=e.key_type},disabled:function(){return!e.isNew()}},{id:"op_class",label:(0,a.default)("Operator class"),cell:"select",type:"select",group:(0,a.default)("partition"),deps:["key_type"],editable:function(e){return"expression"!=e.key_type},disabled:function(){return!e.isNew()},options:e.getOperatorClass,mode:["create","properties","edit"]}]}},{key:"validate",value:function(e,t){var n;if("column"==e.key_type){if(n=(0,l.emptyValidator)("Partition key column",e.pt_column))return t("pt_column",n),!0}else if(n=(0,l.emptyValidator)("Partition key expression",e.expression))return t("expression",n),!0;return!1}}]),n}(i.default);t.PartitionKeysSchema=h;var g=function(e){f(n,e);var t=b(n);function n(e,r,o){var a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return[]};return u(this,n),(a=t.call(this,{oid:void 0,is_attach:!1,partition_name:void 0,is_default:void 0,values_from:void 0,values_to:void 0,values_in:void 0,values_modulus:void 0,values_remainder:void 0,is_sub_partitioned:!1,sub_partition_type:"range"})).subPartitionsObj=new h([],r,o),a.getAttachTables=i,a.nodeInfo=e,a}return d(n,[{key:"changeColumnOptions",value:function(e){this.subPartitionsObj.changeColumnOptions(e)}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"oid",label:(0,a.default)("OID"),type:"text",mode:["properties"]},{id:"is_attach",label:(0,a.default)("Operation"),cell:"select",type:"select",width:120,disableResizing:!0,options:[{label:(0,a.default)("Attach"),value:!0},{label:(0,a.default)("Create"),value:!1}],controlProps:{allowClear:!1},editable:function(e){return!(!t.isNew(e)||t.top.isNew())},readonly:function(e){return!(t.isNew(e)&&!t.top.isNew())}},{id:"partition_name",label:(0,a.default)("Name"),deps:["is_attach"],type:function(t){return t.is_attach?{type:"select",options:e.getAttachTables,controlProps:{allowClear:!1}}:{type:"text"}},cell:function(t){return t.is_attach?{cell:"select",options:e.getAttachTables,controlProps:{allowClear:!1}}:{cell:"text"}},editable:function(e){return!!t.isNew(e)},readonly:function(e){return!t.isNew(e)},noEmpty:!0},{id:"is_default",label:(0,a.default)("Default"),type:"switch",cell:"switch",width:55,disableResizing:!0,min_version:11e4,editable:function(e){return!!(t.top&&("range"==t.top.sessData.partition_type||"list"==t.top.sessData.partition_type)&&t.isNew(e)&&t.getServerVersion()>=11e4)},readonly:function(e){return!(t.top&&("range"==t.top.sessData.partition_type||"list"==t.top.sessData.partition_type)&&t.isNew(e)&&t.getServerVersion()>=11e4)}},{id:"values_from",label:(0,a.default)("From"),type:"text",cell:"text",deps:["is_default"],editable:function(e){return!(!t.top||"range"!=t.top.sessData.partition_type||!t.isNew(e)||!0===e.is_default)},disabled:function(e){return!t.top||"range"!=t.top.sessData.partition_type||!t.isNew(e)||!0===e.is_default}},{id:"values_to",label:(0,a.default)("To"),type:"text",cell:"text",deps:["is_default"],editable:function(e){return!(!t.top||"range"!=t.top.sessData.partition_type||!t.isNew(e)||!0===e.is_default)},disabled:function(e){return!t.top||"range"!=t.top.sessData.partition_type||!t.isNew(e)||!0===e.is_default}},{id:"values_in",label:(0,a.default)("In"),type:"text",cell:"text",deps:["is_default"],editable:function(e){return!(!t.top||"list"!=t.top.sessData.partition_type||!t.isNew(e)||!0===e.is_default)},readonly:function(e){return!t.top||"list"!=t.top.sessData.partition_type||!t.isNew(e)||!0===e.is_default}},{id:"values_modulus",label:(0,a.default)("Modulus"),type:"int",cell:"int",editable:function(e){return!(!t.top||"hash"!=t.top.sessData.partition_type||!t.isNew(e))},disabled:function(e){return!t.top||"hash"!=t.top.sessData.partition_type||!t.isNew(e)||!0===e.is_default}},{id:"values_remainder",label:(0,a.default)("Remainder"),type:"int",cell:"int",editable:function(e){return!(!t.top||"hash"!=t.top.sessData.partition_type||!t.isNew(e))},disabled:function(e){return!t.top||"hash"!=t.top.sessData.partition_type||!t.isNew(e)||!0===e.is_default}},{id:"is_sub_partitioned",label:(0,a.default)("Partitioned table?"),cell:"switch",group:"Partition",type:"switch",mode:["properties","create","edit"],deps:["is_attach"],readonly:function(e){return!t.isNew(e)||!!e.is_attach},depChange:function(e){if(e.is_attach)return{is_sub_partitioned:!1}}},{id:"sub_partition_type",label:(0,a.default)("Partition Type"),editable:!1,type:"select",controlProps:{allowClear:!1},group:"Partition",deps:["is_sub_partitioned"],options:function(){var e=[{label:(0,a.default)("Range"),value:"range"},{label:(0,a.default)("List"),value:"list"}];return t.getServerVersion()>=11e4&&e.push({label:(0,a.default)("Hash"),value:"hash"}),Promise.resolve(e)},visible:function(e){return t.isNew(e)},readonly:function(e){return!t.isNew(e)},disabled:function(e){return!e.is_sub_partitioned}},{id:"sub_partition_keys",label:(0,a.default)("Partition Keys"),schema:this.subPartitionsObj,editable:!0,type:"collection",group:"Partition",mode:["properties","create","edit"],deps:["is_sub_partitioned","sub_partition_type",["typname"]],canEdit:!1,canDelete:!0,canAdd:function(e){return!(!t.isNew(e)||!e.is_sub_partitioned)},canAddRow:function(e){var n=!1,r=t.top.sessData.columns,a=1e3;return e.sub_partition_type&&"list"==e.sub_partition_type&&(a=1),(null==r?void 0:r.length)>0&&(n=o.default.some(o.default.map(r,"name"))),!e.sub_partition_keys||e.sub_partition_keys.length<a&&n},depChange:function(e,t,n,r){if(n.typname!=r.oldState.typname)return{sub_partition_keys:[]}},visible:function(e){return t.isNew(e)}},{id:"sub_partition_scheme",label:(0,a.default)("Partition Scheme"),group:"Partition",mode:["edit"],type:function(e){return{type:"note",text:e.sub_partition_scheme}},visible:function(e){return!(!t.isNew(e)||(0,l.isEmptyString)(e.sub_partition_scheme))}}]}},{key:"validate",value:function(e,t){if(e.is_sub_partitioned&&this.isNew(e)&&(!e.sub_partition_keys||e.sub_partition_keys&&e.sub_partition_keys.length<=0))return t("sub_partition_keys",(0,a.default)("Please specify at least one key for partitioned table.")),!0;var n=this.top.sessData.partition_type;if("range"===n){if(!e.is_default&&(0,l.isEmptyString)(e.values_from))return t("values_from",(0,a.default)("For range partition From field cannot be empty.")),!0;if(!e.is_default&&(0,l.isEmptyString)(e.values_to))return t("values_to",(0,a.default)("For range partition To field cannot be empty.")),!0}else if("list"===n){if(!e.is_default&&(0,l.isEmptyString)(e.values_in))return t("values_in",(0,a.default)("For list partition In field cannot be empty.")),!0}else if("hash"===n){if((0,l.isEmptyString)(e.values_modulus))return t("values_modulus",(0,a.default)("For hash partition Modulus field cannot be empty.")),!0;if((0,l.isEmptyString)(e.values_remainder))return t("values_remainder",(0,a.default)("For hash partition Remainder field cannot be empty.")),!0}return!1}}]),n}(i.default);t.PartitionsSchema=g},54851:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(68304),n(30489),n(12419),n(78011),n(69070),n(47941),n(82526),n(38880),n(89554),n(54747),n(49337),n(33321),n(91038),n(78783),n(41817),n(32165),n(66992),n(33948),n(79753),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeTableSchema=function(e,t,n){var r,o=function(){return(0,m.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},a=n.Nodes.table;return new F({relowner:function(){return(0,m.getNodeListByName)("role",e,t)},schema:function(){return(0,m.getNodeListByName)("schema",e,t,{cacheLevel:"database",cacheNode:"database"},(function(e){return!e||!e.label.match(/^pg_/)}))},spcname:o,coll_inherits:function(){return(0,m.getNodeAjaxOptions)("get_inherits",a,e,t)},typname:function(){return(0,m.getNodeAjaxOptions)("get_oftype",a,e,t)},like_relation:function(){return(0,m.getNodeAjaxOptions)("get_relations",a,e,t)}},e,{columns:function(){return(0,y.getNodeColumnSchema)(e,t,n)},vacuum_settings:function(){return(0,h.getNodeVacuumSettingsSchema)(a,e,t)},constraints:function(){return new B(e,(function(){return(0,g.getNodeForeignKeySchema)(e,t,n,!0,{autoindex:!1})}),(function(){return(0,v.getNodeExclusionConstraintSchema)(e,t,n,!0)}),{spcname:o})}},(function(n){return(0,_.getNodePrivilegeRoleSchema)(a,e,t,n)}),(function(n){return(0,m.getNodeAjaxOptions)("get_columns",a,e,t,{urlParams:n,useCache:!1})}),(function(){return(0,m.getNodeAjaxOptions)("get_collations",n.Nodes.collation,e,t)}),(function(){return(0,m.getNodeAjaxOptions)("get_op_class",n.Nodes.table,e,t)}),(function(){return(0,m.getNodeAjaxOptions)("get_attach_tables",a,e,t,{useCache:!1,urlWithId:!0})}),{relowner:n.serverInfo[e.server._id].user.name,schema:null===(r=e.schema)||void 0===r?void 0:r._label})},t.default=t.LikeSchema=t.ConstraintsSchema=void 0,n(4723),n(74916),n(68309),n(5212),n(21249),n(82772),n(88674),n(41539),n(92222),n(47042),n(57327),n(69826),n(69600);var o=w(n(91669)),a=w(n(89406)),i=w(n(67091)),l=w(n(96486)),s=n(76055),u=w(n(29458)),c=n(52237),d=n(71944),f=n(81922),p=w(n(29754)),b=w(n(42657)),m=n(77077),y=n(15253),h=n(87954),g=n(40175),v=n(81873),_=n(40345);function w(e){return e&&e.__esModule?e:{default:e}}function O(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=j(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function j(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return t&&D(e.prototype,t),n&&D(e,n),e}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B=function(e){N(n,e);var t=M(n);function n(e,r,o,a){var i,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return k(this,n),(i=t.call(this)).nodeInfo=e,i.primaryKeyObj=new u.default({spcname:a.spcname},e),i.fkObj=r(),i.uniqueConsObj=new b.default({spcname:a.spcname},e),i.exConsObj=o(),i.inErd=l,i}return T(n,[{key:"changeColumnOptions",value:function(e){this.primaryKeyObj.changeColumnOptions(e),this.fkObj.changeColumnOptions(e),this.inErd||(this.uniqueConsObj.changeColumnOptions(e),this.exConsObj.changeColumnOptions(e))}},{key:"anyColumnAdded",value:function(e){return l.default.some(l.default.map(e.columns,"name"))}},{key:"baseFields",get:function(){var e=this;return[{id:"primary_key",label:"",schema:this.primaryKeyObj,editable:!1,type:"collection",group:(0,o.default)("Primary Key"),mode:["edit","create"],canEdit:!0,canDelete:!0,deps:["is_partitioned","typname"],columns:["name","columns"],disabled:this.inCatalog,canAdd:function(t){return!(t.is_partitioned&&e.top.getServerVersion()<11e4)},canAddRow:function(t){return(t.primary_key||[]).length<1&&e.anyColumnAdded(t)},depChange:function(t,n,r,o){var a;if(t.is_partitioned&&e.top.getServerVersion()<11e4||(null===(a=t.columns)||void 0===a?void 0:a.length)<=0)return{primary_key:[]};if(o.type==c.SCHEMA_STATE_ACTIONS.SET_VALUE&&"columns"==o.path[o.path.length-1]){var i=t.primary_key[0].columns.map((function(e){return e.column}));return t.columns=t.columns.map((function(e){return C(C({},e),{},{is_primary_key:i.indexOf(e.name)>-1})})),{columns:t.columns}}}},{id:"foreign_key",label:"",schema:this.fkObj,editable:!1,type:"collection",group:(0,o.default)("Foreign Key"),mode:["edit","create"],canEdit:!0,canDelete:!0,deps:["is_partitioned","columns"],canAdd:function(t){return!(t.is_partitioned&&e.top.getServerVersion()<11e4)},columns:["name","columns","references_table_name"],disabled:this.inCatalog,canAddRow:e.anyColumnAdded,depChange:function(t){var n;if(t.is_partitioned&&e.top.getServerVersion()<11e4||(null===(n=t.columns)||void 0===n?void 0:n.length)<=0)return{foreign_key:[]}}},{id:"check_group",type:"group",label:(0,o.default)("Check"),visible:!this.inErd},{id:"check_constraint",label:"",schema:new p.default,editable:!1,type:"collection",group:"check_group",mode:["edit","create"],canEdit:!0,canDelete:!0,deps:["is_partitioned"],canAdd:!0,columns:["name","consrc"],disabled:this.inCatalog},{id:"unique_group",type:"group",label:(0,o.default)("Unique"),visible:!this.inErd},{id:"unique_constraint",label:"",schema:this.uniqueConsObj,editable:!1,type:"collection",group:"unique_group",mode:["edit","create"],canEdit:!0,canDelete:!0,deps:["is_partitioned","typname"],columns:["name","columns"],disabled:this.inCatalog,canAdd:function(t){return!(t.is_partitioned&&e.top.getServerVersion()<11e4)},canAddRow:e.anyColumnAdded,depChange:function(t){var n;if(t.is_partitioned&&e.top.getServerVersion()<11e4||(null===(n=t.columns)||void 0===n?void 0:n.length)<=0)return{unique_constraint:[]}}},{id:"exclude_group",type:"group",label:(0,o.default)("Exclude"),visible:!this.inErd},{id:"exclude_constraint",label:"",schema:this.exConsObj,editable:!1,type:"collection",group:"exclude_group",mode:["edit","create"],canEdit:!0,canDelete:!0,deps:["is_partitioned"],columns:["name","columns","constraint"],disabled:this.inCatalog,canAdd:function(t){return!(t.is_partitioned&&e.top.getServerVersion()<11e4)},canAddRow:e.anyColumnAdded,depChange:function(t){var n;if(t.is_partitioned&&e.top.getServerVersion()<11e4||(null===(n=t.columns)||void 0===n?void 0:n.length)<=0)return{exclude_constraint:[]}}}]}}]),n}(a.default);t.ConstraintsSchema=B;var L=function(e){N(n,e);var t=M(n);function n(e){var r;return k(this,n),(r=t.call(this)).likeRelationOpts=e,r}return T(n,[{key:"isLikeDisable",value:function(e){return!(!this.top.inSchemaWithModelCheck(e)&&(0,s.isEmptyString)(e.typname))}},{key:"isRelationDisable",value:function(e){return!!(0,s.isEmptyString)(e.like_relation)}},{key:"resetVals",value:function(e){if(this.isRelationDisable(e)&&this.top.isNew())return{like_default_value:!1,like_constraints:!1,like_indexes:!1,like_storage:!1,like_comments:!1}}},{key:"baseFields",get:function(){var e=this;return[{id:"like_relation",label:(0,o.default)("Relation"),type:"select",mode:["create"],deps:["typname","like_relation"],options:e.likeRelationOpts,disabled:e.isLikeDisable,depChange:function(t,n){if("typname"==n&&!(0,s.isEmptyString)(t.typname))return t.like_relation=null,C({like_relation:null},e.resetVals(t))}},{id:"like_default_value",label:(0,o.default)("With default values?"),type:"switch",mode:["create"],deps:["like_relation"],disabled:this.isRelationDisable,depChange:function(){return e.resetVals.apply(e,arguments)}},{id:"like_constraints",label:(0,o.default)("With constraints?"),type:"switch",mode:["create"],deps:["like_relation"],disabled:this.isRelationDisable,depChange:function(){return e.resetVals.apply(e,arguments)}},{id:"like_indexes",label:(0,o.default)("With indexes?"),type:"switch",mode:["create"],deps:["like_relation"],disabled:this.isRelationDisable,depChange:function(){return e.resetVals.apply(e,arguments)}},{id:"like_storage",label:(0,o.default)("With storage?"),type:"switch",mode:["create"],deps:["like_relation"],disabled:this.isRelationDisable,depChange:function(){return e.resetVals.apply(e,arguments)}},{id:"like_comments",label:(0,o.default)("With comments?"),type:"switch",mode:["create"],deps:["like_relation"],disabled:this.isRelationDisable,depChange:function(){return e.resetVals.apply(e,arguments)}}]}}]),n}(a.default);t.LikeSchema=L;var F=function(e){N(n,e);var t=M(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return[]},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return[]},u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){return[]},c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:function(){return[]},f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},p=arguments.length>9&&void 0!==arguments[9]&&arguments[9];return k(this,n),(e=t.call(this,C({name:void 0,oid:void 0,spcoid:void 0,spcname:void 0,relowner:void 0,relacl:void 0,relhasoids:void 0,relhassubclass:void 0,reltuples:void 0,description:void 0,conname:void 0,conkey:void 0,isrepl:void 0,triggercount:void 0,relpersistence:void 0,fillfactor:void 0,toast_tuple_target:void 0,parallel_workers:void 0,reloftype:void 0,typname:void 0,labels:void 0,providers:void 0,is_sys_table:void 0,coll_inherits:[],hastoasttable:!0,toast_autovacuum_enabled:"x",autovacuum_enabled:"x",primary_key:[],foreign_key:[],partition_keys:[],partitions:[],partition_type:"range",is_partitioned:!1,columns:[]},f))).fieldOptions=r,e.schemas=a,e.getPrivilegeRoleSchema=i,e.nodeInfo=o,e.getColumns=l,e.partitionsObj=new d.PartitionsSchema(e.nodeInfo,s,u,c),e.constraintsObj=e.schemas.constraints&&e.schemas.constraints()||{},e.columnsSchema=e.schemas.columns&&e.schemas.columns()||{},e.vacuumSettingsSchema=e.schemas.vacuum_settings&&e.schemas.vacuum_settings()||{},e.partitionKeysObj=new d.PartitionKeysSchema([],s,u),e.inErd=p,e}return T(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"initialise",value:function(e){this.changeColumnOptions(e.columns)}},{key:"inSchemaWithModelCheck",value:function(e){return!(!this.nodeInfo||!("schema"in this.nodeInfo))&&!this.isNew(e)}},{key:"getTableOid",value:function(e){var t,n=S(this.inheritedTableList);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.label===e)return r.tid}}catch(e){n.e(e)}finally{n.f()}}},{key:"canAddRowColumns",value:function(e){return!this.inCatalog()&&!!(0,s.isEmptyString)(e.typname)}},{key:"canEditDeleteRowColumns",value:function(e){return!!(0,s.isEmptyString)(e.inheritedfrom)}},{key:"isPartitioned",value:function(e){return!!e.is_partitioned||this.inCatalog()}},{key:"changeColumnOptions",value:function(e){var t=(e||[]).map((function(e){return{label:e.name,value:e.name,image:"icon-column"}}));this.constraintsObj.changeColumnOptions(t),this.partitionKeysObj.changeColumnOptions(t),this.partitionsObj.changeColumnOptions(t)}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",noEmpty:!0,mode:["properties","create","edit"],readonly:this.inCatalog},{id:"oid",label:(0,o.default)("OID"),type:"text",mode:["properties"]},{id:"relowner",label:(0,o.default)("Owner"),type:"select",options:this.fieldOptions.relowner,noEmpty:!this.inErd,mode:["properties","create","edit"],controlProps:{allowClear:!1},readonly:this.inCatalog,visible:!this.inErd},{id:"schema",label:(0,o.default)("Schema"),type:"select",options:this.fieldOptions.schema,noEmpty:!0,mode:["create","edit"],readonly:this.inCatalog},{id:"spcname",label:(0,o.default)("Tablespace"),visible:!this.inErd,mode:["properties","create","edit"],deps:["is_partitioned"],readonly:this.inCatalog,type:function(n){return{type:"select",options:e.fieldOptions.spcname,controlProps:{allowClear:!!t.isNew(n)}}}},{id:"partition",type:"group",label:(0,o.default)("Partitions"),mode:["edit","create"],min_version:1e5,visible:function(e){return!this.inErd&&!(!t.isNew(e)&&!e.is_partitioned)}},{id:"is_partitioned",label:(0,o.default)("Partitioned table?"),cell:"switch",type:"switch",mode:["properties","create","edit"],min_version:1e5,visible:!this.inErd,readonly:function(e){return!t.isNew(e)}},{id:"is_sys_table",label:(0,o.default)("System table?"),cell:"switch",type:"switch",mode:["properties"],disabled:this.inCatalog},{id:"description",label:(0,o.default)("Comment"),type:"multiline",mode:["properties","create","edit"],disabled:this.inCatalog},{id:"coll_inherits",label:(0,o.default)("Inherited from table(s)"),type:"select",group:(0,o.default)("Columns"),deps:["typname","is_partitioned"],mode:["create","edit"],controlProps:{multiple:!0,allowClear:!1,placeholder:(0,o.default)("Select to inherit from...")},options:this.fieldOptions.coll_inherits,visible:!this.inErd,optionsLoaded:function(e){return t.inheritedTableList=e},disabled:function(e){return!(!e.adding_inherit_cols&&!e.is_partitioned)||!(!t.inCatalog()&&(0,s.isEmptyString)(e.typname))},depChange:function(t,n,r,o){if(o.type==c.SCHEMA_STATE_ACTIONS.SET_VALUE&&"coll_inherits"==o.path[0])return{adding_inherit_cols:!0};if("is_partitioned"===n[0]&&t.is_partitioned){var a,i=S(t.coll_inherits||[]);try{var s=function(){var n=a.value,r=e.getTableOid(n);l.default.remove(t.columns,(function(e){return e.inheritedid==r}))};for(i.s();!(a=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}return{coll_inherits:[]}}},deferredDepChange:function(n,r,o,a){return new Promise((function(r){var o,i,s,u=n.coll_inherits||[],c=a.oldState.coll_inherits||[];u.length>1&&u.length>c.length?(o=l.default.difference(u,c),i=t.getColumns({tid:e.getTableOid(o[0])})):1==u.length&&(i=t.getColumns({tid:e.getTableOid(u[0])})),i&&i.then((function(e){r((function(n){var r=e.map((function(e){return t.columnsSchema.getNewData(e)}));return r=[].concat(O(n.columns),O(r)),t.changeColumnOptions(r),{adding_inherit_cols:!1,columns:r}}))})),u.length>0&&u.length<c.length?(o=l.default.difference(c,u),s=e.getTableOid(o[0])):1===c.length&&u.length<1&&(o=c[0],s=e.getTableOid(o)),s&&r((function(e){var n=e.columns;return l.default.remove(e.columns,(function(e){return e.inheritedid==s})),t.changeColumnOptions(n),{adding_inherit_cols:!1,columns:n}}))}))}},{id:"advanced",label:(0,o.default)("Advanced"),type:"group",visible:!0},{id:"rlspolicy",label:(0,o.default)("RLS Policy?"),cell:"switch",type:"switch",mode:["properties","edit","create"],group:"advanced",min_version:90600,depChange:function(t){t.rlspolicy&&e.origData.rlspolicy!=t.rlspolicy&&(0,f.pgAlertify)().alert((0,o.default)("Check Policy?"),(0,o.default)("Please check if any policy exist. If no policy exists for the table, a default-deny policy is used, meaning that no rows are visible or can be modified by other users"))}},{id:"forcerlspolicy",label:(0,o.default)("Force RLS Policy?"),cell:"switch",type:"switch",mode:["properties","edit","create"],deps:["rlspolicy"],group:"advanced",min_version:90600,disabled:function(e){return!e.rlspolicy},depChange:function(e){if(!e.rlspolicy)return{forcerlspolicy:!1}}},{id:"replica_identity",label:(0,o.default)("Replica Identity"),group:"advanced",type:"text",mode:["edit","properties"]},{id:"coll_inherits",label:(0,o.default)("Inherited from table(s)"),type:"text",group:"advanced",mode:["properties"]},{id:"inherited_tables_cnt",label:(0,o.default)("Inherited tables count"),type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog},{id:"columns",label:(0,o.default)("Columns"),type:"collection",group:(0,o.default)("Columns"),schema:this.columnsSchema,mode:["create","edit"],disabled:this.inCatalog,deps:["typname","is_partitioned"],depChange:function(n,r,o,a){if("columns"===r[0]){var i=n.columns;if(a.type===c.SCHEMA_STATE_ACTIONS.ADD_ROW&&e.inErd){var s,u=null===(s=l.default.maxBy(i,(function(e){return e.attnum})))||void 0===s?void 0:s.attnum;(l.default.isUndefined(u)||l.default.isNull(u))&&(u=-1),i[i.length-1].attnum=u+1}if(t.changeColumnOptions(i),a.path.indexOf("is_primary_key")>-1){var d,f=l.default.slice(a.path,0,-1),p=l.default.get(n,f);if((null===(d=n.primary_key)||void 0===d?void 0:d.length)>0){var b=n.primary_key[0];return p.is_primary_key?(b.columns=l.default.filter(b.columns,(function(e){return e.column!==p.name})),b.columns.push({column:p.name})):b.columns=l.default.filter(b.columns,(function(e){return e.column!==p.name})),b.columns.length<=0?{primary_key:[]}:{primary_key:[b]}}return{primary_key:[t.constraintsObj.primaryKeyObj.getNewData({columns:[{column:p.name}]})]}}}},canAdd:this.canAddRowColumns,canEdit:!0,canDelete:!0,canEditRow:this.canEditDeleteRowColumns,canDeleteRow:this.canEditDeleteRowColumns,uniqueCol:["name"],columns:["name","cltype","attlen","attprecision","attnotnull","is_primary_key","defval"],allowMultipleEmptyRow:!1},{type:"nested-tab",group:(0,o.default)("Constraints"),mode:["edit","create"],schema:t.constraintsObj},{id:"typname",label:(0,o.default)("Of type"),type:"select",mode:["properties","create","edit"],group:"advanced",deps:["coll_inherits"],visible:!this.inErd,disabled:function(e){return!(!t.inSchemaWithModelCheck(e)&&(0,s.isEmptyString)(e.coll_inherits))},options:this.fieldOptions.typname,optionsLoaded:function(e){t.ofTypeTables=e},deferredDepChange:function(e,n,r,a){var i=function(n){var r=[];if(!(0,s.isEmptyString)(e.typname)){var o=l.default.find(t.ofTypeTables||[],(function(t){return t.label==e.typname}));r=o.oftype_columns}n((function(){return t.changeColumnOptions(r),{columns:r,primary_key:[],foreign_key:[],exclude_constraint:[],unique_constraint:[],partition_keys:[],partitions:[]}}))};return!(0,s.isEmptyString)(e.typname)&&(0,s.isEmptyString)(a.oldState.typname)?new Promise((function(e){(0,f.pgAlertify)().confirm((0,o.default)("Remove column definitions?"),(0,o.default)("Changing 'Of type' will remove column definitions."),(function(){i(e)}),(function(){e((function(){return{typname:null}}))}))})):e.typname!=a.oldState.typname?new Promise((function(e){i(e)})):Promise.resolve((function(){}))}},{id:"fillfactor",label:(0,o.default)("Fill factor"),type:"int",mode:["create","edit"],min:10,max:100,group:"advanced",disabled:t.isPartitioned},{id:"toast_tuple_target",label:(0,o.default)("Toast tuple target"),type:"int",mode:["create","edit"],min:128,min_version:11e4,group:"advanced",disabled:t.isPartitioned},{id:"parallel_workers",label:(0,o.default)("Parallel workers"),type:"int",mode:["create","edit"],group:"advanced",min_version:90600,disabled:t.isPartitioned},{id:"relhasoids",label:(0,o.default)("Has OIDs?"),cell:"switch",type:"switch",mode:["properties","create","edit"],group:"advanced",disabled:function(){return t.getServerVersion()>=12e4||t.inCatalog()}},{id:"relpersistence",label:(0,o.default)("Unlogged?"),cell:"switch",type:"switch",mode:["properties","create","edit"],readonly:t.inSchemaWithModelCheck,group:"advanced"},{id:"conname",label:(0,o.default)("Primary key"),cell:"text",type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog},{id:"reltuples",label:(0,o.default)("Rows (estimated)"),cell:"text",type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog},{id:"rows_cnt",label:(0,o.default)("Rows (counted)"),cell:"text",type:"text",mode:["properties"],group:"advanced",disabled:this.inCatalog,formatter:{fromRaw:function(){return 0},toRaw:function(e){return e}}},{id:"relhassubclass",label:(0,o.default)("Is inherited?"),cell:"switch",type:"switch",mode:["properties"],group:"advanced",disabled:this.inCatalog},{type:"nested-fieldset",label:(0,o.default)("Like"),group:"advanced",mode:["create"],schema:new L(this.fieldOptions.like_relation),visible:!this.inErd},{id:"partition_type",label:(0,o.default)("Partition Type"),editable:!1,type:"select",controlProps:{allowClear:!1},group:"partition",deps:["is_partitioned"],options:function(){var e=[{label:(0,o.default)("Range"),value:"range"},{label:(0,o.default)("List"),value:"list"}];return t.getServerVersion()>=11e4&&e.push({label:(0,o.default)("Hash"),value:"hash"}),Promise.resolve(e)},mode:["create"],min_version:1e5,disabled:function(e){return!e.is_partitioned},readonly:function(e){return!t.isNew(e)}},{id:"partition_keys",label:(0,o.default)("Partition Keys"),schema:t.partitionKeysObj,editable:!0,type:"collection",columns:["key_type","pt_column","expression"].concat(this.inErd?[]:["collationame","op_class"]),group:"partition",mode:["create"],deps:["is_partitioned","partition_type","typname"],canEdit:!1,canDelete:!0,canAdd:function(e){return!(!t.isNew(e)||!e.is_partitioned)},canAddRow:function(e){var t,n=!1,r=1e3;return e.partition_type&&"list"==e.partition_type&&(r=1),(null===(t=e.columns)||void 0===t?void 0:t.length)>0&&(n=l.default.some(l.default.map(e.columns,"name"))),!e.partition_keys||e.partition_keys.length<r&&n},min_version:1e5,depChange:function(e,t,n,r){if(e.typname!=r.oldState.typname)return{partition_keys:[]}}},{id:"partition_scheme",label:(0,o.default)("Partition Scheme"),group:"partition",mode:["edit"],type:function(e){return{type:"note",text:e.partition_scheme||""}},min_version:1e5},{id:"partition_key_note",label:(0,o.default)("Partition Keys"),type:"note",group:"partition",mode:["create"],text:["<ul><li>",(0,o.default)("Partition table supports two types of keys:"),"</li><li>","<strong>",(0,o.default)("Column: "),"</strong>",(0,o.default)("User can select any column from the list of available columns."),"</li><li>","<strong>",(0,o.default)("Expression: "),"</strong>",(0,o.default)("User can specify expression to create partition key."),"</li><li>","<strong>",(0,o.default)("Example: "),"</strong>",(0,o.default)("Let's say, we want to create a partition table based per year for the column 'saledate', having datatype 'date/timestamp', then we need to specify the expression as 'extract(YEAR from saledate)' as partition key."),"</li></ul>"].join(""),min_version:1e5},{id:"partitions",label:(0,o.default)("Partitions"),schema:this.partitionsObj,editable:!0,type:"collection",group:"partition",mode:["edit","create"],deps:["is_partitioned","partition_type","typname"],depChange:function(e,n){if(["is_partitioned","partition_type","typname"].indexOf(n[0])>=0&&t.isNew(e))return{partitions:[]}},canEdit:!0,canDelete:!0,customDeleteTitle:(0,o.default)("Detach Partition"),customDeleteMsg:(0,o.default)("Are you sure you wish to detach this partition?"),columns:["is_attach","partition_name","is_default","values_from","values_to","values_in","values_modulus","values_remainder"],canAdd:function(e){return!!e.is_partitioned},min_version:1e5},{id:"partition_note",label:(0,o.default)("Partitions"),type:"note",group:"partition",mode:["create"],text:["<ul><li>","<strong>",(0,o.default)("Create a table: "),"</strong>",(0,o.default)("User can create multiple partitions while creating new partitioned table. Operation switch is disabled in this scenario."),"</li><li>","<strong>",(0,o.default)("Edit existing table: "),"</strong>",(0,o.default)("User can create/attach/detach multiple partitions. In attach operation user can select table from the list of suitable tables to be attached."),"</li><li>","<strong>",(0,o.default)("Default: "),"</strong>",(0,o.default)("The default partition can store rows that do not fall into any existing partition’s range or list."),"</li><li>","<strong>",(0,o.default)("From/To/In input: "),"</strong>",(0,o.default)("From/To/In input: Values for these fields must be quoted with single quote. For more than one partition key values must be comma(,) separated."),"</li><li>","<strong>",(0,o.default)("Example: From/To: "),"</strong>",(0,o.default)("Enabled for range partition. Consider partitioned table with multiple keys of type Integer, then values should be specified like '100','200'."),"</li><li>","<strong>",(0,o.default)("In: "),"</strong>",(0,o.default)("Enabled for list partition. Values must be comma(,) separated and quoted with single quote."),"</li><li>","<strong>",(0,o.default)("Modulus/Remainder: "),"</strong>",(0,o.default)("Enabled for hash partition."),"</li></ul>"].join(""),min_version:1e5},{type:"group",id:"parameters",label:(0,o.default)("Parameters"),visible:!this.inErd},{type:"nested-tab",group:"parameters",mode:["edit","create"],deps:["is_partitioned"],schema:this.vacuumSettingsSchema,visible:!this.inErd},{id:"security_group",type:"group",label:(0,o.default)("Security"),visible:!this.inErd},{id:"relacl_str",label:(0,o.default)("Privileges"),disabled:this.inCatalog,type:"text",mode:["properties"],group:"security_group"},{id:"relacl",label:(0,o.default)("Privileges"),type:"collection",group:"security_group",schema:this.getPrivilegeRoleSchema(["a","r","w","d","D","x","t"]),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["grantee"]},{id:"seclabels",label:(0,o.default)("Security labels"),canEdit:!1,schema:new i.default,editable:!1,canAdd:!0,type:"collection",min_version:90100,mode:["edit","create"],group:"security_group",canDelete:!0,control:"unique-col-collection"},{id:"vacuum_settings_str",label:(0,o.default)("Storage settings"),type:"multiline",group:"advanced",mode:["properties"]}]}},{key:"validate",value:function(e,t){return!(!e.is_partitioned||!this.isNew(e)||e.partition_keys&&!(e.partition_keys&&e.partition_keys.length<=0))&&(t("partition_keys",(0,o.default)("Please specify at least one key for partitioned table.")),!0)}}],[{key:"getErdSupportedData",value:function(e){var t=C({},e);return(t=l.default.pick(t,["name","schema","description","rlspolicy","forcerlspolicy","fillfactor","toast_tuple_target","parallel_workers","relhasoids","relpersistence","columns","primary_key","foreign_key"])).columns=t.columns.map((function(e){return delete e.inheritedfromtable,e})),t.foreign_key=(t.foreign_key||[]).map((function(e){return e.autoindex=!1,e.coveringindex&&(e.autoindex=!0),e})),t}}]),n}(a.default);t.default=F},80136:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EventSchema=void 0,n(68309),n(82772),n(47941),n(68304),n(30489);var a=s(n(91669)),i=s(n(89406)),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){m(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return f(this,n),(e=t.call(this,c({evnt_update:!1,evnt_insert:!1,evnt_delete:!1,evnt_truncate:!1,is_row_trigger:!1,is_constraint_trigger:!1},o))).fieldOptions=c({nodeInfo:null},r),e.nodeInfo=e.fieldOptions.nodeInfo,e}return b(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"inSchemaWithModelCheck",value:function(e){return!this.nodeInfo||!("schema"in this.nodeInfo)||!this.isNew(e)}},{key:"baseFields",get:function(){var e=this;return[{id:"evnt_insert",label:(0,a.default)("INSERT"),type:"switch",mode:["create","edit","properties"],group:(0,a.default)("Events"),readonly:function(t){var n=t.evnt_insert;return!(!r.isUndefined(n)&&e.nodeInfo&&"ppas"==e.nodeInfo.server.server_type&&e.isNew(t))&&e.inSchemaWithModelCheck(t)}},{id:"evnt_update",label:(0,a.default)("UPDATE"),type:"switch",mode:["create","edit","properties"],group:(0,a.default)("Events"),readonly:function(t){var n=t.evnt_update;return!(!r.isUndefined(n)&&e.nodeInfo&&"ppas"==e.nodeInfo.server.server_type&&e.isNew(t))&&e.inSchemaWithModelCheck(t)}},{id:"evnt_delete",label:(0,a.default)("DELETE"),type:"switch",mode:["create","edit","properties"],group:(0,a.default)("Events"),readonly:function(t){var n=t.evnt_delete;return!(!r.isUndefined(n)&&e.nodeInfo&&"ppas"==e.nodeInfo.server.server_type&&e.isNew(t))&&e.inSchemaWithModelCheck(t)}},{id:"evnt_truncate",label:(0,a.default)("TRUNCATE"),type:"switch",group:(0,a.default)("Events"),deps:["is_row_trigger","is_constraint_trigger"],readonly:function(t){var n=t.is_constraint_trigger,o=t.is_row_trigger,a=e.nodeInfo?e.nodeInfo.server.server_type:null;return 1==o?(t.evnt_truncate=!1,!0):!("ppas"===a&&!r.isUndefined(n)&&!r.isUndefined(o)&&!1===n&&e.isNew(t))&&e.inSchemaWithModelCheck(t)}}]}},{key:"validate",value:function(e,t){if((0,l.isEmptyString)(e.service)){if(!(!e.tfunction||e.evnt_truncate||e.evnt_delete||e.evnt_update||e.evnt_insert))return t("evnt_insert",(0,a.default)("Specify at least one event.")),!0;t("evnt_insert",null)}}}]),n}(i.default);t.EventSchema=_;var w=function(e){m(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return f(this,n),(e=t.call(this,c({name:void 0,is_row_trigger:!0,fires:"BEFORE"},o))).fieldOptions=c({triggerFunction:[]},r),e.nodeInfo=e.fieldOptions.nodeInfo,e}return b(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"inSchemaWithModelCheck",value:function(e){return!("schema"in this.nodeInfo)||!this.isNew(e)}},{key:"disableTransition",value:function(e){if(!this.isNew())return!0;var t=!1,n=null,o=e.name,a=0;return-1==r.indexOf(Object.keys(this.nodeInfo),"table")||this.nodeInfo.server.version<1e5||("tgoldtable"==o?n="evnt_delete":"tgnewtable"==o&&(n="evnt_insert"),e.evnt_insert&&a++,e.evnt_update&&a++,e.evnt_delete&&a++,e.is_constraint_trigger||"AFTER"!=e.fires||!e.evnt_update&&!e[n]||1!=a||(t=e.evnt_update&&r.size(e.columns)>=1&&""!=e.columns[0]),t&&e.name&&(e.name=null),t)}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,a.default)("Name"),cell:"text",type:"text",disabled:e.inCatalog(),noEmpty:!0},{id:"oid",label:(0,a.default)("OID"),cell:"text",type:"int",mode:["properties"]},{id:"is_enable_trigger",label:(0,a.default)("Trigger enabled?"),mode:["edit","properties"],group:(0,a.default)("Definition"),type:"select",disabled:function(){return"catalog"in e.nodeInfo||"view"in e.nodeInfo},options:[{label:(0,a.default)("Enable"),value:"O"},{label:(0,a.default)("Enable Replica"),value:"R"},{label:(0,a.default)("Enable Always"),value:"A"},{label:(0,a.default)("Disable"),value:"D"}],controlProps:{allowClear:!1}},{id:"is_row_trigger",label:(0,a.default)("Row trigger?"),type:"switch",group:(0,a.default)("Definition"),mode:["create","edit","properties"],deps:["is_constraint_trigger"],readonly:function(t){var n;if(!e.isNew())return!0;if(r.has(e.nodeInfo,"table")&&r.has(e.nodeInfo.table,"is_partitioned")&&e.nodeInfo.table.is_partitioned&&(null===(n=e.nodeInfo)||void 0===n?void 0:n.server.version)<11e4)return t.is_row_trigger=!1,!0;var o=t.is_constraint_trigger;if(e.inSchemaWithModelCheck(t)){var a=t.is_row_trigger;return!(!r.isUndefined(a)&&"ppas"==e.nodeInfo.server.server_type)}return!r.isUndefined(o)&&!0===o&&(t.is_row_trigger=!0,!0)}},{id:"is_constraint_trigger",label:(0,a.default)("Constraint trigger?"),type:"switch",mode:["create","edit","properties"],group:(0,a.default)("Definition"),deps:["tfunction"],readonly:function(t){var n=t.tfunction;return r.has(e.nodeInfo,"table")&&r.has(e.nodeInfo.table,"is_partitioned")&&e.nodeInfo.table.is_partitioned||r.has(e.nodeInfo,"view")||"ppas"===e.nodeInfo.server.server_type&&!r.isUndefined(n)&&"Inline EDB-SPL"===n?(t.is_constraint_trigger=!1,!0):e.inSchemaWithModelCheck(t)},disabled:function(){return"view"in e.nodeInfo}},{id:"tgdeferrable",label:(0,a.default)("Deferrable?"),type:"switch",group:(0,a.default)("Definition"),mode:["create","edit","properties"],deps:["is_constraint_trigger"],readonly:function(t){var n=t.is_constraint_trigger;return!!e.inSchemaWithModelCheck(t)||!(!r.isUndefined(n)&&!0===n)&&(t.tgdeferrable&&(t.tgdeferrable=!1),!0)},disabled:function(e){return!e.is_constraint_trigger}},{id:"tginitdeferred",label:(0,a.default)("Deferred?"),type:"switch",group:(0,a.default)("Definition"),mode:["create","edit","properties"],deps:["tgdeferrable","is_constraint_trigger"],readonly:function(t){var n=t.tgdeferrable;return!!e.inSchemaWithModelCheck(t)||!(!r.isUndefined(n)&&n)&&(e.tginitdeferred&&(t.tginitdeferred=!1),!t.is_constraint_trigger)},disabled:function(e){return!e.is_constraint_trigger}},{id:"tfunction",label:(0,a.default)("Trigger function"),type:"select",readonly:e.inSchemaWithModelCheck,mode:["create","edit","properties"],group:(0,a.default)("Definition"),control:"node-ajax-options",url:"get_triggerfunctions",url_jump_after_node:"schema",options:e.fieldOptions.triggerFunction,cache_node:"trigger_function"},{id:"tgargs",label:(0,a.default)("Arguments"),cell:"text",group:(0,a.default)("Definition"),type:"text",mode:["create","edit","properties"],deps:["tfunction"],readonly:function(t){var n=t.tfunction,o=e.nodeInfo.server.server_type;return!!e.inSchemaWithModelCheck(t)||"ppas"===o&&!r.isUndefined(n)&&"Inline EDB-SPL"===n&&(t.tgargs=void 0,!0)}},{id:"fires",label:(0,a.default)("Fires"),deps:["is_constraint_trigger"],mode:["create","edit","properties"],group:(0,a.default)("Events"),options:function(){return-1!=r.indexOf(Object.keys(e.nodeInfo),"table")?[{label:"BEFORE",value:"BEFORE"},{label:"AFTER",value:"AFTER"}]:[{label:"BEFORE",value:"BEFORE"},{label:"AFTER",value:"AFTER"},{label:"INSTEAD OF",value:"INSTEAD OF"}]},type:"select",controlProps:{allowClear:!1},readonly:function(t){if(!e.isNew())return!0;var n=t.is_constraint_trigger;if(e.inSchemaWithModelCheck(t)){var o=t.fires;return!(!r.isUndefined(o)&&"ppas"==e.nodeInfo.server.server_type)}return!r.isUndefined(n)&&!0===n&&(t.fires="AFTER",!0)}},{type:"nested-fieldset",mode:["create","edit","properties"],label:(0,a.default)("Events"),group:(0,a.default)("Events"),schema:new _({nodeInfo:e.nodeInfo})},{id:"whenclause",label:(0,a.default)("When"),type:"sql",readonly:e.inSchemaWithModelCheck,mode:["create","edit","properties"],visible:!0,group:(0,a.default)("Events")},{id:"columns",label:(0,a.default)("Columns"),type:"select",controlProps:{multiple:!0},deps:["evnt_update"],group:(0,a.default)("Events"),options:e.fieldOptions.columns,readonly:function(t){if(e.nodeInfo&&"catalog"in e.nodeInfo)return!0;if(!e.isNew())return!0;var n=t.evnt_update;return!(!r.isUndefined(n)&&n)}},{id:"tgoldtable",label:(0,a.default)("Old table"),type:"text",group:(0,a.default)("Transition"),cell:"text",mode:["create","edit","properties"],deps:["fires","is_constraint_trigger","evnt_insert","evnt_update","evnt_delete","columns"],disabled:e.disableTransition},{id:"tgnewtable",label:(0,a.default)("New table"),type:"text",group:(0,a.default)("Transition"),cell:"string",mode:["create","edit","properties"],deps:["fires","is_constraint_trigger","evnt_insert","evnt_update","evnt_delete","columns"],disabled:e.disableTransition},{id:"prosrc",label:(0,a.default)("Code"),group:(0,a.default)("Code"),type:"sql",mode:["create","edit"],deps:["tfunction"],isFullTab:!0,visible:!0,disabled:function(t){var n=t.tfunction;return"ppas"!==e.nodeInfo.server.server_type||r.isUndefined(n)||"Inline EDB-SPL"!==n}},{id:"is_sys_trigger",label:(0,a.default)("System trigger?"),cell:"text",type:"switch",disabled:e.inSchemaWithModelCheck,mode:["properties"]},{id:"description",label:(0,a.default)("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:e.inCatalog()}]}},{key:"validate",value:function(e,t){if((0,l.isEmptyString)(e.service)){if((0,l.isEmptyString)(e.tfunction))return t("tfunction",(0,a.default)("Trigger function cannot be empty.")),!0;t("tfunction",null)}}}]),n}(i.default);t.default=w},31434:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(68304),n(30489),n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getCompositeSchema=function(e,t,n){return new x({types:function(){return(0,l.getNodeAjaxOptions)("get_types",e,t,n,{cacheLevel:"domain"})},collations:function(){return(0,l.getNodeAjaxOptions)("get_collations",e,t,n)}})},t.getRangeSchema=function(e,t,n){return new j({typnameList:function(){return(0,l.getNodeAjaxOptions)("get_stypes",e,t,n)},getSubOpClass:function(r){return new Promise((function(o,a){var i,l=(0,u.default)(),c=e.generate_url.apply(e,[null,"get_subopclass",n,!1,t]);s.default.isUndefined(r)||""==r?o(i):l.get(c,{params:{typname:r}}).then((function(e){i=e.data.data,o(i)})).catch((function(e){a(e)}))}))},collationsList:function(){return(0,l.getNodeAjaxOptions)("get_collations",e,t,n)},getCanonicalFunctions:function(r){return new Promise((function(o,a){var i=(0,u.default)(),l=e.generate_url.apply(e,[null,"get_canonical",n,!1,t]),c=[];s.default.isUndefined(r)||""==r||null==r?o(c):i.get(l,{params:{name:r}}).then((function(e){c=e.data.data,o(c)})).catch((function(e){a(e)}))}))},getSubDiffFunctions:function(r,o){return new Promise((function(a,i){var l,c=(0,u.default)(),d=e.generate_url.apply(e,[null,"get_stypediff",n,!1,t]);s.default.isUndefined(r)||""==r||s.default.isUndefined(o)||""==o?a(l):c.get(d,{params:{typname:r,opcname:o}}).then((function(e){l=e.data.data,a(l)})).catch((function(e){i(e)}))}))}},{node_info:t})},t.getExternalSchema=function(e,t,n){return new P({externalFunctionsList:function(){return(0,l.getNodeAjaxOptions)("get_external_functions",e,t,n)},types:function(){return(0,l.getNodeAjaxOptions)("get_types",e,t,n,{cacheLevel:"domain"})}},{node_info:t})},t.getDataTypeSchema=function(e,t,n){return new C({types:function(){return(0,l.getNodeAjaxOptions)("get_types",e,t,n,{cacheLevel:"domain"})}})},t.RangeSchema=t.ExternalSchema=t.EnumerationSchema=t.CompositeSchema=t.default=void 0,n(88674),n(41539),n(89554),n(54747),n(68309),n(26699),n(32023),n(32564),n(21249),n(4723),n(74916),n(40561);var o=d(n(91669)),a=d(n(89406)),i=d(n(67091)),l=n(77077),s=d(n(81311)),u=d(n(2832)),c=n(76055);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){g(n,e);var t=_(n);function n(){return m(this,n),t.call(this,{oid:void 0,label:void 0})}return h(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"label",label:(0,o.default)("Label"),type:"text",cell:"text",minWidth:640,editable:function(t){return!!s.default.isUndefined(e.isNew)||e.isNew(t)}}]}}]),n}(a.default);t.EnumerationSchema=S;var j=function(e){g(n,e);var t=_(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return m(this,n),(e=t.call(this,p({typname:null,oid:void 0,is_sys_type:!1},a))).fieldOptions=p({typnameList:[],collationsList:[]},r),e.nodeInfo=p({},o.node_info),e}return h(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"typname",label:(0,o.default)("Subtype"),type:function(e){return{type:"select",options:t.fieldOptions.typnameList,optionsLoaded:function(e){t.fieldOptions.typnameList=e},controlProps:{allowClear:!0,filter:function(n){var r=[];return e&&t.isNew(e)?(n&&n.length>0&&(e.subtypes=n),n.forEach((function(e){e&&""==e.label||r.push({label:e.label,value:e.value})}))):r=n,r}}}},controlProps:{allowClear:!0,placeholder:"",width:"100%"},mode:["properties","create","edit"],group:(0,o.default)("Range Type"),disabled:function(){return t.inCatalog()},readonly:function(e){return!t.isNew(e)}},{id:"opcname",label:(0,o.default)("Subtype operator class"),cell:"string",mode:["properties","create","edit"],group:(0,o.default)("Range Type"),disabled:function(){return t.inCatalog()},readonly:function(e){return!t.isNew(e)},deps:["typname"],type:function(e){return{type:"select",options:function(){return t.fieldOptions.getSubOpClass(e.typname)},optionsReloadBasis:e.typname,controlProps:{allowClear:!0,filter:function(t){var n=[];return e?t.forEach((function(e){e&&""==e.label||n.push({label:e.label,value:e.value})})):n=t,n}}}}},{id:"collname",label:(0,o.default)("Collation"),cell:"string",type:function(e){return{type:"select",options:t.fieldOptions.collationsList,optionsLoaded:function(e){t.fieldOptions.collationsList=e},controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){var r=[];return e&&t.isNew(e)?n.forEach((function(e){e&&""==e.label||r.push({label:e.label,value:e.value})})):r=n,r}}}},mode:["properties","create","edit"],group:(0,o.default)("Range Type"),deps:["typname"],controlProps:{allowClear:!0,placeholder:"",width:"100%"},disabled:function(n){var r=t.inCatalog();if(r)return r;var o=n.typname;return s.default.isUndefined(o)||s.default.each(n.subtypes,(function(e){o===e.label&&(r=e.is_collate)})),r||(n.collname="",e.options=[]),!r},readonly:function(e){return!t.isNew(e)}},{id:"rngcanonical",label:(0,o.default)("Canonical function"),cell:"string",type:function(e){return{type:"select",options:function(){return t.fieldOptions.getCanonicalFunctions(e.name)},optionsReloadBasis:e.typname,controlProps:{allowClear:!0,filter:function(t){var n=[];return e?t.forEach((function(e){e&&""==e.label||n.push({label:e.label,value:e.value})})):n=t,n}}}},mode:["properties","create","edit"],group:(0,o.default)("Range Type"),disabled:function(){return t.inCatalog()},readonly:function(e){return!t.isNew(e)},deps:["name","typname"]},{id:"rngsubdiff",label:(0,o.default)("Subtype diff function"),cell:"string",mode:["properties","create","edit"],group:(0,o.default)("Range Type"),disabled:function(){return t.inCatalog()},readonly:function(e){return!t.isNew(e)},deps:["typname","opcname"],type:function(e){return{type:"select",options:function(){return t.fieldOptions.getSubDiffFunctions(e.typname,e.opcname)},optionsReloadBasis:e.typname+e.opcname,controlProps:{allowClear:!0,filter:function(t){var n=[];return e?t.forEach((function(e){e&&""==e.label||n.push({label:e.label,value:e.value})})):n=t,n}}}}}]}},{key:"validate",value:function(e,t){if("r"===e.typtype&&(0,c.isEmptyString)(e.typname))return t("typname",(0,o.default)("Subtype cannot be empty")),!0}}]),n}(a.default);t.RangeSchema=j;var P=function(e){g(n,e);var t=_(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return m(this,n),(e=t.call(this,p({name:null,typinput:void 0,oid:void 0,is_sys_type:!1,typtype:void 0},a))).fieldOptions=p({types:[],externalFunctionsList:[]},r),e.fieldOptions.typeCategory=[{label:"Array types",value:"A"},{label:"Boolean types",value:"B"},{label:"Composite types",value:"C"},{label:"Date/time types",value:"D"},{label:"Enum types",value:"E"},{label:"Geometric types",value:"G"},{label:"Network address types",value:"I"},{label:"Numeric types",value:"N"},{label:"Pseudo-types",value:"P"},{label:"String types",value:"S"},{label:"Timespan types",value:"T"},{label:"User-defined types",value:"U"},{label:"Bit-string types",value:"V"},{label:"unknown type",value:"X"}],e.fieldOptions.typeAlignOptions=[{label:"char",value:"c"},{label:"int2",value:"s"},{label:"int4",value:"i"},{label:"double",value:"d"}],e.fieldOptions.typStorageOptions=[{label:"PLAIN",value:"p"},{label:"EXTERNAL",value:"e"},{label:"MAIN",value:"m"},{label:"EXTENDED",value:"x"}],e.nodeInfo=p({},o.node_info),e}return h(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"external_func_combo",value:function(e){var t=[];return s.default.each(e,(function(e){e&&""==e.label||"all"==e.cbtype&&t.push(e)})),t}},{key:"baseFields",get:function(){var e=this;return[{id:"spacer_ctrl",group:(0,o.default)("Required"),mode:["edit","create"],type:"spacer"},{id:"typinput",label:(0,o.default)("Input function"),mode:["properties","create","edit"],group:(0,o.default)("Required"),disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},type:function(t){return{type:"select",options:e.fieldOptions.externalFunctionsList,optionsLoaded:function(t){e.fieldOptions.externalFunctionsList=t},controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){return t&&e.isNew(t)?e.external_func_combo(n):n}}}}},{id:"typoutput",label:(0,o.default)("Output function"),mode:["properties","create","edit"],group:(0,o.default)("Required"),type:function(t){return{type:"select",options:e.fieldOptions.externalFunctionsList,optionsLoaded:function(t){e.fieldOptions.externalFunctionsList=t},controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){return t&&e.isNew(t)?e.external_func_combo(n):n}}}},readonly:function(t){return!e.isNew(t)},disabled:function(){return e.inCatalog()},controlProps:{allowClear:!0,placeholder:"",width:"100%"}},{id:"spacer_ctrl_optional_1",group:(0,o.default)("Optional-1"),mode:["edit","create"],type:"spacer"},{id:"typreceive",label:(0,o.default)("Receive function"),type:function(t){return{type:"select",options:e.fieldOptions.externalFunctionsList,optionsLoaded:function(t){e.fieldOptions.externalFunctionsList=t},controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){return t&&e.isNew(t)?e.external_func_combo(n):n}}}},group:(0,o.default)("Optional-1"),mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!0,placeholder:"",width:"100%"}},{id:"typsend",label:(0,o.default)("Send function"),group:(0,o.default)("Optional-1"),type:function(t){return{type:"select",options:e.fieldOptions.externalFunctionsList,optionsLoaded:function(t){e.fieldOptions.externalFunctionsList=t},controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){return t&&e.isNew(t)?e.external_func_combo(n):n}}}},mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!0,placeholder:"",width:"100%"}},{id:"typmodin",label:(0,o.default)("Typmod in function"),type:function(t){return{type:"select",options:e.fieldOptions.externalFunctionsList,optionsLoaded:function(t){e.fieldOptions.externalFunctionsList=t},controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){var r=[];return t&&e.isNew(t)?s.default.each(n,(function(e){e&&""==e.label||"typmodin"!==e.cbtype&&"all"!==e.cbtype||r.push(e)})):r=n,r}}}},mode:["properties","create","edit"],group:(0,o.default)("Optional-1"),disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!0,placeholder:"",width:"100%"}},{id:"typmodout",label:(0,o.default)("Typmod out function"),group:(0,o.default)("Optional-1"),type:function(t){return{type:"select",options:e.fieldOptions.externalFunctionsList,optionsLoaded:function(t){e.fieldOptions.externalFunctionsList=t},controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){var r=[];return t&&e.isNew(t)?s.default.each(n,(function(e){e&&""==e.label||"typmodout"!==e.cbtype&&"all"!==e.cbtype||r.push(e)})):r=n,r}}}},mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)}},{id:"typlen",label:(0,o.default)("Internal length"),cell:"integer",group:(0,o.default)("Optional-1"),type:"int",mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)}},{id:"variable",label:(0,o.default)("Variable?"),cell:"switch",group:(0,o.default)("Optional-1"),type:"switch",mode:["create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)}},{id:"typdefault",label:(0,o.default)("Default?"),cell:"string",group:(0,o.default)("Optional-1"),type:"text",mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)}},{id:"typanalyze",label:(0,o.default)("Analyze function"),group:(0,o.default)("Optional-1"),type:function(t){return{type:"select",options:e.fieldOptions.externalFunctionsList,optionsLoaded:function(t){e.fieldOptions.externalFunctionsList=t},controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){return t&&e.isNew(t)?e.external_func_combo(n):n}}}},mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!0,placeholder:"",width:"100%"}},{id:"typcategory",label:(0,o.default)("Category type"),cell:"string",group:(0,o.default)("Optional-1"),type:function(){return{type:"select",options:e.fieldOptions.typeCategory,optionsLoaded:function(t){e.fieldOptions.typeCategory=t},controlProps:{allowClear:!0,placeholder:"",width:"100%"}}},mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!0,placeholder:"",width:"100%"}},{id:"typispreferred",label:(0,o.default)("Preferred?"),type:"switch",mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},group:(0,o.default)("Optional-1")},{id:"spacer_ctrl_optional_2",group:(0,o.default)("Optional-2"),mode:["edit","create"],type:"spacer"},{id:"element",label:(0,o.default)("Element type"),group:(0,o.default)("Optional-2"),type:function(t){return{type:"select",options:e.fieldOptions.types,controlProps:{allowClear:!0,placeholder:"",width:"100%",filter:function(n){var r=[];return t&&e.isNew(t)?s.default.each(n,(function(e){e&&""==e.label||r.push(e)})):r=n,r}}}},mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)}},{id:"typdelim",label:(0,o.default)("Delimiter"),cell:"string",type:"text",mode:["properties","create","edit"],group:(0,o.default)("Optional-2"),disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)}},{id:"typalign",label:(0,o.default)("Alignment type"),cell:"string",group:(0,o.default)("Optional-2"),type:"select",options:e.fieldOptions.typeAlignOptions,mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!0,placeholder:"",width:"100%"}},{id:"typstorage",label:(0,o.default)("Storage type"),type:"select",mode:["properties","create","edit"],group:(0,o.default)("Optional-2"),cell:"string",disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!0,placeholder:"",width:"100%"},options:e.fieldOptions.typStorageOptions},{id:"typbyval",label:(0,o.default)("Passed by value?"),cell:"switch",type:"switch",mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},group:(0,o.default)("Optional-2")},{id:"is_collatable",label:(0,o.default)("Collatable?"),cell:"switch",min_version:90100,group:(0,o.default)("Optional-2"),type:"switch",mode:["properties","create","edit"],disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)}}]}},{key:"validate",value:function(e,t){if("b"===e.typtype){if((0,c.isEmptyString)(e.typinput))return t("typinput",(0,o.default)("Input function cannot be empty")),!0;if((0,c.isEmptyString)(e.typoutput))return t("typoutput",(0,o.default)("Output function cannot be empty")),!0}return!1}}]),n}(a.default);t.ExternalSchema=P;var x=function(e){g(n,e);var t=_(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return m(this,n),(e=t.call(this,p({oid:void 0,is_sys_type:!1,attnum:void 0,member_name:void 0,type:void 0,tlength:null,is_tlength:!1,precision:void 0,is_precision:!1,collation:void 0,min_val:void 0,max_val:void 0},o))).fieldOptions=p({types:[],collations:[]},r),e.type_options={},e}return h(n,[{key:"setTypeOptions",value:function(e){var t=this;e.forEach((function(e){t.type_options[e.value]=p({},e)}))}},{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"member_name",label:(0,o.default)("Member Name"),type:"text",cell:"text"},{id:"type",label:(0,o.default)("Type"),type:"text",cell:function(){return{cell:"select",options:e.fieldOptions.types,optionsLoaded:function(t){e.setTypeOptions(t)},controlProps:{allowClear:!1}}}},{id:"tlength",label:(0,o.default)("Length/Precision"),deps:["type"],type:"text",disabled:!1,cell:"int",depChange:function(e,t){if(s.default.isArray(t)&&"type"==t[2])return e.tlength=null,p(p({},e),{},{value:null})},editable:function(t){var n=t.type;return e.type_options&&s.default.each(e.type_options,(function(e){n!=e.value||(e.length?(t.is_tlength=!0,t.min_val=e.min_val,t.max_val=e.max_val):t.is_tlength=!1)})),t.is_tlength}},{id:"precision",label:(0,o.default)("Scale"),deps:["type"],type:"text",disabled:!1,cell:"int",depChange:function(e,t){if(s.default.isArray(t)&&"type"==t[2])return p(p({},e),{},{value:null})},editable:function(t){var n=t.type;return e.type_options&&s.default.each(e.type_options,(function(e){n==e.value&&(e.precision?(t.is_precision=!0,t.min_val=e.min_val,t.max_val=e.max_val):t.is_precision=!1)})),t.is_precision}},{id:"collation",label:(0,o.default)("Collation"),type:"text",depChange:function(e,t){if(s.default.isArray(t)&&"type"==t[2])return p(p({},e),{},{value:null})},cell:function(){return{cell:"select",options:e.fieldOptions.collations,controlProps:{allowClear:!1}}},deps:["type"],editable:function(t){var n=t.type,r=!1;return e.type_options&&s.default.each(e.type_options,(function(e){n==e.value&&e.is_collatable&&(r=!0)})),r}}]}},{key:"validate",value:function(e,t){var n=this,r=null;if(n.top&&n.top.sessData&&"c"===n.top.sessData.typtype){if((0,c.isEmptyString)(e.member_name))return t("member_name",r=(0,o.default)("Please specify the value for member name.")),!0;if((0,c.isEmptyString)(e.type))return t("type",r=(0,o.default)("Please specify the type.")),!0;(s.default.isUndefined(r)||null==r)&&(t("member_name",r=null),t("type",r))}return!1}}]),n}(a.default);t.CompositeSchema=x;var C=function(e){g(n,e);var t=_(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return m(this,n),(e=t.call(this,p({oid:void 0,is_sys_type:!1,attnum:void 0,member_name:void 0,type:void 0,tlength:null,is_tlength:!1,precision:void 0,is_precision:!1,min_val:void 0,max_val:void 0,attlen:void 0,min_val_attlen:void 0,max_val_attlen:void 0,attprecision:null,min_val_attprecision:void 0,max_val_attprecision:void 0},o))).types=r.types,e.type_options=[],e}return h(n,[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"type",label:(0,o.default)("Data Type"),group:(0,o.default)("Definition"),mode:["edit","create"],disabled:!1,readonly:function(t){return!e.isNew(t)},node:"type",cache_node:"domain",editable:!0,deps:["typtype"],type:function(t){return{type:"select",options:e.types,optionsLoaded:function(t){e.types=t},controlProps:{allowClear:!1,filter:function(e){var n=[];return e.forEach((function(e){e.value.includes("[]")||n.push(e)})),t.type_options=n,n}}}}},{id:"maxsize",group:(0,o.default)("Definition"),label:(0,o.default)("Size"),type:"int",deps:["typtype"],cell:"int",mode:["create","edit"],readonly:function(t){return!e.isNew(t)},visible:function(e){return"V"===e.typtype}},{id:"tlength",group:(0,o.default)("Data Type"),label:(0,o.default)("Length/Precision"),mode:["edit","create"],deps:["type"],type:"text",cell:"int",readonly:function(t){return!e.isNew(t)},visible:function(e){return"N"===e.typtype},disabled:function(e){var t=e.type,n=!0;return e.type_options&&s.default.each(e.type_options,(function(r){t==r.value&&r.length&&(e.min_val_attlen=r.min_val,e.max_val_attlen=r.max_val,n=!1)})),n&&setTimeout((function(){e.attlen&&(e.attlen=null)}),10),n},editable:function(e){var t=e.type;return e.type_options&&s.default.each(e.type_options,(function(n){t==n.value&&(n.length?(e.is_tlength=!0,e.min_val=n.min_val,e.max_val=n.max_val):e.is_tlength=!1)})),e.is_tlength}},{id:"precision",group:(0,o.default)("Data Type"),label:(0,o.default)("Scale"),mode:["edit","create"],deps:["type"],type:"text",readonly:function(t){return!e.isNew(t)},cell:"int",visible:function(e){return"N"===e.typtype},disabled:function(e){var t=e.type,n=!0;return s.default.each(e.type_options,(function(r){t==r.value&&r.precision&&(e.min_val_attprecision=0,e.max_val_attprecision=r.max_val,n=!1)})),n&&setTimeout((function(){e.attprecision&&(e.attprecision=null)}),10),n},editable:function(e){var t=e.type;return e.type_options&&s.default.each(e.type_options,(function(n){t==n.value&&(n.precision?(e.is_precision=!0,e.min_val=n.min_val,e.max_val=n.max_val):e.is_precision=!1)})),e.is_precision}}]}}]),n}(a.default),E=function(e){g(n,e);var t=_(n);function n(e,r,o,a,i){var l,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=arguments.length>6?arguments[6]:void 0;return m(this,n),(l=t.call(this,p({name:null,oid:void 0,is_sys_type:!1,typtype:void 0,typeowner:void 0,schema:void 0},u))).fieldOptions=p({roles:[],schemas:[],server_info:[],node_info:[]},s),l.getPrivilegeRoleSchema=e,l.compositeSchema=r(),l.getRangeSchema=o,l.getExternalSchema=a,l.getDataTypeSchema=i,l.nodeInfo=l.fieldOptions.node_info,l}return h(n,[{key:"isInvalidColumnAdded",value:function(e){var t=s.default.map(e.enum,"label"),n=!1;return 1==t.length&&null==t[0]?n=!0:t.forEach((function(e){null!=e||(n=!0)})),n}},{key:"schemaCheck",value:function(e){return!this.fieldOptions.node_info||!("schema"in this.fieldOptions.node_info)||(!e||!this.isNew(e)&&(e&&"p"===e.typtype))}},{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"string",type:"text",mode:["properties","create","edit"],noEmpty:!0,disabled:function(t){return e.schemaCheck(t)}},{id:"oid",label:(0,o.default)("OID"),cell:"string",type:"text",mode:["properties"]},{id:"typeowner",label:(0,o.default)("Owner"),cell:"string",mode:["properties","create","edit"],noEmpty:!0,type:"select",options:this.fieldOptions.roles,controlProps:{allowClear:!1},disabled:function(){return e.inCatalog()}},{id:"schema",label:(0,o.default)("Schema"),cell:"string",mode:["create","edit"],noEmpty:!0,disabled:function(t){return e.schemaCheck(t)},type:function(t){return{type:"select",options:e.fieldOptions.schemas,optionsLoaded:function(t){e.fieldOptions.schemas=t},controlProps:{allowClear:!0,filter:function(n){var r=[];return t&&e.isNew(t)?n.forEach((function(e){e&&e.label.match(/^pg_/)||r.push({label:e.label,value:e.value,image:"icon-schema"})})):r=n,r}}}}},{id:"typtype",label:(0,o.default)("Type"),mode:["create","edit"],group:(0,o.default)("Definition"),type:"select",disabled:function(){return e.inCatalog()},readonly:function(t){return!e.isNew(t)},controlProps:{allowClear:!1},options:function(){var t=[{label:(0,o.default)("Composite"),value:"c"},{label:(0,o.default)("Enumeration"),value:"e"},{label:(0,o.default)("External"),value:"b"},{label:(0,o.default)("Range"),value:"r"},{label:(0,o.default)("Shell"),value:"p"}];return"ppas"===e.fieldOptions.server_info.server_type&&e.fieldOptions.server_info.version>=90500&&t.push({label:(0,o.default)("Nested Table"),value:"N"},{label:(0,o.default)("Varying Array"),value:"V"}),t}},{id:"composite",label:(0,o.default)("Composite Type"),editable:!0,type:"collection",group:(0,o.default)("Definition"),mode:["edit","create"],uniqueCol:["member_name"],canAdd:!0,canEdit:!1,canDelete:!0,disabled:function(){return e.inCatalog()},schema:e.compositeSchema,deps:["typtype"],depChange:function(e){s.default.isArray(e.composite)&&e.composite.length>0&&"c"!==e.typtype&&e.composite.splice(0,e.composite.length)},visible:function(e){return"c"===e.typtype}},{id:"enum",label:(0,o.default)("Enumeration type"),schema:new S,type:"collection",group:(0,o.default)("Definition"),mode:["edit","create"],canAddRow:function(t){return!e.isInvalidColumnAdded(t)},canEdit:!1,canDeleteRow:function(t){return e.isNew(t)},canEditRow:!1,disabled:function(){return e.inCatalog()},deps:["typtype"],uniqueCol:["label"],visible:function(e){return"e"===e.typtype}},{type:"nested-fieldset",group:(0,o.default)("Definition"),label:"",deps:["typtype"],mode:["edit","create"],visible:function(e){return"N"===e.typtype||"V"===e.typtype},schema:e.getDataTypeSchema()},{type:"nested-fieldset",group:(0,o.default)("Definition"),label:"",mode:["edit","create"],visible:function(e){return e.typtype&&"r"===e.typtype},deps:["typtype"],schema:e.getRangeSchema()},{type:"nested-tab",group:(0,o.default)("Definition"),label:(0,o.default)("External Type"),deps:["typtype"],mode:["create","edit"],tabPanelExtraClasses:"inline-tab-panel-padded",visible:function(e){return"b"===e.typtype},schema:e.getExternalSchema()},{id:"alias",label:(0,o.default)("Alias"),cell:"string",type:"text",mode:["properties"],disabled:function(){return e.inCatalog()}},{id:"member_list",label:(0,o.default)("Members"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return"c"===e.typtype}},{id:"enum_list",label:(0,o.default)("Labels"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return"e"===e.typtype}},{id:"typname",label:(0,o.default)("SubType"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return"r"===e.typtype}},{id:"opcname",label:(0,o.default)("Subtype operator class"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return"r"===e.typtype}},{id:"collname",label:(0,o.default)("Collation"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return"r"===e.typtype}},{id:"rngcanonical",label:(0,o.default)("Canonical function"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return"r"===e.typtype}},{id:"rngsubdiff",label:(0,o.default)("Subtype diff function"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return"r"===e.typtype}},{id:"typinput",label:(0,o.default)("Input function"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return"b"===e.typtype}},{id:"typoutput",label:(0,o.default)("Output function"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return"b"===e.typtype}},{id:"type",label:(0,o.default)("Data Type"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return"N"===e.typtype||"V"===e.typtype}},{id:"tlength",label:(0,o.default)("Length/Precision"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return"N"===e.typtype}},{id:"precision",label:(0,o.default)("Scale"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return"N"===e.typtype}},{id:"maxsize",label:(0,o.default)("Size"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Definition"),disabled:function(){return e.inCatalog()},visible:function(e){return"V"===e.typtype}},{id:"type_acl",label:(0,o.default)("Privileges"),cell:"string",type:"text",mode:["properties"],group:(0,o.default)("Security"),disabled:function(){return e.inCatalog()}},{id:"is_sys_type",label:(0,o.default)("System type?"),cell:"switch",type:"switch",mode:["properties"],disabled:function(){return e.inCatalog()}},{id:"description",label:(0,o.default)("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],disabled:function(){return e.inCatalog()}},{id:"typacl",label:(0,o.default)("Privileges"),type:"collection",group:(0,o.default)("Security"),schema:this.getPrivilegeRoleSchema(["U"]),mode:["edit","create"],canDelete:!0,uniqueCol:["grantee"],deps:["typtype"],canAdd:function(e){if("p"===e.typtype){var t=e.typacl;t&&t.length>0&&t.splice(0,t.length)}return"p"!==e.typtype}},{id:"seclabels",label:(0,o.default)("Security labels"),schema:new i.default,editable:!1,type:"collection",group:(0,o.default)("Security"),mode:["edit","create"],min_version:90100,canEdit:!1,canDelete:!0,uniqueCol:["provider"],deps:["typtype"],canAdd:function(e){if("p"===e.typtype){var t=e.seclabels;t&&t.length>0&&t.splice(0,t.length)}return"p"!==e.typtype}}]}}]),n}(a.default);t.default=E},15151:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var a=u(n(91669)),i=u(n(89406)),l=u(n(67091)),s=n(76055);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,o,i=y(u);function u(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;return p(this,u),(n=i.call(this,d({spcname:void 0,toast_autovacuum_enabled:"x",autovacuum_enabled:"x",warn_text:void 0},o))).getPrivilegeRoleSchema=e,n.getVacuumSettingsSchema=t,n.fieldOptions=d({role:[],schema:[],spcname:[],nodeInfo:null},r),n.nodeInfo=n.fieldOptions.nodeInfo,n}return t=u,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,a.default)("Name"),cell:"text",type:"text",disabled:e.inCatalog(),noEmpty:!0},{id:"oid",label:(0,a.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"owner",label:(0,a.default)("Owner"),type:"select",cell:"text",options:e.fieldOptions.role,controlProps:{allowClear:!1},disabled:e.inCatalog()},{id:"schema",label:(0,a.default)("Schema"),cell:"text",type:"select",options:e.fieldOptions.schema,mode:["create","edit"],cache_node:"database",disabled:e.inCatalog(),controlProps:{allowClear:!1,first_empty:!1}},{id:"system_view",label:(0,a.default)("System materialized view?"),cell:"text",type:"switch",mode:["properties"]},{id:"acl",label:(0,a.default)("Privileges"),mode:["properties"],type:"text",group:(0,a.default)("Security")},{id:"comment",label:(0,a.default)("Comment"),cell:"text",type:"multiline"},{id:"definition",label:(0,a.default)("Definition"),cell:"text",type:"sql",mode:["create","edit"],group:(0,a.default)("Definition"),isFullTab:!0,controlProps:{readOnly:!(!this.nodeInfo||!("catalog"in this.nodeInfo))}},{id:"with_data",label:(0,a.default)("With data?"),group:(0,a.default)("Storage"),mode:["edit","create"],type:"switch"},{id:"spcname",label:(0,a.default)("Tablespace"),cell:"text",type:"select",group:(0,a.default)("Storage"),options:e.fieldOptions.spcname,controlProps:{allowClear:!1,first_empty:!1}},{id:"fillfactor",label:(0,a.default)("Fill factor"),group:(0,a.default)("Storage"),mode:["edit","create"],noEmpty:!1,type:"int",controlProps:{min:10,max:100}},{id:"vacuum_settings_str",label:(0,a.default)("Storage settings"),type:"multiline",group:(0,a.default)("Storage"),mode:["properties"]},{type:"nested-tab",group:(0,a.default)("Parameter"),mode:["create","edit"],schema:this.getVacuumSettingsSchema()},{id:"datacl",label:(0,a.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["a","r","w","d","D","x","t"]),uniqueCol:["grantee"],editable:!1,group:(0,a.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"seclabels",label:(0,a.default)("Security labels"),schema:new l.default,editable:!1,type:"collection",canEdit:!1,group:(0,a.default)("Security"),canDelete:!0,mode:["edit","create"],canAdd:!0,control:"unique-col-collection",uniqueCol:["provider"]}]}},{key:"validate",value:function(e,t){var n=null,o=this;if((0,s.isEmptyString)(e.service))return(0,s.isEmptyString)(e.definition)?(n=(0,a.default)("Please enter view definition."),t("definition",n),!0):(t("definition",n=null),e.definition&&(o.warningText=null,void 0!==o.origData.oid&&e.definition!==o.origData.definition&&(o.warningText=(0,a.default)("Updating the definition will drop and re-create the materialized view. It may result in loss of information about its dependent objects.")+"<br><br><b>"+(0,a.default)("Do you want to continue?")+"</b>")),!1);n=null,r.each(["definition"],(function(e){t(e,n)}))}}])&&b(t.prototype,n),o&&b(t,o),u}(i.default);t.default=v},45193:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(23123),n(74916),n(15306),n(68304),n(30489);var a=u(n(91669)),i=u(n(89406)),l=u(n(67091)),s=n(76055);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,o,i=y(u);function u(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;return p(this,u),(n=i.call(this,d({owner:void 0,schema:void 0},o))).getPrivilegeRoleSchema=e,n.nodeInfo=t,n.warningText=null,n.fieldOptions=d({role:[],schema:[]},r),n}return t=u,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"notInSchema",value:function(){return!(!this.nodeInfo||!("catalog"in this.nodeInfo))}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,a.default)("Name"),cell:"text",type:"text",disabled:e.notInSchema,noEmpty:!0},{id:"oid",label:(0,a.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"owner",label:(0,a.default)("Owner"),cell:"text",node:"role",disabled:e.notInSchema,type:"select",controlProps:{allowClear:!1},options:e.fieldOptions.role},{id:"schema",label:(0,a.default)("Schema"),cell:"text",type:"select",disabled:e.notInSchema,mode:["create","edit"],controlProps:{allowClear:!1,first_empty:!1},options:e.fieldOptions.schema},{id:"system_view",label:(0,a.default)("System view?"),cell:"text",type:"switch",mode:["properties"]},{id:"acl",label:(0,a.default)("Privileges"),mode:["properties"],type:"text",group:(0,a.default)("Security")},{id:"comment",label:(0,a.default)("Comment"),cell:"text",type:"multiline",disabled:e.notInSchema},{id:"security_barrier",label:(0,a.default)("Security barrier?"),type:"switch",min_version:"90200",group:(0,a.default)("Definition"),disabled:e.notInSchema},{id:"check_option",label:(0,a.default)("Check options"),type:"select",group:(0,a.default)("Definition"),min_version:"90400",mode:["properties","create","edit"],controlProps:{allowClear:!1},disabled:e.notInSchema,options:[{label:(0,a.default)("No"),value:"no"},{label:(0,a.default)("Local"),value:"local"},{label:(0,a.default)("Cascaded"),value:"cascaded"}]},{id:"definition",label:(0,a.default)("Code"),cell:"text",type:"sql",mode:["create","edit"],group:(0,a.default)("Code"),isFullTab:!0,controlProps:{readOnly:!(!e.nodeInfo||!("catalog"in e.nodeInfo))}},{id:"datacl",label:(0,a.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["a","r","w","d","D","x","t"]),uniqueCol:["grantee"],editable:!1,group:(0,a.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"seclabels",label:(0,a.default)("Security labels"),schema:new l.default,editable:!1,type:"collection",canEdit:!1,group:(0,a.default)("Security"),canDelete:!0,mode:["edit","create"],canAdd:!0,uniqueCol:["provider"]}]}},{key:"validate",value:function(e,t){var n=null,o=this;if((0,s.isEmptyString)(e.service)){if((0,s.isEmptyString)(e.definition))return n=(0,a.default)("Please enter view code."),t("definition",n),!0;if(t("definition",n=null),e.definition){if("pg"!=o.nodeInfo.server.server_type||void 0===o.origData.oid||e.definition===o.origData.definition)return o.warningText=null,!1;var i=o.origData.definition&&o.origData.definition.replace(/\s/gi,"").split("FROM"),l=[];return void 0!==e.definition&&(l=e.definition.replace(/\s/gi,"").split("FROM")),i.length!=l.length||i.length>1&&i[0]!=l[0]?o.warningText=(0,a.default)("Changing the columns in a view requires dropping and re-creating the view. This may fail if other objects are dependent upon this view, or may cause procedural functions to fail if they are not modified to take account of the changes.")+"<br><br><b>"+(0,a.default)("Do you wish to continue?")+"</b>":o.warningText=null,!1}}else n=null,r.each(["definition"],(function(e){t(e,n)}))}}])&&b(t.prototype,n),o&&b(t,o),u}(i.default);t.default=v},82234:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DefaultPrivSchema=void 0,n(68304),n(30489);var a=s(n(91669)),i=s(n(89406)),l=s(n(67091));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){m(n,e);var t=h(n);function n(e){var r;return f(this,n),(r=t.call(this)).getPrivilegeRoleSchema=e,r}return b(n,[{key:"baseFields",get:function(){return[{id:"deftblacl",type:"collection",group:(0,a.default)("Tables"),schema:this.getPrivilegeRoleSchema(["a","r","w","d","D","x","t"]),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["grantee","grantor"]},{id:"defseqacl",type:"collection",group:(0,a.default)("Sequences"),schema:this.getPrivilegeRoleSchema(["r","w","U"]),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["grantee","grantor"]},{id:"deffuncacl",type:"collection",group:(0,a.default)("Functions"),schema:this.getPrivilegeRoleSchema(["X"]),mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["grantee","grantor"]},{id:"deftypeacl",type:"collection",group:(0,a.default)("Types"),schema:this.getPrivilegeRoleSchema(["U"]),min_version:90200,mode:["edit","create"],canAdd:!0,canDelete:!0,uniqueCol:["grantee","grantor"]}]}}]),n}(i.default);t.DefaultPrivSchema=_;var w=function(e){m(n,e);var t=h(n);function n(e,r){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;return f(this,n),(o=t.call(this,c({name:void 0,owner:void 0,is_sys_obj:void 0,comment:void 0,encoding:"UTF8",template:void 0,tablespace:void 0,collation:void 0,char_type:void 0,datconnlimit:-1,datallowconn:void 0,variables:[],privileges:[],securities:[],datacl:[],deftblacl:[],deffuncacl:[],defseqacl:[],is_template:!1,deftypeacl:[],schema_res:[]},i))).getVariableSchema=e,o.getPrivilegeRoleSchema=r,o.fieldOptions=c({role:[],encoding:[],template:[],spcname:[],datcollate:[],datctype:[]},a),o}return b(n,[{key:"idAttribute",get:function(){return"did"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,a.default)("Database"),cell:"text",editable:!1,type:"text",noEmpty:!0},{id:"did",label:(0,a.default)("OID"),cell:"text",mode:["properties"],editable:!1,type:"text"},{id:"datowner",label:(0,a.default)("Owner"),editable:!1,type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1}},{id:"is_sys_obj",label:(0,a.default)("System database?"),cell:"switch",type:"switch",mode:["properties"]},{id:"comments",label:(0,a.default)("Comment"),editable:!1,type:"multiline"},{id:"encoding",label:(0,a.default)("Encoding"),editable:!1,type:"select",group:(0,a.default)("Definition"),readonly:function(t){return!e.isNew(t)},options:this.fieldOptions.encoding},{id:"template",label:(0,a.default)("Template"),editable:!1,type:"select",group:(0,a.default)("Definition"),readonly:function(t){return!e.isNew(t)},options:this.fieldOptions.template,controlProps:{allowClear:!1},mode:["create"]},{id:"spcname",label:(0,a.default)("Tablespace"),editable:!1,type:"select",group:(0,a.default)("Definition"),options:this.fieldOptions.spcname,controlProps:{allowClear:!1}},{id:"datcollate",label:(0,a.default)("Collation"),editable:!1,type:"select",group:(0,a.default)("Definition"),readonly:function(t){return!e.isNew(t)},options:this.fieldOptions.datcollate},{id:"datctype",label:(0,a.default)("Character type"),editable:!1,type:"select",group:(0,a.default)("Definition"),readonly:function(t){return!e.isNew(t)},options:this.fieldOptions.datctype},{id:"datconnlimit",label:(0,a.default)("Connection limit"),editable:!1,type:"int",group:(0,a.default)("Definition"),min:-1},{id:"is_template",label:(0,a.default)("Template?"),editable:!1,type:"switch",group:(0,a.default)("Definition"),readonly:!0,mode:["properties","edit"]},{id:"datallowconn",label:(0,a.default)("Allow connections?"),editable:!1,type:"switch",group:(0,a.default)("Definition"),mode:["properties"]},{id:"acl",label:(0,a.default)("Privileges"),type:"text",group:(0,a.default)("Security"),mode:["properties"]},{id:"tblacl",label:(0,a.default)("Default TABLE privileges"),type:"text",group:(0,a.default)("Security"),mode:["properties"]},{id:"seqacl",label:(0,a.default)("Default SEQUENCE privileges"),type:"text",group:(0,a.default)("Security"),mode:["properties"]},{id:"funcacl",label:(0,a.default)("Default FUNCTION privileges"),type:"text",group:(0,a.default)("Security"),mode:["properties"]},{id:"typeacl",label:(0,a.default)("Default TYPE privileges"),type:"text",group:(0,a.default)("Security"),mode:["properties"],min_version:90200},{id:"datacl",label:(0,a.default)("Privileges"),type:"collection",schema:this.getPrivilegeRoleSchema(["C","T","c"]),uniqueCol:["grantee","grantor"],editable:!1,group:(0,a.default)("Security"),mode:["edit","create"],canAdd:!0,canDelete:!0},{id:"variables",label:"",type:"collection",schema:this.getVariableSchema(),editable:!1,group:(0,a.default)("Parameters"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,hasRole:!0,node:"role"},{id:"seclabels",label:(0,a.default)("Security labels"),type:"collection",schema:new l.default,editable:!1,group:(0,a.default)("Security"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,uniqueCol:["provider"],min_version:90200},{type:"nested-tab",group:(0,a.default)("Default Privileges"),mode:["edit"],schema:new _(this.getPrivilegeRoleSchema)},{id:"schema_res",label:(0,a.default)("Schema restriction"),type:"select",group:(0,a.default)("Advanced"),mode:["properties","edit","create"],helpMessage:(0,a.default)("Note: Changes to the schema restriction will require the Schemas node in the browser to be refreshed before they will be shown."),helpMessageMode:["edit","create"],controlProps:{multiple:!0,allowClear:!1,creatable:!0},depChange:function(t){r.isUndefined(t.oid)||(e.informText=void 0),e.origData.schema_res!=t.schema_res?e.informText=(0,a.default)("Please refresh the Schemas node to make changes to the schema restriction take effect."):e.informText=void 0}}]}}]),n}(i.default);t.default=w},77826:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(82772),n(68304),n(30489);var o=s(n(91669)),a=s(n(89406)),i=n(76055),l=s(n(96486));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(s,e);var t,n,r,a=m(s);function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return f(this,s),(e=a.call(this,c({name:void 0,subowner:void 0,pubtable:void 0,connect_timeout:10,pub:[],enabled:!0,create_slot:!0,copy_data:!0,connect:!0,copy_data_after_refresh:!1,sync:"off",refresh_pub:!1,password:"",sslmode:"prefer",sslcompression:!1,sslcert:"",sslkey:"",sslrootcert:"",sslcrl:"",host:"",port:5432,db:"postgres"},r))).fieldOptions=c({role:[],publicationTable:[]},t),e.node_info=n,e}return t=s,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"SSL_MODES",get:function(){return["prefer","require","verify-ca","verify-full"]}},{key:"isDisable",value:function(){return!this.isNew()}},{key:"isSameDB",value:function(e){var t=e.host,n=e.port;return"localhost"!=e.host&&"127.0.0.1"!=e.host||"localhost"!=this.node_info.node_info.host&&"127.0.0.1"!=this.node_info.node_info.host||(t=this.node_info.node_info.host),t==this.node_info.node_info.host&&n==this.node_info.node_info.port&&(e.create_slot=!1,!0)}},{key:"isAllConnectionDataEnter",value:function(e){var t=e.host,n=e.db,r=e.port,o=e.username;return!(!l.default.isUndefined(t)&&t&&!l.default.isUndefined(n)&&n&&!l.default.isUndefined(r)&&r&&!l.default.isUndefined(o)&&o)}},{key:"isConnect",value:function(e){return!l.default.isUndefined(e.connect)&&!e.connect&&(e.copy_data=!1,e.create_slot=!1,e.enabled=!1,!0)}},{key:"isRefresh",value:function(e){return!(e.refresh_pub&&!l.default.isUndefined(e.refresh_pub)||(e.copy_data_after_refresh=!1,0))}},{key:"isSSL",value:function(e){return-1==this.SSL_MODES.indexOf(e.sslmode)}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),type:"text",mode:["properties","create","edit"],noEmpty:!0,visible:function(){return!l.default.isUndefined(this.node_info.node_info)&&!l.default.isUndefined(this.node_info.node_info.version)&&this.node_info.node_info.version>=1e5}},{id:"oid",label:(0,o.default)("OID"),cell:"string",mode:["properties"],type:"text"},{id:"subowner",label:(0,o.default)("Owner"),options:this.fieldOptions.role,type:"select",mode:["edit","properties","create"],controlProps:{allowClear:!1},disabled:function(){return!!e.isNew()}},{id:"host",label:(0,o.default)("Host name/address"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"]},{id:"port",label:(0,o.default)("Port"),type:"int",group:(0,o.default)("Connection"),mode:["properties","edit","create"],min:1,max:65535,depChange:function(t){e.origData.port!=t.port&&!e.isNew(t)&&t.connected?e.informText=(0,o.default)("To apply changes to the connection configuration, please disconnect from the server and then reconnect."):e.informText=void 0}},{id:"db",label:(0,o.default)("Database"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"],readonly:e.isConnected,disabled:e.isShared,noEmpty:!0},{id:"username",label:(0,o.default)("Username"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"],depChange:function(t){e.origData.username!=t.username&&!e.isNew(t)&&t.connected?e.informText=(0,o.default)("To apply changes to the connection configuration, please disconnect from the server and then reconnect."):e.informText=void 0}},{id:"password",label:(0,o.default)("Password"),type:"password",maxlength:null,group:(0,o.default)("Connection"),mode:["create","edit"],skipChange:!0,deps:["connect_now"]},{id:"connect_timeout",label:(0,o.default)("Connection timeout"),type:"text",mode:["properties","edit","create"],group:(0,o.default)("Connection")},{id:"passfile",label:(0,o.default)("Passfile"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"]},{id:"pub",label:(0,o.default)("Publication"),type:"text",group:(0,o.default)("Connection"),mode:["properties"]},{id:"pub",label:(0,o.default)("Publication"),group:(0,o.default)("Connection"),mode:["create","edit"],deps:["all_table","host","port","username","db","password"],disabled:e.isAllConnectionDataEnter,helpMessage:(0,o.default)("Click the refresh button to get the publications"),helpMessageMode:["edit","create"],type:function(t){return{type:"select-refresh",controlProps:{allowClear:!0,multiple:!0,creatable:!0,getOptionsOnRefresh:function(){return e.fieldOptions.getPublication(t.host,t.password,t.port,t.username,t.db,t.connect_timeout,t.passfile,t.sslmode,t.sslcompression,t.sslcert,t.sslkey,t.sslrootcert,t.sslcrl)}}}}},{id:"sslmode",label:(0,o.default)("SSL mode"),type:"select",group:(0,o.default)("SSL"),controlProps:{allowClear:!1},mode:["properties","edit","create"],options:[{label:(0,o.default)("Allow"),value:"allow"},{label:(0,o.default)("Prefer"),value:"prefer"},{label:(0,o.default)("Require"),value:"require"},{label:(0,o.default)("Disable"),value:"disable"},{label:(0,o.default)("Verify-CA"),value:"verify-ca"},{label:(0,o.default)("Verify-Full"),value:"verify-full"}]},{id:"sslcert",label:(0,o.default)("Client certificate"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslkey",label:(0,o.default)("Client certificate key"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslrootcert",label:(0,o.default)("Root certificate"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslcrl",label:(0,o.default)("Certificate revocation list"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslcompression",label:(0,o.default)("SSL compression?"),type:"switch",mode:["edit","create"],group:(0,o.default)("SSL"),disabled:e.isSSL,deps:["sslmode"]},{id:"sslcert",label:(0,o.default)("Client certificate"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslcert;return!l.default.isUndefined(t)&&!l.default.isNull(t)}},{id:"sslkey",label:(0,o.default)("Client certificate key"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslkey;return!l.default.isUndefined(t)&&!l.default.isNull(t)}},{id:"sslrootcert",label:(0,o.default)("Root certificate"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslrootcert;return!l.default.isUndefined(t)&&!l.default.isNull(t)}},{id:"sslcrl",label:(0,o.default)("Certificate revocation list"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslcrl;return!l.default.isUndefined(t)&&!l.default.isNull(t)}},{id:"sslcompression",label:(0,o.default)("SSL compression?"),type:"switch",mode:["properties"],group:(0,o.default)("SSL"),deps:["sslmode"],visible:function(t){return-1!=l.default.indexOf(e.SSL_MODES,t.sslmode)}},{id:"copy_data_after_refresh",label:(0,o.default)("Copy data?"),type:"switch",mode:["edit"],group:(0,o.default)("With"),readonly:e.isRefresh,deps:["refresh_pub"],helpMessage:(0,o.default)("Specifies whether the existing data in the publications that are being subscribed to should be copied once the replication starts."),helpMessageMode:["edit","create"]},{id:"copy_data",label:(0,o.default)("Copy data?"),type:"switch",mode:["create"],group:(0,o.default)("With"),readonly:e.isConnect,deps:["connect"],helpMessage:(0,o.default)("Specifies whether the existing data in the publications that are being subscribed to should be copied once the replication starts."),helpMessageMode:["edit","create"]},{id:"create_slot",label:(0,o.default)("Create slot?"),type:"switch",mode:["create"],group:(0,o.default)("With"),disabled:e.isSameDB,readonly:e.isConnect,deps:["connect","host","port"],helpMessage:(0,o.default)("Specifies whether the command should create the replication slot on the publisher.This field will be disabled and set to false if subscription connects to same database.Otherwise, the CREATE SUBSCRIPTION call will hang."),helpMessageMode:["edit","create"]},{id:"enabled",label:(0,o.default)("Enabled?"),type:"switch",mode:["create","edit","properties"],group:(0,o.default)("With"),readonly:e.isConnect,deps:["connect"],helpMessage:(0,o.default)("Specifies whether the subscription should be actively replicating, or whether it should be just setup but not started yet."),helpMessageMode:["edit","create"]},{id:"refresh_pub",label:(0,o.default)("Refresh publication?"),type:"switch",mode:["edit"],group:(0,o.default)("With"),helpMessage:(0,o.default)("Fetch missing table information from publisher."),helpMessageMode:["edit","create"],deps:["enabled"],disabled:function(e){return!e.enabled&&(e.refresh_pub=!1,!0)}},{id:"connect",label:(0,o.default)("Connect?"),type:"switch",mode:["create"],group:(0,o.default)("With"),disabled:e.isDisable,deps:["enabled","create_slot","copy_data"],helpMessage:(0,o.default)("Specifies whether the CREATE SUBSCRIPTION should connect to the publisher at all. Setting this to false will change default values of enabled, create_slot and copy_data to false."),helpMessageMode:["edit","create"]},{id:"slot_name",label:(0,o.default)("Slot name"),type:"text",mode:["create","edit","properties"],group:(0,o.default)("With"),helpMessage:(0,o.default)("Name of the replication slot to use. The default behavior is to use the name of the subscription for the slot name."),helpMessageMode:["edit","create"]},{id:"sync",label:(0,o.default)("Synchronous commit"),control:"select2",deps:["event"],group:(0,o.default)("With"),type:"select",helpMessage:(0,o.default)("The value of this parameter overrides the synchronous_commit setting. The default value is off."),helpMessageMode:["edit","create"],controlProps:{width:"100%",allowClear:!1},options:[{label:"local",value:"local"},{label:"remote_write",value:"remote_write"},{label:"remote_apply",value:"remote_apply"},{label:"on",value:"on"},{label:"off",value:"off"}]}]}},{key:"validate",value:function(e,t){var n=null;if(n=(0,o.default)("Either Host name, Address must be specified."),(0,i.isEmptyString)(e.host))return t("host",n),!0;if(t("host",n=null),(0,i.isEmptyString)(e.username))return t("username",n=(0,o.default)("Username must be specified.")),!0;if(t("username",n=null),(0,i.isEmptyString)(e.port))return t("port",n=(0,o.default)("Port must be specified.")),!0;if(t("port",n=null),(0,i.isEmptyString)(e.pub))return t("pub",n=(0,o.default)("Publication must be specified.")),!0;if(t("pub",n=null),e.use_ssh_tunnel){if((0,i.isEmptyString)(e.tunnel_host))return t("tunnel_host",n=(0,o.default)("SSH Tunnel host must be specified.")),!0;if(t("tunnel_host",n=null),(0,i.isEmptyString)(e.tunnel_port))return t("tunnel_port",n=(0,o.default)("SSH Tunnel port must be specified.")),!0;if(t("tunnel_port",n=null),(0,i.isEmptyString)(e.tunnel_username))return t("tunnel_username",n=(0,o.default)("SSH Tunnel username must be specified.")),!0;if(t("tunnel_username",n=null),e.tunnel_authentication){if((0,i.isEmptyString)(e.tunnel_identity_file))return t("tunnel_identity_file",n=(0,o.default)("SSH Tunnel identity file must be specified.")),!0;t("tunnel_identity_file",n=null)}}return!1}}])&&p(t.prototype,n),r&&p(t,r),s}(a.default);t.default=g},8581:(e,t,n)=>{var r,o,a,i=(a=n(35350))&&a.__esModule?a:{default:a};r=[n(91669),n(28008),n(19755),n(81311),n(55112),n(30381),n(33883)],void 0===(o=function(e,t,n,r,o,a,l){return l.Nodes["coll-pga_schedule"]||(l.Nodes["coll-pga_schedule"]=l.Collection.extend({node:"pga_schedule",label:e("Schedules"),type:"coll-pga_schedule",columns:["jscid","jscname","jscenabled"],hasStatistics:!1,canDropCascade:!1})),l.Nodes.pga_schedule||(l.Nodes.pga_schedule=l.Node.extend({parent_type:"pga_job",type:"pga_schedule",dialogHelp:t("help.static",{filename:"pgagent_jobs.html"}),hasSQL:!0,hasDepends:!1,hasStatistics:!1,canDrop:!0,label:e("Schedule"),node_image:"icon-pga_schedule",Init:function(){this.initialized||(this.initialized=!0,l.add_menus([{name:"create_pga_schedule_on_job",node:"pga_job",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Schedule..."),icon:"wcTabIcon icon-pga_schedule",data:{action:"create"}},{name:"create_pga_schedule_on_coll",node:"coll-pga_schedule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Schedule..."),icon:"wcTabIcon icon-pga_schedule",data:{action:"create"}},{name:"create_pga_schedule",node:"pga_schedule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Schedule..."),icon:"wcTabIcon icon-pga_schedule",data:{action:"create"}}]))},getSchema:function(){return new i.default},model:l.Node.Model.extend({idAttribute:"jscid",schema:[{id:"jscid",label:e("ID"),type:"int",cellHeaderClasses:"width_percent_5",mode:["properties"]},{id:"jscname",label:e("Name"),type:"text",cellHeaderClasses:"width_percent_45",disabled:function(){return!1}},{id:"jscenabled",label:e("Enabled?"),type:"switch",disabled:function(){return!1},cellHeaderClasses:"width_percent_5"}]})})),l.Nodes.pga_schedule}.apply(t,r))||(e.exports=o)},35350:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TimesSchema=t.DaysSchema=t.ExceptionsSchema=void 0,n(79753),n(89554),n(54747),n(69826),n(21249),n(15306),n(74916),n(69600),n(23123),n(68304),n(30489);var a=u(n(91669)),i=u(n(89406)),l=n(76055),s=u(n(30381));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=[{label:(0,a.default)("Sunday"),value:"Sunday"},{label:(0,a.default)("Monday"),value:"Monday"},{label:(0,a.default)("Tuesday"),value:"Tuesday"},{label:(0,a.default)("Wednesday"),value:"Wednesday"},{label:(0,a.default)("Thursday"),value:"Thursday"},{label:(0,a.default)("Friday"),value:"Friday"},{label:(0,a.default)("Saturday"),value:"Saturday"}],O=[{label:(0,a.default)("1st"),value:"1st"},{label:(0,a.default)("2nd"),value:"2nd"},{label:(0,a.default)("3rd"),value:"3rd"},{label:(0,a.default)("4th"),value:"4th"},{label:(0,a.default)("5th"),value:"5th"},{label:(0,a.default)("6th"),value:"6th"},{label:(0,a.default)("7th"),value:"7th"},{label:(0,a.default)("8th"),value:"8th"},{label:(0,a.default)("9th"),value:"9th"},{label:(0,a.default)("10th"),value:"10th"},{label:(0,a.default)("11th"),value:"11th"},{label:(0,a.default)("12th"),value:"12th"},{label:(0,a.default)("13th"),value:"13th"},{label:(0,a.default)("14th"),value:"14th"},{label:(0,a.default)("15th"),value:"15th"},{label:(0,a.default)("16th"),value:"16th"},{label:(0,a.default)("17th"),value:"17th"},{label:(0,a.default)("18th"),value:"18th"},{label:(0,a.default)("19th"),value:"19th"},{label:(0,a.default)("20th"),value:"20th"},{label:(0,a.default)("21st"),value:"21st"},{label:(0,a.default)("22nd"),value:"22nd"},{label:(0,a.default)("23rd"),value:"23rd"},{label:(0,a.default)("24th"),value:"24th"},{label:(0,a.default)("25th"),value:"25th"},{label:(0,a.default)("26th"),value:"26th"},{label:(0,a.default)("27th"),value:"27th"},{label:(0,a.default)("28th"),value:"28th"},{label:(0,a.default)("29th"),value:"29th"},{label:(0,a.default)("30th"),value:"30th"},{label:(0,a.default)("31st"),value:"31st"},{label:(0,a.default)("Last day"),value:"Last Day"}],S=[{label:(0,a.default)("January"),value:"January"},{label:(0,a.default)("February"),value:"February"},{label:(0,a.default)("March"),value:"March"},{label:(0,a.default)("April"),value:"April"},{label:(0,a.default)("May"),value:"May"},{label:(0,a.default)("June"),value:"June"},{label:(0,a.default)("July"),value:"July"},{label:(0,a.default)("August"),value:"August"},{label:(0,a.default)("September"),value:"September"},{label:(0,a.default)("October"),value:"October"},{label:(0,a.default)("November"),value:"November"},{label:(0,a.default)("December"),value:"December"}],j=[{label:(0,a.default)("00"),value:"00"},{label:(0,a.default)("01"),value:"01"},{label:(0,a.default)("02"),value:"02"},{label:(0,a.default)("03"),value:"03"},{label:(0,a.default)("04"),value:"04"},{label:(0,a.default)("05"),value:"05"},{label:(0,a.default)("06"),value:"06"},{label:(0,a.default)("07"),value:"07"},{label:(0,a.default)("08"),value:"08"},{label:(0,a.default)("09"),value:"09"},{label:(0,a.default)("10"),value:"10"},{label:(0,a.default)("11"),value:"11"},{label:(0,a.default)("12"),value:"12"},{label:(0,a.default)("13"),value:"13"},{label:(0,a.default)("14"),value:"14"},{label:(0,a.default)("15"),value:"15"},{label:(0,a.default)("16"),value:"16"},{label:(0,a.default)("17"),value:"17"},{label:(0,a.default)("18"),value:"18"},{label:(0,a.default)("19"),value:"19"},{label:(0,a.default)("20"),value:"20"},{label:(0,a.default)("21"),value:"21"},{label:(0,a.default)("22"),value:"22"},{label:(0,a.default)("23"),value:"23"}],P=[{label:(0,a.default)("00"),value:"00"},{label:(0,a.default)("01"),value:"01"},{label:(0,a.default)("02"),value:"02"},{label:(0,a.default)("03"),value:"03"},{label:(0,a.default)("04"),value:"04"},{label:(0,a.default)("05"),value:"05"},{label:(0,a.default)("06"),value:"06"},{label:(0,a.default)("07"),value:"07"},{label:(0,a.default)("08"),value:"08"},{label:(0,a.default)("09"),value:"09"},{label:(0,a.default)("10"),value:"10"},{label:(0,a.default)("11"),value:"11"},{label:(0,a.default)("12"),value:"12"},{label:(0,a.default)("13"),value:"13"},{label:(0,a.default)("14"),value:"14"},{label:(0,a.default)("15"),value:"15"},{label:(0,a.default)("16"),value:"16"},{label:(0,a.default)("17"),value:"17"},{label:(0,a.default)("18"),value:"18"},{label:(0,a.default)("19"),value:"19"},{label:(0,a.default)("20"),value:"20"},{label:(0,a.default)("21"),value:"21"},{label:(0,a.default)("22"),value:"22"},{label:(0,a.default)("23"),value:"23"},{label:(0,a.default)("24"),value:"24"},{label:(0,a.default)("25"),value:"25"},{label:(0,a.default)("26"),value:"26"},{label:(0,a.default)("27"),value:"27"},{label:(0,a.default)("28"),value:"28"},{label:(0,a.default)("29"),value:"29"},{label:(0,a.default)("30"),value:"30"},{label:(0,a.default)("31"),value:"31"},{label:(0,a.default)("32"),value:"32"},{label:(0,a.default)("33"),value:"33"},{label:(0,a.default)("34"),value:"34"},{label:(0,a.default)("35"),value:"35"},{label:(0,a.default)("36"),value:"36"},{label:(0,a.default)("37"),value:"37"},{label:(0,a.default)("38"),value:"38"},{label:(0,a.default)("39"),value:"39"},{label:(0,a.default)("40"),value:"40"},{label:(0,a.default)("41"),value:"41"},{label:(0,a.default)("42"),value:"42"},{label:(0,a.default)("43"),value:"43"},{label:(0,a.default)("44"),value:"44"},{label:(0,a.default)("45"),value:"45"},{label:(0,a.default)("46"),value:"46"},{label:(0,a.default)("47"),value:"47"},{label:(0,a.default)("48"),value:"48"},{label:(0,a.default)("49"),value:"49"},{label:(0,a.default)("50"),value:"50"},{label:(0,a.default)("51"),value:"51"},{label:(0,a.default)("52"),value:"52"},{label:(0,a.default)("53"),value:"53"},{label:(0,a.default)("54"),value:"54"},{label:(0,a.default)("55"),value:"55"},{label:(0,a.default)("56"),value:"56"},{label:(0,a.default)("57"),value:"57"},{label:(0,a.default)("58"),value:"58"},{label:(0,a.default)("59"),value:"59"}],x=function(e){y(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return p(this,n),(e=t.call(this,d({jexdate:null,jextime:null},o))).fieldOptions=d({},r),e}return m(n,[{key:"idAttribute",get:function(){return"jexid"}},{key:"baseFields",get:function(){return[{id:"jexdate",cell:"datetimepicker",label:(0,a.default)("Date"),type:"datetimepicker",controlProps:{placeholder:(0,a.default)("<any>"),autoOk:!0,pickerType:"Date"}},{id:"jextime",cell:"datetimepicker",label:(0,a.default)("Time"),type:"datetimepicker",controlProps:{placeholder:(0,a.default)("<any>"),autoOk:!0,pickerType:"Time",ampm:!1}}]}},{key:"validate",value:function(e,t){var n=e.jexdate||"<any>";if(n==(e.jextime||"<any>")&&"<any>"==n)return t("jscdate",(0,a.default)("Please specify date/time.")),!0;t("jscdate",null)}}]),n}(i.default);t.ExceptionsSchema=x;var C={fromRaw:function(e,t){if(!r.isNull(e)&&!r.isUndefined(e)&&Array.isArray(e)){var n=[],o=0;return e.forEach((function(e){e&&n.push(t[o]),o+=1})),n}return e},toRaw:function(e,t){if(!r.isNull(t)&&!r.isUndefined(t)&&Array.isArray(t)){var n=[];return t.forEach((function(t){var o=r.find(e,(function(e){return r.isEqual(e.label,t.label)}));r.isUndefined(o)?n.push(!1):n.push(!0)})),n}return e}},E=function(e){y(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return p(this,n),(e=t.call(this,d({},o))).fieldOptions=d({},r),e}return m(n,[{key:"baseFields",get:function(){return[{id:"jscweekdays",label:(0,a.default)("Week Days"),type:"select",group:(0,a.default)("Days"),controlProps:{allowClear:!0,multiple:!0,allowSelectAll:!0,placeholder:(0,a.default)("Select the weekdays..."),formatter:C},options:w},{id:"jscmonthdays",label:(0,a.default)("Month Days"),type:"select",group:(0,a.default)("Days"),controlProps:{allowClear:!0,multiple:!0,allowSelectAll:!0,placeholder:(0,a.default)("Select the month days..."),formatter:C},options:O},{id:"jscmonths",label:(0,a.default)("Months"),type:"select",group:(0,a.default)("Days"),controlProps:{allowClear:!0,multiple:!0,allowSelectAll:!0,placeholder:(0,a.default)("Select the months..."),formatter:C},options:S}]}}]),n}(i.default);t.DaysSchema=E;var k=function(e){y(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return p(this,n),(e=t.call(this,d({},o))).fieldOptions=d({},r),e}return m(n,[{key:"baseFields",get:function(){return[{id:"jschours",label:(0,a.default)("Hours"),type:"select",group:(0,a.default)("Times"),controlProps:{allowClear:!0,multiple:!0,allowSelectAll:!0,placeholder:(0,a.default)("Select the hours..."),formatter:C},options:j},{id:"jscminutes",label:(0,a.default)("Minutes"),type:"select",group:(0,a.default)("Times"),controlProps:{allowClear:!0,multiple:!0,allowSelectAll:!0,placeholder:(0,a.default)("Select the minutes..."),formatter:C},options:P}]}}]),n}(i.default);t.TimesSchema=k;var D=function(e){y(n,e);var t=g(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return p(this,n),(e=t.call(this,d({jscid:null,jscjobid:null,jscname:"",jscdesc:"",jscenabled:!0,jscstart:null,jscend:null,jscweekdays:r.map(w,(function(){return!1})),jscmonthdays:r.map(O,(function(){return!1})),jscmonths:r.map(S,(function(){return!1})),jschours:r.map(j,(function(){return!1})),jscminutes:r.map(P,(function(){return!1})),jscexceptions:[]},a))).fieldOptions=d({},o),e}return m(n,[{key:"idAttribute",get:function(){return"jscid"}},{key:"customFromRaw",value:function(e,t){if(!r.isNull(e)&&!r.isUndefined(e)&&Array.isArray(e)){var n="";return e.forEach((function(e,r){e&&(n=n+t[r].label+", ")})),n=n.replace(/,\s*$/,"")}return e}},{key:"baseFields",get:function(){var e=this;return[{id:"jscid",label:(0,a.default)("ID"),type:"int",mode:["properties"]},{id:"jscname",label:(0,a.default)("Name"),type:"text",noEmpty:!0,cell:"text"},{id:"jscenabled",label:(0,a.default)("Enabled?"),type:"switch",cell:"switch"},{id:"jscstart",label:(0,a.default)("Start"),type:"datetimepicker",cell:"datetimepicker",controlProps:{ampm:!1,placeholder:(0,a.default)("YYYY-MM-DD HH:mm:ss Z"),autoOk:!0,disablePast:!0}},{id:"jscend",label:(0,a.default)("End"),type:"datetimepicker",cell:"datetimepicker",controlProps:{ampm:!1,placeholder:(0,a.default)("YYYY-MM-DD HH:mm:ss Z"),autoOk:!0,disablePast:!0}},{type:"note",mode:["create","edit"],group:(0,a.default)("Repeat"),text:["<ul><li>",(0,a.default)("Schedules are specified using a "),"<strong>",(0,a.default)("cron-style"),"</strong>","format.","</li><li>",(0,a.default)("For each selected time or date element, the schedule will execute."),"</li><li>",(0,a.default)("e.g. To execute at 5 minutes past every hour, simply select ‘05’ in the Minutes list box."),"</li><li>",(0,a.default)("Values from more than one field may be specified in order to further control the schedule."),"</li><li>",(0,a.default)("e.g. To execute at 12:05 and 14:05 every Monday and Thursday, you would click minute 05, hours 12 and 14, and weekdays Monday and Thursday."),"</li><li>",(0,a.default)("For additional flexibility, the Month Days check list includes an extra Last Day option. This matches the last day of the month, whether it happens to be the 28th, 29th, 30th or 31st."),"</li></ul>"].join("")},{id:"jscweekdays",label:(0,a.default)("Week days"),type:"text",mode:["properties"],controlProps:{formatter:{fromRaw:function(t){return e.customFromRaw(t,w)}}}},{id:"jscmonthdays",label:(0,a.default)("Month days"),type:"text",mode:["properties"],controlProps:{formatter:{fromRaw:function(t){return e.customFromRaw(t,O)}}}},{id:"jscmonths",label:(0,a.default)("Months"),type:"text",mode:["properties"],controlProps:{formatter:{fromRaw:function(t){return e.customFromRaw(t,S)}}}},{id:"jschours",label:(0,a.default)("Hours"),type:"text",mode:["properties"],controlProps:{formatter:{fromRaw:function(t){return e.customFromRaw(t,j)}}}},{id:"jscminutes",label:(0,a.default)("Minutes"),type:"text",mode:["properties"],controlProps:{formatter:{fromRaw:function(t){return e.customFromRaw(t,P)}}}},{type:"nested-fieldset",mode:["create","edit"],label:(0,a.default)("Days"),group:(0,a.default)("Repeat"),schema:new E},{type:"nested-fieldset",mode:["create","edit"],label:(0,a.default)("Times"),group:(0,a.default)("Repeat"),schema:new k},{id:"jscexceptions",label:(0,a.default)("Exceptions"),type:"text",mode:["properties"],controlProps:{formatter:{fromRaw:function(e){var t="";return r.isNull(e)||r.isUndefined(e)||!Array.isArray(e)||e.forEach((function(e,n,r){t=t+"["+e.jexdate+(e.jextime?" "+e.jextime+"]":"]"),n!==r.length-1&&(t+=", ")})),t}}}},{id:"jscexceptions",type:"collection",mode:["edit","create"],schema:new x,group:(0,a.default)("Exceptions"),canEdit:!1,canAdd:!0,canDelete:!0,uniqueCol:["jexdate","jextime"]},{id:"jscdesc",label:(0,a.default)("Comment"),type:"multiline"}]}},{key:"validate",value:function(e,t){if((0,l.isEmptyString)(e.jscstart))return t("jscstart",(0,a.default)("Please enter the start time.")),!0;if(t("jscstart",null),(0,l.isEmptyString)(e.jscend))e.jscend=null;else{var n=e.jscstart,r=e.jscend,o=n.split(" "),i=r.split(" ");if(o=(0,s.default)(o[0]+" "+o[1]),(i=(0,s.default)(i[0]+" "+i[1])).isBefore(o))return t("jscend",(0,a.default)("Start time must be less than end time")),!0;t("jscend",null)}}}]),n}(i.default);t.default=D},32351:(e,t,n)=>{var r,o,a,i=n(77077),l=(a=n(59359))&&a.__esModule?a:{default:a},s=n(2738);r=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(55455),n(36245),n(8581)],void 0===(o=function(e,t,n,r,o,a,u){return a.Nodes["coll-pga_job"]||(a.Nodes["coll-pga_job"]=a.Collection.extend({node:"pga_job",label:e("pga_jobs"),type:"coll-pga_job",columns:["jobid","jobname","jobenabled","jlgstatus","jobnextrun","joblastrun","jobdesc"],hasStatistics:!1,canDrop:!0,canDropCascade:!1})),a.Nodes.pga_job||(a.Nodes.pga_job=a.Node.extend({parent_type:"server",type:"pga_job",dialogHelp:t("help.static",{filename:"pgagent_jobs.html"}),hasSQL:!0,hasDepends:!1,hasStatistics:!0,hasCollectiveStatistics:!0,width:"80%",height:"80%",canDrop:!0,label:e("pgAgent Job"),node_image:function(){return"icon-pga_job"},Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_pga_job_on_coll",node:"coll-pga_job",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("pgAgent Job..."),icon:"wcTabIcon icon-pga_job",data:{action:"create"}},{name:"create_pga_job",node:"pga_job",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("pgAgent Job..."),icon:"wcTabIcon icon-pga_job",data:{action:"create"}},{name:"run_now_pga_job",node:"pga_job",module:this,applies:["object","context"],callback:"run_pga_job_now",priority:4,label:e("Run now"),data:{action:"create"},icon:"fa fa-play-circle"}]))},getSchema:function(e,t){var n=this;return new l.default({jobjclid:function(){return(0,i.getNodeAjaxOptions)("classes",n,e,t,{cacheLevel:"server",cacheNode:"server"})}},(function(){return(0,s.getNodePgaJobStepSchema)(e,t)}))},model:a.Node.Model.extend({idAttribute:"jobid",schema:[{id:"jobname",label:e("Name"),type:"text",cellHeaderClasses:"width_percent_30"},{id:"jobid",label:e("ID"),mode:["properties"],type:"int"},{id:"jobenabled",label:e("Enabled?"),type:"switch",cellHeaderClasses:"width_percent_5"},{id:"jobnextrun",type:"text",mode:["properties"],label:e("Next run"),cellHeaderClasses:"width_percent_20"},{id:"joblastrun",type:"text",mode:["properties"],label:e("Last run"),cellHeaderClasses:"width_percent_20"},{id:"jlgstatus",type:"text",label:e("Last result"),cellHeaderClasses:"width_percent_5",mode:["properties"]},{id:"jobdesc",label:e("Comment"),type:"multiline",cellHeaderClasses:"width_percent_15"}]}),run_pga_job_now:function(e){var t=e||{},r=a.tree,o=t.item||r.selected(),i=o?r.itemData(o):void 0;return i&&n.ajax({url:this.generate_url(o,"run_now",i,!0),method:"PUT"}).done((function(){r.unload(o)})).fail((function(e,t,n){u.pgRespErrorNotify(e,n),r.unload(o)})),!1}})),a.Nodes.pga_job}.apply(t,r))||(e.exports=o)},59359:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=l(n(91669)),a=l(n(89406)),i=l(n(35350));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,a=b(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return d(this,l),(e=a.call(this,u({jobname:"",jobid:void 0,jobenabled:!0,jobhostagent:"",jobjclid:1,jobcreated:void 0,jobchanged:void 0,jobnextrun:void 0,joblastrun:void 0,jlgstatus:void 0,jobrunningat:void 0,jobdesc:"",jsteps:[],jschedules:[]},r))).fieldOptions=u({jobjclid:[]},t),e.getPgaJobStepSchema=n,e}return t=l,(n=[{key:"idAttribute",get:function(){return"jobid"}},{key:"baseFields",get:function(){return[{id:"jobname",label:(0,o.default)("Name"),type:"text",noEmpty:!0},{id:"jobid",label:(0,o.default)("ID"),mode:["properties"],type:"int"},{id:"jobenabled",label:(0,o.default)("Enabled?"),type:"switch"},{id:"jobjclid",label:(0,o.default)("Job class"),type:"select",options:this.fieldOptions.jobjclid,controlProps:{allowClear:!1},mode:["properties"]},{id:"jobjclid",label:(0,o.default)("Job class"),type:"select",options:this.fieldOptions.jobjclid,mode:["create","edit"],controlProps:{allowClear:!1},helpMessage:(0,o.default)("Please select a class to categorize the job. This option will not affect the way the job runs."),helpMessageMode:["edit","create"]},{id:"jobhostagent",label:(0,o.default)("Host agent"),type:"text",mode:["properties"]},{id:"jobhostagent",label:(0,o.default)("Host agent"),type:"text",mode:["edit","create"],helpMessage:(0,o.default)("Enter the hostname of a machine running pgAgent if you wish to ensure only that machine will run this job. Leave blank if any host may run the job."),helpMessageMode:["edit","create"]},{id:"jobcreated",type:"text",mode:["properties"],label:(0,o.default)("Created")},{id:"jobchanged",type:"text",mode:["properties"],label:(0,o.default)("Changed")},{id:"jobnextrun",type:"text",mode:["properties"],label:(0,o.default)("Next run")},{id:"joblastrun",type:"text",mode:["properties"],label:(0,o.default)("Last run")},{id:"jlgstatus",type:"text",label:(0,o.default)("Last result"),mode:["properties"],controlProps:{formatter:{fromRaw:function(e){return e||(0,o.default)("Unknown")}}}},{id:"jobrunningat",type:"text",mode:["properties"],label:(0,o.default)("Running at"),controlProps:{formatter:{fromRaw:function(e){return e||(0,o.default)("Not running currently.")}}}},{id:"jobdesc",label:(0,o.default)("Comment"),type:"multiline"},{id:"jsteps",label:"",group:(0,o.default)("Steps"),type:"collection",mode:["edit","create"],schema:this.getPgaJobStepSchema(),canEdit:!0,canAdd:!0,canDelete:!0,columns:["jstname","jstenabled","jstkind","jstconntype","jstonerror"]},{id:"jschedules",label:"",group:(0,o.default)("Schedules"),type:"collection",mode:["edit","create"],schema:new i.default,canAdd:!0,canDelete:!0,canEdit:!0,columns:["jscname","jscenabled","jscstart","jscend"]}]}}])&&f(t.prototype,n),r&&f(t,r),l}(a.default);t.default=h},36245:(e,t,n)=>{var r,o,a=n(2738);r=[n(91669),n(28008),n(19755),n(81311),n(55112),n(33883),n(58307),n(95283),n(83879),n(12030)],void 0===(o=function(e,t,n,r,o,i,l,s){return i.Nodes["coll-pga_jobstep"]||(i.Nodes["coll-pga_jobstep"]=i.Collection.extend({node:"pga_jobstep",label:e("Steps"),type:"coll-pga_jobstep",columns:["jstid","jstname","jstenabled","jstkind","jstconntype","jstonerror"],hasStatistics:!1,canDropCascade:!1})),i.Nodes.pga_jobstep||(i.Nodes.pga_jobstep=i.Node.extend({parent_type:"pga_job",type:"pga_jobstep",dialogHelp:t("help.static",{filename:"pgagent_jobs.html"}),hasSQL:!0,hasDepends:!1,hasStatistics:!0,hasCollectiveStatistics:!0,width:"70%",height:"80%",canDrop:!0,label:e("Step"),node_image:function(){return"icon-pga_jobstep"},Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_pga_jobstep_on_job",node:"pga_job",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Job Step..."),data:{action:"create"},icon:"wcTabIcon icon-pga_jobstep"},{name:"create_pga_jobstep_on_coll",node:"coll-pga_jobstep",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Job Step..."),data:{action:"create"},icon:"wcTabIcon icon-pga_jobsFtep"},{name:"create_pga_jobstep",node:"pga_jobstep",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Job Step..."),data:{action:"create"},icon:"wcTabIcon icon-pga_jobstep"}]))},getSchema:function(e,t){return(0,a.getNodePgaJobStepSchema)(e,t)},model:i.Node.Model.extend({initialize:function(){if(i.Node.Model.prototype.initialize.apply(this,arguments),this.isNew()&&this.get("jstconntype")){var e=arguments.length>1&&arguments[1];e&&(r.isUndefined(e.node_info)&&r.isUndefined(e.collection.top.node_info)||this.set("jstdbname",(e.node_info||e.collection.top.node_info).server.db))}},idAttribute:"jstid",schema:[{id:"jstid",label:e("ID"),type:"int",cellHeaderClasses:"width_percent_5",mode:["properties"]},{id:"jstname",label:e("Name"),type:"text",cellHeaderClasses:"width_percent_60"},{id:"jstenabled",label:e("Enabled?"),type:"switch"},{id:"jstkind",label:e("Kind"),type:"switch",options:{onText:e("SQL"),offText:e("Batch"),onColor:"primary",offColor:"primary"},control:s.SwitchControl},{id:"jstconntype",label:e("Connection type"),type:"switch",deps:["jstkind"],mode:["properties"],disabled:function(e){return!e.get("jstkind")},options:{onText:e("Local"),offText:e("Remote"),onColor:"primary",offColor:"primary",width:"65"}},{id:"jstonerror",label:e("On error"),cell:"select2",control:"select2",options:[{label:e("Fail"),value:"f"},{label:e("Success"),value:"s"},{label:e("Ignore"),value:"i"}],select2:{allowClear:!1}}]})})),i.Nodes.pga_job}.apply(t,r))||(e.exports=o)},2738:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodePgaJobStepSchema=function(e,t){return new g({databases:function(){return(0,i.getNodeListByName)("database",e,t,{cacheLevel:"database",cacheNode:"database"})}},{jstdbname:e.server.db})},t.default=void 0,n(15306),n(74916),n(68304),n(30489);var o=s(n(91669)),a=s(n(89406)),i=n(77077),l=n(76055);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(i,e);var t,n,r,a=m(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return f(this,i),(e=a.call(this,c({jstid:null,jstjobid:null,jstname:"",jstdesc:"",jstenabled:!0,jstkind:!0,jstconntype:!0,jstcode:"",jstconnstr:null,jstdbname:null,jstonerror:"f",jstnextrun:""},n))).fieldOptions=c({databases:[]},t),e}return t=i,(n=[{key:"idAttribute",get:function(){return"jstid"}},{key:"baseFields",get:function(){return[{id:"jstid",label:(0,o.default)("ID"),type:"int",mode:["properties"]},{id:"jstname",label:(0,o.default)("Name"),type:"text",noEmpty:!0,cell:"text"},{id:"jstenabled",label:(0,o.default)("Enabled?"),cell:"switch",type:"switch"},{id:"jstkind",label:(0,o.default)("Kind"),type:function(){return{type:"toggle",options:[{label:(0,o.default)("SQL"),value:!0},{label:(0,o.default)("Batch"),value:!1}]}},cell:function(){return{cell:"",controlProps:{formatter:{fromRaw:function(e){return e?(0,o.default)("SQL"):(0,o.default)("Batch")}}}}}},{id:"jstconntype",label:(0,o.default)("Connection type"),type:function(){return{type:"toggle",options:[{label:(0,o.default)("Local"),value:!0},{label:(0,o.default)("Remote"),value:!1}]}},cell:function(){return{cell:"",controlProps:{formatter:{fromRaw:function(e){return e?(0,o.default)("Local"):(0,o.default)("Remote")}}}}},deps:["jstkind"],disabled:function(e){return!e.jstkind},helpMessage:(0,o.default)("Select <strong>Local</strong> if the job step will execute on the local database server, or <strong>Remote</strong> to specify a remote database server."),helpMessageMode:["edit","create"]},{id:"jstdbname",label:(0,o.default)("Database"),type:"select",options:this.fieldOptions.databases,controlProps:{allowClear:!0,placeholder:""},disabled:function(e){return!e.jstkind||!e.jstconntype},depChange:function(e){if(!e.jstkind||!e.jstconntype)return{jstdbname:null}},deps:["jstkind","jstconntype"],helpMessage:(0,o.default)("Please select the database on which the job step will run."),helpMessageMode:["edit","create"]},{id:"jstconnstr",label:(0,o.default)("Connection string"),type:"text",deps:["jstkind","jstconntype"],disabled:function(e){return!e.jstkind||e.jstconntype},helpMessage:(0,o.default)('Please specify the connection string for the remote database server. Each parameter setting is in the form keyword = value. Spaces around the equal sign are optional. To write an empty value, or a value containing spaces, surround it with single quotes, e.g., keyword = \'a value\'. Single quotes and backslashes within the value must be escaped with a backslash, i.e., \' and \\.<br>For more information, please see the documentation on <a href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING" target="_blank">libpq connection strings</a>.'),helpMessageMode:["edit","create"]},{id:"jstonerror",label:(0,o.default)("On error"),type:"select",cell:"select",options:[{label:(0,o.default)("Fail"),value:"f"},{label:(0,o.default)("Success"),value:"s"},{label:(0,o.default)("Ignore"),value:"i"}],controlProps:{allowClear:!1}},{id:"jstdesc",label:(0,o.default)("Comment"),type:"multiline"},{id:"jstcode",label:"",deps:["jstkind"],type:"sql",group:(0,o.default)("Code"),isFullTab:!0}]}},{key:"validate",value:function(e,t){var n=null;if(e.jstkind)if(e.jstconntype){if((0,l.isEmptyString)(e.jstdbname))return t("jstdbname",(0,o.default)("Please select a database.")),!0;t("jstdbname",null)}else{var r=/\s*\b(\w+)\s*=\s*('([^'\\]*(?:\\.[^'\\]*)*)'|[\w|\.]*)/g;if((0,l.isEmptyString)(e.jstconnstr))return t("jstconnstr",(0,o.default)("Please enter a connection string.")),!0;if(""!=String(e.jstconnstr).replace(r,""))return t("jstconnstr",(0,o.default)("Please enter a valid connection string.")),!0;for(var a,i={host:!0,hostaddr:!0,port:!0,dbname:!0,user:!0,password:!0,connect_timeout:!0,client_encoding:!0,application_name:!0,options:!0,fallback_application_name:!0,sslmode:!0,sslcert:!0,sslkey:!0,sslrootcert:!0,sslcrl:!0,keepalives:!0,service:!0,keepalives_idle:!0,keepalives_interval:!0,keepalives_count:!0,sslcompression:!0,requirepeer:!0,krbsrvname:!0,gsslib:!0};a=r.exec(e.jstconnstr);){if(i[a[1]]){if(a[2])continue;n=(0,o.default)("Please enter a valid connection string.");break}n=(0,o.default)("Invalid parameter in the connection string - %s.",a[1]);break}if(n)return t("jstconnstr",n),!0;t("jstconnstr",n=null)}else t("jstconnstr",null),t("jstdbname",null);return(0,l.isEmptyString)(e.jstcode)?(t("jstcode",(0,o.default)("Please specify code to execute.")),!0):(t("jstcode",null),(0,l.isEmptyString)(e.jstonerror)?(t("jstonerror",(0,o.default)("Please select valid on error option.")),!0):void t("jstonerror",null))}}])&&p(t.prototype,n),r&&p(t,r),i}(a.default);t.default=g},49988:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=l(n(91669)),a=l(n(89406)),i=n(76055);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,e);var t,n,r,a=f(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({oid:void 0,name:void 0,is_sys_obj:void 0,cpu_rate_limit:0,dirty_rate_limit:0},e))}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"oid",label:(0,o.default)("OID"),type:"text",editable:!1,mode:["properties"]},{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",noEmpty:!0},{id:"is_sys_obj",label:(0,o.default)("System resource group?"),type:"switch",mode:["properties"]},{id:"cpu_rate_limit",label:(0,o.default)("CPU rate limit (percentage)"),type:"numeric",min:0,max:16777216},{id:"dirty_rate_limit",label:(0,o.default)("Dirty rate limit (KB)"),type:"numeric",min:0,max:16777216}]}},{key:"validate",value:function(e,t){var n=null;return(n=(0,i.emptyValidator)("CPU rate limit",e.cpu_rate_limit))?(t("cpu_rate_limit",n),!0):(t("cpu_rate_limit",n),(n=(0,i.emptyValidator)("Dirty rate limit",e.dirty_rate_limit))?(t("dirty_rate_limit",n),!0):(t("dirty_rate_limit",n),null))}}])&&c(t.prototype,n),r&&c(t,r),l}(a.default);t.default=m},61231:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(89554),n(54747),n(68304),n(30489);var a=s(n(91669)),i=s(n(89406)),l=s(n(67091));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(s,e);var t,n,o,i=m(s);function s(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f(this,s),(n=i.call(this,{oid:null,rolname:null,rolcanlogin:!1,rolpassword:null,rolconnlimit:-1,rolsuper:!1,rolcreaterole:!1,rolcreatedb:!1,rolinherit:!0,rolcatupdate:!1,rolreplication:!1,rolmembership:[],rolmembers:[],rolvaliduntil:null,seclabels:[],variables:[]})).getVariableSchema=e,n.getMembershipSchema=t,n.fieldOptions=c({role:[]},r),n.isReadOnly=null,n.nodeInfo=n.fieldOptions.nodeInfo,n.user=n.nodeInfo.server.user,n}return t=s,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"readOnly",value:function(e){var t=this.nodeInfo.server.user;return this.oid=e.oid,this.isReadOnly=!(t.is_superuser||t.can_create_role),!(t.is_superuser||t.can_create_role)&&t.id!=e.oid}},{key:"memberDataFormatter",value:function(e){var t="";if(r.isObject(e)){var n="";e.forEach((function(e){e.admin&&(n=" [WITH ADMIN]"),t.length>0&&(t+=", "),t+=e.role+n}))}return t}},{key:"baseFields",get:function(){var e=this;return[{id:"rolname",label:(0,a.default)("Name"),type:"text",noEmpty:!0,disabled:e.readOnly},{id:"oid",label:(0,a.default)("OID"),cell:"string",mode:["properties"],editable:!1,type:"text",visible:!0},{id:"is_sys_obj",label:(0,a.default)("System role?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,a.default)("Comments"),type:"multiline",mode:["properties","edit","create"],disabled:e.readOnly},{id:"rolpassword",label:(0,a.default)("Password"),type:"password",group:(0,a.default)("Definition"),mode:["edit","create"],control:"input",deps:["rolcanlogin"],retype:!0,cell:"text",disabled:e.readOnly},{id:"rolvaliduntil",type:"datetimepicker",group:(0,a.default)("Definition"),label:(0,a.default)("Account expires"),mode:["properties","edit","create"],deps:["rolcanlogin"],helpMessage:(0,a.default)("Please note that if you leave this field blank, then password will never expire."),helpMessageMode:["edit","create"],controlProps:{ampm:!1,placeholder:(0,a.default)("No Expiry"),autoOk:!0},disabled:e.readOnly},{id:"rolconnlimit",type:"int",group:(0,a.default)("Definition"),label:(0,a.default)("Connection limit"),cell:"integer",min:-1,mode:["properties","edit","create"],disabled:e.readOnly},{id:"rolcanlogin",label:(0,a.default)("Can login?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",group:(0,a.default)("Privileges"),disabled:e.readOnly},{id:"rolsuper",label:(0,a.default)("Superuser?"),type:"switch",group:(0,a.default)("Privileges"),depChange:function(e){e.rolcatupdate=e.rolcreaterole=e.rolcreatedb=e.rolsuper},disabled:e.readOnly},{id:"rolcreaterole",label:(0,a.default)("Create roles?"),group:(0,a.default)("Privileges"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",disabled:e.readOnly},{id:"rolcreatedb",label:(0,a.default)("Create databases?"),group:(0,a.default)("Privileges"),type:"switch",disabled:e.readOnly},{id:"rolcatupdate",label:(0,a.default)("Update catalog?"),max_version:90400,group:(0,a.default)("Privileges"),type:"switch",disabled:function(e){return!e.rolsuper},readonly:function(){return!(e.user.is_superuser||e.user.can_create_role)}},{id:"rolinherit",group:(0,a.default)("Privileges"),label:(0,a.default)("Inherit rights from the parent roles?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",disabled:e.readOnly},{id:"rolreplication",group:(0,a.default)("Privileges"),label:(0,a.default)("Can initiate streaming replication and backups?"),type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",min_version:90100,disabled:e.readOnly},{id:"rolmembership",label:(0,a.default)("Member of"),group:(0,a.default)("Membership"),disabled:e.readOnly,mode:["edit","create"],cell:"text",type:"collection",schema:new e.getMembershipSchema,helpMessage:e.isReadOnly?(0,a.default)("Select the checkbox for roles to include WITH ADMIN OPTION."):(0,a.default)("Roles shown with a check mark have the WITH ADMIN OPTION set.")},{id:"rolmembership",label:(0,a.default)("Member of"),group:(0,a.default)("Membership"),disabled:e.readOnly,mode:["properties"],cell:"text",type:"text",controlProps:{formatter:{fromRaw:e.memberDataFormatter}}},{id:"rolmembers",label:(0,a.default)("Members"),group:(0,a.default)("Membership"),mode:["edit","create"],cell:"text",type:"collection",schema:new e.getMembershipSchema,disabled:e.readOnly,helpMessage:e.isReadOnly?(0,a.default)("Select the checkbox for roles to include WITH ADMIN OPTION."):(0,a.default)("Roles shown with a check mark have the WITH ADMIN OPTION set.")},{id:"rolmembers",label:(0,a.default)("Members"),group:(0,a.default)("Membership"),disabled:e.readOnly,mode:["properties"],cell:"text",type:"text",controlProps:{formatter:{fromRaw:e.memberDataFormatter}}},{id:"variables",label:"",type:"collection",group:(0,a.default)("Parameters"),schema:this.getVariableSchema(),mode:["edit","create"],canAdd:!0,canDelete:!0,disabled:e.readOnly},{id:"seclabels",label:(0,a.default)("Security labels"),type:"collection",schema:new l.default,editable:!1,group:(0,a.default)("Security"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0,uniqueCol:["provider"],min_version:90200,disabled:e.readOnly}]}}])&&p(t.prototype,n),o&&p(t,o),s}(i.default);t.default=g},3011:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getMembershipSchema=function(e,t,n){return new b((function(){return(0,l.getNodeListByName)("role",t,n,{},(function(){return!0}))}))},t.default=void 0,n(68304),n(30489);var a=s(n(91669)),i=s(n(89406)),l=n(77077);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,o,i=d(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,{role:void 0,admin:void 0})).roleMembersOptions=e,t}return t=l,(n=[{key:"baseFields",get:function(){var e=this;return[{id:"role",label:(0,a.default)("User/Role"),type:"text",editable:!0,cell:function(){return{cell:"select",options:e.roleMembersOptions,controlProps:{allowClear:!1}}},noEmpty:!0,minWidth:300},{id:"admin",label:(0,a.default)("WITH ADMIN"),cell:"checkbox",type:"checkbox",minWidth:300,deps:["role"],depChange:function(e){r.isUndefined(e.admin)&&(e.admin=!1)}}]}}])&&u(t.prototype,n),o&&u(t,o),l}(i.default);t.default=b},28296:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(d,e);var t,n,r,a=c(d);function d(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"option",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value";return l(this,d),(t=a.call(this,(i(e={},n,void 0),i(e,r,void 0),e))).optionID=n,t.valueID=r,t}return t=d,(n=[{key:"baseFields",get:function(){return[{id:this.optionID,label:(0,o.default)("Option"),type:"text",editable:!0,cell:"text",noEmpty:!0,width:220},{id:this.valueID,label:(0,o.default)("Value"),type:"text",editable:!0,cell:"text",noEmpty:!0,width:220}]}}])&&s(t.prototype,n),r&&s(t,r),d}(a(n(89406)).default);t.default=p},40345:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(68304),n(30489),n(12419),n(78011),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodePrivilegeRoleSchema=function(e,t,n,r){return new b((function(){return(0,i.getNodeListByName)("role",t,n,{},(function(){return!0}),(function(e){return e.unshift({label:"PUBLIC",value:"PUBLIC"}),e}))}),(function(){return(0,i.getNodeListByName)("role",t,n)}),t,r)},t.default=void 0,n(68309),n(69070);var o=l(n(91669)),a=l(n(89406)),i=n(77077);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(i,e);var t,n,r,a=c(i);function i(e,t,n,r){var o,l,s,u,c,d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),s=a.call(this,{grantee:void 0,grantor:null==n||null===(o=n.server)||void 0===o||null===(l=o.user)||void 0===l?void 0:l.name,privileges:void 0}),u=f(s),d=function(e){s.supportedPrivs=e},(c="updateSupportedPrivs")in u?Object.defineProperty(u,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[c]=d,s.granteeOptions=e,s.grantorOptions=t,s.nodeInfo=n,s.supportedPrivs=r||[],s}return t=i,(n=[{key:"baseFields",get:function(){var e=this,t=this;return[{id:"grantee",label:(0,o.default)("Grantee"),type:"text",editable:!0,cell:function(){return{cell:"select",options:e.granteeOptions,controlProps:{allowClear:!1}}},noEmpty:!0},{id:"privileges",label:(0,o.default)("Privileges"),type:"text",group:null,cell:function(){return{cell:"privilege",controlProps:{supportedPrivs:e.supportedPrivs}}},disabled:function(e){return!(t.nodeInfo&&t.nodeInfo.server.user.name==e.grantor)}},{id:"grantor",label:(0,o.default)("Grantor"),type:"text",readonly:!0,editable:!1,cell:function(){return{cell:"select",options:t.grantorOptions}}}]}},{key:"validate",value:function(e,t){return(e.privileges||[]).length<=0&&(t("privileges",(0,o.default)("At least one privilege should be selected.")),!0)}}])&&s(t.prototype,n),r&&s(t,r),i}(a.default);t.default=b},67091:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,a=s(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),a.call(this,{provider:void 0,label:void 0})}return t=u,(n=[{key:"baseFields",get:function(){return[{id:"provider",label:(0,o.default)("Provider"),type:"text",editable:!0,cell:"text"},{id:"label",label:(0,o.default)("Security label"),type:"text",editable:!0,cell:"text",noEmpty:!0}]}}])&&i(t.prototype,n),r&&i(t,r),u}(a(n(89406)).default);t.default=d},43547:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68309),n(82772),n(68304),n(30489);var o=f(n(91669)),a=f(n(96486)),i=n(30033),l=f(n(89406)),s=f(n(55112)),u=f(n(34622)),c=f(n(6537)),d=n(76055);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(f,e);var t,n,r,l=v(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return y(this,f),(e=l.call(this,b({gid:void 0,id:void 0,name:"",bgcolor:"",fgcolor:"",sslmode:"prefer",host:"",hostaddr:"",port:5432,db:"postgres",username:c.default.name,role:null,connect_now:!0,password:void 0,save_password:!1,db_res:[],passfile:void 0,sslcompression:!1,sslcert:void 0,sslkey:void 0,sslrootcert:void 0,sslcrl:void 0,service:void 0,use_ssh_tunnel:0,tunnel_host:void 0,tunnel_port:22,tunnel_username:void 0,tunnel_identity_file:void 0,tunnel_password:void 0,tunnel_authentication:!1,save_tunnel_password:!1,connect_timeout:10},r))).serverGroupOptions=t,e.userId=n,a.default.bindAll(w(e),"isShared","isSSL"),e}return t=f,(n=[{key:"SSL_MODES",get:function(){return["prefer","require","verify-ca","verify-full"]}},{key:"isShared",value:function(e){return!(this.isNew(e)||this.userId==c.default.id||!e.shared)}},{key:"isConnected",value:function(e){return Boolean(e.connected)}},{key:"isSSL",value:function(e){return-1==this.SSL_MODES.indexOf(e.sslmode)}},{key:"isValidLib",value:function(){return s.default.Browser.utils.pg_libpq_version<1e5}},{key:"baseFields",get:function(){var e=this;return[{id:"id",label:(0,o.default)("ID"),type:"int",group:null,mode:["properties"]},{id:"name",label:(0,o.default)("Name"),type:"text",group:null,mode:["properties","edit","create"],noEmpty:!0,disabled:e.isShared},{id:"gid",label:(0,o.default)("Server group"),type:"select",options:e.serverGroupOptions,mode:["create","edit"],controlProps:{allowClear:!1},disabled:e.isShared},{id:"server_owner",label:(0,o.default)("Shared Server Owner"),type:"text",mode:["properties"],visible:function(t){var n=e.userId;return!(!t.shared||n==c.default.id||"True"!=s.default.server_mode)}},{id:"server_type",label:(0,o.default)("Server type"),type:"select",mode:["properties"],visible:e.isConnected,options:u.default},{id:"connected",label:(0,o.default)("Connected?"),type:"switch",mode:["properties"],group:(0,o.default)("Connection")},{id:"version",label:(0,o.default)("Version"),type:"text",group:null,mode:["properties"],visible:e.isConnected},{id:"bgcolor",label:(0,o.default)("Background"),type:"color",group:null,mode:["edit","create"],disabled:e.isConnected,deps:["fgcolor"],depChange:function(e){if(!e.bgcolor&&e.fgcolor)return{bgcolor:"#ffffff"}}},{id:"fgcolor",label:(0,o.default)("Foreground"),type:"color",group:null,mode:["edit","create"],disabled:e.isConnected},{id:"connect_now",label:(0,o.default)("Connect now?"),type:"switch",group:null,mode:["create"]},{id:"shared",label:(0,o.default)("Shared?"),type:"switch",mode:["properties","create","edit"],readonly:function(t){var n=e.userId;return!(!e.isNew(t)||n==c.default.id)},visible:function(){return!(!c.default.is_admin||"True"!=s.default.server_mode)}},{id:"comment",label:(0,o.default)("Comments"),type:"multiline",group:null,mode:["properties","edit","create"]},{id:"host",label:(0,o.default)("Host name/address"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"],disabled:e.isShared,depChange:function(t){e.origData.host!=t.host&&!e.isNew(t)&&t.connected?e.informText=(0,o.default)("To apply changes to the connection configuration, please disconnect from the server and then reconnect."):e.informText=void 0}},{id:"port",label:(0,o.default)("Port"),type:"int",group:(0,o.default)("Connection"),mode:["properties","edit","create"],min:1,max:65535,disabled:e.isShared,depChange:function(t){e.origData.port!=t.port&&!e.isNew(t)&&t.connected?e.informText=(0,o.default)("To apply changes to the connection configuration, please disconnect from the server and then reconnect."):e.informText=void 0}},{id:"db",label:(0,o.default)("Maintenance database"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"],readonly:e.isConnected,disabled:e.isShared,noEmpty:!0},{id:"username",label:(0,o.default)("Username"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"],depChange:function(t){e.origData.username!=t.username&&!e.isNew(t)&&t.connected?e.informText=(0,o.default)("To apply changes to the connection configuration, please disconnect from the server and then reconnect."):e.informText=void 0}},{id:"kerberos_conn",label:(0,o.default)("Kerberos authentication?"),type:"switch",group:(0,o.default)("Connection")},{id:"gss_authenticated",label:(0,o.default)("GSS authenticated?"),type:"switch",group:(0,o.default)("Connection"),mode:["properties"],visible:e.isConnected},{id:"gss_encrypted",label:(0,o.default)("GSS encrypted?"),type:"switch",group:(0,o.default)("Connection"),mode:["properties"],visible:e.isConnected},{id:"password",label:(0,o.default)("Password"),type:"password",maxlength:null,group:(0,o.default)("Connection"),mode:["create"],deps:["connect_now","kerberos_conn"],visible:function(t){return t.connect_now&&e.isNew(t)},disabled:function(e){return e.kerberos_conn}},{id:"save_password",label:(0,o.default)("Save password?"),type:"switch",group:(0,o.default)("Connection"),mode:["create"],deps:["connect_now","kerberos_conn"],visible:function(t){return t.connect_now&&e.isNew(t)},disabled:function(e){return!(c.default.allow_save_password&&!e.kerberos_conn)}},{id:"role",label:(0,o.default)("Role"),type:"text",group:(0,o.default)("Connection"),mode:["properties","edit","create"],readonly:e.isConnected},{id:"service",label:(0,o.default)("Service"),type:"text",mode:["properties","edit","create"],readonly:e.isConnected,group:(0,o.default)("Connection")},{id:"sslmode",label:(0,o.default)("SSL mode"),type:"select",group:(0,o.default)("SSL"),controlProps:{allowClear:!1},mode:["properties","edit","create"],disabled:e.isConnected,options:[{label:(0,o.default)("Allow"),value:"allow"},{label:(0,o.default)("Prefer"),value:"prefer"},{label:(0,o.default)("Require"),value:"require"},{label:(0,o.default)("Disable"),value:"disable"},{label:(0,o.default)("Verify-CA"),value:"verify-ca"},{label:(0,o.default)("Verify-Full"),value:"verify-full"}]},{id:"sslcert",label:(0,o.default)("Client certificate"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,readonly:e.isConnected,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslkey",label:(0,o.default)("Client certificate key"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,readonly:e.isConnected,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslrootcert",label:(0,o.default)("Root certificate"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,readonly:e.isConnected,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslcrl",label:(0,o.default)("Certificate revocation list"),type:"file",group:(0,o.default)("SSL"),mode:["edit","create"],disabled:e.isSSL,readonly:e.isConnected,controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["sslmode"]},{id:"sslcompression",label:(0,o.default)("SSL compression?"),type:"switch",mode:["edit","create"],group:(0,o.default)("SSL"),disabled:e.isSSL,readonly:e.isConnected,deps:["sslmode"]},{id:"sslcert",label:(0,o.default)("Client certificate"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslcert;return!a.default.isUndefined(t)&&!a.default.isNull(t)}},{id:"sslkey",label:(0,o.default)("Client certificate key"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslkey;return!a.default.isUndefined(t)&&!a.default.isNull(t)}},{id:"sslrootcert",label:(0,o.default)("Root certificate"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslrootcert;return!a.default.isUndefined(t)&&!a.default.isNull(t)}},{id:"sslcrl",label:(0,o.default)("Certificate revocation list"),type:"text",group:(0,o.default)("SSL"),mode:["properties"],deps:["sslmode"],visible:function(e){var t=e.sslcrl;return!a.default.isUndefined(t)&&!a.default.isNull(t)}},{id:"sslcompression",label:(0,o.default)("SSL compression?"),type:"switch",mode:["properties"],group:(0,o.default)("SSL"),deps:["sslmode"],visible:function(t){return-1!=a.default.indexOf(e.SSL_MODES,t.sslmode)}},{id:"use_ssh_tunnel",label:(0,o.default)("Use SSH tunneling"),type:"switch",mode:["properties","edit","create"],group:(0,o.default)("SSH Tunnel"),disabled:function(){return!s.default.Browser.utils.support_ssh_tunnel},readonly:e.isConnected},{id:"tunnel_host",label:(0,o.default)("Tunnel host"),type:"text",group:(0,o.default)("SSH Tunnel"),mode:["properties","edit","create"],deps:["use_ssh_tunnel"],disabled:function(e){return!e.use_ssh_tunnel},readonly:e.isConnected},{id:"tunnel_port",label:(0,o.default)("Tunnel port"),type:"int",group:(0,o.default)("SSH Tunnel"),mode:["properties","edit","create"],deps:["use_ssh_tunnel"],max:65535,disabled:function(e){return!e.use_ssh_tunnel},readonly:e.isConnected},{id:"tunnel_username",label:(0,o.default)("Username"),type:"text",group:(0,o.default)("SSH Tunnel"),mode:["properties","edit","create"],deps:["use_ssh_tunnel"],disabled:function(e){return!e.use_ssh_tunnel},readonly:e.isConnected},{id:"tunnel_authentication",label:(0,o.default)("Authentication"),type:"toggle",mode:["properties","edit","create"],group:(0,o.default)("SSH Tunnel"),options:[{label:(0,o.default)("Password"),value:!1},{label:(0,o.default)("Identity file"),value:!0}],disabled:function(e){return!e.use_ssh_tunnel},readonly:e.isConnected},{id:"tunnel_identity_file",label:(0,o.default)("Identity file"),type:"file",group:(0,o.default)("SSH Tunnel"),mode:["properties","edit","create"],controlProps:{dialogType:"select_file",supportedTypes:["*"]},deps:["tunnel_authentication","use_ssh_tunnel"],depChange:function(e){if(!e.tunnel_authentication&&e.tunnel_identity_file)return{tunnel_identity_file:null}},disabled:function(e){return!e.tunnel_authentication||!e.use_ssh_tunnel}},{id:"tunnel_password",label:(0,o.default)("Password"),type:"password",group:(0,o.default)("SSH Tunnel"),mode:["create"],deps:["use_ssh_tunnel"],disabled:function(e){return!e.use_ssh_tunnel},readonly:e.isConnected},{id:"save_tunnel_password",label:(0,o.default)("Save password?"),type:"switch",group:(0,o.default)("SSH Tunnel"),mode:["create"],deps:["connect_now","use_ssh_tunnel"],visible:function(t){return t.connect_now&&e.isNew(t)},disabled:function(e){return!c.default.allow_save_tunnel_password||!e.use_ssh_tunnel}},{id:"hostaddr",label:(0,o.default)("Host address"),type:"text",group:(0,o.default)("Advanced"),mode:["properties","edit","create"],readonly:e.isConnected},{id:"db_res",label:(0,o.default)("DB restriction"),type:"select",group:(0,o.default)("Advanced"),options:[],mode:["properties","edit","create"],readonly:e.isConnected,controlProps:{multiple:!0,allowClear:!1,creatable:!0,noDropdown:!0}},{id:"passfile",label:(0,o.default)("Password file"),type:"file",group:(0,o.default)("Advanced"),mode:["edit","create"],disabled:e.isValidLib,readonly:e.isConnected,controlProps:{dialogType:"select_file",supportedTypes:["*"]}},{id:"passfile",label:(0,o.default)("Password file"),type:"text",group:(0,o.default)("Advanced"),mode:["properties"],visible:function(e){var t=e.passfile;return!a.default.isUndefined(t)&&!a.default.isNull(t)}},{id:"connect_timeout",label:(0,o.default)("Connection timeout (seconds)"),type:"int",group:(0,o.default)("Advanced"),mode:["properties","edit","create"],readonly:e.isConnected,min:0}]}},{key:"validate",value:function(e,t){var n=null;if((0,d.isEmptyString)(e.service)){if(n=(0,o.default)("Either Host name, Address or Service must be specified."),(0,d.isEmptyString)(e.host)&&(0,d.isEmptyString)(e.hostaddr))return t("host",n),!0;if(t("host",n=null),t("hostaddr",n),e.hostaddr)try{new i.Address4(e.hostaddr)}catch(r){try{new i.Address6(e.hostaddr)}catch(e){return n=(0,o.default)("Host address must be valid IPv4 or IPv6 address."),t("hostaddr",n),!0}}else t("hostaddr",null);if((0,d.isEmptyString)(e.username))return n=(0,o.default)("Username must be specified."),t("username",n),!0;if(t("username",n=null),(0,d.isEmptyString)(e.port))return n=(0,o.default)("Port must be specified."),t("port",n),!0;t("port",n=null)}else n=null,a.default.each(["host","hostaddr","db","username","port"],(function(e){t(e,n)}));if(e.use_ssh_tunnel){if((0,d.isEmptyString)(e.tunnel_host))return n=(0,o.default)("SSH Tunnel host must be specified."),t("tunnel_host",n),!0;if(t("tunnel_host",n=null),(0,d.isEmptyString)(e.tunnel_port))return n=(0,o.default)("SSH Tunnel port must be specified."),t("tunnel_port",n),!0;if(t("tunnel_port",n=null),(0,d.isEmptyString)(e.tunnel_username))return n=(0,o.default)("SSH Tunnel username must be specified."),t("tunnel_username",n),!0;if(t("tunnel_username",n=null),e.tunnel_authentication){if((0,d.isEmptyString)(e.tunnel_identity_file))return n=(0,o.default)("SSH Tunnel identity file must be specified."),t("tunnel_identity_file",n),!0;t("tunnel_identity_file",n=null)}}return!1}}])&&h(t.prototype,n),r&&h(t,r),f}(l.default);t.default=S},87954:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeVacuumSettingsSchema=function(e,t,n){return new h((function(){return(0,i.getNodeAjaxOptions)("get_table_vacuum",e,t,n,{noCache:!0})}),(function(){return(0,i.getNodeAjaxOptions)("get_toast_table_vacuum",e,t,n,{noCache:!0})}),t)},t.default=t.VacuumTableSchema=void 0,n(68304),n(30489);var o=l(n(91669)),a=l(n(89406)),i=n(77077);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){d(n,e);var t=p(n);function n(e){var r;return s(this,n),(r=t.call(this)).valueDep=e,r}return c(n,[{key:"baseFields",get:function(){var e=this;return[{id:"label",name:"label",label:(0,o.default)("Label"),cell:""},{id:"value",name:"value",label:(0,o.default)("Value"),type:"text",deps:[[this.valueDep]],editable:function(){return e.top.sessData[this.valueDep]},cell:function(e){switch(e.column_type){case"integer":return{cell:"int"};case"number":return{cell:"numeric",controlProps:{decimals:5}};case"string":return{cell:"text"};default:return{cell:""}}}},{id:"setting",name:"setting",label:(0,o.default)("Default"),cell:""}]}}]),n}(a.default);t.VacuumTableSchema=y;var h=function(e){d(n,e);var t=p(n);function n(e,r,o){var a;return s(this,n),(a=t.call(this,{vacuum_table:[],vacuum_toast:[]})).tableVars=e,a.toastTableVars=r,a.nodeInfo=o,a.vacuumTableObj=new y("autovacuum_custom"),a.vacuumToastTableObj=new y("toast_autovacuum"),a}return c(n,[{key:"baseFields",get:function(){var e=this;return[{id:"autovacuum_custom",label:(0,o.default)("Custom auto-vacuum?"),group:(0,o.default)("Table"),mode:["edit","create"],skipChange:!0,type:"switch",disabled:function(t){return!!t.is_partitioned||(!(!t.top||!t.is_partitioned)||!e.inCatalog)},depChange:function(e){if(e.is_partitioned)return{autovacuum_custom:!1}}},{id:"autovacuum_enabled",label:(0,o.default)("Autovacuum Enabled?"),group:(0,o.default)("Table"),mode:["edit","create"],type:"toggle",options:[{label:(0,o.default)("Not set"),value:"x"},{label:(0,o.default)("Yes"),value:"t"},{label:(0,o.default)("No"),value:"f"}],deps:["autovacuum_custom"],disabled:function(t){return!e.inCatalog||!t.autovacuum_custom},depChange:function(t){if(!e.inCatalog||!t.autovacuum_custom)return{autovacuum_enabled:"x"}}},{id:"vacuum_table",label:"",editable:!1,type:"collection",canEdit:!1,canAdd:!1,canDelete:!1,group:(0,o.default)("Table"),fixedRows:this.tableVars,schema:this.vacuumTableObj,mode:["edit","create"]},{id:"toast_autovacuum",label:(0,o.default)("Custom auto-vacuum?"),group:(0,o.default)("TOAST table"),mode:["edit","create"],type:"switch",disabled:function(t){return!e.inCatalog||!e.top.isNew()&&!t.hastoasttable}},{id:"toast_autovacuum_enabled",label:(0,o.default)("Autovacuum Enabled?"),group:(0,o.default)("TOAST table"),mode:["edit","create"],type:"toggle",options:[{label:(0,o.default)("Not set"),value:"x"},{label:(0,o.default)("Yes"),value:"t"},{label:(0,o.default)("No"),value:"f"}],deps:["toast_autovacuum"],disabled:function(t){return!e.inCatalog||!t.toast_autovacuum},depChange:function(t){if(!e.inCatalog||!t.toast_autovacuum)return e.isNew()||t.hastoasttable?{toast_autovacuum_enabled:"x"}:void 0}},{id:"vacuum_toast",label:"",type:"collection",fixedRows:this.toastTableVars,editable:function(t){return e.isNew(t)},canEdit:!1,canAdd:!1,canDelete:!1,group:(0,o.default)("TOAST table"),schema:this.vacuumToastTableObj,mode:["properties","edit","create"],deps:["toast_autovacuum"]}]}}]),n}(a.default);t.default=h},14511:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(68304),n(30489),n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),n(41817),n(32165),n(78783),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeVariableSchema=function(e,t,n,r,o){var i=["name","value"];r&&i.push("database");o&&i.push("role");return new h((function(){return(0,l.getNodeAjaxOptions)("vopts",e,t,n,null,(function(e){var t=[];return a.default.each(e,(function(e){t.push({value:e.name,image:void 0,label:e.name,vartype:e.vartype,enumvals:e.enumvals,max_val:e.max_val,min_val:e.min_val})})),t}))}),(function(){return(0,l.getNodeListByName)("database",t,n)}),(function(){return(0,l.getNodeListByName)("role",t,n)}),i)},t.default=void 0,n(68309),n(41539),n(66992),n(33948),n(89554),n(54747),n(21249);var o=u(n(91669)),a=u(n(96486)),i=u(n(89406)),l=n(77077),s=n(76055);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(i,e);var t,n,r,a=b(i);function i(e,t,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(o=a.call(this,{name:void 0,value:void 0,role:null,database:null})).vnameOptions=e,o.databaseOptions=t,o.roleOptions=n,o.varTypes={},o.keys=r,o}return t=i,(n=[{key:"setVarTypes",value:function(e){var t=this;e.forEach((function(e){t.varTypes[e.value]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}))}},{key:"getValueFieldProps",value:function(e){switch(null==e?void 0:e.vartype){case"bool":return"switch";case"enum":return{cell:"select",options:(e.enumvals||[]).map((function(e){return{label:e,value:e}}))};case"integer":return"int";case"real":return"numeric";case"string":return"text";default:return""}}},{key:"baseFields",get:function(){var e=this,t=this;return[{id:"id",label:(0,o.default)("ID"),type:"int",group:null,mode:["properties"]},{id:"name",label:(0,o.default)("Name"),type:"text",readonly:function(e){return!t.isNew(e)},cell:function(){return{cell:"select",options:e.vnameOptions,optionsLoaded:function(e){t.setVarTypes(e)},controlProps:{allowClear:!1}}}},{id:"value",label:(0,o.default)("Value"),type:"text",deps:["name"],depChange:function(t,n){if("name"==n[n.length-1])return"bool"===e.varTypes[t.name].vartype?{value:!1}:{value:null}},cell:function(t){var n=e.varTypes[t.name];return e.getValueFieldProps(n)}},{id:"database",label:(0,o.default)("Database"),type:"text",cell:function(){return{cell:"select",options:e.databaseOptions}}},{id:"role",label:(0,o.default)("Role"),type:"text",cell:function(){return{cell:"select",options:e.roleOptions,controlProps:{allowClear:!1}}}}]}},{key:"validate",value:function(e,t){return(0,s.isEmptyString)(e.name)?(t("name",(0,o.default)("Please select a parameter name.")),!0):(t("name",null),(0,s.isEmptyString)(e.value)?(t("value",(0,o.default)("Please enter a value for the parameter.")),!0):void t("value",null))}}])&&f(t.prototype,n),r&&f(t,r),i}(i.default);t.default=h},81051:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=l(n(91669)),a=l(n(89406)),i=l(n(67091));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,a=b(l);function l(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;return d(this,l),(n=a.call(this,u({name:void 0,owner:void 0,is_sys_obj:void 0,comment:void 0,spclocation:void 0,spcoptions:[],spcacl:[],seclabels:[]},o))).getPrivilegeRoleSchema=t,n.getVariableSchema=e,n.fieldOptions=u({role:[]},r),n}return t=l,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){var e=this;return[{id:"name",label:(0,o.default)("Name"),cell:"text",type:"text",mode:["properties","create","edit"],noEmpty:!0},{id:"oid",label:(0,o.default)("OID"),cell:"text",type:"text",mode:["properties"]},{id:"spcuser",label:(0,o.default)("Owner"),cell:"text",editable:!1,type:"select",options:this.fieldOptions.role,controlProps:{allowClear:!1}},{id:"is_sys_obj",label:(0,o.default)("System tablespace?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"description",label:(0,o.default)("Comment"),cell:"text",type:"multiline"},{id:"spclocation",label:(0,o.default)("Location"),group:(0,o.default)("Definition"),type:"text",mode:["properties","edit","create"],readonly:function(t){return!e.isNew(t)},noEmpty:!0},{id:"acl",label:(0,o.default)("Privileges"),type:"text",group:(0,o.default)("Security"),mode:["properties"]},{id:"spcoptions",label:"",type:"collection",schema:this.getVariableSchema(),editable:!1,group:(0,o.default)("Parameters"),mode:["edit","create"],canAdd:!0,canEdit:!1,canDelete:!0},{id:"spcacl",label:(0,o.default)("Privileges"),type:"collection",group:(0,o.default)("Security"),schema:this.getPrivilegeRoleSchema(["C"]),mode:["edit","create"],uniqueCol:["grantee"],canAdd:!0,canDelete:!0},{id:"seclabels",label:(0,o.default)("Security labels"),type:"collection",editable:!1,group:(0,o.default)("Security"),schema:new i.default,mode:["edit","create"],min_version:90200,uniqueCol:["provider"],canAdd:!0,canEdit:!1,canDelete:!0}]}}])&&f(t.prototype,n),r&&f(t,r),l}(a.default);t.default=h},46675:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,a=s(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),a.call(this,{id:void 0,name:null,user_id:void 0})}return t=u,(n=[{key:"baseFields",get:function(){return[{id:"id",label:(0,o.default)("ID"),type:"int",group:null,mode:["properties"],visible:!0},{id:"name",label:(0,o.default)("Name"),type:"text",group:null,mode:["properties","edit","create"],noEmpty:!0,disabled:!1}]}}])&&i(t.prototype,n),r&&i(t,r),u}(a(n(89406)).default);t.default=d},31126:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0,n(32564),n(89554);var r=s(n(19755)),o=s(n(81311)),a=s(n(55112)),i=s(n(1950)),l=n(44092);function s(e){return e&&e.__esModule?e:{default:e}}var u=a.default.Browser=a.default.Browser||{};t.pgBrowser=u;o.default.extend(u,{inactivity_timeout_at:null,logging_activity:!1,inactivity_timeout_daemon_running:!1,is_pgadmin_timedout:function(){return!i.default.pgAdmin},is_inactivity_timeout:function(){return i.default.pgAdmin.Browser.inactivity_timeout_at<this.get_epoch_now()},get_epoch_now:function(){return(0,l.getEpoch)()},log_activity:function(){var e=this;this.logging_activity||(this.logging_activity=!0,this.inactivity_timeout_at=this.get_epoch_now()+a.default.user_inactivity_timeout,setTimeout((function(){e.logging_activity=!1}),1e3))},register_to_activity_listener:function(e,t){var n=["mousemove","mousedown","keydown"],r=this;n.forEach((function(o){e.addEventListener(o,(function o(){r.is_pgadmin_timedout()?(n.forEach((function(t){e.removeEventListener(t,o,!0)})),t()):i.default.pgAdmin.Browser.log_activity()}),!0)}))},override_activity_event_decorator:function(e){return function(){return a.default.override_user_inactivity_timeout&&i.default.pgAdmin.Browser.log_activity(),e.apply(this,arguments)}},logout_inactivity_user:function(){o.default.isUndefined(u.utils)||o.default.isUndefined(u.utils.logout_url)||(window.location.href=u.utils.logout_url)},start_inactivity_timeout_daemon:function(){var e=this;if(a.default.user_inactivity_timeout>0&&!e.inactivity_timeout_daemon_running)var t=setInterval((function(){e.inactivity_timeout_daemon_running=!0,e.is_inactivity_timeout()&&(clearInterval(t),e.inactivity_timeout_daemon_running=!1,(0,r.default)(window).off("beforeunload"),e.logout_inactivity_user())}),1e3)}})},89769:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),n(24812),n(32564),n(69826);var o=b(n(81311)),a=b(n(55112)),i=b(n(19755)),l=b(n(42441)),s=p(n(44092)),u=b(n(89087)),c=p(n(72945)),d=b(n(1950));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function b(e){return e&&e.__esModule?e:{default:e}}var m=a.default.Browser=a.default.Browser||{};m.keyboardNavigation=m.keyboardNavigation||{},o.default.extend(m.keyboardNavigation,{init:function(){l.default.reset(),m.preferences_cache.length>0&&(this.keyboardShortcut={file_shortcut:s.parseShortcutValue(m.get_preference("browser","main_menu_file").value),object_shortcut:s.parseShortcutValue(m.get_preference("browser","main_menu_object").value),tools_shortcut:s.parseShortcutValue(m.get_preference("browser","main_menu_tools").value),help_shortcut:s.parseShortcutValue(m.get_preference("browser","main_menu_help").value),left_tree_shortcut:s.parseShortcutValue(m.get_preference("browser","browser_tree").value),tabbed_panel_backward:s.parseShortcutValue(m.get_preference("browser","tabbed_panel_backward").value),tabbed_panel_forward:s.parseShortcutValue(m.get_preference("browser","tabbed_panel_forward").value),sub_menu_query_tool:s.parseShortcutValue(m.get_preference("browser","sub_menu_query_tool").value),sub_menu_view_data:s.parseShortcutValue(m.get_preference("browser","sub_menu_view_data").value),sub_menu_search_objects:s.parseShortcutValue(m.get_preference("browser","sub_menu_search_objects").value),sub_menu_properties:s.parseShortcutValue(m.get_preference("browser","sub_menu_properties").value),sub_menu_create:s.parseShortcutValue(m.get_preference("browser","sub_menu_create").value),sub_menu_delete:s.parseShortcutValue(m.get_preference("browser","sub_menu_delete").value),sub_menu_refresh:s.parseShortcutValue(m.get_preference("browser","sub_menu_refresh").value),context_menu:s.parseShortcutValue(m.get_preference("browser","context_menu").value),direct_debugging:s.parseShortcutValue(m.get_preference("browser","direct_debugging").value),drop_multiple_objects:s.parseShortcutValue(m.get_preference("browser","grid_menu_drop_multiple").value),drop_cascade_multiple_objects:s.parseShortcutValue(m.get_preference("browser","grid_menu_drop_cascade_multiple").value),add_grid_row:s.parseShortcutValue(m.get_preference("browser","add_grid_row").value),open_quick_search:s.parseShortcutValue(m.get_preference("browser","open_quick_search").value)},this.shortcutMethods={bindMainMenu:{shortcuts:[this.keyboardShortcut.file_shortcut,this.keyboardShortcut.object_shortcut,this.keyboardShortcut.tools_shortcut,this.keyboardShortcut.help_shortcut]},bindRightPanel:{shortcuts:[this.keyboardShortcut.tabbed_panel_backward,this.keyboardShortcut.tabbed_panel_forward]},bindLeftTree:{shortcuts:this.keyboardShortcut.left_tree_shortcut},bindSubMenuQueryTool:{shortcuts:this.keyboardShortcut.sub_menu_query_tool},bindSubMenuViewData:{shortcuts:this.keyboardShortcut.sub_menu_view_data},bindSubMenuSearchObjects:{shortcuts:this.keyboardShortcut.sub_menu_search_objects},bindSubMenuProperties:{shortcuts:this.keyboardShortcut.sub_menu_properties},bindSubMenuCreate:{shortcuts:this.keyboardShortcut.sub_menu_create},bindSubMenuDelete:{shortcuts:this.keyboardShortcut.sub_menu_delete},bindSubMenuRefresh:{shortcuts:this.keyboardShortcut.sub_menu_refresh,bindElem:"#tree"},bindContextMenu:{shortcuts:this.keyboardShortcut.context_menu},bindDirectDebugging:{shortcuts:this.keyboardShortcut.direct_debugging},bindDropMultipleObjects:{shortcuts:this.keyboardShortcut.drop_multiple_objects},bindDropCascadeMultipleObjects:{shortcuts:this.keyboardShortcut.drop_cascade_multiple_objects},bindAddGridRow:{shortcuts:this.keyboardShortcut.add_grid_row},bindOpenQuickSearch:{shortcuts:this.keyboardShortcut.open_quick_search}},this.bindShortcuts())},bindShortcuts:function(){var e=this;o.default.each(e.shortcutMethods,(function(t,n){e._bindWithMousetrap(t.shortcuts,e[n],t.bindElem)}));(0,i.default)(".pg-navbar").on("keydown",(function(t){switch(t.keyCode){case 37:e.bindMainMenuLeft(t);break;case 38:e.bindMainMenuUpDown(t,"up");break;case 39:e.bindMainMenuRight(t);break;case 40:e.bindMainMenuUpDown(t,"down")}}))},_bindWithMousetrap:function(e,t,n){var r=this;if(l.default.unbind(e),n){var o=document.querySelector(n);(0,l.default)(o).bind(e,function(){t.apply(this,arguments)}.bind(o))}else l.default.bind(e,(function(){t.apply(r,arguments)}))},unbindShortcuts:function(){o.default.each(this.mousetrapInstances,(function(e){e.instance.reset()})),this.mousetrapInstances=[]},bindMainMenu:function(e,t){var n=this.keyboardShortcut;t===n.file_shortcut&&(0,i.default)("#mnu_file a.dropdown-toggle").dropdown("toggle"),t===n.object_shortcut&&(0,i.default)("#mnu_obj a.dropdown-toggle").first().dropdown("toggle"),t===n.tools_shortcut&&(0,i.default)("#mnu_tools a.dropdown-toggle").dropdown("toggle"),t===n.help_shortcut&&(0,i.default)("#mnu_help a.dropdown-toggle").dropdown("toggle")},bindRightPanel:function(e,t){var n=0,r=a.default.Browser.docker.findPanels().length-1,i=0,l=!1,s=this.keyboardShortcut;o.default.each(a.default.Browser.docker.findPanels(),(function(e,t){e.isVisible()&&!l&&"browser"!==e._type&&(i=t,l=!0)})),t===s.tabbed_panel_backward?n=i>0?i-1:1:t===s.tabbed_panel_forward&&(n=i<r?i+1:r),a.default.Browser.docker.findPanels()[n].focus(),setTimeout((function(){document.activeElement instanceof HTMLIFrameElement&&document.activeElement.blur()}),1e3)},bindMainMenuLeft:function(e){if((0,i.default)(e.target).hasClass("nav-link")){var t=(0,i.default)(e.target).closest(".nav-item");for(c._stopEventPropagation(e),t=t.prev(".nav-item");t.hasClass("d-none");)t=t.prev(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,i.default)(e.target).closest(".dropdown-menu").length>0){var n=(0,i.default)(e.target).closest("li");c._stopEventPropagation(e);var r=n.closest(".dropdown-menu");r.closest(".dropdown-submenu").length>0&&(r.removeClass("show"),r.closest(".dropdown-submenu").removeClass("dropdown-submenu-visible"),(n=r.closest(".dropdown-submenu")).find(".dropdown-item").trigger("focus"))}},bindMainMenuRight:function(e){if((0,i.default)(e.target).hasClass("nav-link")){var t=(0,i.default)(e.target).closest(".nav-item");for(c._stopEventPropagation(e),t=t.next(".nav-item");t.hasClass("d-none");)t=t.next(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,i.default)(e.target).closest(".dropdown-menu").length>0){var n=(0,i.default)(e.target).closest("li");c._stopEventPropagation(e),n.hasClass("dropdown-submenu")&&(n.addClass("dropdown-submenu-visible"),n.find(".dropdown-menu").addClass("show"),n.find(".dropdown-menu .dropdown-item").first().trigger("focus"))}},bindMainMenuUpDown:function(e,t){if((0,i.default)(e.target).closest(".dropdown-menu").length>0){c._stopEventPropagation(e);var n=(0,i.default)(e.target).closest("li"),r=(0,i.default)(e.target).closest(".dropdown-menu");for(r.find(".show").removeClass("show"),r.find(".dropdown-submenu").removeClass("dropdown-submenu-visible"),"up"===t?n=n.prev():"down"===t&&(n=n.next());n.hasClass("dropdown-divider")||n.find(".dropdown-item").first().hasClass("disabled");)"up"===t?n=n.prev():"down"===t&&(n=n.next());n.find(".dropdown-item").trigger("focus")}},bindLeftTree:function(){var e=this.getTreeDetails();(0,i.default)("#tree").trigger("focus"),e.t.select(e.i)},bindSubMenuQueryTool:function(){var e=this.getTreeDetails();e.d&&a.default.DataGrid.show_query_tool("",e.i)},bindSubMenuViewData:function(){var e=this.getTreeDetails();e.d&&a.default.DataGrid.show_data_grid({mnuid:1},e.i)},bindSubMenuSearchObjects:function(){var e=this.getTreeDetails();e.d&&a.default.SearchObjects.show_search_objects("",e.i)},bindSubMenuProperties:function(){var e=this.getTreeDetails();e.d&&!0!==a.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&a.default.Browser.Node.callbacks.show_obj_properties.call(a.default.Browser.Nodes[e.t.itemData(e.i)._type],{action:"edit"})},bindSubMenuCreate:function(){var e=this.getTreeDetails(),t=a.default.Browser.Nodes[e.t.itemData(e.i)._type];if(e.d){if(!0===t.collection_node){if(!t.node)return;t=a.default.Browser.Nodes[t.node]}a.default.Browser.Node.callbacks.show_obj_properties.call(t,{action:"create",item:e.i})}},bindSubMenuDelete:function(){var e=this.getTreeDetails();e.d&&!0!==a.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&a.default.Browser.Node.callbacks.delete_obj.call(a.default.Browser.Nodes[e.t.itemData(e.i)._type])},bindSubMenuRefresh:function(e){e.preventDefault();var t=m.keyboardNavigation.getTreeDetails();a.default.Browser.Node.callbacks.refresh.call(a.default.Browser.Nodes[t.t.itemData(t.i)._type])},bindContextMenu:function(e){var t=this.getTreeDetails(),n=e.srcElement||e.target,r=(0,i.default)(n).find(".aciTreeEntry").position().left+70,o=(0,i.default)(n).find(".aciTreeEntry").position().top+70;t.t.blur(t.i),(0,i.default)("#tree").trigger("blur"),t.i.children().contextMenu({x:r,y:o})},bindDirectDebugging:function(){var e=this.getTreeDetails(),t=e.t.itemData(e.i)._type;!e.d||"function"!==t&&"procedure"!==t||a.default.Tools.Debugger.can_debug(e.d,e.i,{debug_type:"direct"})&&a.default.Tools.Debugger.get_function_information(a.default.Browser.Nodes[t])},bindDropMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&(0,i.default)("button.delete_multiple").length>0&&(0,i.default)("button.delete_multiple").click()},bindDropCascadeMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&(0,i.default)("button.delete_multiple_cascade").length>0&&(0,i.default)("button.delete_multiple_cascade").click()},bindAddGridRow:function(){var e=(0,i.default)(document.activeElement).closest(".object.subnode");(0,i.default)(e).length&&(0,i.default)(e).find(".add").click()},isPropertyPanelVisible:function(){var e=!1;return o.default.each(a.default.Browser.docker.findPanels(),(function(t){"properties"===t._type&&(e=t.isVisible())})),e},getTreeDetails:function(){var e=a.default.Browser.tree,t=e.selected()?e.selected():e.first(),n=t?e.itemData(t):void 0;return{t:e,i:t,d:n}},getDialogTabNavigator:function(e){var t=d.default.pgAdmin.Browser.get_preference("browser","dialog_tab_backward").value,n=d.default.pgAdmin.Browser.get_preference("browser","dialog_tab_forward").value;return new u.default.dialogTabNavigator(e,t,n)},bindOpenQuickSearch:function(){(0,i.default)("#search_icon").trigger("click")}}),e.exports=a.default.Browser.keyboardNavigation},88799:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0,n(32564),n(68309);var a=f(n(55112)),i=f(n(28008)),l=f(n(19755)),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(55455)),u=f(n(91669));n(35816);var c=f(n(1950));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e){return e&&e.__esModule?e:{default:e}}var p=a.default.Browser=a.default.Browser||{};t.pgBrowser=p;var b=window.wcDocker;r.extend(p,{lock_layout_levels:{PREVENT_DOCKING:"docking",FULL:"full",NONE:"none"},buildDefaultLayout:function(e){var t=e.addPanel("browser",b.DOCK.LEFT),n=e.addPanel("dashboard",b.DOCK.RIGHT,t);e.addPanel("properties",b.DOCK.STACKED,n,{tabOrientation:b.TAB.TOP}),e.addPanel("sql",b.DOCK.STACKED,n),e.addPanel("statistics",b.DOCK.STACKED,n),e.addPanel("dependencies",b.DOCK.STACKED,n),e.addPanel("dependents",b.DOCK.STACKED,n)},save_current_layout:function(e,t){if(t){var n={setting:e,value:t.save()};l.default.ajax({type:"POST",url:(0,i.default)("settings.store_bulk"),data:n})}},restore_layout:function(e,t,n){if(""!=t)try{e.restore(t)}catch(t){e.clear(),n&&n(e)}else n&&n(e);var r=c.default.pgAdmin.Browser,o=setInterval((function(){r.get_preferences_for_module("browser")&&(clearInterval(o),r.reflectLocklayoutChange(e),r.onPreferencesChange("browser",(function(){r.reflectLocklayoutChange(e)})))}),5e3)},reflectLocklayoutChange:function(e){var t=c.default.pgAdmin.Browser,n=t.get_preferences_for_module("browser");t.lock_layout(e,n.lock_layout)},lock_layout:function(e,t){var n=this.menus.file.mnu_locklayout.menu_items;switch(t){case this.lock_layout_levels.PREVENT_DOCKING:e.lockLayout(b.LOCK_LAYOUT_LEVEL.PREVENT_DOCKING);break;case this.lock_layout_levels.FULL:e.lockLayout(b.LOCK_LAYOUT_LEVEL.FULL);break;case this.lock_layout_levels.NONE:e.lockLayout(b.LOCK_LAYOUT_LEVEL.NONE)}r.each(n,(function(e){e.name!="mnu_lock_"+t?e.change_checked(!1):e.change_checked(!0)}))},save_lock_layout:function(e){var t=c.default.pgAdmin.Browser;l.default.ajax({url:(0,i.default)("browser.lock_layout"),method:"PUT",contentType:"application/json",data:JSON.stringify({value:e})}).done((function(){t.cache_preferences("browser")})).fail((function(e,t){s.pgNotifier(t,e,(0,u.default)("Failed to save the lock layout setting."))}))},mnu_lock_docking:function(){this.lock_layout(this.docker,this.lock_layout_levels.PREVENT_DOCKING),this.save_lock_layout(this.lock_layout_levels.PREVENT_DOCKING)},mnu_lock_full:function(){this.lock_layout(this.docker,this.lock_layout_levels.FULL),this.save_lock_layout(this.lock_layout_levels.FULL)},mnu_lock_none:function(){this.lock_layout(this.docker,this.lock_layout_levels.NONE),this.save_lock_layout(this.lock_layout_levels.NONE)}})},77077:(e,t,n)=>{n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.generateNodeUrl=d,t.getNodeAjaxOptions=f,t.getNodeListById=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!0},i=function(t){var n=[];return r.default.each(t,(function(t){if(a(t)){var o=r.default.isFunction(e.node_label)?e.node_label.apply(e,[t]):t.label,i=r.default.isFunction(e.node_image)?e.node_image.apply(e,[t]):e.node_image||"icon-"+e.type;n.push({value:t._id,image:i,label:o})}})),n};return f("nodes",e,t,n,o,i)},t.getNodeListByName=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!0},l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e){return e},s=i.default.Browser.Nodes[e],c=o.includeItemKeys,d=function(e){var t=[];return r.default.each(e,(function(e){if(a(e)){var n=r.default.isFunction(s.node_label)?s.node_label.apply(s,[e]):e.label,o=r.default.isFunction(s.node_image)?s.node_image.apply(s,[e]):s.node_image||"icon-"+s.type;t.push(u({value:e.label,image:o,label:n},r.default.pick(e,c)))}})),l(t)};return f("nodes",s,t,n,o,d)},n(88674),n(41539),n(69070);var r=l(n(96486)),o=l(n(2832)),a=n(61329),i=l(n(55112));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,o,l){var s={create:"obj",drop:"obj",edit:"obj",properties:"obj",statistics:"stats"},u=-1/0,c=this,d=o&&n._type==c.type?encodeURIComponent(n._id):"";if(t=t in s?s[t]:t,c.parent_type)if(r.default.isString(c.parent_type)){var f=e[c.parent_type];f&&(u=f.priority)}else r.default.each(c.parent_type,(function(t){var n=e[t];n&&u<n.priority&&(u=n.priority)}));var p=u;l&&e[l]&&(p=e[l].priority);return(0,a.generate_url)(i.default.Browser.URL,e,t,c.type,(function(e){return e.priority<=p||e.priority==u}),d)}function f(e,t,n,a){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e){return e},c=u({urlWithId:!1,jumpAfterNode:null,useCache:!0,customGenerateUrl:null},l);return new Promise((function(l,u){var f=(0,o.default)(),p="";if(e&&(p=c.customGenerateUrl?c.customGenerateUrl.call(t,n,e,a,c.urlWithId,c.jumpAfterNode):d.call(t,n,e,a,c.urlWithId,c.jumpAfterNode)),e){var b=i.default.Browser.Nodes[c.cacheNode]||t,m=c.cacheLevel||b.cache_level(n,c.urlWithId),y=b.cache(t.type+"#"+e,n,m);r.default.isUndefined(y)||r.default.isNull(y)?f.get(p,{params:c.urlParams}).then((function(r){y=r.data,r.data.data&&(y=r.data.data),c.useCache&&b.cache(t.type+"#"+e,n,m,y),l(s(y))})).catch((function(e){u(e)})):l(s(y.data||[]))}}))}},49929:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeView=function(e,t,n,f,b,m,y,h,g){var v=a.default.Browser.Nodes[e],_=t&&"server"in t&&a.default.Browser.serverInfo&&a.default.Browser.serverInfo[t.server._id],w=t&&"catalog"in t,O=u.generateNodeUrl.call(v,t,n,f,!1,v.url_jump_after_node),S=(0,i.default)(),j=function(e){return O+(e?"":f._id)},P=!1,x=!0,C=a.default.Browser.get_preferences_for_module("browser").confirm_on_properties_close;y.closeable()&&y.on(window.wcDocker.EVENT.CLOSING,function(e){var t=a.default.Browser.get_preferences_for_module("browser").confirm_on_properties_close;return x&&t?!P||(c.default.confirm((0,d.default)("Warning"),(0,d.default)("Changes will be lost. Are you sure you want to close the dialog?"),(function(){return e(),!0}),(function(){return!0})).set("labels",{ok:(0,d.default)("Yes"),cancel:(0,d.default)("No")}).show(),!1):(e(),!0)}.bind(y,(function(){y.off(window.wcDocker.EVENT.CLOSING),p(m),y.close()})));var E={mode:n,serverInfo:_?{type:_.server_type,version:_.version}:void 0,inCatalog:w},k=v.getSchema.call(v,t,f);"catalog"in t&&"tab"!==b&&(k.filterGroups=[(0,d.default)("Security")]);o.default.render(r.default.createElement(s.default,{formType:b,getInitData:function(){return new Promise((function(e,t){S.get(j(!1)).then((function(t){e(t.data)})).catch((function(e){e.response?console.error("error resp",e.response):e.request?console.error("error req",e.request):e.message&&console.error("error msg",e.message),t(e)}))}))},schema:k,viewHelperProps:E,onSave:function(e,t){return new Promise((function(n,r){return S({url:j(e),method:e?"POST":"PUT",data:t}).then((function(e){x=!1,n(e.data),g&&g(e.data)})).catch((function(e){r(e)}))}))},onClose:function(){return y.close()},onHelp:function(){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var n=t.server,r=a.default.Browser.utils.pg_help_path,o="";o="ppas"==n.server_type&&v.epasHelp?(0,l.getEPASHelpUrl)(n.version):""==v.sqlCreateHelp&&""!=v.sqlAlterHelp?(0,l.getHelpUrl)(r,v.sqlAlterHelp,n.version):""!=v.sqlCreateHelp&&""==v.sqlAlterHelp||e?(0,l.getHelpUrl)(r,v.sqlCreateHelp,n.version):(0,l.getHelpUrl)(r,v.sqlAlterHelp,n.version),window.open(o,"postgres_help")}else window.open(v.dialogHelp,"pgadmin_help")},onEdit:h,onDataChange:function(e){P=e},confirmOnCloseReset:C,hasSQL:v.hasSQL&&("create"===n||"edit"===n),getSQLValue:function(e,n){var r=u.generateNodeUrl.call(v,t,"msql",f,!e,v.url_jump_after_node);return new Promise((function(e,t){S({url:r,method:"GET",params:n}).then((function(t){e(t.data.data)})).catch((function(e){e.response?console.error("error resp",e.response):e.request?console.error("error req",e.request):e.message&&console.error("error msg",e.message),t(e)}))}))},disableSqlHelp:""==v.sqlAlterHelp&&""==v.sqlCreateHelp&&!v.epasHelp,disableDialogHelp:null==v.dialogHelp||""==v.dialogHelp}),m)},t.removeNodeView=p,n(88674),n(41539),n(24812);var r=f(n(67294)),o=f(n(73935)),a=f(n(55112)),i=f(n(2832)),l=n(68363),s=f(n(52237)),u=n(77077),c=f(n(55455)),d=f(n(91669));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){o.default.unmountComponentAtNode(e)}n(35816)},3650:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0,n(83710),n(68309),n(47941),n(32564);var a=p(n(55112)),i=p(n(28008)),l=p(n(19755)),s=f(n(55455)),u=f(n(81240)),c=p(n(1950));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(e){return e&&e.__esModule?e:{default:e}}var b=a.default.Browser=a.default.Browser||{};t.pgBrowser=b,r.extend(b,{preferences_cache:[],prefcache_version:0,generate_preference_version:function(){return(new Date).getTime()},preference_version:function(e){if(!e)return this.prefcache_version;this.prefcache_version=e},get_preference:function(e,t){return r.findWhere(this.preferences_cache,{module:e,name:t})},get_preferences_for_module:function(e){var t={};if(r.each(r.where(this.preferences_cache,{module:e}),(function(e){t[e.name]=e.value})),Object.keys(t).length>0)return t},get_preference_for_id:function(e){return r.findWhere(this.preferences_cache,{id:e})},cache_preferences:function(e){var t=this,n={};n[a.default.csrf_token_header]=a.default.csrf_token,setTimeout((function(){l.default.ajax({url:(0,i.default)("preferences.get_all"),headers:n}).done((function(n){t.preferences_cache=n,t.preference_version(t.generate_preference_version()),b.keyboardNavigation.init(),b.browserTreeState.init(),e&&("string"==typeof e?l.default.event.trigger("prefchange:"+e):r.each(e,(function(e,t){l.default.event.trigger("prefchange:"+t)})))})).fail((function(e,t,n){s.pgRespErrorNotify(e,n)}))}),500)},reflectPreferences:function(e){var t=this;if("sqleditor"===e||null==e){var n=t.get_preferences_for_module("sqleditor");(0,l.default)(t.editor.getWrapperElement()).css("font-size",u.calcFontSize(n.sql_font_size)),t.editor.setOption("tabSize",n.tab_size),t.editor.setOption("lineWrapping",n.wrap_code),t.editor.setOption("autoCloseBrackets",n.insert_pair_brackets),t.editor.setOption("matchBrackets",n.brace_matching),t.editor.refresh()}},onPreferencesChange:function(e,t){(0,l.default)(c.default).on("prefchange:"+e,(function(e){t(e)}))}})},76916:(e,t,n)=>{n(32564);var r=i(n(67294)),o=i(n(73935)),a=n(19792);function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e,t){console.warn("URL = "+e),console.warn(t)};setTimeout((function(){document.getElementById("quick-search-component")&&o.default.render(r.default.createElement(a.Search,{onResult:l}),document.getElementById("quick-search-component"))}),500)},51488:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(4129),n(41539),n(78783),n(66992),n(33948),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.Iframe=void 0,n(68304),n(30489);var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(67294)),i=(o=n(45697))&&o.__esModule?o:{default:o};function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,r,o=d(l);function l(){return s(this,l),o.apply(this,arguments)}return t=l,r=[{key:"propTypes",get:function(){return{id:i.default.string.isRequired,srcURL:i.default.string.isRequired,onLoad:i.default.func.isRequired}}}],(n=[{key:"render",value:function(){var e=this.props,t=e.id,n=e.srcURL,r=e.onLoad;return a.default.createElement("iframe",{id:t,src:n,onLoad:r,width:"20",height:"20",style:{border:"0",display:"block",position:"absolute",opacity:"0"}})}}])&&u(t.prototype,n),r&&u(t,r),l}(a.Component);t.Iframe=b},3150:(e,t,n)=>{n(69070),n(47941),n(82526),n(57327),n(38880),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.menuSearch=function(e,t){var n;e=e.trim();var r=t.setState,a=[];window.pgAdmin.Browser.utils.app_name&&(n=(0,o.default)("About "+window.pgAdmin.Browser.utils.app_name));var l=function(t,o){Array.from(t.children).forEach((function(t){var l,c;"UL"==t.tagName?(l=s(t),c="".concat(o,"/").concat(l),u(t,c)):"LI"==t.tagName&&(t.classList.contains("dropdown-submenu")?(l=s(t),c="".concat(o,"/").concat(l),u(t,c)):function(t,o){var l=s(t);if(l&&-1!=l.toLowerCase().indexOf(e.toLowerCase())){var u={};u[l]=o,u.element=t.children[0],a.push(u)}l===n&&r((function(e){return i(i({},e),{},{fetched:!0,data:a})}))}(t,o))}))},u=function(e,t){Array.from(e.children).forEach((function(e){"UL"==e.tagName&&l(e,t)}))},c=document.querySelector(".navbar-nav");Array.from(c.children).forEach((function(e){u(e,s(e))}))},n(73210),n(15306),n(74916),n(82772),n(91038),n(78783),n(89554),n(54747),n(92222);var r,o=(r=n(91669))&&r.__esModule?r:{default:r};function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t,n=e.getElementsByTagName("a");return n.length>0&&(t=(t=n[0].text.trim()).replace(/\.+$/g,"")),t}},67976:(e,t,n)=>{n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.onlineHelpSearch=function(e,t){e=e.split(" ").join("+");var n=t.setState,l=(0,i.default)("help.static",{filename:"search.html"}),s="".concat(l,"?q=").concat(e),c=!1;document.getElementById("hidden-quick-search-iframe")&&document.getElementById("hidden-quick-search-iframe").contentDocument.location.reload(!0);o.default.render(r.default.createElement(a.Iframe,{id:"hidden-quick-search-iframe",srcURL:s,onLoad:function(){if(c)return!1;c=!0;var e=document.getElementById("hidden-quick-search-iframe"),t=(e.contentWindow||e.contentDocument).document;window.pooling=setInterval((function(){var e=t.getElementById("search-results"),r=e.getElementsByTagName("h2"),a=e&&e.getElementsByTagName("LI"),l=window.pooling;if(a&&a.length>0){var d=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n].getElementsByTagName("A");if(0==r.length)break;var o=r[0].text,a=(0,i.default)("help.static",{filename:r[0].getAttribute("href")});t[o]=a}return t}(a);"Searching"!=r[0].childNodes[0].textContent?(window.clearInterval(l),n((function(e){return u(u({},e),{},{fetched:!0,clearedPooling:!0,url:s,data:d})})),c=!1,o.default.unmountComponentAtNode(document.getElementById("quick-search-iframe-container"))):n((function(e){return u(u({},e),{},{fetched:!0,clearedPooling:!1,url:s,data:d})}))}else"Search Results"==r[0].childNodes[0].textContent&&(n((function(e){return u(u({},e),{},{fetched:!0,clearedPooling:!0,url:s,data:{}})})),o.default.unmountComponentAtNode(document.getElementById("quick-search-iframe-container")),c=!1,window.clearInterval(l))}),500)}}),document.getElementById("quick-search-iframe-container"))},n(69600),n(23123),n(74916),n(92222),n(32564);var r=l(n(67294)),o=l(n(73935)),a=n(51488),i=l(n(28008));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},19792:(e,t,n)=>{n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(47042),n(68309),n(91038),n(69070),n(57327),n(38880),n(49337),n(33321),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.Search=function(){var e=(0,r.useRef)(null),t=m((0,r.useState)(""),2),n=t[0],u=t[1],c=m((0,r.useState)(!1),2),f=c[0],b=c[1],y=m((0,r.useState)(!1),2),h=y[0],g=y[1],v=m((0,r.useState)(!1),2),_=v[0],w=v[1],O=m((0,r.useState)({fetched:!1,data:[]}),2),S=O[0],j=O[1],P=m((0,r.useState)({fetched:!1,clearedPooling:!0,url:"",data:[]}),2),x=P[0],C=P[1],E=m((0,r.useState)(!1),2),k=E[0],D=E[1],T=function(){j((function(e){return p(p({},e),{},{fetched:!1,data:[]})})),C((function(e){return p(p({},e),{},{fetched:!1,clearedPooling:!0,url:"",data:{}})}))};(0,r.useEffect)((function(){1==S.fetched&&g(!1),1==x.fetched&&w(!1)}),[S,x]);(0,o.useDelayDebounce)((function(e){g(!0),w(!0),(0,a.onlineHelpSearch)(e,{state:x,setState:C}),(0,i.menuSearch)(e,{state:S,setState:j})}),n,1e3);var N=function(){var e=window.pooling;e&&window.clearInterval(e),document.getElementsByClassName("live-search-field")[0].value="",setTimeout((function(){document.getElementById("live-search-field").focus()}),100),T(),D(!k),g(!1),w(!1),b(!1)},R=function(e){if(e){for(var t=e.split("/"),n=[],o=0;o<t.length;o++)o==t.length-1?n.push(t[o]):n.push(r.default.createElement("span",{key:"menu-span-sub"+o}," ",t[o]," ",r.default.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"})," "));return n}};return function(e){(0,r.useEffect)((function(){function t(t){if(!e.current||e.current.contains(t.target));else{var n=document.getElementById("live-search-field");if(null==n)return;var r=n.value;r&&r.length>0&&N()}}return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}),[e])}(e),r.default.createElement("ul",{id:"quick-search-container",ref:e,className:"test",role:"menu"},r.default.createElement("li",null,r.default.createElement("ul",{id:"myDropdown"},r.default.createElement("li",{className:"dropdown-item-input"},r.default.createElement("input",{tabIndex:"0",autoFocus:!0,type:"text",autoComplete:"off",className:"form-control live-search-field","aria-label":"live-search-field",id:"live-search-field",placeholder:(0,s.default)("Quick Search"),onChange:function(e){!function(e){var t=window.pooling;t&&window.clearInterval(t);T(),u(""),e.length>=3?(u(e),g(!0),w(!0),b(!1)):(g(!1),w(!1));e.length<3&&e.length>0&&b(!0);0==e.length&&b(!1)}(e.target.value)}})),r.default.createElement("div",{style:{marginBottom:0}},r.default.createElement("div",null,f?r.default.createElement("div",{className:"pad-12 no-results"},r.default.createElement("span",{className:"fa fa-info-circle"})," Please enter minimum 3 characters to search"):"",r.default.createElement("div",null,1==S.fetched&&0==h?r.default.createElement("div",null,r.default.createElement("div",{className:"menu-groups"},r.default.createElement("span",{className:"fa fa-window-maximize"}),"  ",(0,s.default)("MENU ITEMS")," (",S.data.length,")"),function(e){if(e.length>0){var t=function(){for(var t=[],n=function(n){Object.keys(e[n]).forEach((function(o){"element"!=o&&"No object selected"!=o&&t.push(r.default.createElement("li",{key:"li-menu-"+n},r.default.createElement("a",{tabIndex:"0",id:"li-menu-"+n,href:"#",className:1==e[n].element.classList.contains("disabled")?"dropdown-item menu-groups-a disabled":"dropdown-item menu-groups-a",key:"menu-"+n,onClick:function(){e[n].element.click(),N()}},o,r.default.createElement("span",{key:"menu-span-"+n},R(e[n][o]))),1==e[n].element.classList.contains("disabled")&&null!=e[n].element.getAttribute("data-disabled")?r.default.createElement("i",{className:"fa fa-info-circle quick-search-tooltip","data-toggle":"tooltip",title:e[n].element.getAttribute("data-disabled"),"aria-label":"Test data tooltip","aria-hidden":"true"}):""))}))},o=0;o<e.length;o++)n(o);return(0,l.default)('[data-toggle="tooltip"]').tooltip(),{v:t}}();if("object"===d(t))return t.v}}(S.data)):h?r.default.createElement("div",{className:"pad-12"},r.default.createElement("div",{className:"search-icon"},(0,s.default)("Searching..."))):"",0==S.data.length&&1==S.fetched&&0==h?r.default.createElement("div",{className:"pad-12 no-results"},r.default.createElement("span",{className:"fa fa-info-circle"})," ",(0,s.default)("No search results")):"",1==x.fetched&&0==_?r.default.createElement("div",null,r.default.createElement("div",{className:"help-groups"},r.default.createElement("span",{className:"fa fa-question-circle"}),"  ",(0,s.default)("HELP ARTICLES")," ",Object.keys(x.data).length>10?r.default.createElement("span",null,"(10 of ",Object.keys(x.data).length," )"):"("+Object.keys(x.data).length+")"," ",x.clearedPooling?"":r.default.createElement("img",{src:"/static/img/loading.gif",alt:(0,s.default)("Loading..."),className:"help_loading_icon"}),Object.keys(x.data).length>10?r.default.createElement("a",{href:x.url,className:"pull-right no-padding",target:"_blank",rel:"noreferrer"},(0,s.default)("Show all"),"  ",r.default.createElement("span",{className:"fas fa-external-link-alt"})):""),Object.keys(x.data).map((function(e,t){if(t<=9)return r.default.createElement("li",{key:"li-help-"+t},r.default.createElement("a",{tabIndex:"0",href:x.data[e],key:"help-"+t,className:"dropdown-item",target:"_blank",rel:"noreferrer"},e))})),0==Object.keys(x.data).length?r.default.createElement("div",{className:"pad-12 no-results"},r.default.createElement("span",{className:"fa fa-info-circle"})," ",(0,s.default)("No search results")):""):_&&0==h?r.default.createElement("div",null,r.default.createElement("div",{className:"help-groups"},r.default.createElement("span",{className:"fa fa-question-circle"})," HELP ARTICLES",Object.keys(x.data).length>10?"(10 of "+Object.keys(x.data).length+")":"("+Object.keys(x.data).length+")",Object.keys(x.data).length>10?r.default.createElement("a",{href:x.url,className:"pull-right no-padding",target:"_blank",rel:"noreferrer"},"Show all  ",r.default.createElement("span",{className:"fas fa-external-link-alt"})):""),r.default.createElement("div",{className:"pad-12"},r.default.createElement("div",{className:"search-icon"},(0,s.default)("Searching...")))):""))))),r.default.createElement("div",{id:"quick-search-iframe-container"}))},n(32564),n(89554),n(54747),n(47941),n(23123),n(74916),n(21249),n(79753);var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(67294)),o=n(50464),a=n(67976),i=n(3150),l=u(n(19755)),s=u(n(91669));function u(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},37944:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0;var a=d(n(55112)),i=d(n(28008)),l=d(n(19755)),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(55455)),u=d(n(91669));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}var f=a.default.Browser=a.default.Browser||{};t.pgBrowser=f,r.extend(f,{send_signal_to_runtime:function(e){l.default.ajax({url:(0,i.default)("browser.signal_runtime"),method:"POST",contentType:"application/json",data:JSON.stringify({command:e})}).fail((function(e,t){s.pgNotifier(t,e,(0,u.default)("Failed to send signal to runtime."))}))},mnu_configure_runtime:function(){this.send_signal_to_runtime("Runtime Open Configuration")},mnu_viewlog_runtime:function(){this.send_signal_to_runtime("Runtime Open View Log")},mnu_toggle_fullscreen_runtime:function(){this.send_signal_to_runtime("Runtime Toggle Full Screen")},mnu_actual_size_runtime:function(){this.send_signal_to_runtime("Runtime Actual Size")},mnu_zoomin_runtime:function(){this.send_signal_to_runtime("Runtime Zoom In")},mnu_zoomout_runtime:function(){this.send_signal_to_runtime("Runtime Zoom Out")}})},85530:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.initializeToolbar=function(e,t){s=e,o.default.each(u,(function(e){d(e)})),o.default.each(c,(function(e){d(e)})),e.on(t.EVENT.BUTTON,(function(e){if("name"in e&&e.name===(0,r.default)("Query Tool"))a.default.DataGrid.show_query_tool("",a.default.Browser.tree.selected());else if("name"in e&&e.name===(0,r.default)("View Data"))a.default.DataGrid.show_data_grid({mnuid:3},a.default.Browser.tree.selected());else if("name"in e&&e.name===(0,r.default)("Filtered Rows"))a.default.DataGrid.show_filtered_row({mnuid:4},a.default.Browser.tree.selected());else if("name"in e&&e.name===(0,r.default)("Search objects"))a.default.SearchObjects.show_search_objects("",a.default.Browser.tree.selected());else if("name"in e&&e.name===(0,r.default)("PSQL Tool")){var t=a.default.Browser.tree,n={}.item||t.selected(),o=n?t.itemData(n):void 0;a.default.Browser.psql.psql_tool(o,n,!0)}}))},t.enable=function(e,t){e in l?s.buttonEnable(e,t):console.warn("Developer warning: No tool button found with label: "+e)},n(34553),n(68309);var r=i(n(91669)),o=i(n(81311)),a=i(n(55112));function i(e){return e&&e.__esModule?e:{default:e}}var l={},s=null,u=[{label:(0,r.default)("Search objects"),ariaLabel:(0,r.default)("Search objects"),btnClass:"fa fa-search",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,r.default)("Filtered Rows"),ariaLabel:(0,r.default)("Filtered Rows"),btnClass:"pg-font-icon icon-row_filter",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,r.default)("View Data"),ariaLabel:(0,r.default)("View Data"),btnClass:"pg-font-icon sql-icon-lg icon-view_data",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,r.default)("Query Tool"),ariaLabel:(0,r.default)("Query Tool"),btnClass:"pg-font-icon icon-query_tool",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1}];a.default.enable_psql&&u.unshift({label:(0,r.default)("PSQL Tool"),ariaLabel:(0,r.default)("PSQL Tool"),btnClass:"fas fa-terminal",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon pg-toolbar-psql",enabled:!1});var c=[];function d(e){(!(e.label in l)||o.default.findIndex(s._buttonList,{name:e.label})<0)&&(s.addButton(e.label,e.btnClass,e.text,e.label,e.toggled,e.toggleClass,e.parentClass,e.enabled,e.ariaLabel),l[e.label]=e)}},61431:(e,t,n)=>{var r,o;n(5735),n(83753),n(69826),n(32564),n(82772),r=[n(81311),n(19755),n(72316),n(55112),n(33883),n(91669),n(44092)],void 0===(o=function(e,t,n,r,o,a,i){return o.WizardPage=n.Model.extend({defaults:{id:void 0,page_title:void 0,view:void 0,html:void 0,image:void 0,disable_prev:!1,disable_next:!1,disable_cancel:!1,show_progress_bar:"",onLoad:function(){return!0},beforeNext:function(){return!0},onNext:function(){},onBefore:function(){},beforePrev:function(){return!0}}}),o.Wizard=n.View.extend({options:{title:"Wizard",image:"left_panel.png",curr_page:0,disable_next:!1,disable_prev:!1,disable_finish:!1,disable_cancel:!1,show_header_cancel_btn:!1,show_header_maximize_btn:!1,dialog_api:null,height:400,width:650,show_left_panel:!0,wizard_help:""},tmpl:e.template('    <div class="pgadmin-wizard" style="height: <%= this.options.height %>px;    width: <%= this.options.width %>px">      <div class="wizard-header wizard-badge">        <div class="d-flex">          <div>              <h3><span id="main-title"><%= this.options.title %></span> -              <span id="step-title"><%= page_title %></span></h3>          </div>          <% if (this.options.show_header_cancel_btn) { %>            <div class="ml-auto">              <button aria-label="'+a("Close")+'" tabindex="0" class="ajs-close wizard-cancel-event pull-right"                title="'+a("Close")+'"></button>              <% if (this.options.show_header_maximize_btn) { %>                <button aria-label="'+a("Maximize")+'" tabindex="0"  class="ajs-maximize wizard-maximize-event mr-1 pull-right"                  title="'+a("Maximize")+'"></button>              <% } %>            </div>          <% } %>        </div>      </div>      <div class="wizard-content row m-0">        <% if (this.options.show_left_panel) { %>          <div class="col-sm-3 wizard-left-panel">              <img src="<%= this.options.image %>"                alt="'+a("Left panel logo")+'"></div>        <% } %>        <div class="col-sm-<% if (this.options.show_left_panel) { %>9<% }          else { %>12<% } %> wizard-right-panel">          <% if ( typeof show_description !=  "undefined" && show_description != ""){ %>            <div class="wizard-description">              <%= show_description %>            </div>          <% } %>          <div class="wizard-progress-bar"><% if (show_progress_bar) { %>            <p role="status" class="alert alert-info col-sm-12"><%= show_progress_bar %></p><% } %>          </div>          <div class="wizard-right-panel_content">          </div>        </div>      </div>      <div class="wizard-footer pg-prop-footer">        <div class="pg-prop-status-bar" style="visibility:hidden">          <div class="error-in-footer">             <div class="d-flex px-2 py-1">               <div class="pr-2">                 <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true" role="img"></i>               </div>               <div role="alert" class="alert-text"></div>               <div class="ml-auto close-error-bar">                 <a aria-label="'+a("Close error bar")+'" class="close-error fa fa-times text-danger"></a>               </div>             </div>           </div>         </div>        <div class="wizard-buttons d-flex">          <div>            <button tabindex="0" aria-label="'+a("Help")+'" title = "'+a("Help for this dialog.")+'"              class="btn btn-primary-icon pull-left wizard-help" <%=this.options.wizard_help ? "" : "disabled" %>>              <span class="fa fa-lg fa-question" role="img"></span></button>          </div>          <div class="ml-auto">              <button class="btn btn-secondary wizard-cancel" <%=this.options.disable_cancel ? "disabled" : ""%>>                <i class="fa fa-times" role="img"></i>&nbsp;'+a("Cancel")+'</button>              <button class="btn btn-secondary wizard-back" <%=this.options.disable_prev ? "disabled" : ""%>>                <i class="fa fa-backward" role="img"></i>&nbsp;'+a("Back")+'</button>              <button class="btn btn-secondary wizard-next" <%=this.options.disable_next ? "disabled" : ""%>>                '+a("Next")+'                &nbsp;<i class="fa fa-forward"></i></button>              <button class="btn btn-primary wizard-finish" <%=this.options.disable_finish ? "disabled" : ""%>>                <i class="fa fa-check" role="img"></i>&nbsp;'+a("Finish")+"</button>          </div>        </div>      </div>    </div>"),events:{"click button.wizard-next":"nextPage","click button.wizard-back":"prevPage","click button.wizard-cancel":"onCancel","click button.wizard-cancel-event":"onCancel","click button.wizard-maximize-event":"onMaximize","click button.wizard-finish":"finishWizard","click button.wizard-help":"onDialogHelp","click a.close-error":"closeErrorMsg",keydown:"keydownHandler"},initialize:function(t){this.options=e.extend({},this.options,t.options),this.currPage=this.collection.at(this.options.curr_page).toJSON()},render:function(){var e=this,n=this.currPage;return this.options.disable_next=!!this.options.disable_next||this.evalASFunc(this.currPage.disable_next),this.options.disable_prev=!!this.options.disable_prev||this.evalASFunc(this.currPage.disable_prev),this.options.disable_cancel=!!this.currPage.canCancel||this.evalASFunc(this.currPage.disable_cancel),n.html?n.content=n.html:n.view&&(n.content=n.view.render().el),t(this.el).html(this.tmpl(n)),t(this.el).find(".wizard-right-panel_content").html(n.content),this.onLoad(),setTimeout((function(){var n=t(e.el);i.findAndSetFocus(n)}),500),this},nextPage:function(){if(!this.beforeNext())return!1;var e=this.onNext();return e?(this.currPage=this.collection.get(e).toJSON(),this.options.curr_page=this.collection.indexOf(this.collection.get(e))):this.options.curr_page<this.collection.length-1&&(this.options.curr_page=this.options.curr_page+1,this.currPage=this.collection.at(this.options.curr_page).toJSON()),this.enableDisableNext(),this.enableDisablePrev(),this.render()},prevPage:function(){if(!this.beforePrev())return!1;var e=this.onPrev();return e?(this.currPage=this.collection.get(e).toJSON(),this.options.curr_page=this.collection.indexOf(this.collection.get(e))):this.options.curr_page>0&&(this.options.curr_page=this.options.curr_page-1,this.currPage=this.collection.at(this.options.curr_page).toJSON()),this.enableDisableNext(),this.enableDisablePrev(),this.render()},finishWizard:function(){return this.onFinish(),this.remove(),this.off(),delete this.$el,delete this.el,!0},keydownHandler:function(e){i.handleKeyNavigation(e)},enableDisableNext:function(e){void 0!==e?this.options.disable_next=e:this.options.curr_page>=this.collection.length-1?this.options.disable_next=!0:this.options.disable_next=!1},enableDisablePrev:function(e){void 0!==e?this.options.disable_prev=e:this.options.curr_page<=0?this.options.disable_prev=!0:this.options.disable_prev=!1},closeErrorMsg:function(){t(this.el).find(".pg-prop-status-bar .alert-text").empty(),t(this.el).find(".pg-prop-status-bar").css("visibility","hidden")},beforeNext:function(){return this.evalASFunc(this.currPage.beforeNext)},beforePrev:function(){return this.evalASFunc(this.currPage.beforePrev)},onPrev:function(){return this.evalASFunc(this.currPage.onPrev)},onNext:function(){return this.evalASFunc(this.currPage.onNext)},onLoad:function(){return this.evalASFunc(this.currPage.onLoad)},onFinish:function(){return!0},onCancel:function(){return this.$el.remove(),!0},onMaximize:function(){var e=this.options.dialog_api,t=this.$el.find(".wizard-maximize-event");e&&(e.isMaximized()?(t.removeClass("ajs-maximized"),e.restore()):(t.addClass("ajs-maximized "+t.attr("class")),e.maximize()))},evalASFunc:function(t,n){return n=n||this.currPage,e.isFunction(t)?t.apply(n,[this]):t},onDialogHelp:function(){window.open(this.options.wizard_help,"pgadmin_help")}}),o}.apply(t,r))||(e.exports=o)},70655:(e,t,n)=>{var r,o;n(69826),r=[n(19755),n(58307),n(55112),n(91669),n(28008),n(44092),n(6537)],void 0===(o=function(e,t,n,r,o,a,i){if(!(n=n||window.pgAdmin||{}).About)return n.About={about_show:function(){t.aboutDialog||t.dialog("aboutDialog",(function(){return{main:function(e,t){this.set("title",e),this.message=t},setup:function(){return{buttons:[{text:r("OK"),key:27,className:"btn btn-primary fa fa-lg fa-check pg-alertify-button"}],options:{modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1}}},build:function(){t.pgDialogBuild.apply(this)},hooks:{onshow:function(){var t=this,n=e(this.elements.footer).find("button:not([disabled])");a.findAndSetFocus(n),e("#copy_textarea").on("click",(function(){document.getElementById("about-textarea").select(),document.execCommand("copy"),e("#copy_textarea").text("Copied")})),e(this.elements.resizeHandle).on("click",(function(){var n=t.elements.dialog.scrollHeight-300;n<0&&(n=t.elements.dialog.scrollHeight-150),e("#about-textarea").css({height:n})}))}},prepare:function(){this.setContent(this.message)}}})),e.get(o("about.index"),(function(e){!i.is_admin&&n.server_mode?t.aboutDialog(r("About %s",n.Browser.utils.app_name),e).resizeTo(n.Browser.stdW.md,300):t.aboutDialog(r("About %s",n.Browser.utils.app_name),e).resizeTo(750,470)}))}},n.About}.apply(t,r))||(e.exports=o)},7361:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.fetch_ticket=l,t.validate_kerberos_ticket=function(){if(o.default.current_auth_source!=a.default.KERBEROS)return;return setInterval((function(){s().then((function(){}),l)}),1e4)},t.fetch_ticket_lifetime=s,n(88674),n(41539),n(32564);var r=i(n(28008)),o=i(n(6537)),a=i(n(92026));function i(e){return e&&e.__esModule?e:{default:e}}function l(){return fetch((0,r.default)("kerberos.update_ticket")).then((function(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(new Error(e.statusText))}))}function s(){return fetch((0,r.default)("kerberos.validate_ticket")).then((function(e){return e.status>=200&&e.status<300?e.json():Promise.reject(new Error(e.statusText))})).then((function(e){var t=e.data.ticket_lifetime;return t>0?Promise.resolve(t):Promise.reject()}))}},11034:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(69070);var r=i(n(67294)),o=i(n(73935)),a=i(n(15412));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n,r,o){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];l(this,e),this.container=t,this.preferences=n,this.sid=r,this.did=o,this.pageVisible=a}var t,n,i;return t=e,(n=[{key:"render",value:function(){this.container&&this.preferences.show_graphs&&o.default.render(r.default.createElement(a.default,{sid:this.sid,did:this.did,preferences:this.preferences,pageVisible:this.pageVisible}),this.container)}},{key:"unmount",value:function(){this.container&&o.default.unmountComponentAtNode(this.container)}},{key:"setSidDid",value:function(e,t){this.sid=e,this.did=t,this.render()}},{key:"reflectPreferences",value:function(e){this.preferences=e,e.show_graphs?this.render():this.unmount()}},{key:"setPageVisible",value:function(e){this.pageVisible=e,this.render()}}])&&s(t.prototype,n),i&&s(t,i),e}();t.default=u},15412:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(79753),n(82526),n(41817),n(32165),n(78783),n(91038),n(68309),n(69070),n(57327),n(38880),n(49337),n(33321),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.transformData=O,t.legendCallback=S,t.getStatsUrl=j,t.statsReducer=P,t.default=C,t.GraphsWrapper=E,t.POINT_SIZE=t.X_AXIS_LENGTH=void 0,n(21249),n(47941),n(41539),n(66992),n(33948),n(69600),n(89554),n(54747),n(92222),n(47042),n(91058);var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(67294)),a=n(10416),i=n(9109),l=p(n(28008)),s=p(n(9669)),u=p(n(91669)),c=n(44092),d=n(50464),f=p(n(45697));function p(e){return e&&e.__esModule?e:{default:e}}function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.X_AXIS_LENGTH=75;function O(e,t){var n=["#00BCD4","#9CCC65","#E64A19"],r=Object.keys(e).map((function(t,r){return{label:t,data:e[t]||[],borderColor:n[r],backgroundColor:n[r],pointHitRadius:2}}))||[];return{labels:v(Array(75).keys()),datasets:r,refreshRate:t}}function S(e){var t=[];t.push('<div class="'+e.id+'-legend d-flex">');for(var n=0;n<e.data.datasets.length;n++)t.push('<div class="legend-value"><span style="background-color:'+e.data.datasets[n].backgroundColor+'">&nbsp;&nbsp;&nbsp;&nbsp;</span>'),e.data.datasets[n].label&&t.push('<span class="legend-label">'+e.data.datasets[n].label+"</span>"),t.push("</div>");return t.push("</div>"),t.join("")}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=(0,l.default)("dashboard.dashboard_stats");return r+="/"+e,r+=t>0?"/"+t:"",r+="?chart_names="+n.join(",")}function P(e,t){if(t.reset)return t.reset;if(!t.incoming)return e;t.counterData||(t.counterData=t.incoming);var n={};return Object.keys(t.incoming).forEach((function(r){e[r]?n[r]=[t.counter?t.incoming[r]-t.counterData[r]:t.incoming[r]].concat(v(e[r].slice(0,74))):n[r]=[t.counter?t.incoming[r]-t.counterData[r]:t.incoming[r]]})),n}t.POINT_SIZE=2;var x={session_stats:{Total:[],Active:[],Idle:[]},tps_stats:{Transactions:[],Commits:[],Rollbacks:[]},ti_stats:{Inserts:[],Updates:[],Delete:[]},to_stats:{Fetched:[],Returned:[]},bio_stats:{Reads:[],Hits:[]}};function C(e){var t=e.preferences,n=e.sid,r=e.did,a=e.pageVisible,i=e.enablePoll,l=void 0===i||i,f=(0,o.useRef)(null),p=(0,d.usePrevious)(t),b=g((0,o.useReducer)(P,x.session_stats),2),m=b[0],h=b[1],v=g((0,o.useReducer)(P,x.tps_stats),2),_=v[0],w=v[1],S=g((0,o.useReducer)(P,x.ti_stats),2),C=S[0],k=S[1],D=g((0,o.useReducer)(P,x.to_stats),2),T=D[0],N=D[1],R=g((0,o.useReducer)(P,x.bio_stats),2),M=R[0],A=R[1],I=g((0,o.useState)({}),2),B=I[0],L=I[1],F=g((0,o.useState)(null),2),q=F[0],U=F[1],V=g((0,o.useState)(1e3),2),H=V[0],z=V[1],W=g((0,o.useState)(!1),2),G=W[0],K=W[1];return(0,o.useEffect)((function(){var e=!1;p?(p.session_stats_refresh!=t.session_stats_refresh&&(h({reset:x.session_stats}),e=!0),p.tps_stats_refresh!=t.tps_stats_refresh&&(w({reset:x.tps_stats}),e=!0),p.ti_stats_refresh!=t.ti_stats_refresh&&(k({reset:x.ti_stats}),e=!0),p.to_stats_refresh!=t.to_stats_refresh&&(N({reset:x.to_stats}),e=!0),p.bio_stats_refresh!=t.bio_stats_refresh&&(A({reset:x.bio_stats}),e=!0)):e=!0,e&&z(1e3*(0,c.getGCD)(Object.keys(x).map((function(e){return t[e+"_refresh"]}))))}),[t]),(0,o.useEffect)((function(){a&&!G&&K(!0)}),[a]),(0,d.useInterval)((function(){var e=(0,c.getEpoch)();if(null===f.current){var o={};Object.keys(x).forEach((function(t){o[t]=e})),f.current=o}var a=[];Object.keys(x).forEach((function(n){e>=f.current[n]&&(a.push(n),f.current[n]=e+t[n+"_refresh"])}));var i=j(n,r,a);s.default.get(i).then((function(e){var t=e.data;U(null),h({incoming:t.session_stats}),w({incoming:t.tps_stats,counter:!0,counterData:B.tps_stats}),k({incoming:t.ti_stats,counter:!0,counterData:B.ti_stats}),N({incoming:t.to_stats,counter:!0,counterData:B.to_stats}),A({incoming:t.bio_stats,counter:!0,counterData:B.bio_stats}),L((function(e){return y(y({},e),t)}))})).catch((function(e){if(!q)if(h({reset:x.session_stats}),w({reset:x.tps_stats}),k({reset:x.ti_stats}),N({reset:x.to_stats}),A({reset:x.bio_stats}),L({}),e.response)428===e.response.status?U((0,u.default)("Please connect to the selected server to view the graph.")):U((0,u.default)("An error occurred whilst rendering the graph."));else{if(e.request)return void U((0,u.default)("Not connected to the server or the connection to the server has been closed."));console.error(e)}}))}),l?H:-1),o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{"data-testid":"graph-poll-delay",className:"d-none"},H),G&&o.default.createElement(E,{sessionStats:O(m,t.session_stats_refresh),tpsStats:O(_,t.tps_stats_refresh),tiStats:O(C,t.ti_stats_refresh),toStats:O(T,t.to_stats_refresh),bioStats:O(M,t.bio_stats_refresh),errorMsg:q,showTooltip:t.graph_mouse_track,showDataPoints:t.graph_data_points,isDatabase:r>0}))}function E(e){var t=(0,o.useRef)(),n=(0,o.useRef)(),r=(0,o.useRef)(),l=(0,o.useRef)(),s=(0,o.useRef)(),c=(0,o.useMemo)((function(){return{normalized:!0,legendCallback:S,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,legend:{display:!1},elements:{point:{radius:e.showDataPoints?2:0}},tooltips:{enabled:e.showTooltip,callbacks:{title:function(e,t){var n="";try{n=parseInt(e[0].xLabel)*t.refreshRate+(0,u.default)(" seconds ago")}catch(e){n=""}return n}}},scales:{yAxes:[{ticks:{min:0,userCallback:function(e){if(Math.floor(e)===e)return e},fontColor:getComputedStyle(document.documentElement).getPropertyValue("--color-fg")},gridLines:{drawBorder:!1,zeroLineColor:getComputedStyle(document.documentElement).getPropertyValue("--border-color"),color:getComputedStyle(document.documentElement).getPropertyValue("--border-color")}}],xAxes:[{display:!1,gridLines:{display:!1},ticks:{display:!1,reverse:!0}}]}}}),[e.showTooltip,e.showDataPoints]),d=(0,o.useMemo)((function(){return{duration:0}}),[]),f=(0,o.useCallback)((function(e){return function(t){e.current.innerHTML=t.generateLegend()}}));return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.DashboardRow,null,o.default.createElement(i.DashboardRowCol,{breakpoint:"md",parts:6},o.default.createElement(i.ChartContainer,{id:"sessions-graph",title:e.isDatabase?(0,u.default)("Database sessions"):(0,u.default)("Server sessions"),legendRef:t,errorMsg:e.errorMsg},o.default.createElement(a.LineChart,{options:c,data:e.sessionStats,updateOptions:d,onInit:f(t)}))),o.default.createElement(i.DashboardRowCol,{breakpoint:"md",parts:6},o.default.createElement(i.ChartContainer,{id:"tps-graph",title:(0,u.default)("Transactions per second"),legendRef:n,errorMsg:e.errorMsg},o.default.createElement(a.LineChart,{options:c,data:e.tpsStats,updateOptions:d,onInit:f(n)})))),o.default.createElement(i.DashboardRow,null,o.default.createElement(i.DashboardRowCol,{breakpoint:"md",parts:4},o.default.createElement(i.ChartContainer,{id:"ti-graph",title:(0,u.default)("Tuples in"),legendRef:r,errorMsg:e.errorMsg},o.default.createElement(a.LineChart,{options:c,data:e.tiStats,updateOptions:d,onInit:f(r)}))),o.default.createElement(i.DashboardRowCol,{breakpoint:"md",parts:4},o.default.createElement(i.ChartContainer,{id:"to-graph",title:(0,u.default)("Tuples out"),legendRef:l,errorMsg:e.errorMsg},o.default.createElement(a.LineChart,{options:c,data:e.toStats,updateOptions:d,onInit:f(l)}))),o.default.createElement(i.DashboardRowCol,{breakpoint:"md",parts:4},o.default.createElement(i.ChartContainer,{id:"bio-graph",title:(0,u.default)("Block I/O"),legendRef:s,errorMsg:e.errorMsg},o.default.createElement(a.LineChart,{options:c,data:e.bioStats,updateOptions:d,onInit:f(s)})))))}C.propTypes={preferences:f.default.object.isRequired,sid:f.default.oneOfType([f.default.string.isRequired,f.default.number.isRequired]),did:f.default.oneOfType([f.default.string.isRequired,f.default.number.isRequired]),pageVisible:f.default.bool,enablePoll:f.default.bool};var k=f.default.shape({labels:f.default.array.isRequired,datasets:f.default.array,refreshRate:f.default.number.isRequired});E.propTypes={sessionStats:k.isRequired,tpsStats:k.isRequired,tiStats:k.isRequired,toStats:k.isRequired,bioStats:k.isRequired,errorMsg:f.default.string,showTooltip:f.default.bool.isRequired,showDataPoints:f.default.bool.isRequired,isDatabase:f.default.bool.isRequired}},71151:(e,t,n)=>{var r,o;n(24812),n(69826),n(68309),n(40561),n(64765),n(74916),n(32564),n(92222),r=[n(28008),n(91669),n,n(19755),n(81311),n(55112),n(72316),n(83879),n(55455),n(12030),n(90585),n(1950),n(11034),n(33883),n(43734),n(35816)],void 0===(o=function(e,t,r,o,a,i,l,s,u,c,d,f,p){i.Browser=i.Browser||{};var b=i.Browser;if(!i.Dashboard){var m,y,h=!0,g="",v="",_=!1,w=!1,O=!1,S=!1,j=s.Extension.DeleteCell.extend({render:function(){this.$el.empty();var e=this;return"cancel"===e.column.get("cell_action")?this.$el.html("<i class='fa fa-stop' data-toggle='tooltip' title='"+t("Cancel the active query")+"' aria-label='"+t("Cancel the active query")+"'></i>"):this.$el.html("<i class='fa fa-times-circle text-danger' data-toggle='tooltip' title='"+t("Terminate the session")+"' aria-label='"+t("Terminate the session")+"'></i>"),this.$el.attr("tabindex",0),this.$el.on("keydown",(function(t){32==t.keyCode&&e.$el.click()})),this.delegateEvents(),this},deleteRow:function(e){var n,r,a,i,l,c=this,d=c.column.get("cell_action");if(e.preventDefault(),s.callByNeed(c.column.get("canDeleteRow"),c.column,c.model)){"cancel"===d?(n=t("Cancel Active Query?"),r=t("Are you sure you wish to cancel the active query?"),a=t("Active query cancelled successfully."),i=t("An error occurred whilst cancelling the active query."),l=g+c.model.get("pid")):(n=t("Terminate Session?"),r=t("Are you sure you wish to terminate the session?"),a=t("Session terminated successfully."),i=t("An error occurred whilst terminating the active query."),l=v+c.model.get("pid")),u.confirm(n,r,(function(){o.ajax({url:l,type:"DELETE"}).done((function(e){e==t("Success")?(u.success(a),o("#btn_refresh").trigger("click")):u.error(i)})).fail((function(e,t,n){u.pgRespErrorNotify(e,n)}))}),(function(){return!0}))}}}),P=s.Extension.ObjectCell.extend({enterEditMode:function(){this.model.trigger("enteringEditMode",[this]),s.Cell.prototype.enterEditMode.apply(this,arguments),this.delegateEvents();var e=s.callByNeed(this.column.editable(),this.column,this.model);e&&(this.$el.html("<i class='fa fa-caret-down subnode-edit-in-process'></i>"),this.model.trigger("pg-sub-node:opened",this.model,this))},render:function(){return this.$el.empty(),this.$el.html("<i class='fa fa-caret-right' data-toggle='tooltip' title='"+t("View the active session details")+"' aria-label='"+t("View the active session details")+"'></i>"),this.delegateEvents(),this.grabFocus&&this.$el.trigger("focus"),this}}),x=l.Model.extend({defaults:{version:null},schema:[{id:"backend_type",label:t("Backend type"),type:"text",editable:!0,readonly:!0,group:t("Details"),visible:function(){return this.version>=1e5}},{id:"query_start",label:t("Query started at"),type:"text",editable:!1,readonly:!0,group:t("Details")},{id:"state_change",label:t("Last state changed at"),type:"text",editable:!0,readonly:!0,group:t("Details")},{id:"query",label:t("SQL"),type:"text",editable:!0,readonly:!0,control:c.SqlFieldControl,group:t("Details")}]});return i.Dashboard={init:function(){if(!this.initialized){this.initialized=!0,this.chartsDomObj=null,this.sid=this.did=-1,this.version=-1;var n=this.object_selected.bind(this),r=this.object_disconnected.bind(this);b.Events.on("pgadmin-browser:tree:selected",n),b.Events.on("pgadmin:server:disconnect",r);var a=e("dashboard.index"),i=b.panels.dashboard.panel;if(i){var l=i.layout().scene().find(".pg-panel-content");if(l){o(l).html('<div class="pg-panel-message" role="alert">'+t("Loading dashboard...")+"</div>"),function e(){o.ajax({url:a,type:"GET",dataType:"html"}).done((function(e){o(l).html(e)})).fail((function(n,r){u.pgNotifier(r,n,t("An error occurred whilst loading the dashboard."),(function(n){"CRYPTKEY_SET"===n?e():o(l).html('<div class="pg-panel-message" role="alert">'+t("An error occurred whilst loading the dashboard.")+"</div>")}))}))}(),o(i).data("sid",-1),o(i).data("did",-1)}}}},object_disconnected:function(){var e=b.tree.selected(),t=e&&b.tree.itemData(e);0!=e.length&&this.object_selected(e,t)},object_selected:function(n,r){var i=this;if(r&&r._type){var l=b.tree.getTreeNodeHierarchy(n),s=d.url(r,n,l);if(null===s){s=e("dashboard.index"),i.version=l.server&&l.server.version||0,g=s+"cancel_query/",v=s+"terminate_session/";var c=l.server;y=c&&c.db||null,S=!(!c||!c.user)&&c.user.can_signal_backend,c&&c.user&&c.user.is_superuser?_=!0:(_=!1,m=c&&c.user?c.user.name:null),"database"in l?(i.sid=l.server._id,i.did=l.database._id,w=!1,O=!0,s+=i.sid+"/"+i.did,g+=i.sid+"/"+i.did+"/",v+=i.sid+"/"+i.did+"/"):"server"in l?(i.sid=l.server._id,i.did=-1,w=!0,O=!1,s+=i.sid,g+=i.sid+"/",v+=i.sid+"/"):w=O=!1}else w=O=!1;var f=b.panels.dashboard.panel;if(f){var p=f.layout().scene().find(".pg-panel-content");if(p){if(r.connected||a.isUndefined(r.connected)){if(s!==o(f).data("dashboard_url")||s===o(f).data("dashboard_url")&&0==o(f).data("server_status")){this.chartsDomObj&&this.chartsDomObj.unmount(),o(p).empty();o(p).html('<div class="pg-panel-message" role="alert">'+t("Loading dashboard...")+"</div>"),function e(){o.ajax({url:s,type:"GET",dataType:"html"}).done((function(e){o(p).html(e),i.init_dashboard()})).fail((function(n,r){u.pgNotifier(r,n,t("An error occurred whilst loading the dashboard."),(function(n){"CRYPTKEY_SET"===n?e():o(p).html('<div class="pg-panel-message" role="alert">'+t("An error occurred whilst loading the dashboard.")+"</div>")}))}))}(),o(f).data("server_status",!0)}}else this.chartsDomObj&&this.chartsDomObj.unmount(),o(p).html('<div class="pg-panel-message" role="alert">'+t("Please connect to the selected server to view the dashboard.")+"</div>"),o(f).data("server_status",!1);o(f).data("dashboard_url",s)}}}},add_new_server:function(){if(b&&b.tree){for(var e=0!=b.tree.selected().length?b.tree.selected():b.tree.first(null,!1),t=n(44588),r=b.tree.itemData(e);r&&"server_group"!=r._type;)e=b.tree.next(e),r=b.tree.itemData(e);if(!r)return;t&&t.callbacks.show_obj_properties.apply(t,[{action:"create"},e])}},render_grid:function(e,n,r){var i=l.Model.extend({}),u=this,c=n+u.sid;-1!=u.did&&(c+="/"+u.did);var d=new(l.Collection.extend({model:i,url:c,mode:"client"})),f=s.Row.extend({render:function(){s.Row.prototype.render.call(this);var e=this.model.get("row_type");return a.isUndefined(e)||a.isNull(e)?(this.$el.removeClass("alert"),this.$el.removeClass("warning")):"warning"===e?this.$el.addClass("warning"):"alert"===e&&this.$el.addClass("alert"),this}}),p=new s.Grid({emptyText:t("No data found"),columns:r,collection:d,className:"backgrid presentation table table-bordered table-noouter-border table-hover",row:f});o(e).empty(),o(e).append(p.render().el);var b=new s.Extension.ClientSideFilter({collection:d});b.setCustomSearchBox(o("#txtGridSearch")),o(e).data("data",d),o(e).data("grid",p),o(e).data("filter",b)},__loadMoreRows:function(e){var t=e.currentTarget;t.scrollHeight-10<t.scrollTop+t.offsetHeight&&this.data.length>0&&this.local_grid.collection.add(this.data.splice(0,50))},render_grid_data:function(e){var n=this,r=o(e).data("data"),l=o(e).data("grid"),s=o(e).data("filter");if(a.isUndefined(r))return null;r.fetch({reset:!0,success:function(t){n.data=t.models,n.local_grid=l,l.collection.reset(n.data.splice(0,50)),o(e).hasClass("grid-error")&&(o(e).removeClass("grid-error"),o(e).html(l.render().el),o(s.el).show()),n.data.length>50?o(".wcScrollableY").on("scroll",n.__loadMoreRows.bind(n)):o(".wcScrollableY").off("scroll",n.__loadMoreRows),s.search()},error:function(n,l){var u="",c="info";0===l.readyState?u=t("Not connected to the server or the connection to the server has been closed."):(u=JSON.parse(l.responseText).errormsg,428===l.status?(a.isUndefined(u)||a.isNull(u))&&(u=t("Please connect to the selected server to view the table.")):(u=t("An error occurred whilst rendering the table."),c="error")),o(e).hasClass("grid-error")||(o(s.el).hide(),o(e).addClass("grid-error")),o(e).html('<div class="pg-panel-'+c+' pg-panel-message" role="alert">'+u+"</div>"),setTimeout((function(){i.Dashboard.render_grid_data(e,r)}),5e3)}})},init_dashboard:function(){var e=this;this.chartsDomObj=new p.default(document.getElementById("dashboard-graphs"),e.preferences,e.sid,e.did,!(o(".dashboard-container")[0].clientHeight<=0));var t=setInterval((function(){try{f.default.pgAdmin.Browser.preference_version()>0&&(clearInterval(t),e.reflectPreferences())}catch(e){throw clearInterval(t),e}}),0);b.onPreferencesChange("dashboards",(function(){e.reflectPreferences()}))},reflectPreferences:function(){var e=this;e.preferences=f.default.pgAdmin.Browser.get_preferences_for_module("dashboards"),this.chartsDomObj.reflectPreferences(e.preferences),(w||O)&&(e.preferences.show_activity&&o("#dashboard-activity").hasClass("dashboard-hidden")?o("#dashboard-activity").removeClass("dashboard-hidden"):e.preferences.show_activity||o("#dashboard-activity").addClass("dashboard-hidden"),e.preferences.show_activity&&o("#dashboard-activity").hasClass("dashboard-hidden")?o("#dashboard-activity").removeClass("dashboard-hidden"):e.preferences.show_activity||o("#dashboard-activity").addClass("dashboard-hidden"),w?e.reflectPreferencesServer():O&&e.reflectPreferencesDatabase())},reflectPreferencesServer:function(){var n=this,r=o(".dashboard-container"),l=r.find("#server_activity").get(0),s=r.find("#server_locks").get(0),u=r.find("#server_prepared").get(0),d=r.find("#server_config").get(0),f={tab_server_activity:l,tab_server_locks:s,tab_server_prepared:u,tab_server_config:d};if(n.preferences.show_activity){var p=[{name:"pid",label:t("PID"),editable:!1,cell:"string"},{name:"datname",label:t("Database"),editable:!1,cell:"string"},{name:"usename",label:t("User"),editable:!1,cell:"string"},{name:"application_name",label:t("Application"),editable:!1,cell:"string"},{name:"client_addr",label:t("Client"),editable:!1,cell:"string"},{name:"backend_start",label:t("Backend start"),editable:!1,cell:"string"},{name:"state",label:t("State"),editable:!1,cell:"string"}];p=n.version<90600?p.concat([{name:"waiting",label:t("Waiting?"),editable:!1,cell:"string"}]):p.concat([{name:"wait_event",label:t("Wait event"),editable:!1,cell:"string"},{name:"blocking_pids",label:t("Blocking PIDs"),editable:!1,cell:"string"}]);var b=new x,m=c.generateViewSchema(null,b,"create",null,null,!0);a.each(m[0].fields,(function(e){e.version=n.version})),p.unshift({name:"pg-backform-expand",label:"",cell:P,cell_priority:-1,postgres_version:n.version,schema:m}),p.unshift({name:"pg-backform-delete",label:"",cell:j,cell_action:"cancel",editable:!1,cell_priority:-1,canDeleteRow:i.Dashboard.can_take_action,postgres_version:n.version}),p.unshift({name:"pg-backform-delete",label:"",cell:j,cell_action:"terminate",editable:!1,cell_priority:-1,canDeleteRow:i.Dashboard.can_take_action,postgres_version:n.version});var y=[{name:"pid",label:t("PID"),editable:!1,cell:"string"},{name:"datname",label:t("Database"),editable:!1,cell:"string"},{name:"locktype",label:t("Lock type"),editable:!1,cell:"string"},{name:"relation",label:t("Target relation"),editable:!1,cell:"string"},{name:"page",label:t("Page"),editable:!1,cell:"string"},{name:"tuple",label:t("Tuple"),editable:!1,cell:"string"},{name:"virtualxid",label:t("vXID (target)"),editable:!1,cell:"string"},{name:"transactionid",label:t("XID (target)"),editable:!1,cell:"string"},{name:"classid",label:t("Class"),editable:!1,cell:"string"},{name:"objid",label:t("Object ID"),editable:!1,cell:"string"},{name:"virtualtransaction",label:t("vXID (owner)"),editable:!1,cell:"string"},{name:"mode",label:t("Mode"),editable:!1,cell:"string"},{name:"granted",label:t("Granted?"),editable:!1,cell:"string"}],h=[{name:"git",label:t("Name"),editable:!1,cell:"string"},{name:"database",label:t("Database"),editable:!1,cell:"string"},{name:"Owner",label:t("Owner"),editable:!1,cell:"string"},{name:"transaction",label:t("XID"),editable:!1,cell:"string"},{name:"prepared",label:t("Prepared at"),editable:!1,cell:"string"}],g=[{name:"name",label:t("Name"),editable:!1,cell:"string"},{name:"category",label:t("Category"),editable:!1,cell:"string"},{name:"setting",label:t("Setting"),editable:!1,cell:"string"},{name:"unit",label:t("Unit"),editable:!1,cell:"string"},{name:"short_desc",label:t("Description"),editable:!1,cell:"string"}];o(l).addClass("pg-el-container"),o(l).attr("el","sm"),i.Dashboard.render_grid(l,e("dashboard.activity"),p),i.Dashboard.render_grid(s,e("dashboard.locks"),y),i.Dashboard.render_grid(u,e("dashboard.prepared"),h),i.Dashboard.render_grid(d,e("dashboard.config"),g),i.Dashboard.render_grid_data(l),o('a[data-toggle="tab"]').on("shown.bs.tab",(function(e){var t=f[o(e.relatedTarget).attr("aria-controls")];o(t).data("filtertext",o("#txtGridSearch").val());var n=f[o(e.target).attr("aria-controls")];o("#txtGridSearch").val(o(n).data("filtertext")),i.Dashboard.render_grid_data(n)})),o("#btn_refresh").off("click").on("click",(function(){var e=f[o("#dashboard-activity .nav-tabs .active").attr("aria-controls")];i.Dashboard.render_grid_data(e)}))}},reflectPreferencesDatabase:function(){var n=this,r=document.getElementById("database_activity"),l=document.getElementById("database_locks"),s=document.getElementById("database_prepared"),u={tab_database_activity:r,tab_database_locks:l,tab_database_prepared:s};if(n.preferences.show_activity){var d=[{name:"pid",label:t("PID"),editable:!1,cell:"string"},{name:"usename",label:t("User"),editable:!1,cell:"string"},{name:"application_name",label:t("Application"),editable:!1,cell:"string"},{name:"client_addr",label:t("Client"),editable:!1,cell:"string"},{name:"backend_start",label:t("Backend start"),editable:!1,cell:"string"},{name:"state",label:t("State"),editable:!1,cell:"string"}];d=n.version<90600?d.concat([{name:"waiting",label:t("Waiting?"),editable:!1,cell:"string"}]):d.concat([{name:"wait_event",label:t("Wait event"),editable:!1,cell:"string"},{name:"blocking_pids",label:t("Blocking PIDs"),editable:!1,cell:"string"}]);var f=new x,p=c.generateViewSchema(null,f,"create",null,null,!0);a.each(p[0].fields,(function(e){e.version=n.version})),d.unshift({name:"pg-backform-expand",label:"",cell:P,cell_priority:-1,postgres_version:n.version,schema:p}),d.unshift({name:"pg-backform-delete",label:"",cell:j,cell_action:"cancel",editable:!1,cell_priority:-1,canDeleteRow:i.Dashboard.can_take_action,postgres_version:n.version}),d.unshift({name:"pg-backform-delete",label:"",cell:j,cell_action:"terminate",editable:!1,cell_priority:-1,canDeleteRow:i.Dashboard.can_take_action,postgres_version:n.version});var b=[{name:"pid",label:t("PID"),editable:!1,cell:"string"},{name:"locktype",label:t("Lock type"),editable:!1,cell:"string"},{name:"relation",label:t("Target relation"),editable:!1,cell:"string"},{name:"page",label:t("Page"),editable:!1,cell:"string"},{name:"tuple",label:t("Tuple"),editable:!1,cell:"string"},{name:"virtualxid",label:t("vXID (target)"),editable:!1,cell:"string"},{name:"transactionid",label:t("XID (target)"),editable:!1,cell:"string"},{name:"classid",label:t("Class"),editable:!1,cell:"string"},{name:"objid",label:t("Object ID"),editable:!1,cell:"string"},{name:"virtualtransaction",label:t("vXID (owner)"),editable:!1,cell:"string"},{name:"mode",label:t("Mode"),editable:!1,cell:"string"},{name:"granted",label:t("Granted?"),editable:!1,cell:"string"}],m=[{name:"git",label:t("Name"),editable:!1,cell:"string"},{name:"Owner",label:t("Owner"),editable:!1,cell:"string"},{name:"transaction",label:t("XID"),editable:!1,cell:"string"},{name:"prepared",label:t("Prepared at"),editable:!1,cell:"string"}];o(r).addClass("pg-el-container"),o(r).attr("el","sm"),i.Dashboard.render_grid(r,e("dashboard.activity"),d),i.Dashboard.render_grid(l,e("dashboard.locks"),b),i.Dashboard.render_grid(s,e("dashboard.prepared"),m),i.Dashboard.render_grid_data(r),o('a[data-toggle="tab"]').on("shown.bs.tab",(function(e){var t=u[o(e.relatedTarget).attr("aria-controls")];o(t).data("filtertext",o("#txtGridSearch").val());var n=u[o(e.target).attr("aria-controls")];o("#txtGridSearch").val(o(n).data("filtertext")),i.Dashboard.render_grid_data(n)})),o("#btn_refresh").off("click").on("click",(function(){var e=u[o("#dashboard-activity .nav-tabs .active").attr("aria-controls")];i.Dashboard.render_grid_data(e)}))}},toggleVisibility:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(h=e,t)this.chartsDomObj&&this.chartsDomObj.unmount();else{var n=b.tree,r=n.selected(),o=r&&n.itemData(r);this.chartsDomObj&&this.chartsDomObj.setPageVisible(h),this.object_selected(r,o)}},can_take_action:function(e){var n,r=e.collection.where({state:"active"}),o=this.get("postgres_version")||null,a="cancel"===(this.get("cell_action")||null);return o&&o>=1e5&&!e.get("datname")?(n=t(a?"You cannot cancel background worker processes.":"You cannot terminate background worker processes."),u.info(n),!1):y==e.get("datname")&&"active"==e.get("state")&&1==r.length?(n=t(a?"You are not allowed to cancel the main active session.":"You are not allowed to terminate the main active session."),u.error(n),!1):a&&"idle"==e.get("state")?(u.info(t("The session is already in idle state.")),!1):!!S||(!!_||(!(!m||m!=e.get("usename"))||(n=t(a?"Superuser privileges are required to cancel another users query.":"Superuser privileges are required to terminate another users query."),u.error(n),!1)))}},i.Dashboard}}.apply(t,r))||(e.exports=o)},9109:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.ChartContainer=i,t.ChartError=l,t.DashboardRow=s,t.DashboardRowCol=u,n(92222);var r=a(n(67294)),o=a(n(45697));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return r.default.createElement("div",{className:"card dashboard-graph",role:"object-document",tabIndex:"0","aria-labelledby":e.id},r.default.createElement("div",{className:"card-header"},r.default.createElement("div",{className:"d-flex"},r.default.createElement("div",{id:e.id},e.title),r.default.createElement("div",{className:"ml-auto my-auto legend",ref:e.legendRef}))),r.default.createElement("div",{className:"card-body dashboard-graph-body"},r.default.createElement("div",{className:"chart-wrapper "+(e.errorMsg?"d-none":"")},e.children),r.default.createElement(l,{message:e.errorMsg})))}function l(e){return null===e.message?r.default.createElement(r.default.Fragment,null):r.default.createElement("div",{className:"pg-panel-error pg-panel-message",role:"alert"},e.message)}function s(e){var t=e.children;return r.default.createElement("div",{className:"row dashboard-row"},t)}function u(e){var t=e.breakpoint,n=e.parts,o=e.children;return r.default.createElement("div",{className:"col-".concat(t,"-").concat(n)},o)}i.propTypes={id:o.default.string.isRequired,title:o.default.string.isRequired,legendRef:o.default.oneOfType([o.default.func,o.default.shape({current:o.default.any})]).isRequired,children:o.default.node.isRequired,errorMsg:o.default.string},l.propTypes={message:o.default.string},s.propTypes={children:o.default.node.isRequired},u.propTypes={breakpoint:o.default.oneOf(["xs","sm","md","lg","xl"]).isRequired,parts:o.default.number.isRequired,children:o.default.node.isRequired}},68363:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.getHelpUrl=function(e,t,n){var r=Math.floor(n/1e4),o=Math.floor(n/100)-100*r,a="",i=r+"."+o;r>=10&&(i=r);"/"!=(a=e.replace("$VERSION$",i)).substr(-1)&&(a+="/");return a+t},t.getEPASHelpUrl=function(e){var t=Math.floor(e/1e4),n=Math.floor(e/100)-100*t,r="https://www.enterprisedb.com/docs/epas/$VERSION$/",o="";o="https://www.enterprisedb.com/docs/epas/$VERSION$/epas_compat_sql/".replace("$VERSION$",t),10==t?o=r.replace("$VERSION$",t):t<10&&(o=r.replace("$VERSION$",t+"."+n));return o},n(15306),n(74916)},24149:(e,t,n)=>{var r,o;n(32564),n(83710),n(54678),n(24603),n(74916),n(39714),n(69600),n(92222),n(41539),n(69826),n(24812),n(91058),r=[n(55112),n(91669),n(28008),n(81311),n(19755),n(33883),n(58307)],void 0===(o=function(e,t,n,r,o,a,i){if(a.BackgroundProcessObsorver=a.BackgroundProcessObsorver||{},a.BackgroundProcessObsorver.initialized)return a.BackgroundProcessObsorver;var l="True"==e.server_mode,s=window.wcDocker,u=function(e,t){var n=this;setTimeout((function(){n.initialize.apply(n,[e,t])}),1)};return r.extend(u.prototype,{success_status_tpl:r.template('\n      <div class="d-flex px-2 py-1 bg-success-light border border-success rounded">\n        <div class="pr-2">\n          <i class="fa fa-check text-success pg-bg-status-icon" aria-hidden="true" role="img"></i>\n        </div>\n        <div class="mx-auto pg-bg-status-text alert-text-body"><%-status_text%></div>\n      </div>'),failed_status_tpl:r.template('\n      <div class="d-flex px-2 py-1 bg-danger-lighter border border-danger rounded">\n        <div class="pr-2">\n          <i class="fa fa-times fa-lg text-danger pg-bg-status-icon" aria-hidden="true" role="img"></i>\n        </div>\n        <div class="mx-auto pg-bg-status-text alert-text-body"><%-status_text%></div>\n      </div>'),other_status_tpl:r.template('\n      <div class="d-flex px-2 py-1 bg-primary-light border border-primary rounded">\n        <div class="pr-2">\n          <i class="fa fa-info fa-lg text-primary pg-bg-status-icon" aria-hidden="true" role="img"></i>\n        </div>\n        <div class="mx-auto pg-bg-status-text alert-text-body"><%-status_text%></div>\n      </div>'),initialize:function(e,t){r.extend(this,{details:!1,notify:r.isUndefined(t)||t,curr_status:null,state:0,completed:!1,current_storage_dir:null,id:e.id,type_desc:null,desc:null,detailed_desc:null,stime:null,exit_code:null,acknowledge:e.acknowledge,execution_time:null,out:-1,err:-1,lot_more:!1,notifier:null,container:null,panel:null,logs:o("<ol></ol>",{class:"pg-bg-process-logs"})}),this.notify&&(a.Events&&a.Events.on("pgadmin-bgprocess:started:"+this.id,(function(e){e.notifier||e.show.apply(e)})),a.Events&&a.Events.on("pgadmin-bgprocess:finished:"+this.id,(function(e){e.notifier||e.show.apply(e)})));var n=this;setTimeout((function(){n.update.apply(n,[e])}),1)},bgprocess_url:function(e){switch(e){case"status":return this.details&&-1!=this.out&&-1!=this.err?n("bgprocess.detailed_status",{pid:this.id,out:this.out,err:this.err}):n("bgprocess.status",{pid:this.id});case"acknowledge":return n("bgprocess.acknowledge",{pid:this.id});case"stop_process":return n("bgprocess.stop_process",{pid:this.id});default:return n("bgprocess.list")}},update:function(n){var o=this,i=[],l=[];"stime"in n&&(o.stime=new Date(n.stime)),"execution_time"in n&&(o.execution_time=parseFloat(n.execution_time)),"type_desc"in n&&(o.type_desc=n.type_desc),"desc"in n&&(o.desc=n.desc),"details"in n&&(o.detailed_desc=n.details),"exit_code"in n&&(o.exit_code=n.exit_code),"process_state"in n&&(o.state=n.process_state),"current_storage_dir"in n&&(o.current_storage_dir=n.current_storage_dir),"out"in n&&(o.out=n.out&&n.out.pos,n.out&&n.out.lines&&(i=n.out.lines)),"err"in n&&(o.err=n.err&&n.err.pos,n.err&&n.err.lines&&(l=n.err.lines)),o.completed=o.completed||"err"in n&&"out"in n&&n.err.done&&n.out.done||!o.details&&!r.isNull(o.exit_code);for(var s=0,u=0,c=[],d=document.createElement("textarea"),f=function(e){return d.textContent=e,d.innerHTML};s<i.length&&u<l.length;)if(e.natural_sort(i[s][0],l[u][0])<=0)c.push('<li class="pg-bg-res-out">'+f(i[s++][1])+"</li>");else{var p=f(l[u++][1]);new RegExp(": ("+t("error")+"|"+t("fatal")+"):","i").test(p)?c.push('<li class="pg-bg-res-err">'+p+"</li>"):c.push('<li class="pg-bg-res-out">'+p+"</li>")}for(;s<i.length;)c.push('<li class="pg-bg-res-out">'+f(i[s++][1])+"</li>");for(;u<l.length;){var b=f(l[u++][1]);new RegExp(": ("+t("error")+"|"+t("fatal")+"):","i").test(b)?c.push('<li class="pg-bg-res-err">'+b+"</li>"):c.push('<li class="pg-bg-res-out">'+b+"</li>")}c.length&&(o.logs.append(c.join("")),setTimeout((function(){o.logs[0].scrollTop=o.logs[0].scrollHeight}))),o.logs_loading&&(o.logs_loading.remove(),o.logs_loading=null),o.stime&&(o.curr_status=o.other_status_tpl({status_text:t("Started")}),o.execution_time>=2&&(o.curr_status=o.other_status_tpl({status_text:t("Running...")})),r.isNull(o.exit_code)?r.isNull(o.exit_code)&&3===o.state&&(o.curr_status=o.other_status_tpl({status_text:t("Terminating the process...")})):3===o.state?o.curr_status=o.failed_status_tpl({status_text:t("Terminated by user.")}):0==o.exit_code?o.curr_status=o.success_status_tpl({status_text:t("Successfully completed.")}):o.curr_status=o.failed_status_tpl({status_text:t("Failed (exit code: %s).",String(o.exit_code))}),0==o.state&&o.stime&&(o.state=1,a.Events&&a.Events.trigger("pgadmin-bgprocess:started:"+o.id,o,o)),1!=o.state||r.isNull(o.exit_code)||(o.state=2,a.Events&&a.Events.trigger("pgadmin-bgprocess:finished:"+o.id,o,o)),setTimeout((function(){o.show.apply(o)}),10)),o.completed||setTimeout((function(){o.status.apply(o)}),1e3)},status:function(){var e=this;o.ajax({typs:"GET",timeout:3e4,url:e.bgprocess_url("status"),cache:!1,async:!0,contentType:"application/json"}).done((function(t){setTimeout((function(){e.update(t)}),10)})).fail((function(t){410!=t.status&&setTimeout((function(){e.update(t)}),1e4)}))},show:function(){var e=this;if(e.notify&&!e.details){if(!e.notifier){var n=o('\n            <div class="card">\n              <div class="card-header bg-primary d-flex">\n                <div>'.concat(e.type_desc,'</div>\n                <div class="ml-auto">\n                  <button class="btn btn-sm-sq btn-primary pg-bg-close" aria-label=\'close\'><i class="fa fa-lg fa-times" role="img"></i></button>\n                </div>\n              </div>\n              <div class="card-body px-2">\n                <div class="py-1">').concat(e.desc,'</div>\n                <div class="py-1">').concat(e.stime.toString(),'</div>\n                <div class="d-flex py-1">\n                  <div class="my-auto mr-2">\n                    <span class="fa fa-clock fa-lg" role="img"></span>\n                  </div>\n                  <div class="pg-bg-etime my-auto mr-2"></div>\n                  <div class="ml-auto">\n                    <button class="btn btn-secondary pg-bg-more-details" title="More Details"><span class="fa fa-info-circle" role="img"></span>&nbsp;')+t("More details...")+'</button>\n                    <button class="btn btn-danger bg-process-stop" disabled><span class="fa fa-times-circle" role="img" title="Stop the operation"></span>&nbsp;'+t("Stop Process")+'</button>\n                  </div>\n                </div>\n                <div class="pg-bg-status py-1">\n                </div>\n              </div>\n            </div>\n            '),r=n.find(".pg-bg-more-details"),a=n.find(".pg-bg-close");e.container=n,e.notifier=i.notify(n.get(0),"bg-bgprocess",0,null),r.on("click",function(e){(e=e||window.event).cancelBubble=!0,e.stopPropagation(),this.notifier.dismiss(),this.notifier=null,this.completed=!1,this.show_detailed_view.apply(this)}.bind(e)),a.on("click",function(){this.notifier.dismiss(),this.notifier=null,this.acknowledge_server.apply(this)}.bind(this)),e.container.on("click",(function(e){(e=e||window.event).cancelBubble=!0,e.stopPropagation()})),n.find(".bg-process-stop").off("click").on("click",e.stop_process.bind(this))}e.container.find(".pg-bg-etime").empty().append(o("<span></span>").text(String(e.execution_time))).append(o("<span></span>").text(" "+t("seconds"))),o(e.container.find(".pg-bg-status")).html(e.curr_status);var l=o(e.container.find(".bg-process-stop"));1===parseInt(e.state)?l.attr("disabled",!1):l.attr("disabled",!0)}else e.show_detailed_view.apply(e)},show_detailed_view:function(){var e=this,n=this.panel,r=!1;e.panel||(r=!0,(n=this.panel=a.BackgroundProcessObsorver.create_panel()).title(t("Process Watcher - %s",e.type_desc)),n.focus());var i=n.$container,u=i.find(".bg-process-watcher"),c=i.find(".bg-process-details"),d=i.find(".bg-process-footer"),f=i.find(".bg-process-stop"),p=i.find(".bg-process-storage-manager");if(e.current_storage_dir&&l){if(0==p.length){i.find(".bg-process-details .bg-btn-section").prepend('<button id="bg-process-storage-manager" class="btn btn-secondary bg-process-storage-manager" title="Click to open file location" aria-label="Storage Manager" tabindex="0" disabled><span class="pg-font-icon icon-storage_manager" role="img"></span></button>&nbsp;'),p=i.find(".bg-process-storage-manager")}1===parseInt(e.state)?p.attr("disabled",!0):p.attr("disabled",!1),p.off("click").on("click",e.storage_manager.bind(this))}if(1===parseInt(e.state)?f.attr("disabled",!1):f.attr("disabled",!0),f.off("click").on("click",e.stop_process.bind(this)),r&&(u.html(e.logs),setTimeout((function(){e.logs[0].scrollTop=e.logs[0].scrollHeight})),e.logs_loading=o('<li class="pg-bg-res-out loading-logs">'+t("Loading process logs...")+"</li>"),e.logs.append(e.logs_loading),c.find(".bg-detailed-desc").html(e.detailed_desc)),c.find(".bg-process-stats .bgprocess-start-time").html(e.stime),d.find(".bg-process-status").html(e.curr_status),d.find(".bg-process-exec-time p").empty().append(o("<span></span>").text(String(e.execution_time))).append(o("<span></span>").text(" "+t("seconds"))),r){e.details=!0,e.err=0,e.out=0,setTimeout((function(){e.status.apply(e)}),1e3);var b=function(e,t,n){var r=t.outerHeight()+n.outerHeight();e.css("padding-bottom",r)}.bind(n,u,c,d);n.on(s.EVENT.RESIZED,b),n.on(s.EVENT.ATTACHED,b),n.on(s.EVENT.DETACHED,b),b(),n.on(s.EVENT.CLOSED,function(e){e.panel=null,e.details=!1,null!=e.exit_code&&e.acknowledge_server.apply(e)}.bind(n,this))}},acknowledge_server:function(){o.ajax({type:"PUT",timeout:3e4,url:this.bgprocess_url("acknowledge"),cache:!1,async:!0,contentType:"application/json"}).done((function(){})).fail((function(){console.warn(arguments)}))},stop_process:function(){this.state=3,o.ajax({type:"PUT",timeout:3e4,url:this.bgprocess_url("stop_process"),cache:!1,async:!0,contentType:"application/json"}).done((function(){})).fail((function(){console.warn(arguments)}))},storage_manager:function(){this.current_storage_dir&&a.Events.trigger("pgadmin:tools:storage_manager",this.current_storage_dir)}}),r.extend(a.BackgroundProcessObsorver,{bgprocesses:{},init:function(){var e=this;e.initialized||(e.initialized=!0,setTimeout((function(){e.update_process_list.apply(e)}),1e3),a.Events.on("pgadmin-bgprocess:created",(function(){setTimeout((function(){a.BackgroundProcessObsorver.update_process_list(!0)}),1e3)})))},update_process_list:function(e){var t=this;o.ajax({typs:"GET",timeout:3e4,url:n("bgprocess.list"),cache:!1,async:!0,contentType:"application/json"}).done((function(n){if(n&&r.isArray(n)){for(var o in n){var a=n[o];"id"in a&&(a.id in t.bgprocesses||(t.bgprocesses[a.id]=new u(a)))}e&&0==n.length&&setTimeout((function(){t.update_process_list(!1)}),3e3)}})).fail((function(){console.warn(arguments)}))},create_panel:function(){return this.register_panel(),a.docker.addPanel("bg_process_watcher",s.DOCK.FLOAT,null,{w:screen.width<700?.95*screen.width:.5*screen.width,h:screen.height<500?.95*screen.height:.5*screen.height,x:screen.width<700?"2%":"25%",y:screen.height<500?"2%":"25%"})},register_panel:function(){var e=a.docker.findPanels("bg_process_watcher");e&&e.length>=1||new a.Panel({name:"bg_process_watcher",showTitle:!0,isCloseable:!0,isPrivate:!0,isLayoutMember:!1,content:'<div class="bg-process-details"><div class="bg-detailed-desc"></div><div class="bg-process-stats d-flex py-1"><div class="my-auto mr-2"><span class="fa fa-clock fa-lg" role="img"></span></div><div class="pg-bg-etime my-auto mr-2"><span>'+t("Start time")+': <span class="bgprocess-start-time"></span></span></div><div class="ml-auto bg-btn-section"><button type="button" class="btn btn-danger bg-process-stop" disabled><span class="fa fa-times-circle" role="img"></span>&nbsp;'+t("Stop Process")+'</button></div></div></div><div class="bg-process-watcher"></div><div class="bg-process-footer p-2 d-flex"><div class="bg-process-status flex-grow-1"></div><div class="bg-process-exec-time ml-4 my-auto"><div class="exec-div"><span>'+t("Execution time")+":</span><p></p></div></div></div>",onCreate:function(e,t){t.addClass("pg-no-overflow p-2")}}).load(a.docker)}}),a.BackgroundProcessObsorver}.apply(t,r))||(e.exports=o)},5878:(e,t,n)=>{var r,o;n(15306),n(74916),n(69826),n(32564),n(40561),r=[n(91669),n(81311),n(19755),n(72316),n(55112),n(33883),n(55455),n(71158),n(44092)],void 0===(o=function(e,t,n,r,o,a,i,l,s){if(a.NodeDependencies)return a.NodeDependencies;var u=window.wcDocker;return a.NodeDependencies=a.NodeDependencies||{},t.extend(a.NodeDependencies,{init:function(){if(!this.initialized){this.initialized=!0,this.dependenciesPanel=a.docker.findPanels("dependencies")[0],t.bindAll(this,"showDependencies","__updateCollection","__loadMoreRows","__appendGridToPanel","toggleVisibility");var e=r.Model.extend({defaults:{icon:"icon-unknown",type:void 0,name:void 0,field:void 0},parse:function(e){var n=a.Nodes[e.type];return null!=e.icon&&""!=e.icon||(e.icon=n?t.isFunction(n.node_image)?n.node_image.apply(n,[null,null]):n.node_image||"icon-"+e.type:"icon-"+e.type),e.type=s.titleize(e.type.replace(/_/g," "),!0),e}});this.dependenciesCollection=new(r.Collection.extend({model:e}))(null),this.dependenciesPanel&&this.toggleVisibility(this.dependenciesPanel.isVisible())}},toggleVisibility:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){this.dependenciesPanel=a.docker.findPanels("dependencies")[0];var r=a.tree,o=r.selected(),i=o&&r.itemData(o),l=o&&i&&a.Nodes[i._type];this.showDependencies(o,i,l),a.Events.on("pgadmin-browser:tree:selected",this.showDependencies)}else t&&n(this.dependenciesPanel).data("node-prop",""),a.Events.off("pgadmin-browser:tree:selected",this.showDependencies)},__appendGridToPanel:function(){var t=this.dependenciesPanel.layout().scene().find(".pg-panel-content").find(".pg-panel-dependencies-container"),r=new l.Grid({emptyText:e("No data found"),columns:[{name:"type",label:e("Type"),cell:l.Cell.extend({render:function(){return l.Cell.prototype.render.apply(this,arguments),this.$el.prepend(n("<i>",{class:"wcTabIcon "+this.model.get("icon")})),this}}),editable:!1},{name:"name",label:e("Name"),cell:"string",editable:!1},{name:"field",label:e("field"),cell:"string",editable:!1}],collection:this.dependenciesCollection,className:"backgrid table presentation table-bordered table-noouter-border table-hover"});return this.dependenciesGrid=r,t.empty(),t.append(r.render().el),!0},showDependencies:function(e,t,n){var r=this;n&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){r.__updateCollection(n.generate_url(e,"dependency",t,!0),n,e,t._type)}),400))},__updateCollection:function(r,l,s,c){var d=this,f=e("Please select an object in the tree view."),p=this.dependenciesPanel,b=p.layout().scene().find(".pg-panel-content"),m=b.find(".pg-panel-depends-message"),y=b.find(".pg-panel-dependencies-container"),h=a.tree.getTreeNodeHierarchy(s);if(l&&(f=e("No dependency information is available for the selected object."),l.hasDepends)){var g={node_type:c,url:r};if(t.isEqual(n(p).data("node-prop"),g))return;n(p).data("node-prop",g),d.__appendGridToPanel(),this.dependenciesGrid.columns.models[2].set({label:e("Restriction")}),m.addClass("d-none"),y.removeClass("d-none");var v="";!function t(){n.ajax({url:r,type:"GET",beforeSend:function(t){t.setRequestHeader(o.csrf_token_header,o.csrf_token),v=setTimeout((function(){m.text(e("Fetching dependency information from the server...")),m.removeClass("d-none"),f=""}),1e3)}}).done((function(e){clearTimeout(v),e.length>0?(m.hasClass("d-none")||m.addClass("d-none"),y.removeClass("d-none"),d.dependenciesData=e,d.dependenciesCollection.reset(d.dependenciesData.splice(0,100),{parse:!0}),a.Events.on("pgadmin-browser:panel-dependencies:"+u.EVENT.SCROLLED,d.__loadMoreRows)):(a.Events.off("pgadmin-browser:panel-dependencies:"+u.EVENT.SCROLLED),d.dependenciesCollection.reset({silent:!0}),m.text(f),m.removeClass("d-none"),y.hasClass("d-none")||y.addClass("d-none"))})).fail((function(n,r,o){var l=h[c].label;a.Events.trigger("pgadmin:node:retrieval:error","depends",n,r,o),i.pgHandleItemError(n,r,o,{item:s,info:h})||i.pgNotifier(r,n,e("Error retrieving data from the server: %s",o||l),(function(e){"CRYPTKEY_SET"===e?t():console.warn(arguments)})),m.text(e("Failed to retrieve data from the server."))}))}()}""!=f&&(m.text(f),m.removeClass("d-none"),y.hasClass("d-none")||y.addClass("d-none"))},showReactDependencies:function(t,r,l){var s=this,c=e("Please select an object in the tree view."),d=this.dependenciesPanel.layout().scene().find(".pg-panel-content"),f=d.find(".pg-panel-depends-message"),p=d.find(".pg-panel-dependencies-container"),b=a.tree.getTreeNodeHierarchy(t),m=r._type,y=l.generate_url_react(t,"dependency");if(l&&(c=e("No dependency information is available for the selected object."),l.hasDepends)){this.dependenciesGrid.columns.models[2].set({label:e("Restriction")}),f.addClass("d-none"),p.removeClass("d-none");var h="";n.ajax({url:y,type:"GET",beforeSend:function(t){t.setRequestHeader(o.csrf_token_header,o.csrf_token),h=setTimeout((function(){f.text(e("Fetching dependency information from the server...")),f.removeClass("d-none"),c=""}),1e3)}}).done((function(e){clearTimeout(h),e.length>0?(f.hasClass("d-none")||f.addClass("d-none"),p.removeClass("d-none"),s.dependenciesData=e,s.dependenciesCollection.reset(s.dependenciesData.splice(0,100),{parse:!0}),a.Events.on("pgadmin-browser:panel-dependencies:"+u.EVENT.SCROLLED,s.__loadMoreRows)):(a.Events.off("pgadmin-browser:panel-dependencies:"+u.EVENT.SCROLLED),s.dependenciesCollection.reset({silent:!0}),f.text(c),f.removeClass("d-none"),p.hasClass("d-none")||p.addClass("d-none"))})).fail((function(n,o,u){var c=b[m].label;a.Events.trigger("pgadmin:node:retrieval:error","depends",n,o,u),i.pgHandleItemError(n,o,u,{item:t,info:b})||i.pgNotifier(o,n,e("Error retrieving data from the server: %s",u||c),(function(e){"CRYPTKEY_SET"===e?s.showDependencies(t,r,l):console.warn(arguments)})),f.text(e("Failed to retrieve data from the server."))}))}""!=c&&(f.text(c),f.removeClass("d-none"),p.hasClass("d-none")||p.addClass("d-none"))},__loadMoreRows:function(){if(!(this.dependenciesPanel.length<1)){var e=this.dependenciesPanel.$container.find(".pg-panel-dependencies-container").closest(".wcFrameCenter")[0];e.scrollHeight-10<e.scrollTop+e.offsetHeight&&this.dependenciesData.length>0&&this.dependenciesCollection.add(this.dependenciesData.splice(0,100),{parse:!0})}}}),a.NodeDependencies}.apply(t,r))||(e.exports=o)},24482:(e,t,n)=>{var r,o;n(15306),n(74916),n(69826),n(32564),n(40561),r=[n(91669),n(81311),n(19755),n(72316),n(55112),n(33883),n(55455),n(71158),n(44092)],void 0===(o=function(e,t,n,r,o,a,i,l,s){if(a.NodeDependents)return a.NodeDependents;var u=window.wcDocker;return a.NodeDependents=a.NodeDependents||{},t.extend(a.NodeDependents,{init:function(){if(!this.initialized){this.initialized=!0,this.dependentsPanel=a.docker.findPanels("dependents")[0],t.bindAll(this,"showDependents","__updateCollection","__loadMoreRows","__appendGridToPanel","toggleVisibility");var e=r.Model.extend({defaults:{icon:"icon-unknown",type:void 0,name:void 0,field:void 0},parse:function(e){var n=a.Nodes[e.type];return null!=e.icon&&""!=e.icon||(e.icon=n?t.isFunction(n.node_image)?n.node_image.apply(n,[null,null]):n.node_image||"icon-"+e.type:"icon-"+e.type),e.type=s.titleize(e.type.replace(/_/g," "),!0),e}});this.dependentCollection=new(r.Collection.extend({model:e}))(null),this.dependentsPanel&&this.toggleVisibility(this.dependentsPanel.isVisible())}},toggleVisibility:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){this.dependentsPanel=a.docker.findPanels("dependents")[0];var r=a.tree,o=r&&r.selected(),i=o&&r.itemData(o),l=o&&i&&a.Nodes[i._type];this.showDependents(o,i,l),a.Events.on("pgadmin-browser:tree:selected",this.showDependents)}else t&&n(this.dependentsPanel).data("node-prop",""),a.Events.off("pgadmin-browser:tree:selected",this.showDependents)},__appendGridToPanel:function(){var t=this.dependentsPanel.layout().scene().find(".pg-panel-content").find(".pg-panel-dependents-container"),r=new l.Grid({emptyText:e("No data found"),columns:[{name:"type",label:e("Type"),cell:l.Cell.extend({render:function(){return l.Cell.prototype.render.apply(this,arguments),this.$el.prepend(n("<i>",{class:"wcTabIcon "+this.model.get("icon")})),this}}),editable:!1},{name:"name",label:e("Name"),cell:"string",editable:!1},{name:"field",label:e("field"),cell:"string",editable:!1}],collection:this.dependentCollection,className:"backgrid table presentation table-bordered table-noouter-border table-hover"});return this.dependentGrid=r,t.empty(),t.append(r.render().el),!0},showDependents:function(e,t,n){var r=this;n&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){r.__updateCollection(n.generate_url(e,"dependent",t,!0),n,e,t._type)}),400))},__updateCollection:function(r,l,s,c){var d=this,f=e("Please select an object in the tree view."),p=this.dependentsPanel,b=p.layout().scene().find(".pg-panel-content"),m=b.find(".pg-panel-depends-message"),y=b.find(".pg-panel-dependents-container"),h=a.tree.getTreeNodeHierarchy(s);if(l&&(f=e("No dependent information is available for the selected object."),l.hasDepends)){var g={node_type:c,url:r};if(t.isEqual(n(p).data("node-prop"),g))return;n(p).data("node-prop",g),this.__appendGridToPanel(),"tablespace"==l.type||"role"==l.type?this.dependentGrid.columns.models[2].set({label:e("Database")}):this.dependentGrid.columns.models[2].set({label:e("Restriction")}),m.addClass("d-none"),y.removeClass("d-none");var v="";!function t(){n.ajax({url:r,type:"GET",beforeSend:function(t){t.setRequestHeader(o.csrf_token_header,o.csrf_token),v=setTimeout((function(){m.text(e("Fetching dependent information from the server...")),m.removeClass("d-none"),f=""}),1e3)}}).done((function(e){clearTimeout(v),e.length>0?(m.hasClass("d-none")||m.addClass("d-none"),y.removeClass("d-none"),d.dependentData=e,d.dependentCollection.reset(d.dependentData.splice(0,100),{parse:!0}),a.Events.on("pgadmin-browser:panel-dependents:"+u.EVENT.SCROLLED,d.__loadMoreRows)):(a.Events.off("pgadmin-browser:panel-dependents:"+u.EVENT.SCROLLED),d.dependentCollection.reset({silent:!0}),m.text(f),m.removeClass("d-none"),y.hasClass("d-none")||y.addClass("d-none"))})).fail((function(n,r,o){var l=h[c].label;a.Events.trigger("pgadmin:node:retrieval:error","depends",n,r,o),i.pgHandleItemError(n,r,o,{item:s,info:h})||i.pgNotifier(r,n,e("Error retrieving data from the server: %s",o||l),(function(e){"CRYPTKEY_SET"===e?t():console.warn(arguments)})),m.text(e("Failed to retrieve data from the server."))}))}()}""!=f&&(m.text(f),m.removeClass("d-none"),y.hasClass("d-none")||y.addClass("d-none"))},__loadMoreRows:function(){if(!(this.dependentsPanel.length<1)){var e=this.dependentsPanel.$container.find(".pg-panel-dependents-container").closest(".wcFrameCenter")[0];e.scrollHeight-10<e.scrollTop+e.offsetHeight&&this.dependentData.length>0&&this.dependentCollection.add(this.dependentData.splice(0,100),{parse:!0})}}}),a.NodeDependents}.apply(t,r))||(e.exports=o)},65894:(e,t,n)=>{var r=n(64492);n(94986),n(26699),n(32023),n(23123),n(74916),n(69826);var o=c(n(91669)),a=c(n(28008)),i=c(n(19755)),l=c(n(55455)),s=c(n(55112)),u=n(48987);function c(e){return e&&e.__esModule?e:{default:e}}e.exports=l.default.dialog("createModeDlg",(function(){return{setup:function(){return{buttons:[{text:(0,o.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times file_manager_create_cancel pg-alertify-button"},{text:(0,o.default)("Create"),key:13,className:"btn btn-primary fa fa-file file_manager_create file_manager_ok pg-alertify-button disabled"}],options:{closableByDimmer:!1,maximizable:!1,closable:!1,movable:!0,padding:!1,overflow:!1,model:0,resizable:!0,pinnable:!1,modal:!1,autoReset:!1}}},replace_file:function(){var e=(0,i.default)(".replace_file .btn_yes"),t=(0,i.default)(".replace_file .btn_no");(0,i.default)(".storage_dialog #uploader .input-path").attr("disabled",!0),(0,i.default)(".file_manager_ok").addClass("disabled"),(0,i.default)(".replace_file, .fm_dimmer").show(),e.on("click",(function(){(0,i.default)(".replace_file, .fm_dimmer").hide(),e.off(),t.off();var n=(0,i.default)(".storage_dialog #uploader .input-path").val();s.default.Browser.Events.trigger("pgadmin-storage:finish_btn:create_file",n),(0,i.default)(".file_manager_create_cancel").trigger("click"),(0,i.default)(".storage_dialog #uploader .input-path").attr("disabled",!1),(0,i.default)(".file_manager_ok").removeClass("disabled")})),t.on("click",(function(){(0,i.default)(".replace_file, .fm_dimmer").hide(),e.off(),t.off(),(0,i.default)(".storage_dialog #uploader .input-path").attr("disabled",!1),(0,i.default)(".file_manager_ok").removeClass("disabled")}))},is_file_exist:function(){var e=(0,i.default)(".storage_dialog #uploader .input-path").val(),t=e.substr(0,e.lastIndexOf("/")+1),n=e.substr(e.lastIndexOf("/")+1),r=!1,o={path:t,name:n,mode:"is_file_exist"};return i.default.ajax({type:"POST",data:JSON.stringify(o),url:(0,a.default)("file_manager.filemanager",{trans_id:this.trans_id}),dataType:"json",contentType:"application/x-download; charset=utf-8",async:!1}).done((function(e){var t=e.data.result;r=1===t.Code})),r},check_permission:function(e){var t=!1,n={path:e,mode:"permission"};return i.default.ajax({type:"POST",data:JSON.stringify(n),url:(0,a.default)("file_manager.filemanager",{trans_id:this.trans_id}),dataType:"json",contentType:"application/json; charset=utf-8",async:!1}).done((function(e){var n=e.data.result;1===n.Code?t=!0:((0,i.default)(".file_manager_ok").addClass("disabled"),l.default.error(n.Error))})).fail((function(){(0,i.default)(".file_manager_ok").addClass("disabled"),l.default.error((0,o.default)("Error occurred while checking access permission."))})),t},callback:function(e){if(e.cancel=!1,e.button.text==(0,o.default)("Create"))if("refresh_list"!=document.activeElement.id){var t,n=(0,i.default)(".storage_dialog #uploader .input-path").val(),a={path:(0,i.default)(".currentpath").val()},l=(0,i.default)(".allowed_file_types select").val();if(n.includes(".")&&n.split(".").pop()==l||"*"==l||(n=n+"."+l,(0,i.default)(".storage_dialog #uploader .input-path").val(n)),!this.check_permission(n))return void(e.cancel=!0);!r.isUndefined(n)&&""!==n&&this.is_file_exist()?(this.replace_file(),this.$container.find(".replace_file").find(".btn_yes").trigger("focus"),e.cancel=!0):(s.default.Browser.Events.trigger("pgadmin-storage:finish_btn:create_file",n),t=(0,i.default)(this.elements.body).find(".storage_content"),(0,i.default)(t).find("*").off(),t.remove(),(0,u.removeTransId)(this.trans_id)),(0,u.set_last_traversed_dir)(a,this.trans_id)}else e.cancel=!0;else e.button.text==(0,o.default)("Cancel")&&(t=(0,i.default)(this.elements.body).find(".storage_content"),(0,i.default)(t).find("*").off(),t.remove(),(0,u.removeTransId)(this.trans_id),s.default.Browser.Events.trigger("pgadmin-storage:cancel_btn:create_file"))}}}),!1,"fileSelectionDlg")},48987:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.getTransId=function(e){return o.default.ajax({data:e,type:"POST",async:!1,url:(0,r.default)("file_manager.get_trans_id"),dataType:"json",contentType:"application/json; charset=utf-8"})},t.removeTransId=function(e){return o.default.ajax({type:"GET",async:!1,url:(0,r.default)("file_manager.delete_trans_id",{trans_id:e}),dataType:"json",contentType:"application/json; charset=utf-8"})},t.set_last_traversed_dir=function(e,t){return o.default.ajax({url:(0,r.default)("file_manager.save_last_dir",{trans_id:t}),type:"POST",data:JSON.stringify(e),contentType:"application/json"})};var r=a(n(28008)),o=a(n(19755));function a(e){return e&&e.__esModule?e:{default:e}}},62032:(e,t,n)=>{var r=n(64492);n(69826),n(32564);var o=c(n(91669)),a=c(n(28008)),i=c(n(19755)),l=c(n(55455)),s=c(n(55112)),u=n(48987);function c(e){return e&&e.__esModule?e:{default:e}}e.exports=l.default.dialog("fileSelectionDlg",(function(){return{main:function(e){r.isUndefined(e.dialog_title)&&(e.dialog_title=(0,o.default)("Select file")),this.dialog_type=e.dialog_type,this.set("title",e.dialog_title),this.params=JSON.stringify(e),this.show()},settings:{label:void 0},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=n)}},prepare:function(){var e=this;e.$container.find(".storage_content").remove(),e.$container.append("<div class='storage_content'></div>");var t=e.$container.find(".storage_content");t.empty(),(0,i.default)(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties"),i.default.get((0,a.default)("file_manager.index"),(function(e){t.append(e)}));var n,o=(0,u.getTransId)(e.params);4==o.readyState&&(n=JSON.parse(o.responseText)),e.trans_id=r.isUndefined(n)?0:n.data.fileTransId,setTimeout((function(){(0,i.default)(e.$container.find(".file_manager")).on("enter-key",(function(){(0,i.default)((0,i.default)(e.elements.footer).find(".file_manager_ok")).trigger("click")}))}),200),e.__internal.buttons[1]&&(e.__internal.buttons[1].element.disabled=!0)},setup:function(){return{buttons:[{text:(0,o.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:(0,o.default)("Select"),key:13,className:"btn btn-primary fa fa-file file_manager_ok pg-alertify-button disabled"}],options:{closableByDimmer:!1,maximizable:!1,closable:!1,movable:!0,padding:!1,overflow:!1,model:0,resizable:!0,pinnable:!1,modal:!1,autoReset:!1}}},callback:function(e){var t;if(e.cancel=!1,e.button.text==(0,o.default)("Select"))if("refresh_list"!=document.activeElement.id){var n=(0,i.default)(".storage_dialog #uploader .input-path").val(),r={path:(0,i.default)(".currentpath").val()};s.default.Browser.Events.trigger("pgadmin-storage:finish_btn:"+this.dialog_type,n),t=(0,i.default)(this.elements.body).find(".storage_content"),(0,i.default)(t).find("*").off(),t.remove(),(0,u.removeTransId)(this.trans_id),(0,u.set_last_traversed_dir)(r,this.trans_id)}else e.cancel=!0;else e.button.text==(0,o.default)("Cancel")&&(t=(0,i.default)(this.elements.body).find(".storage_content"),(0,i.default)(t).find("*").off(),t.remove(),(0,u.removeTransId)(this.trans_id),s.default.Browser.Events.trigger("pgadmin-storage:cancel_btn:"+this.dialog_type))},build:function(){this.$container=(0,i.default)('<div class="storage_dialog file_selection_dlg"></div>'),this.elements.content.appendChild(this.$container.get(0)),l.default.pgDialogBuild.apply(this)},hooks:{onshow:function(){}}}}))},63867:(e,t,n)=>{var r=a(n(91669)),o=a(n(55455));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=o.default.dialog("fileStorageDlg",(function(){return{settingUpdated:function(e,t,n){"message"==e&&this.setMessage(n)},setup:function(){return{buttons:[{text:(0,r.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"}],options:{closableByDimmer:!1,maximizable:!1,closable:!1,movable:!0,padding:!1,overflow:!1,model:0,resizable:!0,pinnable:!1,modal:!1,autoReset:!1}}}}}),!0,"fileSelectionDlg")},11769:(e,t,n)=>{var r,o;n(24812),n(32564),r=[n(91669),n(81311),n(19755),n(55112),n(33883),n(55455)],void 0===(o=function(e,t,n,r,o,a){if(o.ShowNodeSQL=o.ShowNodeSQL||{},o.ShowNodeSQL.initialized)return o.ShowNodeSQL;var i=window.wcDocker;return t.extend(o.ShowNodeSQL,{init:function(){var e;this.initialized||(this.initialized=!0,t.bindAll(this,"showSQL","sqlPanelVisibilityChanged"),this.sqlPanels=e=o.docker.findPanels("sql"),o.Events.on("pgadmin-browser:panel-sql:"+i.EVENT.VISIBILITY_CHANGED,this.sqlPanelVisibilityChanged),o.Events.on("pgadmin:browser:node:updated",(function(){this.sqlPanels&&this.sqlPanels.length&&(n(this.sqlPanels[0]).data("node-prop",""),this.sqlPanelVisibilityChanged(this.sqlPanels[0]))}),this),0==e.length?o.Events.on("pgadmin-browser:panel-sql:"+i.EVENT.INIT,function(){(e[0].isVisible()||1!=e.length)&&(o.Events.on("pgadmin-browser:tree:selected",this.showSQL),o.Events.on("pgadmin-browser:tree:reactSelected",this.reactShowSQL),o.Events.on("pgadmin-browser:tree:refreshing",this.refreshSQL,this))}.bind(this)):(e[0].isVisible()||1!=e.length)&&(o.Events.on("pgadmin-browser:tree:selected",this.showSQL),o.Events.on("pgadmin-browser:tree:reactSelected",this.reactShowSQL),o.Events.on("pgadmin-browser:tree:refreshing",this.refreshSQL,this)))},refreshSQL:function(e,r,o){var a=this,i={node_type:r._type,url:o.generate_url(e,"sql",r,!0)};t.isEqual(n(a.sqlPanels[0]).data("node-prop"),i)&&(n(a.sqlPanels[0]).data("node-prop",""),a.showSQL(e,r,o))},showSQL:function(i,l,s){this.timeout&&clearTimeout(this.timeout);var u=this;this.timeout=setTimeout((function(){var c="-- "+e("Please select an object in the tree view.");if(s){c="-- "+e("No SQL could be generated for the selected object.");var d=l._type,f=s.generate_url(i,"sql",l,!0),p=o.tree.getTreeNodeHierarchy(i),b={node_type:d,url:f};if(t.isEqual(n(u.sqlPanels[0]).data("node-prop"),b))return;if(n(u.sqlPanels[0]).data("node-prop",b),s.hasSQL){var m;c="";!function t(){n.ajax({url:f,type:"GET",beforeSend:function(t){t.setRequestHeader(r.csrf_token_header,r.csrf_token),m=setTimeout((function(){r.Browser.editor.setValue(e("Retrieving data from the server..."))}),1e3)}}).done((function(e){r.Browser.editor.getValue()!=e&&r.Browser.editor.setValue(e),clearTimeout(m)})).fail((function(n,r,l){var s=p[d].label;o.Events.trigger("pgadmin:node:retrieval:error","sql",n,r,l,i),a.pgHandleItemError(n,r,l,{item:i,info:p})||a.pgNotifier(r,n,e("Error retrieving the information - %s",l||s),(function(e){"CRYPTKEY_SET"===e?t():console.warn(arguments)}))}))}()}}""!=c&&r.Browser.editor.setValue(c)}),400)},sqlPanelVisibilityChanged:function(e){if(e.isVisible()){var t=o.tree,n=t.selected(),r=n&&t.itemData(n),a=n&&r&&o.Nodes[r._type];o.ShowNodeSQL.showSQL.apply(o.ShowNodeSQL,[n,r,a]),o.Events.on("pgadmin-browser:tree:selected",o.ShowNodeSQL.showSQL),o.Events.on("pgadmin-browser:tree:refreshing",o.ShowNodeSQL.refreshSQL,this)}else o.Events.off("pgadmin-browser:tree:selected",o.ShowNodeSQL.showSQL),o.Events.off("pgadmin-browser:tree:refreshing",o.ShowNodeSQL.refreshSQL,this)}}),o.ShowNodeSQL}.apply(t,r))||(e.exports=o)},72126:(e,t,n)=>{var r,o;n(69826),n(32564),n(68309),n(82772),n(40561),r=[n(91669),n(81311),n(19755),n(72316),n(55112),n(33883),n(71158),n(58307),n(73870),n(42591)],void 0===(o=function(e,t,n,r,o,a,i,l,s,u){if(a.NodeStatistics)return a.NodeStatistics;if(a.NodeStatistics=a.NodeStatistics||{},a.NodeStatistics.initialized)return a.NodeStatistics;var c=i.SizeFormatter=function(){};t.extend(c.prototype,{fromRaw:function(e){return s(e)},toRaw:function(e){return e}});var d=i.Extension.SwitchCell.extend({defaults:t.extend({},i.Extension.SwitchCell.prototype.defaults)}),f={16:d,20:i.IntegerCell,21:i.IntegerCell,23:i.IntegerCell,700:i.NumberCell,701:i.NumberCell,1700:i.NumberCell,702:i.DatetimeCell,703:i.DatetimeCell,1082:i.DatetimeCell.extend({includeDate:!0,includeTime:!1,includeMilli:!1}),1083:i.DatetimeCell.extend({includeDate:!1,includeTime:!0,includeMilli:!0}),1114:i.DatetimeCell.extend({includeDate:!0,includeTime:!0,includeMilli:!0}),1184:"string",1266:"string"},p=window.wcDocker;return t.extend(d.prototype.defaults.options,{onText:e("True"),offText:e("False"),onColor:"success",offColor:"ternary",size:"mini"}),t.extend(a.NodeStatistics,{init:function(){this.initialized||(this.initialized=!0,t.bindAll(this,"showStatistics","toggleVisibility","__createMultiLineStatistics","__createSingleLineStatistics","__loadMoreRows"),t.extend(this,{collection:new r.Collection(null),statistic_columns:[{editable:!1,name:"statistics",label:e("Statistics"),cell:"string",headerCell:i.Extension.CustomHeaderCell,cellHeaderClasses:"width_percent_25"},{editable:!1,name:"value",label:e("Value"),cell:"string"}],columns:null,grid:null}),this.panel=a.docker.findPanels("statistics"),this.panel.length>0&&this.toggleVisibility(this.panel[0].isVisible()))},toggleVisibility:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){this.panel=a.docker.findPanels("statistics");var r=a.tree,o=r.selected(),i=o&&r.itemData(o),l=o&&i&&a.Nodes[i._type];a.NodeStatistics.showStatistics.apply(a.NodeStatistics,[o,i,l]),a.Events.on("pgadmin-browser:tree:selected",a.NodeStatistics.showStatistics),a.Events.on("pgadmin-browser:tree:refreshing",a.NodeStatistics.refreshStatistics,this)}else t&&n(this.panel[0]).data("node-prop",""),a.Events.off("pgadmin-browser:tree:selected",a.NodeStatistics.showStatistics),a.Events.off("pgadmin-browser:tree:refreshing",a.NodeStatistics.refreshStatistics,this)},__updateCollection:function(r,s,c,d){var f=this.panel[0].layout().scene().find(".pg-panel-content"),b=f.find(".pg-panel-statistics-message"),m=f.find(".pg-panel-statistics-container"),y=this.panel,h=this,g="",v=d;if(s){g=e("No statistics are available for the selected object.");var _=a.tree.getTreeNodeHierarchy(c),w={node_type:d,url:r};if(t.isEqual(n(y[0]).data("node-prop"),w))return;if(n(y[0]).data("node-prop",w),u.nodeHasStatistics(a,s,c)){var O;g="";!function t(){n.ajax({url:r,type:"GET",beforeSend:function(t){t.setRequestHeader(o.csrf_token_header,o.csrf_token),O=setTimeout((function(){b.text(e("Retrieving data from the server...")),b.removeClass("d-none"),h.grid&&h.grid.remove()}),1e3)}}).done((function(t){if(clearTimeout(O),b.text(""),t.data){var n=h.data=t.data;s.hasCollectiveStatistics||n.rows.length>1?(a.Events.on("pgadmin-browser:panel-statistics:"+p.EVENT.SCROLLED,h.__loadMoreRows),h.__createMultiLineStatistics.call(h,n,s.statsPrettifyFields)):(a.Events.off("pgadmin-browser:panel-statistics:"+p.EVENT.SCROLLED,h.__loadMoreRows),h.__createSingleLineStatistics.call(h,n,s.statsPrettifyFields)),h.grid&&(delete h.grid,h.grid=null),h.grid=new i.Grid({emptyText:e("No data found"),columns:h.columns,collection:h.collection,className:"backgrid presentation table table-bordered table-noouter-border table-hover"}),h.grid.render(),m.empty(),m.append(h.grid.$el),b.hasClass("d-none")||b.addClass("d-none"),m.removeClass("d-none")}else t.info&&(m.hasClass("d-none")||m.addClass("d-none"),b.text(t.info),b.removeClass("d-none"))})).fail((function(n,r,o){var i=_[v].label;a.Events.trigger("pgadmin:node:retrieval:error","statistics",n,r,o,c),l.pgHandleItemError(n,r,o,{item:c,info:_})||l.pgNotifier(r,n,e("Error retrieving the information - %s",o||i),(function(e){"CRYPTKEY_SET"===e?t():console.warn(arguments)})),b.text(e("Failed to retrieve data from the server."))}))}()}}""!=g&&(m.hasClass("d-none")||m.addClass("d-none"),b.removeClass("d-none"),b.text(g))},refreshStatistics:function(e,r,o){var a=this,i={node_type:r._type,url:o.generate_url(e,"stats",r,!0)};t.isEqual(n(a.panel[0]).data("node-prop"),i)&&(n(a.panel[0]).data("node-prop",""),a.showStatistics(e,r,o))},showStatistics:function(e,t,n){var r=this;n&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout((function(){r.__updateCollection.call(r,n.generate_url(e,"stats",t,!0),n,e,t._type)}),400))},__createMultiLineStatistics:function(e,n){var r=e.rows,o=e.columns;for(var a in this.columns=[],o){var i=o[a],l=f[i.type_code]||"string";"PID"==i.name&&(l=l.extend({orderSeparator:""}));var s={editable:!1,name:i.name,cell:l};-1!=t.indexOf(n,i.name)&&(s.formatter=c),this.columns.push(s)}this.collection.reset(r.splice(0,50))},__loadMoreRows:function(){var e=n(".pg-panel-statistics-container").closest(".wcFrameCenter")[0];if(e.scrollHeight-10<e.scrollTop+e.offsetHeight){var t=this.data.rows;t.length>0&&this.collection.add(t.splice(0,50))}},__createSingleLineStatistics:function(e,n){var r,o=e.rows[0],a=e.columns,i=[];for(var l in this.columns=this.statistic_columns,a)r=a[l].name,i.push({statistics:r,value:o&&o[r]?-1!=t.indexOf(n,r)?s(o[r]):o[r]:null});this.collection.reset(i)}}),a.NodeStatistics}.apply(t,r))||(e.exports=o)},76310:(e,t,n)=>{var r,o;n(79753),n(69826),n(68309),n(32564),n(9653),r=[n(91669),n(28008),n(19755),n(81311),n(72316),n(55455),n(55112),n(12030),n(33883),n(23602),n(7167),n(77019)],void 0===(o=function(e,t,n,r,o,a,i,l,s,u,c){return i.Preferences||(i.Preferences={init:function(){this.initialized||(this.initialized=!0,a.dialog("preferencesDlg",(function(){var d,f=[],p=n("<div class='preferences_dialog d-flex flex-row'></div>"),b=o.Model.extend({idAttribute:"id",defaults:{id:void 0,value:void 0}}),m={},y=this.preferences=new(o.Collection.extend({model:b,url:t("preferences.index"),updateAll:function(){for(var e in m)this.get(e).save();return!0}}))(null);y.on("reset",(function(){m={}})),y.on("change",(function(e){var t=e.get("id"),n=e.get("dependents");t in m?r.isEqual(e.get("value"),m[t])&&delete m[t]:m[t]=e._previousAttributes.value,!r.isNull(n)&&Array.isArray(n)&&n.length>0&&h(e.get("name"),e.get("value"),n)}));var h=function(e,t,n){r.each(f,(function(o){var a=o.model.get("name");r.each(n,(function(n){a===n&&g(e,t,o)}))}))},g=function(e,t,n){"column_data_auto_resize"===e&&"by_name"===t?(n.$el.find("input").prop("disabled",!0),n.$el.find("input").val(0)):"column_data_auto_resize"===e&&"by_data"===t&&n.$el.find("input").prop("disabled",!1)},v=function e(t,n){var r=n?t.itemData(n):null;r&&r.preferences?t.select(n):(n=t.first(n),e(t,n))},_=function(t,n,a,i){var s,u,c=(a=a||n.selected())?n.itemData(a):null;switch(i){case"selected":if(!c)break;if(c.preferences){p.find(".preferences_content"),s=c.preferences,u=p.find(".preferences_content"),f&&r.each(f,(function(e){"$sel"in e&&e.$sel.data("select2").isOpen()&&e.$sel.data("select2").close(),e.remove()})),u.empty(),f=[],r.each(s,(function(e){var t=y.get(e.id);t.errorModel=new o.Model;var n=new l.Field(r.extend({},e,{id:"value",name:"value"})),a=new(n.get("control"))({field:n,model:t});u.append(a.render().$el),f.push(a)})),r.each(s,(function(e){var t=y.get(e.id),n=t.get("dependents");!r.isNull(n)&&Array.isArray(n)&&n.length>0&&h(t.get("name"),t.get("value"),n)}));break}v(n,a);break;case"added":if(!c)break;c.preferences&&r.isArray(c.preferences)&&r.each(c.preferences,(function(t){y.add({id:t.id,value:t.value,category_id:c.id,mid:c.mid,name:t.name,dependents:t.dependents}),t.control||(t.control=function(t){switch(t.type){case"text":return"input";case"boolean":return t.options={onText:e("True"),offText:e("False"),onColor:"success",offColor:"ternary",size:"mini"},"switch";case"node":return t.options={onText:e("Show"),offText:e("Hide"),onColor:"success",offColor:"ternary",size:"mini",width:"56"},"switch";case"integer":case"numeric":return"numeric";case"date":return"datepicker";case"datetime":return"datetimepicker";case"options":var n=[],o=!1;return r.each(t.options,(function(e){if("label"in e&&"value"in e){var r={label:e.label,value:e.value};r.label=e.label,r.value=e.value,"preview_src"in e&&(r.preview_src=e.preview_src),n.push(r),e.value==t.value&&(o=!0)}else n.push({label:e,value:e}),e==t.value&&(o=!0)})),t.select2&&1==t.select2.tags&&t.value&&0==o&&n.push({label:t.value,value:t.value}),t.options=n,"select2";case"select2":var a=[];return r.each(t.options,(function(e){if("label"in e&&"value"in e){var t={label:e.label,value:e.value};t.label=e.label,t.value=e.value,"preview_src"in e&&(t.preview_src=e.preview_src),a.push(t)}else a.push({label:e,value:e})})),t.options=a,"select2";case"multiline":return"textarea";case"switch":return"switch";case"keyboardshortcut":return"keyboardShortcut";case"radioModern":return"radioModern";case"selectFile":return"binary-paths-grid";case"threshold":return t.warning_label=e("Warning"),t.alert_label=e("Alert"),t.unit=e("(in minutes)"),"threshold";default:return console&&console.warn&&console.warn("Hmm.. We don't know how to render this type - ''"+t.type+"' of control."),"input"}}(t)),t.help_str&&(t.helpMessage=t.help_str)})),c.sortable=!1;break;case"loaded":setTimeout((function(){v(n,null)}),300)}return!0};return{main:function(){!function(){if(d){try{d.aciTree("destroy")}catch(e){console.warn(e.stack||e)}d.off("acitree",_),y.reset(),f&&r.each(f,(function(e){e.remove()})),f=[],p.empty()}}(),p.append("<div class='pg-el-sm-3 preferences_tree aciTree'></div>").append("<div class='pg-el-sm-9 preferences_content'>"+e("Category is not selected.")+"</div>"),(d=p.find(".preferences_tree")).on("acitree",_),d.aciTree({selectable:!0,expand:!0,fullRow:!0,ajax:{url:t("preferences.index")},animateRoot:!0,unanimated:!1,show:{duration:75},hide:{duration:75},view:{duration:75}}),d.aciTree("api")&&u.modifyAcitreeAnimation(s,d.aciTree("api")),this.show()},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:e("Preferences"),"aria-label":e("Help"),url:t("help.static",{filename:"preferences.html"})}},{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button"},{text:e("Save"),key:13,className:"btn btn-primary fa fa-lg fa-save pg-alertify-button"}],focus:{element:0},options:{padding:!1,overflow:!1,title:e("Preferences"),closableByDimmer:!1,modal:!0,pinnable:!1}}},callback:function(t){if("dialog_help"==t.button.element.name)return t.cancel=!0,void s.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null);if(t.button.text==e("Save")){var n=!1;y.updateAll();var o={};r.each(m,(function(t,r){var l=s.get_preference_for_id(Number(r));"dynamic_tabs"==l.name&&c._set_dynamic_tab(s,!l.value),o[l.module]||(o[l.module]=!0),"theme"==l.name&&(n=!0),"hide_shared_server"==l.name&&a.confirm(e("Browser tree refresh required"),e("A browser tree refresh is required. Do you wish to refresh the tree?"),(function(){i.Browser.tree.destroy({success:function(){return i.Browser.initializeBrowserTree(i.Browser),!0}})}),(function(){return y.reset(),m={},!0})).set("labels",{ok:e("Refresh"),cancel:e("Later")})})),n&&a.confirm(e("Refresh required"),e("A page refresh is required to apply the theme. Do you wish to refresh the page now?"),(function(){return location.reload(),!0}),(function(){return!0})).set("labels",{ok:e("Refresh"),cancel:e("Later")}),s.cache_preferences(o)}},build:function(){this.elements.content.appendChild(p.get(0)),a.pgDialogBuild.apply(this)},hooks:{onshow:function(){}}}})))},show:function(){a.preferencesDlg(!0).resizeTo(i.Browser.stdW.calc(i.Browser.stdW.lg),i.Browser.stdH.calc(i.Browser.stdH.lg))}}),i.Preferences}.apply(t,r))||(e.exports=o)},34408:(e,t,n)=>{var r,o;r=[n(19755),n(55455),n(55112),n(91669),n(28008),n(12030)],void 0===(o=function(e,t,n,r,o){return(n=n||window.pgAdmin||{}).Settings||(n.Settings={init:function(){this.initialized||(this.initialized=!0)},show:function(){t.confirm(r("Reset layout"),r("Are you sure you want to reset the current layout? This will cause the application to reload and any un-saved data will be lost."),(function(){var t=e('<div id="reloading-indicator"></div>');e("body").append(t),e.ajax({url:o("settings.reset_layout"),type:"DELETE",async:!1}).done((function(){e(window).off("unload"),window.onbeforeunload=null,location.reload(!0)})).fail((function(){console.warn("Something went wrong on server while resetting layout.")}))}),(function(){}))}}),n.Settings}.apply(t,r))||(e.exports=o)},63586:(e,t,n)=>{var r,o;r=[n(55112),n(89918),n(81400)],void 0===(o=function(e){var t=function(e){for(var t in e){var n=e[t];if(n&&n.init&&"function"==typeof n.init)try{n.init()}catch(e){console.warn(e.stack||e)}else if(n&&n.Init&&"function"==typeof n.Init)try{n.init()}catch(e){console.warn(e.stack||e)}}};t(e),t(e.Browser),t(e.Tools),e.Browser.create_menus()}.apply(t,r))||(e.exports=o)},20811:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(69826);var r,o=(r=n(4631))&&r.__esModule?r:{default:r};n(54086),n(64020),n(20017),n(88657),n(89700),n(71707),n(3585),n(69109),n(55292),n(81699),n(32095),n(14568),n(4328),n(82801),n(14504),n(90338),n(18473),o.default.commands.focusOut=function(){event.stopPropagation(),document.activeElement.blur(),event.currentTarget.hasOwnProperty("parents")&&event.currentTarget.parents().find(".sql-code-control")&&event.currentTarget.parents().find(".sql-code-control").focus()},o.default.defineInitHook((function(e){e.addKeyMap({Tab:function(e){e.somethingSelected()?e.execCommand("indentMore"):e.getOption("indentWithTabs")?e.replaceSelection("\t","end","+input"):e.execCommand("insertSoftTab")}})})),o.default.keyMap.default.Esc="focusOut";var a=o.default;t.default=a},73409:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(81812),n(52947),n(33059),n(26491),n(10883),n(98463),n(51827),n(98276),n(4165),n(25080),n(34964),n(35337),n(79387),n(5205);var r=window.Slick;t.default=r},8593:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82526),n(38880),n(49337),n(33321),n(19601),n(79753),n(41817),n(32165),n(78783),n(47042),n(68309),n(91038),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.DataGridHeader=B,t.default=L,n(21249),n(41539),n(66992),n(33948),n(57327),n(47941),n(23157),n(89554),n(54747),n(92222),n(2707),n(82772),n(69826),n(88674),n(26699),n(32023),n(86535),n(99244),n(69070);var o=x(n(67294)),a=n(65770),i=n(30398),l=n(87451),s=j(n(3550)),u=n(26850),c=j(n(66631)),d=j(n(62015)),f=n(79521),p=j(n(86010)),b=j(n(45697)),m=j(n(96486)),y=j(n(91669)),h=n(52237),g=x(n(75835)),v=n(81922),_=j(n(41832)),w=n(44092),O=n(64519),S=n(50464);function j(e){return e&&e.__esModule?e:{default:e}}function P(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return P=function(){return e},e}function x(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=P();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function C(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=(0,i.makeStyles)((function(e){return{grid:N(N({},e.mixins.panelBorder),{},{backgroundColor:e.palette.background.default}),gridHeader:N(N({display:"flex"},e.mixins.panelBorder.bottom),{},{backgroundColor:e.otherVars.headerBg}),gridHeaderText:{padding:e.spacing(.5,1),fontWeight:e.typography.fontWeightBold},gridControls:{marginLeft:"auto"},gridControlsButton:N({border:0,borderRadius:0},e.mixins.panelBorder.left),gridRowButton:{border:0,borderRadius:0,padding:0,minWidth:0,backgroundColor:"inherit","&.Mui-disabled":{border:0}},gridTableContainer:{overflow:"auto",width:"100%"},table:{borderSpacing:0,width:"100%",overflow:"auto",backgroundColor:e.otherVars.tableBg},tableCell:N(N(N({margin:0,padding:e.spacing(.5)},e.mixins.panelBorder.bottom),e.mixins.panelBorder.right),{},{position:"relative",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),tableCellHeader:{fontWeight:e.typography.fontWeightBold,padding:e.spacing(1,.5),textAlign:"left"},tableContentWidth:{width:"calc(100% - 3px)"},btnCell:{padding:e.spacing(.5,0),textAlign:"center"},resizer:{display:"inline-block",width:"5px",height:"100%",position:"absolute",right:0,top:0,transform:"translateX(50%)",zIndex:1,touchAction:"none"},expandedForm:{borderTopWidth:e.spacing(.5),borderStyle:"solid ",borderColor:e.palette.grey[400]},expandedIconCell:{backgroundColor:e.palette.grey[400],borderBottom:"none"}}}));function A(e){var t=e.headerGroups,n=M();return o.default.createElement("div",{className:n.tableContentWidth},t.map((function(e,t){return o.default.createElement("div",D({key:t},e.getHeaderGroupProps()),e.headers.map((function(e,t){return o.default.createElement("div",D({key:t},e.getHeaderProps()),o.default.createElement("div",D({},e.sortable?e.getSortByToggleProps():{},{className:(0,p.default)(n.tableCell,n.tableCellHeader)}),e.render("Header"),o.default.createElement("span",null,e.isSorted?e.isSortedDesc?" 🔽":" 🔼":"")),!e.disableResizing&&o.default.createElement("div",D({},e.getResizerProps(),{className:n.resizer})))})))})))}function I(e){var t=e.row,n=e.totalRows,r=e.isResizing,a=e.schema,i=e.schemaRef,l=e.accessPath,s=M(),u=E((0,o.useState)(!1),2),c=u[0],d=u[1],f=(0,o.useContext)(O.DepListenerContext),b=m.default.values(t.values,Object.keys(t.values).filter((function(e){return!e.startsWith("btn")}))),y=(0,o.useMemo)((function(){var e=[];return a.fields.forEach((function(t){((0,w.evalFunc)(null,t.deps)||[]).forEach((function(t){var n=l.concat(t);m.default.isArray(t)&&(n=t,e.push(n))}))})),e}),[]);return(0,o.useEffect)((function(){return i.current.fields.forEach((function(e){(e.depChange||e.deferredDepChange)&&(null==f||f.addDepListener(l.concat(e.id),l.concat(e.id),e.depChange,e.deferredDepChange)),((0,w.evalFunc)(null,e.deps)||[]).forEach((function(t){var n=l.concat(t);m.default.isArray(t)&&(n=t),e.depChange&&(null==f||f.addDepListener(n,l.concat(e.id),e.depChange))}))})),function(){null==f||f.removeDepListener(l)}}),[]),b=(b=b.concat(y.map((function(e){var t;return m.default.get(null===(t=i.current.top)||void 0===t?void 0:t.sessData,e)})))).concat([n,t.isExpanded,c,r]),(0,o.useMemo)((function(){return o.default.createElement("div",D({},t.getRowProps(),{className:"tr"}),t.cells.map((function(e,n){var r=[s.tableCell];return"string"==typeof e.column.id&&e.column.id.startsWith("btn-")&&r.push(s.btnCell),"btn-edit"==e.column.id&&t.isExpanded&&r.push(s.expandedIconCell),o.default.createElement("div",D({key:n},e.getCellProps(),{className:(0,p.default)(r)}),e.render("Cell",{reRenderRow:function(){d((function(e){return!e}))}}))})))}),b)}function B(e){var t=e.label,n=e.canAdd,r=e.onAddClick,i=M();return o.default.createElement(a.Box,{className:i.gridHeader},o.default.createElement(a.Box,{className:i.gridHeaderText},t),o.default.createElement(a.Box,{className:i.gridControls},n&&o.default.createElement(l.PgIconButton,{"data-test":"add-row",title:(0,y.default)("Add row"),onClick:r,icon:o.default.createElement(s.default,null),className:i.gridControlsButton})))}function L(e){var t=e.value,n=e.viewHelperProps,r=e.schema,i=e.accessPath,s=e.dataDispatch,p=e.containerClassName,_=e.fixedRows,O=C(e,["value","viewHelperProps","schema","accessPath","dataDispatch","containerClassName","fixedRows"]),j=M(),P=(0,o.useContext)(h.StateUtilsContext),x=(0,S.useIsMounted)(),E=(0,o.useRef)(r),k=(0,o.useMemo)((function(){var e=[];if(O.canEdit){var t={Header:o.default.createElement(o.default.Fragment,null," "),id:"btn-edit",accessor:function(){},disableResizing:!0,sortable:!1,dataType:"edit",width:26,minWidth:26,maxWidth:26,Cell:function(e){var t=e.row,n=!0;return O.canEditRow&&(n=(0,w.evalFunc)(E.current,O.canEditRow,t.original||{})),o.default.createElement(l.PgIconButton,{"data-test":"expand-row",title:(0,y.default)("Edit row"),icon:o.default.createElement(c.default,{fontSize:"small"}),className:j.gridRowButton,onClick:function(){t.toggleRowExpanded(!t.isExpanded)},disabled:!n})}};t.Cell.displayName="Cell",t.Cell.propTypes={row:b.default.object.isRequired},e.push(t)}if(O.canDelete){var r={Header:o.default.createElement(o.default.Fragment,null," "),id:"btn-delete",accessor:function(){},disableResizing:!0,sortable:!1,dataType:"delete",width:26,minWidth:26,maxWidth:26,Cell:function(e){var t=e.row,n=!0;return O.canDeleteRow&&(n=(0,w.evalFunc)(E.current,O.canDeleteRow,t.original||{})),o.default.createElement(l.PgIconButton,{"data-test":"delete-row",title:(0,y.default)("Delete row"),icon:o.default.createElement(d.default,{fontSize:"small"}),onClick:function(){(0,v.confirmDeleteRow)((function(){s({type:h.SCHEMA_STATE_ACTIONS.DELETE_ROW,path:i,value:t.index})}),(function(){}),O.customDeleteTitle,O.customDeleteMsg)},className:j.gridRowButton,disabled:!n})}};r.Cell.displayName="Cell",r.Cell.propTypes={row:b.default.object.isRequired},e.push(r)}return e=e.concat(E.current.fields.filter((function(e){return!m.default.isArray(O.columns)||O.columns.indexOf(e.id)>-1})).sort((function(e,t){return m.default.isArray(O.columns)?O.columns.indexOf(e.id)<O.columns.indexOf(t.id)?-1:1:0})).map((function(e){var t={};e.width?(t.width=e.width,t.minWidth=e.width):(t.width=75,t.minWidth=75),e.minWidth&&(t.minWidth=e.minWidth),e.maxWidth&&(t.maxWidth=e.maxWidth),t.disableResizing=Boolean(e.disableResizing);var r=N(N({Header:e.label||o.default.createElement(o.default.Fragment,null," "),accessor:e.id,field:e,disableResizing:!1,sortable:!0},t),{},{Cell:function(t){var r=t.value,a=t.row,l=C(t,["value","row"]);e=m.default.find(E.current.fields,(function(t){return t.id==e.id}))||e;var c=(0,g.getFieldMetaData)(e,E.current,a.original||{},n).editable;return m.default.isUndefined(e.cell)&&console.error("cell is required ",e),o.default.createElement(u.MappedCellControl,D({rowIndex:a.index,value:r,row:a.original},e,{readonly:!c,disabled:!1,visible:!0,onCellChange:function(t){s({type:h.SCHEMA_STATE_ACTIONS.SET_VALUE,path:i.concat([a.index,e.id]),value:t})},reRenderRow:l.reRenderRow}))}});return r.Cell.displayName="Cell",r.Cell.propTypes={row:b.default.object.isRequired,value:b.default.any,onCellChange:b.default.func},r})))}),[O.canEdit,O.canDelete]),T=(0,o.useCallback)((function(){if(O.canAddRow){var e=E.current.getNewData();s({type:h.SCHEMA_STATE_ACTIONS.ADD_ROW,path:i,value:e})}}),[O.canAddRow]),R=(0,o.useMemo)((function(){return{}}),[]),L=[f.useFlexLayout,f.useResizeColumns,f.useSortBy,f.useExpanded],F=f.useTable.apply(void 0,[{columns:k,data:t||[],defaultColumn:R,manualSortBy:!0,autoResetSortBy:!1,autoResetExpanded:!1}].concat(L)),q=F.getTableProps,U=F.getTableBodyProps,V=F.headerGroups,H=F.rows,z=F.prepareRow;(0,o.useEffect)((function(){var e=_;"function"==typeof e&&(e=e()),e&&Promise.resolve(e).then((function(e){x()&&P.initOrigData(i,e)}))}),[]);var W=m.default.flatMap(V,(function(e){return e.headers.map((function(e){return e.isResizing}))})).includes(!0);return O.visible?o.default.createElement(a.Box,{className:p},o.default.createElement(a.Box,{className:j.grid},(O.label||O.canAdd)&&o.default.createElement(B,{label:O.label,canAdd:O.canAdd,onAddClick:T}),o.default.createElement("div",D({},q(),{className:j.table}),o.default.createElement(A,{headerGroups:V}),o.default.createElement("div",D({},U(),{className:j.tableContentWidth}),H.map((function(e,t){return z(e),o.default.createElement(o.default.Fragment,{key:t},o.default.createElement(I,{row:e,totalRows:H.length,isResizing:W,schema:E.current,schemaRef:E,accessPath:i.concat([e.index])}),O.canEdit&&e.isExpanded&&o.default.createElement(g.default,{value:e.original,viewHelperProps:n,dataDispatch:s,schema:E.current,accessPath:i.concat([e.index]),isNested:!0,className:j.expandedForm,isDataGridForm:!0}))})))))):o.default.createElement(o.default.Fragment,null)}A.propTypes={headerGroups:b.default.array.isRequired},B.propTypes={label:b.default.string,canAdd:b.default.bool,onAddClick:b.default.func},L.propTypes={label:b.default.string,value:b.default.array,viewHelperProps:b.default.object,schema:_.default.schemaUI,accessPath:b.default.array.isRequired,dataDispatch:b.default.func,containerClassName:b.default.oneOfType([b.default.object,b.default.string]),fixedRows:b.default.oneOfType([b.default.array,b.default.instanceOf(Promise),b.default.func]),columns:b.default.array,canEdit:b.default.bool,canAdd:b.default.bool,canDelete:b.default.bool,visible:b.default.bool,canAddRow:b.default.oneOfType([b.default.bool,b.default.func]),canEditRow:b.default.oneOfType([b.default.bool,b.default.func]),canDeleteRow:b.default.oneOfType([b.default.bool,b.default.func]),customDeleteTitle:b.default.string,customDeleteMsg:b.default.string}},64519:(e,t,n)=>{n(41539),n(68309),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(79753),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DepListenerContext=void 0,n(57327),n(23157),n(69600),n(47042),n(69070);var r=o(n(96486));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=o(n(67294)).default.createContext();t.DepListenerContext=s;var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._depListeners=[]}var t,n,o;return t=e,(n=[{key:"addDepListener",value:function(e,t,n,r){this._depListeners=this._depListeners||[],this._depListeners.push({source:e,dest:t,callback:n,defCallback:r})}},{key:"removeDepListener",value:function(e){this._depListeners=r.default.filter(this._depListeners,(function(t){return!r.default.join(t.dest,"|").startsWith(r.default.join(e,"|"))}))}},{key:"_getListenerData",value:function(e,t,n){var o=e,a=r.default.slice(t.dest,0,-1);return a.length>0&&(o=r.default.get(e,a)),r.default.assign(o,t.callback&&t.callback(o,t.source,e,n)||{}),e}},{key:"_getDefListenerPromise",value:function(e,t,n){var o=e,a=r.default.slice(t.dest,0,-1);return a.length>0&&(o=r.default.get(e,a)),t.defCallback&&t.defCallback(o,t.source,e,n)}},{key:"getDepChange",value:function(e,t,n){var o;if(null!==(o=n.listener)&&void 0!==o&&o.callback)t=this._getListenerData(t,n.listener,n);else{var i=r.default.filter(this._depListeners,(function(t){return r.default.join(e,"|").startsWith(r.default.join(t.source,"|"))}));if(i){var l,s=a(i);try{for(s.s();!(l=s.n()).done;){var u=l.value;t=this._getListenerData(t,u,n)}}catch(e){s.e(e)}finally{s.f()}}}return t}},{key:"getDeferredDepChange",value:function(e,t,n){var o=[],i=r.default.filter(this._depListeners,(function(t){return r.default.join(e,"|").startsWith(r.default.join(t.source,"|"))}));if(i){var l,s=a(i);try{for(s.s();!(l=s.n()).done;){var u=l.value;if(u.defCallback){var c=this._getDefListenerPromise(t,u,n);c&&o.push({action:n,promise:c,listener:u})}}}catch(e){s.e(e)}finally{s.f()}}return o}}])&&l(t.prototype,n),o&&l(t,o),e}();t.default=u},57674:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(19601),n(79753),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(91038),n(47042),n(4129),n(69070),n(38880),Object.defineProperty(t,"__esModule",{value:!0}),t.default=v,n(89554),n(54747),n(92222),n(68309),n(21249);var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(67294)),a=b(n(96486)),i=b(n(45697)),l=n(26850),s=n(52237),u=n(44092),c=b(n(41832)),d=n(64519),f=n(75835),p=b(n(84963));function b(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function y(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e){var t=e.value,n=e.schema,r=void 0===n?{}:n,i=e.viewHelperProps,c=e.accessPath,b=e.dataDispatch,m=e.controlClassName,h=e.isDataGridForm,v=void 0!==h&&h,_=e.label,w=e.visible,O=(0,o.useContext)(d.DepListenerContext),S=(0,o.useContext)(s.StateUtilsContext);(0,o.useEffect)((function(){!v&&O&&r.fields.forEach((function(e){(e.depChange||e.deferredDepChange)&&O.addDepListener(c.concat(e.id),c.concat(e.id),e.depChange,e.deferredDepChange),((0,u.evalFunc)(null,e.deps)||[]).forEach((function(t){var n=c.concat(t);a.default.isArray(t)&&(n=t),e.depChange&&O.addDepListener(n,c.concat(e.id),e.depChange)}))}))}),[]);var j=[];return r.fields.forEach((function(e){var n=(0,f.getFieldMetaData)(e,r,t,i),a=n.visible,d=n.disabled,p=n.readonly;if(n.modeSupported){var h=e.id==(null==S?void 0:S.formErr.name);j.push((0,o.useMemo)((function(){return o.default.createElement(l.MappedFormControl,g({state:t,key:e.id,viewHelperProps:i,name:e.id,value:t[e.id]},e,{readonly:p,disabled:d,visible:a,onChange:function(t){b({type:s.SCHEMA_STATE_ACTIONS.SET_VALUE,path:c.concat(e.id),value:t})},hasError:h,className:m}))}),[t[e.id],p,d,a,h,m].concat(y(((0,u.evalFunc)(null,e.deps)||[]).map((function(e){return t[e]}))))))}})),w?o.default.createElement(p.default,{title:_,className:m},j):o.default.createElement(o.default.Fragment,null)}v.propTypes={value:i.default.any,schema:c.default.schemaUI.isRequired,viewHelperProps:i.default.object,isDataGridForm:i.default.bool,accessPath:i.default.array.isRequired,dataDispatch:i.default.func,controlClassName:c.default.className,label:i.default.string,visible:i.default.oneOfType([i.default.bool,i.default.func])}},75835:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(47042),n(91038),n(19601),n(69070),n(57327),n(38880),n(49337),n(33321),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.getFieldMetaData=N,t.default=R,n(82772),n(89554),n(54747),n(92222),n(68309),n(21249),n(47941),n(79753);var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=w();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(67294)),a=n(65770),i=_(n(96486)),l=_(n(45697)),s=_(n(86010)),u=n(26850),c=_(n(32982)),d=_(n(8593)),f=n(52237),p=n(93299),b=_(n(91669)),m=n(44092),y=_(n(41832)),h=n(50464),g=n(64519),v=_(n(57674));function _(e){return e&&e.__esModule?e:{default:e}}function w(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return w=function(){return e},e}function O(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=(0,a.makeStyles)((function(e){return{fullSpace:{padding:0,height:"100%"},controlRow:{marginBottom:e.spacing(1)},nestedTabPanel:{backgroundColor:e.otherVars.headerBg},nestedControl:{height:"unset"},sqlTabInput:{border:0}}}));function T(e){var t=e.active,n=e.getSQLValue,r=D(),a=C((0,o.useState)("Loading..."),2),i=a[0],l=a[1];return(0,o.useEffect)((function(){var e=!1;return t&&(l("Loading..."),n().then((function(t){e||l(t)}))),function(){e=!0}}),[t]),o.default.createElement(p.InputSQL,{value:i,options:{readOnly:!0},readonly:!0,className:r.sqlTabInput})}function N(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={readonly:!1,disabled:!1,visible:!0,editable:!0,canAdd:!0,canEdit:!1,canDelete:!0,modeSupported:!0,canAddRow:!0};if(e.mode&&(a.modeSupported=e.mode.indexOf(r.mode)>-1),!a.modeSupported)return a;if(o)return a;var l=e.visible,s=e.disabled,u=e.readonly,c=e.editable,d=!!i.default.isUndefined(r.serverInfo)||(!!i.default.isUndefined(e.server_type)||r.serverInfo.type in e.server_type)&&(!!i.default.isUndefined(e.min_version)||r.serverInfo.version>=e.min_version)&&(!!i.default.isUndefined(e.max_version)||r.serverInfo.version<=e.max_version);a.readonly=r.inCatalog||"properties"==r.mode,a.readonly||(a.readonly=(0,m.evalFunc)(t,u,n));var f=d;f=f&&(0,m.evalFunc)(t,!!i.default.isUndefined(l)||l,n),a.visible=Boolean(f),a.disabled=Boolean((0,m.evalFunc)(t,s,n)),a.editable=!(r.inCatalog||"properties"==r.mode),a.editable&&(a.editable=(0,m.evalFunc)(t,!!i.default.isUndefined(c)||c,n));var p=e.canAdd,b=e.canEdit,y=e.canDelete,h=e.canAddRow;return a.canAdd=i.default.isUndefined(p)?a.canAdd:(0,m.evalFunc)(t,p,n),a.canAdd=!a.disabled&&a.canAdd,a.canEdit=i.default.isUndefined(b)?a.canEdit:(0,m.evalFunc)(t,b,n),a.canEdit=!a.disabled&&a.canEdit,a.canDelete=i.default.isUndefined(y)?a.canDelete:(0,m.evalFunc)(t,y,n),a.canDelete=!a.disabled&&a.canDelete,a.canAddRow=i.default.isUndefined(h)?a.canAddRow:(0,m.evalFunc)(t,h,n),a}function R(e){var t=e.value,n=e.schema,r=void 0===n?{}:n,l=e.viewHelperProps,p=e.isNested,y=void 0!==p&&p,_=e.accessPath,w=e.dataDispatch,S=e.hasSQLTab,P=e.getSQLValue,E=e.onTabChange,k=e.firstEleRef,M=e.className,A=e.isDataGridForm,I=void 0!==A&&A,B=e.isTabView,L=void 0===B||B,F=e.visible,q={},U={},V=C((0,o.useState)(0),2),H=V[0],z=V[1],W=D(),G=(0,o.useRef)(),K=(0,o.useRef)(),$=(0,o.useRef)(!1),Q=(0,o.useContext)(g.DepListenerContext),J={},Y=(0,o.useRef)(r),X=(0,o.useContext)(f.StateUtilsContext);(0,h.useOnScreen)(K)?0==$.current&&(z(H),$.current=!0):$.current=!1,(0,o.useEffect)((function(){if(!I)return Y.current.fields.forEach((function(e){(e.depChange||e.deferredDepChange)&&Q.addDepListener(_.concat(e.id),_.concat(e.id),e.depChange,e.deferredDepChange),((0,m.evalFunc)(null,e.deps)||[]).forEach((function(t){var n=_.concat(t);i.default.isArray(t)&&(n=t),e.depChange&&Q.addDepListener(n,_.concat(e.id),e.depChange)}))})),function(){Q.removeDepListener(_)}}),[]),(0,o.useEffect)((function(){z(0)}),[X.formResetKey]);var Z=[];Y.current.fields.forEach((function(e){var n=N(e,r,t,l),a=n.visible,s=n.disabled,c=n.readonly,p=n.canAdd,b=n.canEdit,h=n.canDelete,g=n.canAddRow;if(n.modeSupported){var S=e.group,P=e.CustomControl;if("group"===e.type)return J[e.id]=e.label,void(a||Y.current.filterGroups.push(e.label));if(S=J[S]||S||"General",q[S]||(q[S]=[]),"nested-tab"===e.type)e.schema.top=y?Y.current.top:r,q[S].push(o.default.createElement(R,x({key:"nested".concat(q[S].length),value:t,viewHelperProps:l,schema:e.schema,accessPath:_,dataDispatch:w,isNested:!0,isDataGridForm:I},e,{visible:a})));else if("nested-fieldset"===e.type)e.schema.top=y?Y.current.top:r,q[S].push(o.default.createElement(v.default,x({key:"nested".concat(q[S].length),value:t,viewHelperProps:l,schema:e.schema,accessPath:_,dataDispatch:w,isNested:!0,isDataGridForm:I,controlClassName:W.controlRow},e,{visible:a})));else if("collection"===e.type){e.schema.top=y?Y.current.top:Y.current,i.default.isUndefined(e.fixedRows)||(p=!1,h=!1);var C=j(j({key:e.id,value:t[e.id],viewHelperProps:l,schema:e.schema,accessPath:_.concat(e.id),dataDispatch:w,containerClassName:W.controlRow},e),{},{canAdd:p,canEdit:b,canDelete:h,visible:a,canAddRow:g});P?q[S].push(o.default.createElement(P,C)):q[S].push(o.default.createElement(d.default,C))}else{var E=i.default.isEqual(_.concat(e.id),X.formErr.name);e.isFullTab&&(U[S]=W.fullSpace,Z.push(S));var D=e.id||"control".concat(q[S].length);q[S].push((0,o.useMemo)((function(){return o.default.createElement(u.MappedFormControl,x({inputRef:function(e){k&&!k.current&&(k.current=e)},state:t,key:D,viewHelperProps:l,name:D,value:t[D]},e,{id:D,readonly:c,disabled:s,visible:a,onChange:function(e){w({type:f.SCHEMA_STATE_ACTIONS.SET_VALUE,path:_.concat(D),value:e})},hasError:E,className:W.controlRow,noLabel:e.isFullTab}))}),[t[D],c,s,a,E,W.controlRow].concat(O(((0,m.evalFunc)(null,e.deps)||[]).map((function(e){return t[e]}))))))}}}));var ee=i.default.pickBy(q,(function(e,t){return Y.current.filterGroups.indexOf(t)<=-1})),te=!1,ne=(0,b.default)("SQL");return S&&(te=Object.keys(ee).length===H,ee[ne]=[(0,o.useMemo)((function(){return o.default.createElement(T,{key:"sqltab",active:te,getSQLValue:P})}),[te,t])],U[ne]=W.fullSpace,Z.push(ne)),(0,o.useEffect)((function(){G.current&&G.current.focus()}),[]),(0,o.useEffect)((function(){E&&E(H,Object.keys(q)[H],te)}),[H]),i.default.isUndefined(F)||F?L?o.default.createElement(o.default.Fragment,null,o.default.createElement(a.Box,{height:"100%",display:"flex",flexDirection:"column",className:M,ref:K},o.default.createElement(a.Box,null,o.default.createElement(a.Tabs,{value:H,onChange:function(e,t){z(t)},variant:"scrollable",scrollButtons:"auto",action:function(e){return e&&e.updateIndicator()}},Object.keys(ee).map((function(e){return o.default.createElement(a.Tab,{key:e,label:e})})))),Object.keys(ee).map((function(e,t){return o.default.createElement(c.default,{key:e,value:H,index:t,classNameRoot:(0,s.default)(U[e],y?W.nestedTabPanel:null),className:-1==Z.indexOf(e)?W.nestedControl:null},ee[e])})))):o.default.createElement(o.default.Fragment,null,o.default.createElement(a.Box,{height:"100%",display:"flex",flexDirection:"column",className:M,ref:K},Object.keys(ee).map((function(e){return o.default.createElement(o.default.Fragment,{key:e},ee[e])})))):o.default.createElement(o.default.Fragment,null)}T.propTypes={active:l.default.bool,getSQLValue:l.default.func.isRequired},R.propTypes={value:l.default.any,schema:y.default.schemaUI.isRequired,viewHelperProps:l.default.object,isNested:l.default.bool,isDataGridForm:l.default.bool,isTabView:l.default.bool,visible:l.default.oneOfType([l.default.bool,l.default.func]),accessPath:l.default.array.isRequired,dataDispatch:l.default.func,hasSQLTab:l.default.bool,getSQLValue:l.default.func,onTabChange:l.default.func,firstEleRef:y.default.ref,className:y.default.className}},26850:(e,t,n)=>{n(82526),n(19601),n(69070),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.MappedCellControl=t.MappedFormControl=void 0,n(68309),n(47941),n(82772);var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(67294)),o=d(n(96486)),a=n(93299),i=d(n(19928)),l=n(44092),s=d(n(45697)),u=d(n(41832)),c=n(3622);function d(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function v(e){var t=e.type,n=e.value,o=e.id,i=e.onChange,l=e.className,s=e.visible,u=e.inputRef,d=e.noLabel,f=g(e,["type","value","id","onChange","className","visible","inputRef","noLabel"]),p=o,b=(0,r.useCallback)((function(e){var t=e;e&&e.target&&(t=e.target.value),i&&i(t)}),[]),m=(0,r.useCallback)((function(e){i&&i(e)}),[]);if(!s)return r.default.createElement(r.default.Fragment,null);switch(t){case"int":return r.default.createElement(a.FormInputText,h({name:p,value:n,onChange:b,className:l,inputRef:u},f,{type:"int"}));case"numeric":return r.default.createElement(a.FormInputText,h({name:p,value:n,onChange:b,className:l,inputRef:u},f,{type:"numeric"}));case"text":return r.default.createElement(a.FormInputText,h({name:p,value:n,onChange:b,className:l,inputRef:u},f));case"multiline":return r.default.createElement(a.FormInputText,h({name:p,value:n,onChange:b,className:l,inputRef:u,controlProps:{multiline:!0}},f));case"password":return r.default.createElement(a.FormInputText,h({name:p,value:n,onChange:b,className:l,type:"password",inputRef:u},f));case"select":return r.default.createElement(a.FormInputSelect,h({name:p,value:n,onChange:b,className:l,inputRef:u},f));case"select-refresh":return r.default.createElement(c.SelectRefresh,h({name:p,value:n,onChange:b,className:l},f));case"switch":return r.default.createElement(a.FormInputSwitch,h({name:p,value:n,onChange:function(e){return b(e.target.checked,e.target.name)},className:l},f));case"checkbox":return r.default.createElement(a.FormInputCheckbox,h({name:p,value:n,onChange:function(e){return b(e.target.checked,e.target.name)},className:l},f));case"toggle":return r.default.createElement(a.FormInputToggle,h({name:p,value:n,onChange:b,className:l},f));case"color":return r.default.createElement(a.FormInputColor,h({name:p,value:n,onChange:b,className:l},f));case"file":return r.default.createElement(a.FormInputFileSelect,h({name:p,value:n,onChange:b,className:l},f));case"sql":return r.default.createElement(a.FormInputSQL,h({name:p,value:n,onChange:m,className:l,noLabel:d},f));case"note":return r.default.createElement(a.FormNote,h({className:l},f));case"datetimepicker":return r.default.createElement(a.FormInputDateTimePicker,h({name:p,value:n,onChange:b,className:l},f));default:return r.default.createElement(a.PlainString,h({value:n},f))}}function _(e){var t=e.cell,n=e.value,o=e.id,l=e.optionsLoaded,s=e.onCellChange,u=e.visible,c=e.reRenderRow,d=g(e,["cell","value","id","optionsLoaded","onCellChange","visible","reRenderRow"]),f=o,p=(0,r.useCallback)((function(e){var t=e;e&&e.target&&(t=e.target.value),s&&s(t)}),[]),b=(0,r.useCallback)((function(e){l&&l(e),c&&c()}),[]);if(!u)return r.default.createElement(r.default.Fragment,null);switch(t){case"int":return r.default.createElement(a.InputText,h({name:f,value:n,onChange:p},d,{type:"int"}));case"numeric":return r.default.createElement(a.InputText,h({name:f,value:n,onChange:p},d,{type:"numeric"}));case"text":case"password":return r.default.createElement(a.InputText,h({name:f,value:n,onChange:p},d));case"select":return r.default.createElement(a.InputSelect,h({name:f,value:n,onChange:p,optionsLoaded:b},d));case"switch":return r.default.createElement(a.InputSwitch,h({name:f,value:n,onChange:function(e){return p(e.target.checked,e.target.name)}},d));case"checkbox":return r.default.createElement(a.InputCheckbox,h({name:f,value:n,onChange:function(e){return p(e.target.checked,e.target.name)}},d));case"privilege":return r.default.createElement(i.default,h({name:f,value:n,onChange:p},d));case"datetimepicker":return r.default.createElement(a.InputDateTimePicker,h({name:f,value:n,onChange:p},d));default:return r.default.createElement(a.PlainString,h({value:n},d))}}v.propTypes={type:s.default.oneOfType([s.default.string,s.default.func]).isRequired,value:s.default.any,id:s.default.oneOfType([s.default.string,s.default.number]).isRequired,onChange:s.default.func,className:s.default.oneOfType([s.default.string,s.default.object]),visible:s.default.bool,inputRef:u.default.ref,noLabel:s.default.bool},_.propTypes={cell:s.default.oneOfType([s.default.string,s.default.func]).isRequired,value:s.default.any,id:s.default.oneOfType([s.default.string,s.default.number]).isRequired,onChange:s.default.func,reRenderRow:s.default.func,optionsLoaded:s.default.func,onCellChange:s.default.func,visible:s.default.bool};var w=["mode","value","readonly","disabled","hasError","id","label","options","optionsLoaded","controlProps","schema","inputRef","visible","autoFocus","helpMessage","className","optionsReloadBasis"],O=["type","onChange","state","noLabel","text"],S=["cell","onCellChange","row","reRenderRow"];t.MappedFormControl=function(e){var t=m({},e),n=(0,l.evalFunc)(null,t.type,t.state);return"object"===p(n)?t=m(m({},t),n):t.type=n,r.default.createElement(v,o.default.pick(t,o.default.union(w,O)))};t.MappedCellControl=function(e){var t=m({},e),n=(0,l.evalFunc)(null,t.cell,t.row);return"object"===p(n)?t=m(m({},t),n):t.cell=n,r.default.createElement(_,o.default.pick(t,o.default.union(w,S)))}},89406:(e,t,n)=>{n(47941),n(82526),n(38880),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(41539),n(66992),n(33948),n(57327),n(82772),n(23157),n(89554),n(54747),n(69070);var r,o=(r=n(96486))&&r.__esModule?r:{default:r};function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._defaults=t,this.keys=null,this.filterGroups=[],this.informText=null,this._top=null}var t,n,r;return t=e,(n=[{key:"top",get:function(){return this._top},set:function(e){this._top=e}},{key:"origData",get:function(){return this._origData||{}},set:function(e){this._origData=e}},{key:"sessData",get:function(){return this._sessData||{}},set:function(e){throw new Error("Property sessData is readonly.",e)}},{key:"defaults",get:function(){return this._defaults||{}}},{key:"idAttribute",get:function(){return"id"}},{key:"baseFields",get:function(){throw new Error("Property method 'baseFields()' must be implemented.")}},{key:"fields",get:function(){var e=this;return this.baseFields.filter((function(t){var n;return n=-1==e.filterGroups.indexOf(t.group),e.keys&&(n=n&&e.keys.indexOf(t.id)>-1),n}))}},{key:"initialise",value:function(){}},{key:"isNew",value:function(e){return o.default.isUndefined(e)&&(e=this.origData),o.default.has(e,this.idAttribute)?o.default.isUndefined(e[this.idAttribute])||o.default.isNull(e[this.idAttribute]):!o.default.has(e,"cid")||!e.cid.startsWith("nn")}},{key:"validate",value:function(){return!1}},{key:"getNewData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};return this.fields.forEach((function(t){n[t.id]=e.defaults[t.id]})),n=i(i({},n),t)}},{key:"addDisabled",value:function(){return!1}},{key:"inCatalog",value:function(){return!(!this.nodeInfo||!("catalog"in this.nodeInfo))}},{key:"getServerVersion",value:function(){if(!o.default.isUndefined(this.nodeInfo)&&!o.default.isUndefined(this.nodeInfo.server)&&!o.default.isUndefined(this.nodeInfo.server.version))return this.nodeInfo.server.version}}])&&s(t.prototype,n),r&&s(t,r),e}();t.default=u},52237:(e,t,n)=>{n(82526),n(38880),n(49337),n(33321),n(47042),n(91038),n(78783),n(41817),n(32165),n(79753),n(19601),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.default=re,t.SCHEMA_STATE_ACTIONS=t.StateUtilsContext=void 0,n(89554),n(54747),n(47941),n(41539),n(39714),n(83710),n(23157),n(21249),n(69826),n(34553),n(92222),n(69600),n(57327),n(82772),n(66992),n(33948),n(40561),n(32564),n(17727),n(88674),n(68309),n(15306),n(74916),n(69070);var r=R(n(67294)),o=n(65770),a=T(n(64566)),i=T(n(53375)),l=T(n(19439)),s=T(n(80366)),u=T(n(36782)),c=T(n(51159)),d=T(n(59067)),f=T(n(31682)),p=T(n(96486)),b=n(93299),m=T(n(4394)),y=n(87451),h=T(n(85650)),g=n(76055),v=n(26850),_=T(n(91669)),w=T(n(89406)),O=R(n(75835)),S=n(81922),j=T(n(45697)),P=T(n(41832)),x=n(2832),C=R(n(64519)),E=T(n(57674)),k=T(n(8593)),D=n(50464);function T(e){return e&&e.__esModule?e:{default:e}}function N(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return N=function(){return e},e}function R(e){if(e&&e.__esModule)return e;if(null===e||"object"!==B(e)&&"function"!=typeof e)return{default:e};var t=N();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||F(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=F(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function F(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=(0,o.makeStyles)((function(e){return{root:{display:"flex",flexDirection:"column",height:"100%"},form:{flexGrow:1,position:"relative",minHeight:0,display:"flex",flexDirection:"column"},footer:V({padding:e.spacing(1),background:e.otherVars.headerBg,display:"flex",zIndex:1010},e.mixins.panelBorder.top),mappedControl:{paddingBottom:e.spacing(1)},buttonMargin:{marginRight:"0.5rem"}}})),W=r.default.createContext();function G(e,t){var n=!(p.default.isUndefined(e)||p.default.isUndefined(t)||p.default.isNull(e)||p.default.isNull(t));return!!(p.default.isEqual(e,t)||(null===e||p.default.isUndefined(e))&&""===t||(null===e||p.default.isUndefined(e))&&"boolean"==typeof t&&!t||n&&p.default.isEqual(e.toString(),t.toString()))}function K(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a="edit"===t.mode,i=function e(n,i,l){var s={};e.depth=p.default.isUndefined(e.depth)?0:e.depth+1;var u=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return G(p.default.get(i,t),p.default.get(l,t))&&!o?void 0:(n=n||p.default.get(l,t),r&&(p.default.isArray(n)||p.default.isObject(n))&&(n=JSON.stringify(n)),p.default.isNull(n)&&0===e.depth&&(n=""),s[t]=n)};return n.fields.forEach((function(r){if((0,O.getFieldMetaData)(r,n,{},t,!0).modeSupported&&(!r.skipChange||o))if("string"==typeof r.type&&r.type.startsWith("nested-"))s=V(V({},s),e(r.schema,i,l));else if(a&&!p.default.isEqual(p.default.get(i,r.id),p.default.get(l,r.id))){var c=null;if("collection"===r.type){var d=(0,f.default)(p.default.get(i,r.id)||[],p.default.get(l,r.id)||[],"cid");if(c={},d.added.length>0&&(c.added=X(d.added,t.keepCid)),d.removed.length>0&&(c.deleted=X(d.removed.map((function(e){return p.default.find(p.default.get(i,r.id),["cid",e.cid])})),t.keepCid)),d.updated.length>0){c.changed=[];var b,m=L(d.updated);try{var y=function(){var t,n=b.value,o=p.default.findIndex(p.default.get(l,r.id),(function(e){return e.cid==n.cid}));t=e(r.schema,p.default.get(i,[r.id,o]),p.default.get(l,[r.id,o]));var a=p.default.get(l,[r.id,o,r.schema.idAttribute]);p.default.isUndefined(a)?c.changed.push(V(V({},n),t)):c.changed.push(V(H({},r.schema.idAttribute,a),t))};for(m.s();!(b=m.n()).done;)y()}catch(e){m.e(e)}finally{m.f()}c.changed=X(c.changed,t.keepCid)}Object.keys(c).length>0&&u(r.id,c,!0)}else u(r.id)}else if(!a)if("collection"===r.type){var h=(0,f.default)(p.default.get(i,r.id)||[],p.default.get(l,r.id)||[],"cid");if(!p.default.isUndefined(r.fixedRows)&&h.updated.length>0||p.default.isUndefined(r.fixedRows)&&(h.added.length>0||h.removed.length>0||h.updated.length>0)){var g=X(p.default.get(l,r.id),t.keepCid);u(r.id,g,!0)}}else u(r.id)})),e.depth--,s};return i(e,e.origData,n)}function $(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;t=t||{};var a,i=L(e.fields);try{var l=function(){var i=a.value;if(e.idAttribute==i.id)return"continue";if(i.schema&&i.schema instanceof w.default){if("collection"===i.type){var l=t[i.id]||[],s=r.concat(i.id);if((0,g.checkUniqueCol)(l,i.uniqueCol)>0){var u=p.default.filter(i.schema.fields,(function(e){return i.uniqueCol.indexOf(e.id)>-1})).map((function(e){return e.label})).join(", ");return(0,g.isEmptyString)(i.label)?n(s,(0,_.default)("%s must be unique.",u)):n(s,(0,_.default)("%s in %s must be unique.",u,i.label)),{v:!0}}var c,d=L(l.entries());try{for(d.s();!(c=d.n()).done;){var f=I(c.value,2),b=f[0],m=f[1];if($(i.schema,m,n,s.concat(b),i.label))return{v:!0}}}catch(e){d.e(e)}finally{d.f()}}else if($(i.schema,t,n,r))return{v:!0}}else{var y=t[i.id],h=null;if(i.noEmpty){var v=i.label;o&&(v=(0,_.default)("%s in %s",i.label,o)),i.noEmptyLabel&&(v=i.noEmptyLabel),h=(0,g.emptyValidator)(v,y)}if(h||"int"!=i.type&&"numeric"!=i.type||(h=(0,g.minMaxValidator)(i.label,y,i.min,i.max)),h||"int"!=i.type?h||"numeric"!=i.type||(h=(0,g.numberValidator)(i.label,y)):h=(0,g.integerValidator)(i.label,y),h)return n(r.concat(i.id),h),{v:!0}}};for(i.s();!(a=i.n()).done;){var s=l();if("continue"!==s&&"object"===B(s))return s.v}}catch(e){i.e(e)}finally{i.f()}return e.validate(t,(function(e,t){return n(r.concat(e),t)}))}t.StateUtilsContext=W;var Q={INIT:"init",SET_VALUE:"set_value",ADD_ROW:"add_row",DELETE_ROW:"delete_row",RERENDER:"rerender",CLEAR_DEFERRED_QUEUE:"clear_deferred_queue",DEFERRED_DEPCHANGE:"deferred_depchange"};t.SCHEMA_STATE_ACTIONS=Q;var J=function(e,t,n,r){return r.depChange&&(t=r.depChange(e,t,{type:r.type,path:r.path,value:r.value,oldState:p.default.cloneDeep(n),listener:r.listener})),t},Y=function(e,t){var n,r,o,a=p.default.cloneDeep(e);switch(a.__deferred__=a.__deferred__||[],t.type){case Q.INIT:a=t.payload;break;case Q.SET_VALUE:p.default.set(a,t.path,t.value),a=J(t.path,a,e,t),o=function(e,t,n,r){if(r.deferredDepChange)return r.deferredDepChange(e,t,{type:r.type,path:r.path,value:r.value,depChange:r.depChange,oldState:p.default.cloneDeep(n)})}(t.path,a,e,t),a.__deferred__=o||[];break;case Q.ADD_ROW:r=p.default.uniqueId("c"),t.value.cid=r,n=(p.default.get(a,t.path)||[]).concat(t.value),p.default.set(a,t.path,n),a=J(t.path,a,e,t);break;case Q.DELETE_ROW:(n=p.default.get(a,t.path)||[]).splice(t.value,1),p.default.set(a,t.path,n),a=J(t.path,a,e,t);break;case Q.CLEAR_DEFERRED_QUEUE:a.__deferred__=[];break;case Q.DEFERRED_DEPCHANGE:a=J(t.path,a,e,t)}return a};function X(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!e||t?e:e.map((function(e){return p.default.pickBy(e,(function(e,t){return"cid"!=t}))}))}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return p.default.isPlainObject(e)?p.default.forIn(e,(function(e){p.default.isObject(e)&&Z(e,t)})):p.default.isArray(e)&&e.forEach((function(e){p.default.isPlainObject(e)&&(e.cid=t?p.default.uniqueId("c"):p.default.uniqueId("nn"),Z(e,t))})),e}function ee(e){var t,n=e.getInitData,a=e.viewHelperProps,d=e.schema,f=void 0===d?{}:d,m=e.showFooter,g=void 0===m||m,v=e.isTabView,w=void 0===v||v,j=A(e,["getInitData","viewHelperProps","schema","showFooter","isTabView"]),P=z(),E=I((0,r.useState)(!1),2),k=E[0],T=E[1],N=I((0,r.useState)({}),2),R=N[0],M=N[1],B=I((0,r.useState)(""),2),L=B[0],F=B[1],q=I((0,r.useState)(!1),2),U=q[0],H=q[1],G=I((0,r.useState)(!1),2),J=G[0],X=G[1],ee=I((0,r.useState)(0),2),te=ee[0],ne=ee[1],re=(0,r.useRef)(),oe=f.isNew(f.origData),ae=(0,D.useIsMounted)(),ie=(0,r.useRef)(new C.default),le=I((0,r.useReducer)(Y,{}),2),se=le[0],ue=le[1];(0,r.useEffect)((function(){if(J){f._sessData=se,$(f,se,(function(e,t){t&&M({name:e,message:t})}))||M({});var e=K(f,a,se,!1,!1),t=Object.keys(e).length>0;T(t),j.onDataChange&&j.onDataChange(t,e)}}),[se,J]),(0,r.useEffect)((function(){var e;if((null===(e=se.__deferred__)||void 0===e?void 0:e.length)>0){ue({type:Q.CLEAR_DEFERRED_QUEUE});var t=se.__deferred__[0];t.promise.then((function(e){ue({type:Q.DEFERRED_DEPCHANGE,path:t.action.path,depChange:t.action.depChange,listener:V(V({},t.listener),{},{callback:e})})}))}}),[null===(t=se.__deferred__)||void 0===t?void 0:t.length]),(0,r.useEffect)((function(){var e=setTimeout((function(){re.current&&re.current.focus()}),250);if("edit"===a.mode){if(F("Loading..."),!n)throw new Error("getInitData must be passed for edit");n&&n().then((function(e){re.current,e=e||{},f.origData=Z(e||{}),f.initialise(f.origData),ue({type:Q.INIT,payload:f.origData}),X(!0),F("")}))}else f.origData=Z(f.defaults,!0),f.initialise(f.origData),ue({type:Q.INIT,payload:f.origData}),X(!0),F("");return function(){return clearTimeout(e)}}),[]),(0,r.useEffect)((function(){return ue({type:Q.INIT,payload:f.origData}),!0}),[j.resetKey]);var ce=function(e){j.onSave(oe,e).then((function(){f.informText&&(0,S.pgAlertify)().alert((0,_.default)("Warning"),f.informText)})).catch((function(e){console.error(e),M({name:"apierror",message:(0,x.parseApiError)(e)})})).finally((function(){ae()&&(H(!1),F(""))}))},de=(0,r.useCallback)((function(){M((function(e){return V(V({},e),{},{message:""})}))})),fe=function(e){ue(V(V({},e),{},{depChange:function(){var e;return(e=ie.current).getDepChange.apply(e,arguments)},deferredDepChange:function(){var e;return(e=ie.current).getDeferredDepChange.apply(e,arguments)}}))},pe=(0,r.useMemo)((function(){return{dataDispatch:fe,initOrigData:function(e,t){if(e){var n=Z(t);p.default.set(f.origData,e,n),fe({type:Q.SET_VALUE,path:e,value:n})}},formResetKey:te,formErr:R}}),[te,R]);return r.default.createElement(W.Provider,{value:pe},r.default.createElement(C.DepListenerContext.Provider,{value:ie.current},r.default.createElement(o.Box,{className:P.root},r.default.createElement(o.Box,{className:P.form},r.default.createElement(h.default,{message:L}),r.default.createElement(O.default,{value:se,viewHelperProps:a,schema:f,accessPath:[],dataDispatch:fe,hasSQLTab:j.hasSQL,getSQLValue:function(){if(k){if(R.name)return Promise.resolve("-- "+(0,_.default)("Definition incomplete."));var e=K(f,a,se);return"edit"!==a.mode?e=p.default.assign({},f.origData,e):e[f.idAttribute]=f.origData[f.idAttribute],j.getSQLValue(oe,(t=V({},e),Object.keys(t).forEach((function(e){var n=t[e];p.default.isObject(n)&&(t[e]=JSON.stringify(n))})),t))}return Promise.resolve("-- "+(0,_.default)("No updates."));var t},firstEleRef:re,isTabView:w}),r.default.createElement(b.FormFooterMessage,{type:b.MESSAGE_TYPE.ERROR,message:R.message,onClose:de})),g&&r.default.createElement(o.Box,{className:P.footer},(0,r.useMemo)((function(){return r.default.createElement(o.Box,null,r.default.createElement(y.PgIconButton,{"data-test":"sql-help",onClick:function(){return j.onHelp(!0,oe)},icon:r.default.createElement(u.default,null),disabled:j.disableSqlHelp,className:P.buttonMargin,title:"SQL help for this object type."}),r.default.createElement(y.PgIconButton,{"data-test":"dialog-help",onClick:function(){return j.onHelp(!1,oe)},icon:r.default.createElement(c.default,null),title:"Help for this dialog.",disabled:j.disableDialogHelp}))}),[]),r.default.createElement(o.Box,{marginLeft:"auto"},r.default.createElement(y.DefaultButton,{"data-test":"Close",onClick:j.onClose,startIcon:r.default.createElement(s.default,null),className:P.buttonMargin},(0,_.default)("Close")),r.default.createElement(y.DefaultButton,{"data-test":"Reset",onClick:function(){var e=function(){return re.current&&re.current.focus(),ne((function(e){return e+1})),ue({type:Q.INIT,payload:f.origData}),!0};j.confirmOnCloseReset?(0,S.pgAlertify)().confirm((0,_.default)("Warning"),(0,_.default)("Changes will be lost. Are you sure you want to reset?"),e,(function(){return!0})).set("labels",{ok:(0,_.default)("Yes"),cancel:(0,_.default)("No")}).show():e()},startIcon:r.default.createElement(l.default,null),disabled:!k||U,className:P.buttonMargin},(0,_.default)("Reset")),r.default.createElement(y.PrimaryButton,{"data-test":"Save",onClick:function(){H(!0),F("Saving...");var e=K(f,a,se);"edit"!==a.mode?e=p.default.assign({},f.origData,e):e[f.idAttribute]=f.origData[f.idAttribute],f.warningText?(0,S.pgAlertify)().confirm((0,_.default)("Warning"),f.warningText,(function(){ce(e)}),(function(){return H(!1),F(""),!0})):ce(e)},startIcon:r.default.createElement(i.default,null),disabled:!k||U||Boolean(R.name)||!J},(0,_.default)("Save")))))))}ee.propTypes={getInitData:j.default.func,viewHelperProps:j.default.shape({mode:j.default.string.isRequired,serverInfo:j.default.shape({type:j.default.string,version:j.default.number}),inCatalog:j.default.bool}).isRequired,schema:P.default.schemaUI,onSave:j.default.func,onClose:j.default.func,onHelp:j.default.func,onDataChange:j.default.func,confirmOnCloseReset:j.default.bool,isTabView:j.default.bool,hasSQL:j.default.bool,getSQLValue:j.default.func,disableSqlHelp:j.default.bool,disableDialogHelp:j.default.bool,showFooter:j.default.bool,resetKey:j.default.any};var te=(0,o.makeStyles)((function(e){return{root:{height:"100%",minHeight:0,display:"flex",flexDirection:"column"},controlRow:{marginBottom:e.spacing(1)},form:{padding:e.spacing(1),overflow:"auto",flexGrow:1},toolbar:V({padding:e.spacing(.5),background:e.palette.background.default},e.mixins.panelBorder.bottom),buttonMargin:{marginRight:"0.5rem"},noPadding:{padding:0}}}));function ne(e){var t=e.getInitData,n=e.viewHelperProps,i=e.schema,l=void 0===i?{}:i,s=A(e,["getInitData","viewHelperProps","schema"]),c=te(),f="General",b={},m={},g={},_=I((0,r.useState)({}),2),w=_[0],S=_[1],j=I((0,r.useState)(""),2),P=j[0],x=j[1],C=(0,D.useIsMounted)();(0,r.useEffect)((function(){x("Loading..."),t().then((function(e){e=e||{},l.initialise(e),C()&&(S(e||{}),x(""))}))}),[t]);var T=[];l.fields.forEach((function(e){var t=e.group,o=(0,O.getFieldMetaData)(e,l,w,n),a=o.visible,i=o.disabled,s=(o.readonly,o.modeSupported);t=t||f,e.isFullTab&&(m[t]=c.noPadding,T.push(t)),s&&(t=g[t]||t||f,e.helpMessageMode&&-1==e.helpMessageMode.indexOf(n.mode)&&(e.helpMessage=""),b[t]||(b[t]=[]),e&&"nested-fieldset"===e.type?b[t].push(r.default.createElement(E.default,M({key:"nested".concat(b[t].length),value:w,viewHelperProps:n,schema:e.schema,accessPath:[],controlClassName:c.controlRow},e,{visible:a}))):"collection"===e.type?b[t].push(r.default.createElement(k.default,{key:e.id,viewHelperProps:n,name:e.id,value:w[e.id],schema:e.schema,accessPath:[e.id],formErr:{},containerClassName:c.controlRow,canAdd:!1,canEdit:!1,canDelete:!1,visible:a})):"group"===e.type?(g[e.id]=e.label,a||l.filterGroups.push(e.label)):b[t].push(r.default.createElement(v.MappedFormControl,M({key:e.id,viewHelperProps:n,state:w,name:e.id,value:w[e.id]},e,{readonly:true,disabled:i,visible:a,className:e.isFullTab?null:c.controlRow,noLabel:e.isFullTab}))))}));var N=p.default.pickBy(b,(function(e,t){return l.filterGroups.indexOf(t)<=-1}));return r.default.createElement(o.Box,{className:c.root},r.default.createElement(h.default,{message:P}),r.default.createElement(o.Box,{className:c.toolbar},r.default.createElement(y.PgIconButton,{"data-test":"help",onClick:function(){return s.onHelp(!0,!1)},icon:r.default.createElement(u.default,null),disabled:s.disableSqlHelp,title:"SQL help for this object type.",className:c.buttonMargin}),r.default.createElement(y.PgIconButton,{"data-test":"edit",onClick:s.onEdit,icon:r.default.createElement(d.default,null),title:"Edit the object"})),r.default.createElement(o.Box,{className:c.form},r.default.createElement(o.Box,null,Object.keys(N).map((function(e){var t=e.replace(" ","");return r.default.createElement(o.Accordion,{key:t},r.default.createElement(o.AccordionSummary,{expandIcon:r.default.createElement(a.default,null),"aria-controls":"".concat(t,"-content"),id:"".concat(t,"-header")},e),r.default.createElement(o.AccordionDetails,{className:m[e]},r.default.createElement(o.Box,{style:{width:"100%"}},N[e])))})))))}function re(e){var t=e.formType,n=A(e,["formType"]);return"tab"===t?r.default.createElement(m.default,null,r.default.createElement(ne,n)):r.default.createElement(m.default,null,r.default.createElement(ee,n))}ne.propTypes={getInitData:j.default.func.isRequired,viewHelperProps:j.default.shape({mode:j.default.string.isRequired,serverInfo:j.default.shape({type:j.default.string,version:j.default.number}),inCatalog:j.default.bool}).isRequired,schema:P.default.schemaUI,onHelp:j.default.func,disableSqlHelp:j.default.bool,onEdit:j.default.func},re.propTypes={formType:j.default.oneOf(["tab","dialog"])}},24912:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.createMuiTheme)(e,{palette:{default:{main:"#6b6b6b",contrastText:"#fff",borderColor:"#2e2e2e",disabledBorderColor:"#2e2e2e",disabledContrastText:"#fff",hoverMain:"#303030",hoverContrastText:"#fff",hoverBorderColor:"#2e2e2e"},primary:{main:"#234d6e",light:"#323E43",contrastText:"#fff",hoverMain:(0,o.darken)("#234d6e",.25),hoverBorderColor:(0,o.darken)("#234d6e",.25),disabledMain:"#234d6e"},success:{main:"#26852B",light:"#2B472C",contrastText:"#000"},error:{main:"#da6758",light:"#212121",contrastText:"#fff",lighter:"#212121"},warning:{main:"#eea236",light:"#b18d5a",contrastText:"#fff"},info:{main:"#fde74c"},grey:{200:"#424242",400:"#303030",600:"#2e2e2e",800:"#212121"},text:{primary:"#d4d4d4",muted:"#8A8A8A"},checkbox:{disabled:"#6b6b6b"},background:{paper:"#212121",default:"#212121"}},custom:{icon:{main:"#6b6b6b",contrastText:"#fff",borderColor:"#2e2e2e",disabledMain:"#6b6b6b",disabledContrastText:"#fff",disabledBorderColor:"#2e2e2e",hoverMain:"#303030",hoverContrastText:"#fff"}},otherVars:{borderColor:"#4a4a4a",inputBorderColor:"#6b6b6b",inputDisabledBg:"inherit",headerBg:"#424242",activeColor:"#d4d4d4",tableBg:"#424242",activeStepBg:"#234d6e",activeStepFg:"#FFFFFF",stepBg:"#FFFFFF",stepFg:"#000",toggleBtnBg:"#000"}})};var r=n(30398),o=n(59114)},89592:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.createMuiTheme)(e,{palette:{default:{main:"transparent",contrastText:"#84d6ff",borderColor:"#84d6ff",disabledBorderColor:"#8B9CAD",disabledContrastText:"#8B9CAD",hoverMain:"transparent",hoverContrastText:"#fff",hoverBorderColor:"#fff"},primary:{main:"#84D6FF",light:"#84D6FF",contrastText:"#010B15",hoverMain:"#fff",hoverBorderColor:"#fff",disabledMain:"#8B9CAD"},success:{main:"#45D48A",light:"#010B15",contrastText:"#000"},error:{main:"#EE7A55",light:"#EE7A55",contrastText:"#010B15"},warning:{main:"#F4D35E",light:"#F4D35E",contrastText:"#010B15"},info:{main:"#fde74c"},grey:{200:"#8B9CAD",400:"#2D3A48",600:"#1F2932",800:"#010B15"},text:{primary:"#fff",muted:"#8b9cac"},checkbox:{disabled:"#6b6b6b"},background:{paper:"#010B15",default:"#010B15"}},custom:{icon:{main:"#010B15",contrastText:"#fff",borderColor:"#fff",disabledMain:"#1F2932",disabledContrastText:"#8B9CAD",disabledBorderColor:"#8B9CAD",hoverMain:"#fff",hoverContrastText:"#010B15"}},otherVars:{borderColor:"#4a4a4a",inputBorderColor:"#6b6b6b",inputDisabledBg:"#1F2932",headerBg:"#010B15",activeColor:"#d4d4d4",tableBg:"#010B15",activeStepBg:"#84D6FF",activeStepFg:"#010b15",stepBg:"#FFFFFF",stepFg:"#000",toggleBtnBg:"#6B6B6B"}})};var r=n(30398)},4394:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(4129),n(41539),n(78783),n(66992),n(33948),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.default=h,n(69070);var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(67294)),i=n(30398),l=d(n(41832)),s=d(n(84272)),u=d(n(24912)),c=d(n(89592));function d(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=(0,i.createMuiTheme)();function h(e){var t=(0,a.useMemo)((function(){var e,t=null===(e=document.querySelector("link[data-theme]"))||void 0===e?void 0:e.getAttribute("data-theme"),n=(0,s.default)(y);switch(t){case"dark":n=(0,u.default)(n);break;case"high_contrast":n=(0,c.default)(n)}return function(e){var t={panelBorder:{border:"1px solid "+e.otherVars.borderColor,top:{borderTop:"1px solid "+e.otherVars.borderColor},bottom:{borderBottom:"1px solid "+e.otherVars.borderColor},right:{borderRight:"1px solid "+e.otherVars.borderColor}},nodeIcon:{backgroundPosition:"center",padding:e.spacing(0,1.5)}};return(0,i.createMuiTheme)({mixins:t,overrides:{MuiOutlinedInput:{root:{"&.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:e.otherVars.inputBorderColor}},notchedOutline:{borderColor:e.otherVars.inputBorderColor}},MuiFormControlLabel:{label:{"&.Mui-disabled":{color:e.palette.text.muted}}},MuiTabs:{root:b({backgroundColor:e.otherVars.headerBg},t.panelBorder.bottom),indicator:{backgroundColor:e.otherVars.activeColor}},MuiFormLabel:{root:{color:e.palette.text.primary,fontSize:e.typography.fontSize},asterisk:{color:e.palette.error.main}},MuiInputBase:{root:{backgroundColor:e.palette.background.default,textOverflow:"ellipsis","&.Mui-disabled":{backgroundColor:e.otherVars.inputDisabledBg}},inputMultiline:{fontSize:e.typography.fontSize,height:"unset",backgroundColor:e.palette.background.default,"&[readonly], &.Mui-disabled":{color:e.palette.text.muted,backgroundColor:e.otherVars.inputDisabledBg}},input:{fontSize:e.typography.fontSize,height:"unset",backgroundColor:e.palette.background.default,"&[readonly], &.Mui-disabled":{color:e.palette.text.muted,backgroundColor:e.otherVars.inputDisabledBg}}},MuiIconButton:{root:{color:e.palette.text.primary,"&$disabled":{color:"abc"}}},MuiAccordion:{root:b({},t.panelBorder)},MuiAccordionSummary:{root:b(b({},t.panelBorder.bottom),{},{backgroundColor:e.otherVars.headerBg})},MuiToggleButtonGroup:{groupedHorizontal:{"&:not(:first-child)":{borderLeft:"abc"}}},MuiSwitch:{root:{width:54,height:28,padding:"7px 12px"},colorPrimary:{"&$disabled":{color:"abc","& + .MuiSwitch-track":{backgroundColor:"abc"}}},switchBase:{padding:e.spacing(.5),"&$disabled":{color:"abc","& + .MuiSwitch-track":{opacity:e.palette.action.disabledOpacity}},"&.Mui-checked":{color:e.palette.success.main,transform:"translateX(24px)","& .MuiSwitch-thumb":{border:0}},"&.Mui-checked + .MuiSwitch-track":{backgroundColor:e.palette.success.light}},thumb:{border:"1px solid "+e.otherVars.inputBorderColor},track:{backgroundColor:e.otherVars.toggleBtnBg}},MuiCheckbox:{root:{padding:"0px",color:e.otherVars.inputBorderColor},colorPrimary:{"&.Mui-disabled":{color:e.palette.checkbox.disabled}}},MuiToggleButton:{root:{padding:"abc",paddingRight:e.spacing(2.5),paddingLeft:e.spacing(.5),color:"abc","&:hover":{backgroundColor:"abc"},"&$selected":{color:"abc",backgroundColor:"abc","&:hover":{backgroundColor:"abc"}}}},MuiFormHelperText:{root:{color:e.palette.text.muted}}}},e)}(n)}),[]);return a.default.createElement(i.ThemeProvider,{theme:t},e.children)}y=(0,i.createMuiTheme)(y,{typography:{fontSize:14,htmlFontSize:14},shape:{borderRadius:4},palette:{action:{disabledOpacity:.32}},overrides:{MuiTabs:{root:{minHeight:0}},PrivateTabIndicator:{root:{height:"3px",transition:y.transitions.create(["all"],{duration:"150ms"})}},MuiTab:{root:(o={textTransform:"none",minHeight:0,padding:"5px 10px"},m(o,y.breakpoints.up("xs"),{minWidth:0}),m(o,y.breakpoints.up("sm"),{minWidth:0}),m(o,y.breakpoints.up("md"),{minWidth:0}),m(o,y.breakpoints.up("lg"),{minWidth:0}),o),textColorInherit:{textTransform:"none",opacity:1}},MuiButton:{root:{textTransform:"none,",padding:y.spacing(.5,1.5),"&.Mui-disabled":{opacity:.65}},contained:{boxShadow:"none","&:hover":{boxShadow:"none"}},outlined:{padding:y.spacing(.375,1)},startIcon:{marginRight:y.spacing(.5)}},MuiOutlinedInput:{multiline:{padding:"0px"},input:{padding:y.spacing(.75,1.5),borderRadius:"inherit"},inputMultiline:{padding:y.spacing(.75,1.5)},adornedEnd:{paddingRight:y.spacing(1.5)}},MuiAccordion:{root:{boxShadow:"none"}},MuiAccordionSummary:{root:{minHeight:0,"&.Mui-expanded":{minHeight:0},padding:y.spacing(0,1),fontWeight:y.typography.fontWeightBold},content:{margin:y.spacing(1),"&.Mui-expanded":{margin:y.spacing(1)}},expandIcon:{order:-1}},MuiAccordionDetails:{root:{padding:y.spacing(1)}},MuiFormControlLabel:{root:{marginBottom:0,marginLeft:0,marginRight:0}},MuiFormHelperText:{root:{fontSize:"1em"},contained:{marginLeft:0,marginRight:0}},MuiTypography:{body1:{fontSize:"1em"}},MuiDialog:{paper:{margin:0}},MuiTooltip:{popper:{top:0,zIndex:9999}}},transitions:{duration:{shortest:50,shorter:100,short:150,standard:200,complex:175,enteringScreen:125,leavingScreen:95}},props:{MuiTextField:{variant:"outlined"},MuiButton:{disableTouchRipple:!0},MuiIconButton:{size:"small",disableTouchRipple:!0},MuiAccordion:{defaultExpanded:!0},MuiTab:{textColor:"inherit"},MuiCheckbox:{disableTouchRipple:!0}}}),h.propTypes={children:l.default.children}},84272:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.createMuiTheme)(e,{palette:{default:{main:"#fff",contrastText:"#222",borderColor:"#bac1cd",disabledBorderColor:"#bac1cd",disabledContrastText:"#222",hoverMain:"#ebeef3",hoverContrastText:"#222",hoverBorderColor:"#bac1cd"},primary:{main:"#326690",light:"#d6effc",contrastText:"#fff",hoverMain:(0,o.darken)("#326690",.25),hoverBorderColor:(0,o.darken)("#326690",.25),disabledMain:"#326690"},success:{main:"#26852B",light:"#D9ECDA",contrastText:"#000"},error:{main:"#CC0000",light:"#FAECEC",contrastText:"#fff"},warning:{main:"#eea236",light:"#fce5c5",contrastText:"#000"},info:{main:"#fde74c"},grey:{200:"#f3f5f9",400:"#ebeef3",600:"#bac1cd",800:"#848ea0"},text:{primary:"#222",muted:"#646B82"},checkbox:{disabled:"#ebeef3"},background:{paper:"#fff",default:"#fff"}},custom:{icon:{main:"#fff",contrastText:"#222",borderColor:"#bac1cd",disabledMain:"#fff",disabledContrastText:"#222",disabledBorderColor:"#bac1cd",hoverMain:"#ebeef3",hoverContrastText:"#222"}},otherVars:{reactSelect:{padding:"5px 8px"},borderColor:"#dde0e6",loader:{backgroundColor:(0,o.fade)("#000",.65),color:"#fff"},inputBorderColor:"#dde0e6",inputDisabledBg:"#f3f5f9",headerBg:"#fff",activeColor:"#326690",tableBg:"#fff",activeStepBg:"#326690",activeStepFg:"#FFFFFF",stepBg:"#ddd",stepFg:"#000",toggleBtnBg:"#000"}})};var r=n(30398),o=n(59114)},35433:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Dialog=void 0,n(82772),n(69070);var r=i(n(91669)),o=n(13717),a=i(n(12030));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n,r,o,i,s){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:a.default;l(this,e),this.errorAlertTitle=t,this.alertify=i,this.pgBrowser=r,this.jquery=o,this.dialogModel=s,this.backform=u,this.dialogContainerSelector=n}var t,n,i;return t=e,(n=[{key:"retrieveAncestorOfTypeServer",value:function(e){var t=null,n=e||this.pgBrowser.tree.selected(),o=this.pgBrowser.tree.findNodeByDomElement(n);if(o){var a,i=o.ancestorNode((function(e){return"database"===(a=e.getData())._type})),l=function(e){return"server"===(a=e.getData())._type};null!==i?a._label.indexOf("=")>=0?this.alertify.alert((0,r.default)(this.errorAlertTitle),(0,r.default)("Databases with = symbols in the name cannot be backed up or restored using this utility.")):i.anyParent(l)&&(t=a):o.anyFamilyMember(l)&&(t=a)}return null===t&&this.alertify.alert((0,r.default)(this.errorAlertTitle),(0,r.default)("Please select server or child node from the browser tree.")),t}},{key:"dialogName",value:function(){}},{key:"createOrGetDialog",value:function(e,t){var n=this.dialogName(t);if(!this.alertify[n]){var r=this;this.alertify.dialog(n,(function(){return r.dialogFactory(e,t)}))}return this.alertify[n]}},{key:"dialogFactory",value:function(e,t){return new o.DialogFactory(this.pgBrowser,this.jquery,this.alertify,this.dialogModel,this.backform,this.dialogContainerSelector).create(e,t)}},{key:"canExecuteOnCurrentDatabase",value:function(e){var t=this.pgBrowser.tree.getTreeNodeHierarchy(e);return!(t.database&&t.database._label.indexOf("=")>=0&&(this.alertify.alert((0,r.default)(this.errorAlertTitle),(0,r.default)("Databases with = symbols in the name cannot be backed up or restored using this utility.")),1))}}])&&s(t.prototype,n),i&&s(t,i),e}();t.Dialog=u},13717:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.DialogFactory=void 0,n(69070);var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(64951)),i=n(9066),l=(o=n(10713))&&o.__esModule?o:{default:o};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n,r,o,a,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pgBrowser=t,this.jquery=n,this.alertify=r,this.dialogModel=o,this.backform=a,this.dialogContainerSelector=i}var t,n,r;return t=e,(n=[{key:"create",value:function(e,t){return"restore"===t?this.createRestoreDialog(e,t):"search_objects"===t?this.createSearchObjectsDialog(e,t):this.createBackupDialog(e,t)}},{key:"createRestoreDialog",value:function(e,t){return new i.RestoreDialogWrapper(this.dialogContainerSelector,e,t,this.jquery,this.pgBrowser,this.alertify,this.dialogModel,this.backform)}},{key:"createBackupDialog",value:function(e,t){return new a.BackupDialogWrapper(this.dialogContainerSelector,e,t,this.jquery,this.pgBrowser,this.alertify,this.dialogModel,this.backform)}},{key:"createSearchObjectsDialog",value:function(e,t){return new l.default(this.dialogContainerSelector,e,t,this.jquery,this.pgBrowser,this.alertify,this.dialogModel,this.backform)}}])&&u(t.prototype,n),r&&u(t,r),e}();t.DialogFactory=c},22378:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.DialogWrapper=void 0,n(68309),n(69826),n(69070);var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(44092)),i=(o=n(19755))&&o.__esModule?o:{default:o};function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n,r,o,a,i,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks={onclose:function(){this.view&&this.view.remove({data:!0,internal:!0,silent:!0})}},this.dialogContainerSelector=t,this.dialogTitle=n,this.jquery=r,this.pgBrowser=o,this.alertify=a,this.dialogModel=i,this.backform=l}var t,n,r;return t=e,(n=[{key:"build",value:function(){this.alertify.pgDialogBuild.apply(this)}},{key:"wasHelpButtonPressed",value:function(e){return"dialog_help"===e.button.element.name||"object_help"===e.button.element.name}},{key:"getSelectedNodeData",value:function(e){if(this.isNodeSelected(e)){var t=e.getData();return t||void 0}}},{key:"focusOnDialog",value:function(e){var t=(0,i.default)(e.elements.body).find(".backform-tab");t.attr("tabindex",-1),this.pgBrowser.keyboardNavigation.getDialogTabNavigator((0,i.default)(e.elements.dialog));var n=t.find(".tab-content:first > .tab-pane.active:first");0===n.length&&e.elements.content.innerHTML&&(n=(0,i.default)(e.elements.content)),a.findAndSetFocus(n)}},{key:"isNodeSelected",value:function(e){return e}}])&&s(t.prototype,n),r&&s(t,r),e}();t.DialogWrapper=u},2832:(e,t,n)=>{n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.default.create({headers:s(u({"Content-type":"application/json"},r.default.csrf_token_header,r.default.csrf_token),e)});return t},t.parseApiError=function(e){return e.response?"application/json"==e.response.headers["content-type"]?e.response.data.errormsg:e.response.statusText:e.request?(0,o.default)("Connection to pgAdmin server has been lost"):e.message},n(69070);var r=i(n(55112)),o=i(n(91669)),a=i(n(9669));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},61329:(e,t,n)=>{n(92222);var r,o=(r=n(81311))&&r.__esModule?r:{default:r};e.exports={generate_url:function(e,t,n,r,a,i){var l="";return o.default.each(o.default.sortBy(o.default.pick(t,a),(function(e){return e.priority})),(function(e){l="".concat(l,"/").concat(encodeURI(e._id))})),l=i?"".concat(l,"/").concat(i):"".concat(l,"/"),"".concat(e).concat(r,"/").concat(n).concat(l)}}},84059:()=>{},10416:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82526),n(69070),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(19601),n(4129),n(41539),n(78783),n(66992),n(33948),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.default=m,t.LineChart=function(e){return o.default.createElement(m,u({},e,{type:"line"}))},n(47941),n(82772);var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(67294)),a=l(n(17757)),i=l(n(45697));function l(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var b={responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:0,borderWidth:2,fill:!1}},layout:{padding:8},hover:{animationDuration:0}};function m(e){var t=e.type,n=void 0===t?"line":t,r=e.id,i=e.options,l=e.data,s=e.redraw,u=void 0!==s&&s,c=p(e,["type","id","options","data","redraw"]),f=o.default.useRef(),m=o.default.useRef(),y=a.default.helpers.configMerge(b,i),h=function(){var e=f.current.getContext("2d");m.current=new a.default(e,{type:n,data:l,options:y}),c.onInit&&c.onInit(m.current)},g=function(){m.current&&m.current.destroy()};return(0,o.useEffect)((function(){return h(),g}),[]),(0,o.useEffect)((function(){if(void 0!==m.current){m.current.data=l;for(var e=0;e<m.current.data.datasets.length;e++)m.current.data.datasets[e]=d(d({},m.current.data.datasets[e]),l.datasets[e]);m.current.options=y,m.current.update(c.updateOptions||{}),c.onUpdate&&c.onUpdate(m.current)}}),[l,i]),(0,o.useEffect)((function(){u&&(g(),h())}),[u]),o.default.createElement("canvas",{id:r,ref:f})}m.propTypes={type:i.default.string.isRequired,id:i.default.string,data:i.default.object.isRequired,options:i.default.object,redraw:i.default.bool,updateOptions:i.default.object,onInit:i.default.func,onUpdate:i.default.func}},86620:(e,t,n)=>{var r,o;n(23157),n(15306),n(74916),n(82772),r=[n(19755),n(81311)],void 0===(o=function(e,t){return function(e,n){if(t.isUndefined(n)||t.isNull(n))return!0;n.startsWith("coll-")&&(n=n.replace("coll-",""));if(t.indexOf(["server_group","server","catalog_object_column"],n)>=0)return!0;var r=e.get_preference("browser","show_node_"+n);return!r||r.value}}.apply(t,r))||(e.exports=o)},90338:(e,t,n)=>{var r,o,a,i;function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=n.nmd(e),n(94986),n(82772),n(26699),n(32023),n(92222),n(24603),n(74916),n(39714),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),i=function(e){function t(e,t,n,r){return e>0&&(!t.includes(n)&&function(e,t){var n="\\b\\".concat(t,"\\s*\\(\\w*\\)(?!\\w)|\\b\\").concat(t,"\\(\\w*\\)(?!\\w)|\\b\\").concat(t,"\\s*(?!\\w)");return null!==RegExp(n,"g").exec(e)}(t,r)||(e=-1)),e}e.registerHelper("fold","sql",(function(n,r){return function(n,r,o){for(var a,i,l=r.line,s=n.getLine(l),u=s.length,c=0,d=o[c].start,f=o[c].end;u>0;){var p=s.toUpperCase().lastIndexOf(d,u),b=d,m=f;if((p=t(p,s.toUpperCase(),f,d))<r.ch){if(++c>=o.length)return;d=o[c].start,f=o[c].end,u=s.length}else{if(i=n.getTokenAt(e.Pos(l,p+1)).type,!/^(comment|string)/.test(i)){a=p;break}u=p-1}}if(!(null==a||s.toUpperCase().lastIndexOf(b)>a)){var y,h,g=1,v=n.lineCount();e:for(var _=l+1;_<v;++_)for(var w=n.getLine(_).toUpperCase(),O=0,S=0;S<1;){var j=w.indexOf(b,O);j=t(j,w,m,b);var P=w.indexOf(m,O);if(j<0&&(j=w.length),P<0&&(P=w.length),(O=Math.min(j,P))==w.length){S=1;break}if(n.getTokenAt(e.Pos(_,O+1)).type==i)if(O==j)++g;else if(!--g){y=_,h=O;break e}++O}if(null!=y&&y!=l+1)return{from:e.Pos(l,a+d.length),to:e.Pos(y,h)}}}(n,r,[{start:"BEGIN",end:"END;"},{start:"IF",end:"END IF"},{start:"LOOP",end:"END LOOP"},{start:"CASE",end:"END CASE"}])}))},"object"==l(t)&&"object"==l(e)?i(n(4631)):(o=[n(4631)],void 0===(a="function"==typeof(r=i)?r.apply(t,o):r)||(e.exports=a))},18473:(e,t,n)=>{var r;((r=n(4631))&&r.__esModule?r:{default:r}).default.defineExtension("centerOnLine",(function(e){var t=this.getScrollInfo().clientHeight,n=this.charCoords({line:e,ch:0},"local");this.scrollTo(null,(n.top+n.bottom-t)/2)}))},87451:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82526),n(19601),n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.PgIconButton=t.DefaultButton=t.PrimaryButton=void 0,n(47941),n(82772);var o=n(65770),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(67294)),i=u(n(86010)),l=u(n(45697)),s=u(n(41832));function u(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=(0,o.makeStyles)((function(e){return{primaryButton:{"&.Mui-disabled":{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.disabledMain},"&:hover":{backgroundColor:e.palette.primary.hoverMain,borderColor:e.palette.primary.hoverBorderColor}},defaultButton:{backgroundColor:e.palette.default.main,color:e.palette.default.contrastText,border:"1px solid "+e.palette.default.borderColor,"&.Mui-disabled":{color:e.palette.default.disabledContrastText,borderColor:e.palette.default.disabledBorderColor},"&:hover":{backgroundColor:e.palette.default.hoverMain,color:e.palette.default.hoverContrastText,borderColor:e.palette.default.hoverBorderColor}},iconButton:{padding:"3px 6px",borderColor:e.custom.icon.borderColor,color:e.custom.icon.contrastText,backgroundColor:e.custom.icon.main,"&.Mui-disabled":{borderColor:e.custom.icon.disabledBorderColor,backgroundColor:e.custom.icon.disabledMain,color:e.custom.icon.disabledContrastText},"&:hover":{backgroundColor:e.custom.icon.hoverMain,color:e.custom.icon.hoverContrastText}}}})),b=(0,a.forwardRef)((function(e,t){var n=e.children,r=e.className,l=f(e,["children","className"]),s=p();return a.default.createElement(o.Button,d({ref:t,variant:"contained",color:"primary",className:(0,i.default)(s.primaryButton,r)},l),n)}));t.PrimaryButton=b,b.displayName="PrimaryButton",b.propTypes={children:s.default.children,className:l.default.oneOfType([l.default.string,l.default.object])};var m=(0,a.forwardRef)((function(e,t){var n=e.children,r=e.className,l=f(e,["children","className"]),s=p();return a.default.createElement(o.Button,d({ref:t,variant:"outlined",color:"default",className:(0,i.default)(s.defaultButton,r)},l),n)}));t.DefaultButton=m,m.displayName="DefaultButton",m.propTypes={children:s.default.children,className:l.default.oneOfType([l.default.string,l.default.object])};var y=(0,a.forwardRef)((function(e,t){var n=e.icon,r=e.title,l=e.className,s=f(e,["icon","title","className"]),u=p();return a.default.createElement(o.Tooltip,{title:r||"","aria-label":r||""},a.default.createElement("span",null,a.default.createElement(m,d({ref:t,style:{minWidth:0},className:(0,i.default)(u.iconButton,l)},s),n)))}));t.PgIconButton=y,y.displayName="PgIconButton",y.propTypes={icon:s.default.children,title:l.default.string.isRequired,className:l.default.oneOfType([l.default.string,l.default.object])}},65621:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.default=d,n(68309),n(89554),n(54747),n(47941);var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(67294)),a=u(n(20811)),i=n(50464),l=u(n(45697)),s=u(n(41832));function u(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(e){var t=e.currEditor,n=e.name,r=e.value,l=e.options,s=e.events,u=e.readonly,c=e.disabled,d=e.className,f=(0,o.useRef)(),p=(0,o.useRef)(),b=(0,o.useRef)(),m=(0,o.useRef)();(0,o.useEffect)((function(){if(p.current=new a.default.fromTextArea(f.current,l),p.current.setValue(r),t&&t(p.current),p.current)try{b.current=p.current.getWrapperElement()}catch(e){b.current=null}Object.keys(s||{}).forEach((function(e){p.current.on(e,s[e])}))}),[]),(0,o.useEffect)((function(){p.current&&(c?(b.current.classList.add("cm_disabled"),p.current.setOption("readOnly","nocursor")):u?(b.current.classList.add("cm_disabled"),p.current.setOption("readOnly",!0),p.current.addKeyMap({Tab:!1}),p.current.addKeyMap({"Shift-Tab":!1})):(b.current.classList.remove("cm_disabled"),p.current.setOption("readOnly",!1),p.current.removeKeyMap("Tab"),p.current.removeKeyMap("Shift-Tab")))}),[u,c]),(0,o.useMemo)((function(){p.current&&r!=p.current.getValue()&&p.current.setValue(r)}),[r]);var y,h=(0,i.useOnScreen)(b);!m.current&&h?(m.current=!0,null===(y=p.current)||void 0===y||y.refresh()):h||(m.current=!1);return o.default.createElement("div",{className:d},o.default.createElement("textarea",{ref:f,name:n}))}d.propTypes={currEditor:l.default.func,name:l.default.string,value:l.default.string,options:l.default.object,change:l.default.func,events:l.default.object,readonly:l.default.bool,disabled:l.default.bool,className:s.default.className}},84963:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r=n(65770),o=s(n(67294)),a=s(n(86010)),i=s(n(45697)),l=s(n(41832));function s(e){return e&&e.__esModule?e:{default:e}}var u=(0,r.makeStyles)((function(e){return{fieldset:{padding:e.spacing(.5),borderRadius:e.shape.borderRadius,backgroundColor:"inherit",border:"1px solid "+e.otherVars.borderColor},legend:{width:"unset",fontSize:"inherit",fontWeight:"bold"}}}));function c(e){var t=e.title,n=void 0===t?"":t,r=e.className,i=e.children,l=u();return o.default.createElement("fieldset",{className:(0,a.default)(l.fieldset,r)},o.default.createElement("legend",{className:l.legend},n),i)}c.propTypes={title:i.default.string,className:l.default.className,children:l.default.children}},93299:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(47941),n(82526),n(38880),n(89554),n(54747),n(49337),n(33321),n(19601),n(79753),n(41817),n(32165),n(78783),n(66992),n(33948),n(91038),n(47042),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.FormInput=W,t.InputSQL=G,t.FormInputSQL=K,t.InputDateTimePicker=Z,t.FormInputDateTimePicker=ee,t.FormInputText=ne,t.InputFileSelect=re,t.FormInputFileSelect=oe,t.InputSwitch=ae,t.FormInputSwitch=ie,t.InputCheckbox=le,t.FormInputCheckbox=se,t.InputToggle=ue,t.FormInputToggle=ce,t.InputSelect=be,t.FormInputSelect=me,t.InputColor=ye,t.FormInputColor=he,t.PlainString=ge,t.FormNote=ve,t.FormFooterMessage=we,t.InputText=t.MESSAGE_TYPE=void 0,n(26833),n(83710),n(82772),n(21249),n(69826),n(88674),n(41539),n(57327),n(68309),n(92222),n(39714),n(69070);var o=N(n(67294)),a=n(30398),i=n(65770),l=n(20975),s=D(n(21234)),u=D(n(36782)),c=D(n(79138)),d=D(n(78429)),f=D(n(45569)),p=D(n(85347)),b=D(n(67879)),m=N(n(99946)),y=D(n(49153)),h=D(n(39612)),g=D(n(86010)),v=D(n(45697)),_=D(n(15020)),w=n(43413),O=D(n(75365)),S=N(n(45321)),j=D(n(65621)),P=D(n(91669)),x=n(81922),C=D(n(96486)),E=n(87451),k=D(n(41832));function D(e){return e&&e.__esModule?e:{default:e}}function T(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return T=function(){return e},e}function N(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=T();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=(0,a.makeStyles)((function(e){return{formRoot:{padding:"1rem"},img:{maxWidth:"100%",height:"auto"},info:{color:e.palette.info.main,marginLeft:"0.25rem",fontSize:"1rem"},formLabel:{margin:e.spacing(.75,.75,.75,.75),display:"flex"},formLabelError:{color:e.palette.error.main},sql:{border:"1px solid "+e.otherVars.inputBorderColor,borderRadius:e.shape.borderRadius,height:"100%"},optionIcon:q({},e.mixins.nodeIcon),colorBtn:{height:e.spacing(3.5),minHeight:e.spacing(3.5),width:e.spacing(3.5),minWidth:e.spacing(3.5)},noteRoot:{display:"flex",backgroundColor:e.otherVars.borderColor,padding:e.spacing(1)},readOnlySwitch:{opacity:.75,"& .MuiSwitch-track":{opacity:e.palette.action.disabledOpacity}}}})),H={SUCCESS:"Success",ERROR:"Error",INFO:"Info",CLOSE:"Close"};function z(e){var t=e.type,n=e.close,r=void 0!==n&&n,a=L(e,["type","close"]),i=null;return r?i=c.default:t===H.SUCCESS?i=d.default:t===H.ERROR?i=s.default:t===H.INFO&&(i=u.default),o.default.createElement(i,B({fontSize:"small"},a))}function W(e){var t=e.children,n=e.error,r=e.className,a=e.label,l=e.helpMessage,s=e.required,u=e.testcid,c=V(),d=u||C.default.uniqueId("c"),f="h".concat(d);return o.default.createElement(i.Grid,{container:!0,spacing:0,className:r},o.default.createElement(i.Grid,{item:!0,lg:3,md:3,sm:3,xs:12},o.default.createElement(i.InputLabel,{htmlFor:d,className:(0,g.default)(c.formLabel,n?c.formLabelError:null),required:s},a,o.default.createElement(z,{type:H.ERROR,style:{marginLeft:"auto",visibility:n?"unset":"hidden"}}))),o.default.createElement(i.Grid,{item:!0,lg:9,md:9,sm:9,xs:12},o.default.createElement(i.FormControl,{error:Boolean(n),fullWidth:!0},o.default.cloneElement(t,{cid:d,helpid:f})),o.default.createElement(i.FormHelperText,{id:f,variant:"outlined"},(0,_.default)(l||""))))}function G(e){var t=e.value,n=e.options,r=e.onChange,a=e.className,i=L(e,["value","options","onChange","className"]),l=V(),s=(0,o.useRef)();return o.default.createElement(j.default,B({currEditor:function(e){return s.current=e},value:t||"",options:q({lineNumbers:!0,mode:"text/x-pgsql"},n),className:(0,g.default)(l.sql,a),events:{change:function(e){r&&r(e.getValue())}}},i))}function K(e){var t=e.hasError,n=e.required,r=e.label,a=e.className,i=e.helpMessage,l=e.testcid,s=e.value,u=e.controlProps,c=e.noLabel,d=L(e,["hasError","required","label","className","helpMessage","testcid","value","controlProps","noLabel"]);return c?o.default.createElement(G,B({value:s,options:u},d)):o.default.createElement(W,{required:n,label:r,error:t,className:a,helpMessage:i,testcid:l},o.default.createElement(G,B({value:s,options:u},d)))}t.MESSAGE_TYPE=H,z.propTypes={type:v.default.oneOf(Object.values(H)),close:v.default.bool},W.propTypes={children:k.default.children,error:v.default.bool,className:k.default.className,label:v.default.string,helpMessage:v.default.string,required:v.default.bool,testcid:v.default.any},G.propTypes={value:v.default.string,options:v.default.object,onChange:v.default.func,readonly:v.default.bool,className:k.default.className},K.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string,value:v.default.string,controlProps:v.default.object,noLabel:v.default.bool,change:v.default.func};var $="yyyy-MM-dd hh:mm:ss aa xxx",Q="yyyy-MM-dd HH:mm:ss xxx",J="yyyy-MM-dd",Y="hh:mm:ss aa",X="HH:mm:ss";function Z(e){var t=e.value,n=e.onChange,r=e.readonly,a=e.controlProps,i=L(e,["value","onChange","readonly","controlProps"]),l="",s="";"Date"===(null==a?void 0:a.pickerType)?(l=a.format||J,s=a.placeholder||"YYYY-MM-DD"):"Time"===(null==a?void 0:a.pickerType)?(l=a.format||(a.ampm?Y:X),s=a.placeholder||"HH:mm:ss"):(l=a.format||(a.ampm?$:Q),s=a.placeholder||"YYYY-MM-DD HH:mm:ss Z");if(t=C.default.isUndefined(t)?null:t,!C.default.isNull(t)){var u=S.parse(t,l,new Date);S.isValid(u)||(u=S.parseISO(t)),t=S.isValid(u)?u:t}if(r)return o.default.createElement(te,B({value:t?S.format(t,l):t,readonly:r,controlProps:{placeholder:a.placeholder}},i));var c=q(q({},i),{},{value:t,format:l,placeholder:s,label:"",variant:"inline",readOnly:Boolean(r),autoOk:a.autoOk||!1,ampm:a.ampm||!1,disablePast:a.disablePast||!1,invalidDateMessage:"",maxDateMessage:"",minDateMessage:"",onChange:function(e,t){n(t)},fullWidth:!0});return"Date"===(null==a?void 0:a.pickerType)?o.default.createElement(w.MuiPickersUtilsProvider,{utils:O.default},o.default.createElement(w.KeyboardDatePicker,c)):"Time"===(null==a?void 0:a.pickerType)?o.default.createElement(w.MuiPickersUtilsProvider,{utils:O.default},o.default.createElement(w.KeyboardTimePicker,c)):o.default.createElement(w.MuiPickersUtilsProvider,{utils:O.default},o.default.createElement(w.KeyboardDateTimePicker,c))}function ee(e){var t=e.hasError,n=e.required,r=e.label,a=e.className,i=e.helpMessage,l=e.testcid,s=L(e,["hasError","required","label","className","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:r,error:t,className:a,helpMessage:i,testcid:l},o.default.createElement(Z,s))}Z.propTypes={value:v.default.string,options:v.default.object,onChange:v.default.func,readonly:v.default.bool,controlProps:v.default.object},ee.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string,value:v.default.string,controlProps:v.default.object,change:v.default.func};var te=(0,o.forwardRef)((function(e,t){var n=e.cid,r=e.helpid,a=e.readonly,l=e.disabled,s=e.maxlength,u=void 0===s?255:s,c=e.value,d=e.onChange,f=e.controlProps,p=e.type,b=L(e,["cid","helpid","readonly","disabled","maxlength","value","onChange","controlProps","type"]),m=V(),y=C.default.isNull(c)||C.default.isUndefined(c)?"":c;return null!=f&&f.formatter&&(y=f.formatter.fromRaw(y)),o.default.createElement(i.OutlinedInput,B({ref:t,color:"primary",fullWidth:!0,className:m.formInput,inputProps:q({id:n,maxLength:u,"aria-describedby":r},p?{pattern:{numeric:"^-?[0-9]\\d*\\.?\\d*$",int:"^-?[0-9]\\d*$"}[p]}:{}),readOnly:Boolean(a),disabled:Boolean(l),rows:4,notched:!1,value:C.default.isNull(y)||C.default.isUndefined(y)?"":y,onChange:function(e){var t=e.target.value;["numeric","int"].indexOf(p)>-1&&!e.target.validity.valid&&""!==t&&"-"!==t||(null!=f&&f.formatter&&(t=f.formatter.toRaw(t)),d&&d(t))}},f,b,["numeric","int"].indexOf(p)>-1?{type:"tel"}:{type:p}))}));function ne(e){var t=e.hasError,n=e.required,r=e.label,a=e.className,i=e.helpMessage,l=e.testcid,s=L(e,["hasError","required","label","className","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:r,error:t,className:a,helpMessage:i,testcid:l},o.default.createElement(te,B({label:r},s)))}function re(e){var t=e.controlProps,n=e.onChange,r=e.disabled,a=e.readonly,l=L(e,["controlProps","onChange","disabled","readonly"]),s=(0,o.useRef)(),u=function(e){n&&n(decodeURI(e)),s.current.focus()};return o.default.createElement(te,B({ref:s,disabled:r,readonly:a,onChange:n},l,{endAdornment:o.default.createElement(i.IconButton,{onClick:function(){return(0,x.showFileDialog)(t,u)},disabled:r||a,"aria-label":(0,P.default)("Select a file")},o.default.createElement(p.default,null))}))}function oe(e){var t=e.hasError,n=e.required,r=e.label,a=e.className,i=e.helpMessage,l=e.testcid,s=L(e,["hasError","required","label","className","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:r,error:t,className:a,helpMessage:i,testcid:l},o.default.createElement(re,B({required:n,label:r},s)))}function ae(e){var t=e.cid,n=e.helpid,r=e.value,a=e.onChange,l=e.readonly,s=e.controlProps,u=L(e,["cid","helpid","value","onChange","readonly","controlProps"]),c=V();return o.default.createElement(i.Switch,B({color:"primary",checked:Boolean(r),onChange:l?function(){}:a,id:t,inputProps:{"aria-describedby":n}},s,u,{className:l||u.disabled?c.readOnlySwitch:null}))}function ie(e){var t=e.hasError,n=e.required,r=e.label,a=e.className,i=e.helpMessage,l=e.testcid,s=L(e,["hasError","required","label","className","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:r,error:t,className:a,helpMessage:i,testcid:l},o.default.createElement(ae,s))}function le(e){var t=e.cid,n=e.helpid,r=e.value,a=e.onChange,l=e.controlProps,s=e.readonly,u=L(e,["cid","helpid","value","onChange","controlProps","readonly"]);return l=l||{},o.default.createElement(i.FormControlLabel,{control:o.default.createElement(i.Checkbox,B({id:t,checked:Boolean(r),onChange:s?function(){}:a,color:"primary",inputProps:{"aria-describedby":n}},u)),label:l.label})}function se(e){var t=e.hasError,n=e.required,r=e.label,a=e.className,i=e.helpMessage,l=e.testcid,s=L(e,["hasError","required","label","className","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:r,error:t,className:a,helpMessage:i,testcid:l},o.default.createElement(le,s))}function ue(e){var t=e.cid,n=e.value,r=e.onChange,a=e.options,i=e.disabled,s=e.readonly,u=L(e,["cid","value","onChange","options","disabled","readonly"]);return o.default.createElement(l.ToggleButtonGroup,B({id:t,value:n,exclusive:!0,onChange:function(e,t){null!==t&&r(t)}},u),(a||[]).map((function(e){var t=e.value===n,r=i||e.disabled||s&&!t;return o.default.createElement(l.ToggleButton,{key:e.label,value:e.value,component:t?E.PrimaryButton:E.DefaultButton,disabled:r,"aria-label":e.label},o.default.createElement(f.default,{style:{visibility:t?"visible":"hidden"}})," ",e.label)})))}function ce(e){var t=e.hasError,n=e.required,r=e.label,a=e.className,i=e.helpMessage,l=e.testcid,s=L(e,["hasError","required","label","className","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:r,error:t,className:a,helpMessage:i,testcid:l},o.default.createElement(ue,s))}t.InputText=te,te.displayName="InputText",te.propTypes={cid:v.default.string,helpid:v.default.string,label:v.default.string,readonly:v.default.bool,disabled:v.default.bool,maxlength:v.default.number,value:v.default.any,onChange:v.default.func,controlProps:v.default.object,type:v.default.string},ne.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string},re.propTypes={controlProps:v.default.object,onChange:v.default.func,disabled:v.default.bool,readonly:v.default.bool},oe.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string},ae.propTypes={cid:v.default.string,helpid:v.default.string,value:v.default.any,onChange:v.default.func,readonly:v.default.bool,disabled:v.default.bool,controlProps:v.default.object},ie.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string},le.propTypes={cid:v.default.string,helpid:v.default.string,value:v.default.bool,controlProps:v.default.object,onChange:v.default.func,readonly:v.default.bool},se.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string},ue.propTypes={cid:v.default.string,value:v.default.oneOfType([v.default.string,v.default.number,v.default.bool]),options:v.default.array,controlProps:v.default.object,onChange:v.default.func,disabled:v.default.bool,readonly:v.default.bool},ce.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string};function de(e){var t=e.image,n=e.label,r=V();return o.default.createElement(o.default.Fragment,null,t&&o.default.createElement("span",{className:(0,g.default)(r.optionIcon,t)}),o.default.createElement("span",null,n))}function fe(e){return o.default.createElement(m.components.Option,e,o.default.createElement(de,{image:e.data.image,label:e.data.label}))}function pe(e){return o.default.createElement(m.components.SingleValue,e,o.default.createElement(de,{image:e.data.image,label:e.data.label}))}function be(e){var t=e.cid,n=e.onChange,r=e.options,a=e.readonly,l=void 0!==a&&a,s=e.value,u=e.controlProps,c=void 0===u?{}:u,d=e.optionsLoaded,f=e.optionsReloadBasis,p=e.disabled,b=L(e,["cid","onChange","options","readonly","value","controlProps","optionsLoaded","optionsReloadBasis","disabled"]),h=R((0,o.useState)([[],!0]),2),g=R(h[0],2),v=g[0],_=g[1],w=h[1],O=(0,i.useTheme)();(0,o.useEffect)((function(){var e=r,t=!1;return"function"==typeof r&&(e=r()),Promise.resolve(e).then((function(e){t||(d&&d(e,s),w([e||[],!1]))})),function(){return t=!0}}),[f]);var S=c.filter&&c.filter(v)||v,j=function(e,t,n,r){var o=null;return C.default.isArray(t)?(o=M(t),o=r?r.fromRaw(o,e):n?o.map((function(e){return{label:e,value:e}})):o.map((function(t){return C.default.find(e,(function(e){return C.default.isEqual(e.value,t)}))}))):o=C.default.find(e,(function(e){return e.value==t}))||(!n||C.default.isUndefined(t)||C.default.isNull(t)?null:{label:t,value:t}),o}(S,s,c.creatable,c.formatter);j&&C.default.isPlainObject(j)&&C.default.isUndefined(j.value)&&console.error("Undefined option value not allowed",j,S);var x={isSearchable:!l,isClearable:!l&&(!!C.default.isUndefined(c.allowClear)||c.allowClear),isDisabled:Boolean(p)},E=function(e,t){return{input:function(e){return q(q({},e),{},{padding:0,margin:0,color:"inherit"})},singleValue:function(e){return q(q({},e),{},{color:"inherit"})},control:function(n,r){return q(q({},n),{},{minHeight:"0",backgroundColor:t?e.otherVars.inputDisabledBg:e.palette.background.default,color:t?e.palette.text.muted:e.palette.text.primary,borderColor:e.otherVars.inputBorderColor},r.isFocused?{borderColor:e.palette.primary.main,boxShadow:"inset 0 0 0 1px "+e.palette.primary.main,"&:hover":{borderColor:e.palette.primary.main}}:{})},dropdownIndicator:function(e){return q(q({},e),{},{padding:"0rem 0.25rem"})},indicatorsContainer:function(e){return q(q({},e),t?{display:"none"}:{})},clearIndicator:function(e){return q(q({},e),{},{padding:"0rem 0.25rem"})},valueContainer:function(t){return q(q({},t),{},{padding:e.otherVars.reactSelect.padding})},menu:function(t){return q(q({},t),{},{backgroundColor:e.palette.background.default,color:e.palette.text.primary,boxShadow:"none",border:"1px solid "+e.otherVars.inputBorderColor,marginTop:"2px"})},menuPortal:function(e){return q(q({},e),{},{zIndex:9999,backgroundColor:"inherit",color:"inherit"})},option:function(t,n){return q(q({},t),{},{padding:"0.5rem",color:"inherit",backgroundColor:n.isFocused?e.palette.grey[400]:n.isSelected?e.palette.primary.light:"inherit"})},multiValue:function(t){return q(q({},t),{},{backgroundColor:e.palette.grey[400]})},multiValueLabel:function(t){return q(q({},t),{},{fontSize:"1em",zIndex:99,color:e.palette.text.primary})},multiValueRemove:function(n){return q(q({},n),{},{"&:hover":{backgroundColor:"unset",color:e.palette.error.main}},t?{display:"none"}:{})}}}(O,l||p),k=(0,o.useCallback)((function(e,t){C.default.isArray(e)?(C.default.isUndefined(e.find((function(e){return"Select All"===e.label})))||(e=S),e=c.formatter?c.formatter.toRaw(e,S):e.map((function(e){return e.value})),n&&n(e,t.name)):n&&n(e?e.value:null,t.name)}),[n,S]),D=q(q({components:{Option:fe,SingleValue:pe},isMulti:Boolean(c.multiple),openMenuOnClick:!l,onChange:k,isLoading:_,options:c.allowSelectAll?[{label:(0,P.default)("Select All"),value:"*"}].concat(M(S)):S,value:j,menuPortalTarget:document.body,styles:E,inputId:t,placeholder:l||p?"":c.placeholder||(0,P.default)("Select an item...")},x),b);return c.creatable?o.default.createElement(y.default,D):o.default.createElement(m.default,D)}function me(e){var t=e.hasError,n=e.required,r=e.className,a=e.label,i=e.helpMessage,l=e.testcid,s=L(e,["hasError","required","className","label","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:a,error:t,className:r,helpMessage:i,testcid:l},o.default.createElement(be,s))}function ye(e){var t=e.value,n=e.controlProps,r=e.disabled,a=e.onChange,i=e.currObj,l=q(q({showPalette:!0,allowEmpty:!0,colorFormat:"HEX",defaultColor:null,position:"right-middle",clearText:(0,P.default)("No color")},n),{},{disabled:r}),s=(0,o.useRef)(),u=(0,o.useRef)(),d=V(),f=function(e){u.current&&u.current.setColor(C.default.isUndefined(e)||""==e?l.defaultColor:e)},p=function(){u.current&&(u.current.destroy(),u.current=null)};(0,o.useEffect)((function(){return p(),u.current=new h.default({el:s.current,useAsButton:!0,theme:"monolith",swatches:["#000","#666","#ccc","#fff","#f90","#ff0","#0f0","#f0f","#f4cccc","#fce5cd","#d0e0e3","#cfe2f3","#ead1dc","#ea9999","#b6d7a8","#a2c4c9","#d5a6bd","#e06666","#93c47d","#76a5af","#c27ba0","#f1c232","#6aa84f","#45818e","#a64d79","#bf9000","#0c343d","#4c1130"],position:l.position,strings:{clear:l.clearText},components:{palette:l.showPalette,preview:!0,hue:l.showPalette,interaction:{clear:l.allowEmpty,defaultRepresentation:l.colorFormat,disabled:l.disabled}}}).on("init",(function(e){f(t),r&&e.disable();var n=e.getRoot().preview.lastColor,o=e.getRoot().interaction.clear;o.addEventListener("keydown",(function(e){9===e.keyCode&&(e.preventDefault(),e.stopPropagation(),n.focus())})),n.addEventListener("keydown",(function(e){9===e.keyCode&&e.shiftKey&&(e.preventDefault(),e.stopPropagation(),o.focus())}))})).on("clear",(function(){a&&a("")})).on("change",(function(e){a&&a(e.toHEXA().toString())})).on("show",(function(e,t){t.getRoot().palette.palette.focus()})).on("hide",(function(e){e.getRoot().button.focus()})),i&&i(u.current),function(){p()}}),M(Object.values(l))),(0,o.useEffect)((function(){u.current&&f(t)}),[t]);var b={backgroundColor:t};return o.default.createElement(E.PgIconButton,{ref:s,title:(0,P.default)("Select the color"),className:d.colorBtn,style:b,disabled:l.disabled,icon:(C.default.isUndefined(t)||C.default.isNull(t)||""===t)&&o.default.createElement(c.default,null)})}function he(e){var t=e.hasError,n=e.required,r=e.className,a=e.label,i=e.helpMessage,l=e.testcid,s=L(e,["hasError","required","className","label","helpMessage","testcid"]);return o.default.createElement(W,{required:n,label:a,error:t,className:r,helpMessage:i,testcid:l},o.default.createElement(ye,s))}function ge(e){var t=e.controlProps,n=e.value;return null!=t&&t.formatter&&(n=t.formatter.fromRaw(n)),o.default.createElement("span",null,n)}function ve(e){var t=e.text,n=e.className,r=V();return o.default.createElement(i.Box,{className:n},o.default.createElement(i.Paper,{elevation:0,className:r.noteRoot},o.default.createElement(i.Box,{paddingRight:"0.25rem"},o.default.createElement(b.default,{fontSize:"small"})),o.default.createElement(i.Box,null,(0,_.default)(t||""))))}de.propTypes={image:v.default.string,label:v.default.string},fe.propTypes={data:v.default.object},pe.propTypes={data:v.default.object},be.propTypes={cid:v.default.string,value:v.default.oneOfType([v.default.string,v.default.number,v.default.array,v.default.bool]),options:v.default.oneOfType([v.default.array,v.default.instanceOf(Promise),v.default.func]),controlProps:v.default.object,optionsLoaded:v.default.func,optionsReloadBasis:v.default.any,onChange:v.default.func,disabled:v.default.bool,readonly:v.default.bool},me.propTypes={hasError:v.default.bool,required:v.default.bool,label:v.default.string,className:k.default.className,helpMessage:v.default.string,testcid:v.default.string},ye.propTypes={value:v.default.string,controlProps:v.default.object,onChange:v.default.func,disabled:v.default.bool,currObj:v.default.func},he.propTypes={hasError:v.default.bool,required:v.default.bool,className:k.default.className,label:v.default.string,helpMessage:v.default.string,testcid:v.default.string},ge.propTypes={controlProps:v.default.object,value:v.default.any},ve.propTypes={text:v.default.string,className:k.default.className};var _e=(0,a.makeStyles)((function(e){return{root:{padding:e.spacing(.5),position:"absolute",bottom:0,left:0,right:0,zIndex:10},container:{borderWidth:"1px",borderStyle:"solid",borderRadius:e.shape.borderRadius,padding:e.spacing(.5),display:"flex",alignItems:"center"},containerSuccess:{borderColor:e.palette.success.main,backgroundColor:e.palette.success.light},iconSuccess:{color:e.palette.success.main},containerError:{borderColor:e.palette.error.main,backgroundColor:e.palette.error.light},iconError:{color:e.palette.error.main},message:{marginLeft:e.spacing(.5)},closeButton:{marginLeft:"auto"}}}));function we(e){var t=e.type,n=void 0===t?H.SUCCESS:t,r=e.message,a=e.closable,l=void 0===a||a,s=e.onClose,u=void 0===s?function(){}:s,c=_e();return r?o.default.createElement(i.Box,{className:c.root},o.default.createElement(i.Box,{className:(0,g.default)(c.container,c["container".concat(n)])},o.default.createElement(z,{type:n,className:c["icon".concat(n)]}),o.default.createElement(i.Box,{className:c.message},r),l&&o.default.createElement(i.IconButton,{className:(0,g.default)(c.closeButton,c["icon".concat(n)]),onClick:u},o.default.createElement(z,{close:!0})))):o.default.createElement(o.default.Fragment,null)}we.propTypes={type:v.default.oneOf(Object.values(H)).isRequired,message:v.default.string,closable:v.default.bool,onClose:v.default.func}},15817:(e,t,n)=>{n(82526),n(41817),n(32165),n(47042),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=P,n(89554),n(54747),n(15306),n(74916),n(68309),n(70189),n(41539),n(78783),n(66992),n(33948),n(91038),n(39714),n(83710),n(79753);var r=w(n(91669)),o=w(n(96486)),a=w(n(28008)),i=w(n(67294)),l=n(65770),s=n(30398),u=w(n(84610)),c=w(n(44232)),d=w(n(6734)),f=n(40345),p=n(93299),b=w(n(2832)),m=w(n(52237)),y=w(n(86010)),h=w(n(85650)),g=w(n(55455)),v=w(n(45697)),_=w(n(36037));function w(e){return e&&e.__esModule?e:{default:e}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=(0,s.makeStyles)((function(){return{grantWizardStep:{height:"100%"},grantWizardTitle:{top:"0 !important",opacity:"1 !important",borderRadius:"6px 6px 0px 0px !important",margin:"0 !important",width:"100%",height:"6%"},grantWizardContent:{height:"94% !important"},stepPanelCss:{height:500,overflow:"hidden"},objectSelection:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",marginBottom:"1em"},searchBox:{marginBottom:"1em",display:"flex"},searchPadding:{flex:2.5},searchInput:{flex:1,marginTop:2,borderLeft:"none",paddingLeft:5},grantWizardPanelContent:{paddingTop:"0.9em !important",overflow:"hidden"},grantWizardSql:{height:"90% !important",width:"100%"},privilegeStep:{height:"100%"}}}));function P(e){var t=e.sid,n=e.did,s=e.nodeInfo,v=e.nodeData,w=j(),S=O(i.default.useState([]),2),P=S[0],x=S[1],C=O(i.default.useState({}),2),E=C[0],k=C[1],D=O(i.default.useState(""),2),T=D[0],N=D[1],R=O(i.default.useState(""),2),M=R[0],A=R[1],I=O(i.default.useState(""),2),B=I[0],L=I[1],F=O(i.default.useState(""),2),q=F[0],U=F[1],V=O(i.default.useState([]),2),H=V[0],z=V[1],W=O(i.default.useState({}),2),G=W[0],K=W[1],$=O(i.default.useState([]),2),Q=$[0],J=$[1],Y=O(i.default.useState(),2),X=Y[0],Z=Y[1],ee=O(i.default.useState(""),2),te=ee[0],ne=ee[1],re=(0,b.default)();i.default.useEffect((function(){null==X||X.privilegeRoleSchema.updateSupportedPrivs(Q)}),[Q]),i.default.useEffect((function(){var e=new _.default((function(e){return(0,f.getNodePrivilegeRoleSchema)("",s,v,e)}));Z(e),U("Loading..."),re.get((0,a.default)("grant_wizard.acl",{sid:encodeURI(t),did:encodeURI(n)})).then((function(e){K(e.data)}));var o=v._type.replace("coll-","").replace("materialized_",""),i=(0,a.default)("grant_wizard.objects",{sid:encodeURI(t),did:encodeURI(n),node_id:encodeURI(v._id),node_type:encodeURI(o)});re.get(i).then((function(e){var t=e.data.result;t.forEach((function(e){e.icon&&(e.icon={object_type:e.icon}),"Function"===e.object_type?e.name_with_args=e.name+"("+(void 0!==e.proargs?e.proargs:"")+")":e.name_with_args=e.name})),z(t),U("")})).catch((function(){g.default.error((0,r.default)("Error while fetching grant wizard data.")),U("")}))}),[v]);var oe=i.default.useCallback((function(){ne("")}));return i.default.createElement(i.default.Fragment,null,i.default.createElement(l.Box,{className:(0,y.default)("wizard-header",w.grantWizardTitle)},(0,r.default)("Grant Wizard")),i.default.createElement(h.default,{message:q}),i.default.createElement(u.default,{stepList:["Object Selection","Privilege Selection","Review Selection"],rootClass:(0,y.default)(w.grantWizardContent),stepPanelCss:w.grantWizardPanelContent,disableNextStep:function(){var e,t;return!(P.length>0&&"object_type"===M)&&(!((null==E||null===(e=E.privilege)||void 0===e?void 0:e.length)>0&&"privileges"===M)||(t=!0,E.privilege.forEach((function(e){(o.default.isUndefined(e.grantee)||o.default.isUndefined(e.privileges)||0===e.privileges.length)&&t&&(t=!1)})),!t))},onStepChange:function(e){switch(e.currentStep){case 0:A("object_type");break;case 1:A("privileges");break;case 2:U("Loading SQL ...");var o=(0,a.default)("grant_wizard.modified_sql",{sid:encodeURI(t),did:encodeURI(n)}),i={acl:E.privilege,objects:P};re.post(o,i).then((function(e){N(e.data.data),U("")})).catch((function(){g.default.error((0,r.default)("Error while fetching SQL."))}));break;default:A("")}},onSave:function(){U("Saving...");var e=(0,a.default)("grant_wizard.apply",{sid:encodeURI(t),did:encodeURI(n)}),o={acl:E.privilege,objects:P};re.post(e,o).then((function(){U(""),g.default.wizardDialog().close()})).catch((function(e){U(""),g.default.error((0,r.default)("Error while saving grant wizard data: ".concat(e.response.data.errormsg)))}))},onHelp:function(){window.open((0,a.default)("help.static",{filename:"grant_wizard.html"}),"pgadmin_help")}},i.default.createElement(c.default,{stepId:0,className:(0,y.default)(w.objectSelection,w.grantWizardStep,w.stepPanelCss)},i.default.createElement(l.Box,{className:w.searchBox},i.default.createElement(l.Box,{className:w.searchPadding}),i.default.createElement(p.InputText,{placeholder:"Search",className:w.searchInput,value:B,onChange:function(e){L(e)}})),i.default.createElement(d.default,{className:w.table,height:window.innerHeight-450,columns:[{Header:"Object Type",accessor:"object_type",sortble:!0,resizable:!1,disableGlobalFilter:!0},{Header:"Schema",accessor:"nspname",sortble:!0,resizable:!1,disableGlobalFilter:!0},{Header:"Name",accessor:"name_with_args",sortble:!0,resizable:!0,disableGlobalFilter:!1,minWidth:280},{Header:"parameters",accessor:"proargs",sortble:!1,resizable:!1,disableGlobalFilter:!1,minWidth:280,isVisible:!1},{Header:"Name",accessor:"name",sortble:!1,resizable:!1,disableGlobalFilter:!1,minWidth:280,isVisible:!1},{Header:"ID",accessor:"oid",sortble:!1,resizable:!1,disableGlobalFilter:!1,minWidth:280,isVisible:!1}],data:H,isSelectRow:!0,searchText:B,getSelectedRows:function(e){var t=[],n=new Set;e.length>0&&e.forEach((function(e){var r="";switch(e.values.object_type){case"Function":case"Trigger Function":r="function";break;case"Procedure":r="procedure";break;case"Table":r="table";break;case"Sequence":r="sequence";break;case"View":case"Materialized View":r="table";break;case"Foreign Table":r="foreign_table";break;case"Package":r="package"}n.add(r),t.push(e.values)}));var o=new Set;n.forEach((function(e){var t;null===(t=G[e])||void 0===t||t.acl.forEach((function(e){o.add(e)}))})),J(Array.from(o)),x(t),ne(0===t.length?(0,r.default)("Please select any database object."):"")}}),i.default.createElement(p.FormFooterMessage,{type:p.MESSAGE_TYPE.ERROR,message:te,onClose:oe})),i.default.createElement(c.default,{stepId:1,className:(0,y.default)(w.grantWizardStep,w.privilegeStep)},X&&i.default.createElement(m.default,{formType:"dialog",getInitData:function(){},viewHelperProps:{mode:"create"},schema:X,showFooter:!1,isTabView:!1,onDataChange:function(e,t){k(t)}})),i.default.createElement(c.default,{stepId:2,className:w.grantWizardStep},i.default.createElement(l.Box,null,(0,r.default)("The SQL below will be executed on the database server to grant the selected privileges. Please click on Finish to complete the process.")),i.default.createElement(p.InputSQL,{onLable:!0,className:w.grantWizardSql,readonly:!0,value:T.toString()}))))}P.propTypes={sid:v.default.string,did:v.default.number,nodeInfo:v.default.object,nodeData:v.default.object}},85650:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var r=n(65770),o=i(n(67294)),a=i(n(45697));function i(e){return e&&e.__esModule?e:{default:e}}var l=(0,r.makeStyles)((function(e){return{root:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:e.otherVars.loader.backgroundColor,color:e.otherVars.loader.color,zIndex:1e3,display:"flex"},loaderRoot:{color:e.otherVars.loader.color,display:"flex",alignItems:"center",margin:"auto",".MuiTypography-root":{marginLeft:e.spacing(1)}},loader:{color:e.otherVars.loader.color}}}));function s(e){var t=e.message,n=l();return t?o.default.createElement(r.Box,{className:n.root},o.default.createElement(r.Box,{className:n.loaderRoot},o.default.createElement(r.CircularProgress,{className:n.loader}),o.default.createElement(r.Typography,null,t))):o.default.createElement(o.default.Fragment,null)}s.propTypes={message:a.default.string}},6734:(e,t,n)=>{n(47941),n(82526),n(38880),n(89554),n(54747),n(49337),n(33321),n(82772),n(19601),n(79753),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(91038),n(47042),n(68309),Object.defineProperty(t,"__esModule",{value:!0}),t.default=_,n(92222),n(21249),n(57327),n(69070);var r=d(n(67294)),o=n(79521),a=n(32506),i=n(30398),l=d(n(86010)),s=d(n(45697)),u=d(n(11728)),c=n(65770);function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(0,i.makeStyles)((function(e){return{root:h(h({display:"flex",flexDirection:"column",height:"100%"},e.mixins.panelBorder),{},{backgroundColor:e.palette.background.default}),autoResizer:{height:"100% !important",width:"100% !important"},table:h({borderSpacing:0,width:"100%",overflow:"hidden",height:"99.7%",backgroundColor:e.otherVars.tableBg},e.mixins.panelBorder),tableCell:h(h(h({margin:0,padding:e.spacing(.5)},e.mixins.panelBorder.bottom),e.mixins.panelBorder.right),{},{position:"relative",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),selectCell:{textAlign:"center"},tableCellHeader:h(h({fontWeight:e.typography.fontWeightBold,padding:e.spacing(1,.5),textAlign:"left",overflowY:"auto",overflowX:"hidden",alignContent:"center"},e.mixins.panelBorder.bottom),e.mixins.panelBorder.right),resizer:{display:"inline-block",width:"5px",height:"100%",position:"absolute",right:0,top:0,transform:"translateX(50%)",zIndex:1,touchAction:"none"},cellIcon:{paddingLeft:"1.5em",height:35}}}));function _(e){var t=e.columns,n=e.data,i=e.isSelectRow,d=m(e,["columns","data","isSelectRow"]),p=v(),y=r.default.useMemo((function(){return{minWidth:150}}),[]),h=r.default.forwardRef((function(e,t){var n=e.indeterminate,o=m(e,["indeterminate"]),a=r.default.useRef(),i=t||a;return r.default.useEffect((function(){i.current.indeterminate=n}),[i,n]),r.default.createElement(r.default.Fragment,null,r.default.createElement(c.Checkbox,b({color:"primary",ref:i},o)))}));h.displayName="SelectCheckbox",h.propTypes={indeterminate:s.default.bool,rest:s.default.func,getToggleAllRowsSelectedProps:s.default.func,row:s.default.object};var g=(0,o.useTable)({columns:t,data:n,defaultColumn:y,isSelectRow:i},o.useGlobalFilter,o.useSortBy,o.useRowSelect,o.useResizeColumns,o.useFlexLayout,(function(e){e.visibleColumns.push((function(e){return i?[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return r.default.createElement("div",{className:p.selectCell},r.default.createElement(h,t()))},Cell:function(e){var t=e.row;return r.default.createElement("div",{className:p.selectCell},r.default.createElement(h,t.getToggleRowSelectedProps()))},sortble:!1,width:50,minWidth:0}].concat(f(e)):f(e)})),e.useInstanceBeforeDimensions.push((function(e){e.headerGroups[0].headers[0].resizable=!1}))})),_=g.getTableProps,w=g.getTableBodyProps,O=g.headerGroups,S=g.rows,j=g.prepareRow,P=g.selectedFlatRows,x=g.state.selectedRowIds,C=g.setGlobalFilter,E=g.setHiddenColumns;r.default.useEffect((function(){E(t.filter((function(e){return void 0!==e.isVisible&&!0!==t.isVisible})).map((function(e){return e.accessor})))}),[E,t]),r.default.useEffect((function(){d.setSelectedRows&&d.setSelectedRows(P)}),[x]),r.default.useEffect((function(){d.getSelectedRows&&d.getSelectedRows(P)}),[x]),r.default.useEffect((function(){C(d.searchText||void 0)}),[d.searchText]);var k=r.default.useCallback((function(e){var t=e.index,n=e.style,o=S[t];return j(o),r.default.createElement("div",b({},o.getRowProps({style:n}),{className:p.tr}),o.cells.map((function(e){return r.default.createElement("div",b({key:e.column.id},e.getCellProps(),{className:(0,l.default)(p.tableCell,o.original.icon&&o.original.icon[e.column.id],o.original.icon[e.column.id]&&p.cellIcon),title:e.value}),e.render("Cell"))})))}),[j,S,x]);return r.default.createElement(u.default,{className:p.autoResizer},(function(e){var t=e.height;return r.default.createElement("div",b({},_(),{className:p.table}),r.default.createElement("div",null,O.map((function(e){return r.default.createElement("div",b({key:""},e.getHeaderGroupProps()),e.headers.map((function(e){return r.default.createElement("div",b({key:e.id},e.getHeaderProps(),{className:(0,l.default)(p.tableCellHeader,e.className)}),r.default.createElement("div",e.sortble?e.getSortByToggleProps():{},e.render("Header"),r.default.createElement("span",null,e.isSorted?e.isSortedDesc?" 🔽":" 🔼":""),e.resizable&&r.default.createElement("div",b({},e.getResizerProps(),{className:p.resizer}))))})))}))),r.default.createElement("div",w(),r.default.createElement(a.FixedSizeList,{height:t-75,itemCount:S.length,itemSize:35,sorted:null==d?void 0:d.sortOptions},k)))}))}_.propTypes={stepId:s.default.number,height:s.default.number,className:s.default.oneOfType([s.default.string,s.default.object]),children:s.default.oneOfType([s.default.arrayOf(s.default.node),s.default.node]),getToggleAllRowsSelectedProps:s.default.func}},19928:(e,t,n)=>{n(47042),n(41539),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(79753),n(69070),n(47941),n(57327),n(38880),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.default=y,n(21249),n(69826),n(89554),n(54747),n(68309),n(26541);var r=n(65770),o=u(n(96486)),a=u(n(67294)),i=n(93299),l=u(n(86010)),s=u(n(45697));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=(0,r.makeStyles)((function(){return{root:{"&:not(:focus-within) .priv-table":{display:"none"}},table:{borderSpacing:0,width:"100%",fontSize:"0.8em"},tableCell:{textAlign:"left"}}}));function y(e){var t,n,r,s=e.value,u=e.onChange,c=e.controlProps,f={C:"CREATE",T:"TEMPORARY",c:"CONNECT",a:"INSERT",r:"SELECT",w:"UPDATE",d:"DELETE",D:"TRUNCATE",x:"REFERENCES",t:"TRIGGER",U:"USAGE",X:"EXECUTE"},b=m(),y="",h=p(s||[]);try{for(h.s();!(r=h.n()).done;){var g=r.value;g.privilege&&(y+=g.privilege_type,g.with_grant&&(y+="*"))}}catch(e){h.e(e)}finally{h.f()}var v=o.default.uniqueId(),_=((null==c?void 0:c.supportedPrivs)||[]).map((function(e){var t=o.default.find(s,(function(t){return t.privilege_type===e}))||{privilege:!1,with_grant:!1};return{privilege_type:e,privilege:Boolean(t.privilege),with_grant:Boolean(t.with_grant)}})),w=function(e,t){var n=[];_.forEach((function(r){t?n.push(d(d({},r),{},{privilege:!0,with_grant:e.target.checked})):e.target.checked&&n.push(d(d({},r),{},{privilege:e.target.checked}))})),u(n)},O=function(e,t){var n=!1,r=[];(s||[]).forEach((function(o){o.privilege_type===e.target.name?(n=!0,t&&r.push(d(d({},o),{},{with_grant:e.target.checked}))):r.push(o)})),!n&&e.target.checked&&r.push({privilege_type:e.target.name,privilege:e.target.checked,with_grant:!1}),u(r)};return t=_.length===(s||[]).length,n=_.length===(s||[]).length&&(s||[]).every((function(e){return e.with_grant})),a.default.createElement("div",{className:b.root},a.default.createElement(i.InputText,{value:y,readOnly:!0}),a.default.createElement("table",{className:(0,l.default)(b.table,"priv-table")},_.length>1&&a.default.createElement("thead",null,a.default.createElement("tr",null,a.default.createElement("td",{className:b.tableCell},a.default.createElement(i.InputCheckbox,{name:"all",controlProps:{label:"ALL"},id:v,size:"small",onChange:function(e){return w(e,!1)},value:t})),a.default.createElement("td",{className:b.tableCell},a.default.createElement(i.InputCheckbox,{name:"all",controlProps:{label:"WITH GRANT OPTION"},id:v,size:"small",disabled:!t,onChange:function(e){return w(e,!0)},value:n})))),a.default.createElement("tbody",null,_.map((function(e){return a.default.createElement("tr",{key:e.privilege_type},a.default.createElement("td",{className:b.tableCell},a.default.createElement(i.InputCheckbox,{name:e.privilege_type,controlProps:{label:f[e.privilege_type]},id:v,value:Boolean(e.privilege),size:"small",onChange:function(e){return O(e,!1)}})),a.default.createElement("td",{className:b.tableCell},a.default.createElement(i.InputCheckbox,{name:e.privilege_type,controlProps:{label:"WITH GRANT OPTION"},id:v,value:Boolean(e.with_grant),size:"small",disabled:!e.privilege,onChange:function(e){return O(e,!0)}})))})))))}y.propTypes={value:s.default.array,onChange:s.default.func,controlProps:s.default.object}},3622:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82526),n(79753),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(47042),n(68309),n(91038),n(19601),n(4129),n(69070),n(38880),Object.defineProperty(t,"__esModule",{value:!0}),t.SelectRefresh=h,n(47941),n(82772);var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(67294)),a=n(65770),i=n(93299),l=d(n(45697)),s=d(n(41832)),u=d(n(36210)),c=n(87451);function d(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function h(e){var t=e.required,n=e.className,r=e.label,l=e.helpMessage,s=e.testcid,d=e.controlProps,f=y(e,["required","className","label","helpMessage","testcid","controlProps"]),m=b((0,o.useState)([]),2),h=m[0],g=m[1],v=b((0,o.useState)(!1),2),_=v[0],w=v[1],O=d.getOptionsOnRefresh,S=y(d,["getOptionsOnRefresh"]);return o.default.createElement(i.FormInput,{required:t,label:r,className:n,helpMessage:l,testcid:s},o.default.createElement(a.Box,{display:"flex"},o.default.createElement(a.Box,{flexGrow:"1"},o.default.createElement(i.InputSelect,p({},f,{options:h,optionsReloadBasis:_,controlProps:S}))),o.default.createElement(a.Box,null,o.default.createElement(c.PgIconButton,{onClick:function(){O&&O().then((function(e){g(e),w((function(e){return!e}))}))},icon:o.default.createElement(u.default,null),title:r||""}))))}h.propTypes={required:l.default.bool,label:l.default.string,className:s.default.className,helpMessage:l.default.string,testcid:l.default.string,controlProps:l.default.object}},32982:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r=s(n(67294)),o=n(65770),a=s(n(86010)),i=s(n(45697)),l=s(n(41832));function s(e){return e&&e.__esModule?e:{default:e}}var u=(0,o.makeStyles)((function(e){return{root:{height:"100%",padding:e.spacing(1),overflow:"auto",backgroundColor:e.palette.grey[400]},content:{height:"100%"}}}));function c(e){var t=e.children,n=e.classNameRoot,i=e.className,l=e.value,s=e.index,c=u(),d=l===s;return r.default.createElement(o.Box,{className:(0,a.default)(c.root,n),component:"div",hidden:!d},r.default.createElement(o.Box,{className:(0,a.default)(c.content,i)},t))}c.propTypes={children:l.default.children,classNameRoot:l.default.className,className:l.default.className,value:i.default.any.isRequired,index:i.default.any.isRequired}},87789:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.setPGCSRFToken=function(e,t){if(!t)throw"csrf-token meta tag has not been set";var n=o.default.sync;o.default.sync=function(r,o,a){return a.beforeSend=function(n){n.setRequestHeader(e,t)},n(r,o,a)};var i=o.default.get;o.default.get=function(n,r,o){return o.beforeSend=function(n){n.setRequestHeader(e,t)},i(n,r,o)},r.default.ajaxSetup({beforeSend:function(n){n.setRequestHeader(e,t)}}),a.default.interceptors.request.use((function(n){return n.headers[e]=t,n}),(function(e){return Promise.reject(e)}))},n(88674),n(41539);var r=i(n(19755)),o=i(n(72316)),a=i(n(9669));function i(e){return e&&e.__esModule?e:{default:e}}},50464:(e,t,n)=>{n(79753),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(47042),n(68309),n(91038),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.useInterval=function(e,t){var n=(0,r.useRef)();(0,r.useEffect)((function(){n.current=e})),(0,r.useEffect)((function(){if(t>-1){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},t.usePrevious=function(e){var t=(0,r.useRef)();return(0,r.useEffect)((function(){t.current=e})),t.current},t.useDelayDebounce=function(e,t,n){(0,r.useEffect)((function(){var r=setTimeout((function(){t&&e(t)}),n);return function(){return clearTimeout(r)}}),[t])},t.useOnScreen=function(e){var t=o((0,r.useState)(!1),2),n=t[0],a=t[1],i=new IntersectionObserver((function(e){var t=o(e,1)[0];a(t.isIntersecting)}));return(0,r.useEffect)((function(){return null!=e&&e.current&&i.observe(e.current),function(){i.disconnect()}}),[]),n},t.useIsMounted=function(){var e=(0,r.useRef)(!0);return(0,r.useEffect)((function(){return function(){e.current=!1}}),[]),(0,r.useCallback)((function(){return e.current}),[])},n(32564);var r=n(67294);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},41832:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(45697)),o=a(n(89406));function a(e){return e&&e.__esModule?e:{default:e}}var i={ref:r.default.oneOfType([r.default.func,r.default.shape({current:r.default.instanceOf(Element)})]),schemaUI:r.default.instanceOf(o.default),children:r.default.oneOfType([r.default.arrayOf(r.default.node),r.default.node]),className:r.default.oneOfType([r.default.string,r.default.object])};t.default=i},89087:(e,t,n)=>{n(69826),n(24812),n(32564),n(69070);var r=i(n(19755)),o=i(n(42441)),a=n(44092);function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dialogContainer=t,this.tabSwitching=!1,this.tabs=this.dialogContainer.find(".nav-tabs:visible"),this.tabs.length>0&&(this.tabs=this.tabs[0]),this.dialogTabBackward=(0,a.parseShortcutValue)(n),this.dialogTabForward=(0,a.parseShortcutValue)(r),(0,o.default)(this.dialogContainer[0]).bind(this.dialogTabBackward,this.onKeyboardEvent.bind(this)),(0,o.default)(this.dialogContainer[0]).bind(this.dialogTabForward,this.onKeyboardEvent.bind(this))}var t,n,i;return t=e,(n=[{key:"onKeyboardEvent",value:function(e,t){var n=this.dialogContainer.find(".tab-content:first > .tab-pane.active:first:visible"),r=this.isActivePaneHasChildTabs(n);this.tabSwitching||(this.tabSwitching=!0,r&&this.navigate(t,r.childTab,r.childTabPane,e)||this.navigate(t,this.tabs,n,e))}},{key:"isActivePaneHasChildTabs",value:function(e){var t=e.find(".nav-tabs:first:visible");return t.length>0?{childTab:t,childTabPane:e.find(".tab-content:first > .tab-pane.active:first:visible")}:null}},{key:"navigate",value:function(e,t,n,r){return e==this.dialogTabBackward?this.navigateBackward(t,n,r):e==this.dialogTabForward&&this.navigateForward(t,n,r)}},{key:"navigateBackward",value:function(e,t,n){var o,i,l=this,s=(0,r.default)(e).find("li").has("a.active").prev("li");return s.length>0?(s.find("a").tab("show"),(i=(o=t.prev()).find(".tab-content:first > .tab-pane.active:first:visible")).length>0?(0,a.findAndSetFocus)(i):(0,a.findAndSetFocus)(o),setTimeout((function(){l.tabSwitching=!1}),200),n.stopPropagation(),!0):(this.tabSwitching=!1,!1)}},{key:"navigateForward",value:function(e,t,n){var o,i,l=this,s=(0,r.default)(e).find("li").has("a.active").next("li");return s.length>0?(s.find("a").tab("show"),(i=(o=t.next()).find(".tab-content:first > .tab-pane.active:first:visible")).length>0?(0,a.findAndSetFocus)(i):(0,a.findAndSetFocus)(o),setTimeout((function(){l.tabSwitching=!1}),200),n.stopPropagation(),!0):(this.tabSwitching=!1,!1)}},{key:"detach",value:function(){(0,o.default)(this.dialogContainer[0]).unbind(this.dialogTabBackward),(0,o.default)(this.dialogContainer[0]).unbind(this.dialogTabForward)}}])&&l(t.prototype,n),i&&l(t,i),e}();e.exports={dialogTabNavigator:s}},91669:(e,t,n)=>{var r,o;n(69600),n(21249),n(23123),n(74916),r=[n(52536)],void 0===(o=function(e){return function(t){var n=e[t]?e[t]:t;if(1==arguments.length)return n;try{var r=arguments;return n.split("%s").map((function(e,t){return t>0?t<r.length?[r[t],e].join(""):["%s",e].join(""):e})).join("")}catch(e){return console.error(e),n}}}.apply(t,r))||(e.exports=o)},35971:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(82772),n(79753),n(41817),n(32165),n(78783),n(66992),n(33948),n(68309),n(91038),n(19601),n(4129),Object.defineProperty(t,"__esModule",{value:!0}),t.default=j,n(47042),n(88674),n(41539),n(69070);var o=m(n(67294)),a=n(65770),i=m(n(8593)),l=m(n(52237)),s=n(87451),u=n(44092),c=p(n(45697)),d=p(n(41832)),f=p(n(96486));function p(e){return e&&e.__esModule?e:{default:e}}function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=(0,a.makeStyles)((function(e){return{formBorder:w(w({},e.mixins.panelBorder),{},{borderBottom:0}),form:{padding:"0.25rem"},addBtn:{marginLeft:"auto"}}}));function j(e){var t=e.containerClassName,n=e.headerSchema,r=e.headerVisible,c=v(e,["containerClassName","headerSchema","headerVisible"]),d=S(),p=(0,o.useRef)({}),b=(0,o.useRef)(c.schema),m=h((0,o.useState)(!0),2),g=m[0],_=m[1],w=h((0,o.useState)(0),2),O=w[0],j=w[1],P=(0,o.useCallback)((function(){if(c.canAddRow){var e=n.getNewData(p.current);c.dataDispatch({type:l.SCHEMA_STATE_ACTIONS.ADD_ROW,path:c.accessPath,value:e}),j((function(e){return e+1}))}}),[]);(0,o.useEffect)((function(){n.top=b.current.top}),[]);var x=b.current.top?f.default.get(b.current.top.sessData,f.default.slice(c.accessPath,0,-1)):f.default.get(b.current.sessData);return r=r&&(0,u.evalFunc)(null,r,x),o.default.createElement(a.Box,{className:t},o.default.createElement(a.Box,{className:d.formBorder},e.label&&o.default.createElement(i.DataGridHeader,{label:e.label}),r&&o.default.createElement(a.Box,{className:d.form},o.default.createElement(l.default,{formType:"dialog",getInitData:function(){return Promise.resolve({})},schema:n,viewHelperProps:e.viewHelperProps,showFooter:!1,onDataChange:function(e,t){p.current=t,_(n.addDisabled(p.current))},hasSQL:!1,isTabView:!1,resetKey:O}),o.default.createElement(a.Box,{display:"flex"},o.default.createElement(s.DefaultButton,{className:d.addBtn,onClick:P,disabled:g},"Add")))),o.default.createElement(i.default,y({},c,{label:"",canAdd:!1})))}j.propTypes={label:c.default.string,value:c.default.array,viewHelperProps:c.default.object,formErr:c.default.object,headerSchema:d.default.schemaUI.isRequired,headerVisible:c.default.func,schema:d.default.schemaUI,accessPath:c.default.array.isRequired,dataDispatch:c.default.func.isRequired,containerClassName:c.default.oneOfType([c.default.object,c.default.string])}},81922:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.confirmDeleteRow=function(e,t,n,a){r.default.confirm(n||(0,o.default)("Delete Row"),a||(0,o.default)("Are you sure you wish to delete this row?"),(function(){return e(),!0}),(function(){return t(),!0}))},t.pgAlertify=function(){return r.default},t.showFileDialog=function(e,t){var n={supported_types:e.supportedTypes||[],dialog_type:e.dialogType||"select_file",dialog_title:e.dialogTitle||"",btn_primary:e.btnPrimary||""};a.default.FileManager.init(),a.default.FileManager.show_dialog(n);var r=function(e){i(),t(e)},o=function(){return i()};a.default.Browser.Events.on("pgadmin-storage:finish_btn:"+n.dialog_type,r),a.default.Browser.Events.on("pgadmin-storage:cancel_btn:"+n.dialog_type,o);var i=function(){a.default.Browser.Events.off("pgadmin-storage:finish_btn:"+n.dialog_type,r),a.default.Browser.Events.off("pgadmin-storage:cancel_btn:"+n.dialog_type,o)}},t.onPgadminEvent=function(e,t){a.default.Browser.Events.on(e,t)},t.offPgadminEvent=function(e,t){a.default.Browser.Events.off(e,t)};var r=i(n(55455)),o=i(n(91669)),a=i(n(55112));function i(e){return e&&e.__esModule?e:{default:e}}},84610:(e,t,n)=>{n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(82772),n(79753),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(47042),n(68309),n(91038),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(21249),n(69070);var r=m(n(67294)),o=n(30398),a=m(n(86010)),i=m(n(13410)),l=m(n(89354)),s=m(n(66735)),u=m(n(51159)),c=m(n(41959)),d=n(87451),f=m(n(45697)),p=n(65770),b=m(n(91669));function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=(0,o.makeStyles)((function(e){return{root:{display:"flex",flexDirection:"column",height:"100%"},rightPanel:{position:"relative",minHeight:100,display:"flex",paddingLeft:"1.5em",paddingTop:"0em",flex:5,overflow:"auto",height:"100%"},leftPanel:_(_({display:"flex",flexDirection:"column",alignItems:"flex-start",borderRight:"1px solid"},e.mixins.panelBorder.right),{},{flex:1.6}),label:{display:"inline-block",position:"relative",paddingLeft:"0.5em",flex:6},labelArrow:{display:"inline-block",position:"relative",flex:1},stepLabel:{padding:"1em"},active:{fontWeight:600},activeIndex:{backgroundColor:e.otherVars.activeStepBg+" !important",color:e.otherVars.activeStepFg+" !important"},stepIndex:{padding:"0.5em 1em ",height:"2.5em",borderRadius:"2em",backgroundColor:e.otherVars.stepBg,color:e.otherVars.stepFg,display:"inline-block",flex:.5},wizard:{width:"100%",height:"100%",minHeight:100,display:"flex",flexWrap:"wrap"},wizardFooter:{borderTop:"1px solid #dde0e6 !important",padding:"0.5rem",display:"flex",flexDirection:"row",flex:1},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},actionBtn:{alignItems:"flex-start"},buttonMargin:{marginLeft:"0.5em"},stepDefaultStyle:{width:"100%",height:"100%"}}}));function S(e){var t=e.stepList,n=e.onStepChange,o=e.onSave,f=e.className,m=g(e,["stepList","onStepChange","onSave","className"]),h=O(),v=y(r.default.useState(0),2),_=v[0],w=v[1],S=t&&t.length>0?t:[],j=y(r.default.useState(!1),2),P=j[0],x=j[1];return r.default.useEffect((function(){n&&n({currentStep:_})}),[_]),r.default.useEffect((function(){m.disableNextStep&&x(m.disableNextStep())})),r.default.createElement("div",{className:(0,a.default)(h.root,null==m?void 0:m.rootClass)},r.default.createElement("div",{className:(0,a.default)(h.wizard,f)},r.default.createElement(p.Box,{className:h.leftPanel},S.map((function(e,t){return r.default.createElement(p.Box,{key:e,className:(0,a.default)(h.stepLabel,t===_?h.active:"")},r.default.createElement(p.Box,{className:(0,a.default)(h.stepIndex,t===_?h.activeIndex:"")},t+1),r.default.createElement(p.Box,{className:h.label},e," "),r.default.createElement(p.Box,{className:h.labelArrow},t===_?r.default.createElement(s.default,null):null))}))),r.default.createElement("div",{className:(0,a.default)(h.rightPanel,m.stepPanelCss)},r.default.Children.map(m.children,(function(e){return r.default.createElement("div",{hidden:e.props.stepId!==_,className:(0,a.default)(e.props.className,h.stepDefaultStyle)},e)})))),r.default.createElement("div",{className:h.wizardFooter},r.default.createElement(p.Box,null,r.default.createElement(d.PgIconButton,{"data-test":"dialog-help",onClick:function(){return m.onHelp()},icon:r.default.createElement(u.default,null),title:"Help for this dialog.",disabled:m.disableDialogHelp})),r.default.createElement(p.Box,{className:h.actionBtn,marginLeft:"auto"},r.default.createElement(d.DefaultButton,{onClick:function(){w((function(e){return e-1<0?e:e-1}))},disabled:0===_,className:h.buttonMargin,startIcon:r.default.createElement(l.default,null)},(0,b.default)("Back")),r.default.createElement(d.DefaultButton,{onClick:function(){w((function(e){return e+1}))},className:h.buttonMargin,startIcon:r.default.createElement(i.default,null),disabled:_==S.length-1||P},(0,b.default)("Next")),r.default.createElement(d.PrimaryButton,{className:h.buttonMargin,startIcon:r.default.createElement(c.default,null),disabled:_!=S.length-1,onClick:o},(0,b.default)("Finish")))))}var j=S;t.default=j,S.propTypes={props:f.default.object,stepList:f.default.array,onSave:f.default.func,onHelp:f.default.func,onStepChange:f.default.func,className:f.default.oneOfType([f.default.string,f.default.object]),disableNextStep:f.default.func,stepPanelCss:f.default.oneOfType([f.default.string,f.default.object]),rootClass:f.default.oneOfType([f.default.string,f.default.object]),children:f.default.oneOfType([f.default.arrayOf(f.default.node),f.default.node]),disableDialogHelp:f.default.bool}},44232:(e,t,n)=>{n(82526),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=d,n(21249),n(47941),n(82772);var r=s(n(67294)),o=n(30398),a=n(65770),i=s(n(86010)),l=s(n(45697));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=(0,o.makeStyles)((function(){return{stepPanel:{height:"100%",width:"100%",minHeight:"100px",paddingBottom:"1em",paddingRight:"1em",overflow:"auto"}}}));function d(e){var t=e.stepId,n=e.className,o=u(e,["stepId","className"]),l=c();return r.default.createElement(a.Box,{id:t,className:(0,i.default)(l.stepPanel,n),style:null!=o&&o.height?{height:o.height}:null},r.default.Children.map(o.children,(function(e){return r.default.createElement(r.default.Fragment,null,e)})))}d.propTypes={stepId:l.default.number,height:l.default.number,className:l.default.oneOfType([l.default.string,l.default.object]),children:l.default.oneOfType([l.default.arrayOf(l.default.node),l.default.node])}},72945:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.processEventDebugger=function(e,t,n,o){var a,i,l="";this.validateShortcutKeys(n.edit_grid_values,t)?(this._stopEventPropagation(t),(a=e.find('div.wcPanelTabContent:not(".wcPanelTabContentHidden")')).length&&(i=(0,r.default)(a).find("td.editable:first")).length&&i.trigger("click")):this.validateShortcutKeys(n.move_next,t)?(this._stopEventPropagation(t),l=s(o,"right")):this.validateShortcutKeys(n.move_previous,t)?(this._stopEventPropagation(t),l=s(o,"left")):this.validateShortcutKeys(n.switch_panel,t)&&(this._stopEventPropagation(t),l=s(o,"switch"));return l},t.processEventQueryTool=function(e,t,n,o){if(e.isQueryRunning())return;var a=n.which||n.keyCode,i="",l=e.preferences.execute_query,u=e.preferences.explain_query,c=e.preferences.explain_analyze_query,d=e.preferences.download_results,f=e.preferences.move_next,p=e.preferences.move_previous,b=e.preferences.switch_panel,m=e.preferences.toggle_case,y=e.preferences.commit_transaction,h=e.preferences.rollback_transaction,g=e.preferences.save_data,v=e.preferences.show_query_tool;if(this.validateShortcutKeys(l,n))this._stopEventPropagation(n),t.executeQuery(e);else if(this.validateShortcutKeys(u,n))this._stopEventPropagation(n),t.explain(e);else if(this.validateShortcutKeys(c,n))this._stopEventPropagation(n),t.explainAnalyze(e);else if(this.validateShortcutKeys(d,n))e.is_save_results_to_file_disabled||(this._stopEventPropagation(n),t.download(e));else if(this.validateShortcutKeys(m,n))this._stopEventPropagation(n),t.toggleCaseOfSelectedText(e);else if(this.validateShortcutKeys(y,n))e.is_transaction_buttons_disabled||(this._stopEventPropagation(n),t.executeCommit(e));else if(this.validateShortcutKeys(h,n))e.is_transaction_buttons_disabled||(this._stopEventPropagation(n),t.executeRollback(e));else if(this.validateShortcutKeys(g,n))this._stopEventPropagation(n),t.saveDataChanges(e);else if(this.validateShortcutKeys(v,n))this._stopEventPropagation(n),t.openQueryTool(e);else if((this.isMac()&&n.metaKey||!this.isMac()&&n.ctrlKey)&&!n.altKey&&n.shiftKey&&191===a)this._stopEventPropagation(n),t.commentBlockCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(n)&&n.metaKey||!this.isMac()&&!this.isKeyAltShift(n)&&n.ctrlKey)&&191===a)this._stopEventPropagation(n),t.commentLineCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(n)&&n.metaKey||!this.isMac()&&!this.isKeyAltShift(n)&&n.ctrlKey)&&190===a)this._stopEventPropagation(n),t.uncommentLineCode(e);else if((this.isMac()&&n.metaKey||!this.isMac()&&n.ctrlKey)&&!n.altKey&&n.shiftKey&&75===a)this._stopEventPropagation(n),t.formatSql(e);else if(27==a)t.focusOut(e),(0,r.default)(n.target).hasClass("dropdown-item")&&(0,r.default)(n.target).closest(".dropdown-submenu").length>0&&(0,r.default)(n.target).closest(".dropdown-submenu").find(".dropdown-menu").removeClass("show");else if(this.validateShortcutKeys(f,n))this._stopEventPropagation(n),i=s(o,"right");else if(this.validateShortcutKeys(p,n))this._stopEventPropagation(n),i=s(o,"left");else if(this.validateShortcutKeys(b,n))this._stopEventPropagation(n),i=s(o,"switch");else if(38===a||40===a){if((0,r.default)(n.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(n);var _=(0,r.default)(n.target).closest("li");for((0,r.default)(n.target).closest(".dropdown-menu").find(".show").removeClass("show"),38===a?_=_.prev():40===a&&(_=_.next());_.hasClass("dropdown-divider")||_.hasClass("d-none")||_.find(".dropdown-item").first().hasClass("disabled");)38===a?_=_.prev():40===a&&(_=_.next());_.find(".dropdown-item").trigger("focus")}}else if(37===a||39===a){if((0,r.default)(n.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(n);var w=(0,r.default)(n.target).closest("li");if(39===a)w.hasClass("dropdown-submenu")&&(w.find(".dropdown-menu").addClass("show"),w.find(".dropdown-menu .dropdown-item").first().trigger("focus"));else if(37===a){var O=w.closest(".dropdown-menu");O.closest(".dropdown-submenu").length>0&&(O.removeClass("show"),(w=O.closest(".dropdown-submenu")).find(".dropdown-item").trigger("focus"))}}}else{var S=this.validateMacros(e,n);!1!==S&&(this._stopEventPropagation(n),t.executeMacro(e,S))}return i},t.focusDockerPanel=s,t.validateShortcutKeys=function(e,t){if(!e)return!1;var n=t.which||t.keyCode;return e.alt==t.altKey&&e.shift==t.shiftKey&&e.control==t.ctrlKey&&e.key.key_code==n},t.validateMacros=function(e,t){var n=t.which||t.keyCode,r=e.macros.filter((function(e){return e.alt==t.altKey&&e.control==t.ctrlKey&&e.key_code==n}));if(1==r.length)return r[0].id;return!1},t._stopEventPropagation=function(e){e.cancelBubble=!0,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},t.isMac=function(){return-1!=window.navigator.platform.search("Mac")},t.isKeyCtrlAlt=function(e){return e.ctrlKey||e.altKey},t.isKeyAltShift=function(e){return e.altKey||e.shiftKey},t.isKeyCtrlShift=function(e){return e.ctrlKey||e.shiftKey},t.isKeyCtrlAltShift=function(e){return e.ctrlKey||e.altKey||e.shiftKey},t.isAltShiftBoth=function(e){return e.altKey&&e.shiftKey&&!e.ctrlKey},t.isCtrlShiftBoth=function(e){return e.ctrlKey&&e.shiftKey&&!e.altKey},t.isCtrlAltBoth=function(e){return e.ctrlKey&&e.altKey&&!e.shiftKey},t.shortcut_key=l,t.shortcut_title=function(e,t){var n="";if(null==t)return n;t.alt&&(n=(0,o.default)("Alt")+"+");t.shift&&(n+=(0,o.default)("Shift")+"+");t.control&&(n+=(0,o.default)("Ctrl")+"+");return n+=l(t),"".concat(e," (").concat(n,")")},t.shortcut_accesskey_title=function(e,t){return"".concat(e," (")+(0,o.default)("accesskey")+" + ".concat(l(t),")")},n(64765),n(74916),n(92222),n(69826),n(57327);var r=i(n(19755)),o=i(n(91669)),a=n(44092);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t="";return e.key&&e.key.char&&(t=e.key.char.toUpperCase()),t}function s(e,t){if(e){if(!e._focusFrame){if(0==e._frameList.length&&0==e._frameList[0]._panelList.length)return;e._frameList[0]._panelList[e._frameList[0]._curTab].focus()}var n=e._focusFrame,r=0,o=!1;if("switch"==t){var i,l=e._frameList.length;for(i=0;i<l&&n!==e._frameList[i];i++);r=(n=e._frameList[(0,a.getMod)(i+1,l)])._curTab,o=!0}else"left"==t?r=(0,a.getMod)(n._curTab-1,n._panelList.length):"right"==t&&(r=(0,a.getMod)(n._curTab+1,n._panelList.length));var s=n._panelList[r];return s.$container.find('*[tabindex]:not([tabindex="-1"])').trigger("focus"),s.focus(o),s._type}}},42591:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.nodeHasStatistics=function(e,t,n){if("function"==typeof t.hasStatistics){var r=e.tree.getTreeNodeHierarchy(n);return t.hasStatistics(r)}return t.hasStatistics}},23602:(e,t,n)=>{n(69826);var r=i(n(19755)),o=i(n(81311)),a=i(n(1950));function i(e){return e&&e.__esModule?e:{default:e}}e.exports={modifyAcitreeAnimation:function(e,t){var n=e.get_preference("browser","enable_acitree_animation").value;o.default.isUndefined(t)&&(t=e.tree),n?t.options({animateRoot:!0,unanimated:!1,show:o.default.extend(t.options().show,{duration:75}),hide:o.default.extend(t.options().hide,{duration:75}),view:o.default.extend(t.options().view,{duration:75})}):t.options({animateRoot:!1,unanimated:!0,show:o.default.extend(t.options().show,{duration:0}),hide:o.default.extend(t.options().hide,{duration:0}),view:o.default.extend(t.options().view,{duration:0})})},modifyAlertifyAnimation:function(e){(o.default.isUndefined(e)||o.default.isNull(e))&&(e=a.default.pgAdmin.Browser),e.get_preference("browser","enable_alertify_animation").value?((0,r.default)(document).find("body").removeClass("alertify-no-animation"),o.default.each(document.getElementsByTagName("iframe"),(function(e){(0,r.default)(e.contentDocument).find("body").removeClass("alertify-no-animation")}))):((0,r.default)(document).find("body").addClass("alertify-no-animation"),o.default.each(document.getElementsByTagName("iframe"),(function(e){(0,r.default)(e.contentDocument).find("body").addClass("alertify-no-animation")})))}}},90585:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.url=function(e,t,n){var r=a.default.tree.findNodeByDomElement(t),i=null;r&&r.anyFamilyMember((function(e){var t=e.getData(),r=a.default.Nodes[t._type],l=r&&r.dashboard;return(0,o.isFunction)(l)&&(l=l.apply(r,[e,t,n])),null!==(i=(0,o.isString)(l)?l:null)}));return i};var r,o=n(44092),a=(r=n(33883))&&r.__esModule?r:{default:r}},16194:(e,t,n)=>{var r=n(64492);n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.enabled=function(e,t,n,o){if(!(0,a.isValidTreeNodeData)(n))return!1;var l=(e||i.default.Browser.tree).findNodeByDomElement(o);if(!l)return!1;return function(e){return"database"===e._type&&e.allowConn||"database"!==e._type}(n)&&-1!==r.indexOf(t,n._type)&&!function(e){return e.anyFamilyMember((function(e){return"catalog"===e.getData()._type}))}(l)},n(82772);var o,a=n(79226),i=(o=n(55112))&&o.__esModule?o:{default:o}},55112:(e,t,n)=>{var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82526),n(41817),n(32165),n(78783),n(66992),n(33948),n(4723),n(74916),n(54678),n(47042),n(15306),n(23123),n(91058),n(83710),n(41539),n(39714),void 0===(r=function(){var e=window.pgAdmin=window.pgAdmin||{};function t(e,t,n){return void 0===n||0==+n?Math[e](t):(t=+t,n=+n,isNaN(t)||n%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n))))}return function(e,t,n){function r(t,n,r,a){r=r||"width";var i,s,u,f=(n.match(c)||[])[2],p="px"===f?1:d[f+"toPx"];if(p||/r?em/i.test(f)&&!a)t=p?t:"rem"===f?l:"fontSize"===r&&+e.parentNode||t,p=p||parseFloat(o(t,"fontSize")),u=parseFloat(n)*p;else{s=(i=t.style)[r];try{i[r]=n}catch(e){return 0}u=i[r]?parseFloat(o(t,r)):0,i[r]=undefined!==s?s:null}return u}function o(e,t){var n,i,l,s,d,f=["paddingTop","paddingBottom","borderTop","borderBottom"],p=4;if(i=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)],"%"===(l=((n=u?u(e)[t]:i?i+"px":"fontSize"===t?r(e,"1em","left",1)+"px":e.currentStyle[t]).match(c)||[])[2])&&a)if(/^top|bottom/.test(t)){for(s=(d=e.parentNode||e).offsetHeight;p--;)s-=parseFloat(o(d,f[p]));n=parseFloat(n)/100*s+"px"}else n=r(e,n);else("auto"===n||l&&"px"!==l)&&u?n=0:l&&"px"!==l&&!u&&(n=r(e,n)+"px");return n}var a,i=t.createElement("test"),l=t.documentElement,s=t.defaultView,u=s&&s.getComputedStyle,c=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,d={},f=[1/25.4,1/2.54,1/72,1/6],p=["mm","cm","pt","pc","in","mozmm"],b=6;for(l.appendChild(i),u&&(i.style.marginTop="1%",a="1%"===u(i).marginTop);b--;)d[p[b]+"toPx"]=f[b]?f[b]*d.inToPx:r(i,"1"+p[b]);l.removeChild(i),e.toPx=r}(e,window.document),e.natural_sort=function(e,t,n){n=n||{};var r,a,i=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,l=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,c=/^0/,d=function(e){return n.insensitive&&(""+e).toLowerCase()||""+e},f=d(e).replace(l,"")||"",p=d(t).replace(l,"")||"",b=f.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=p.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),y=parseInt(f.match(u))||1!==b.length&&f.match(s)&&Date.parse(f),h=parseInt(p.match(u))||y&&p.match(s)&&Date.parse(p)||null,g=n.desc?-1:1;if(h){if(y<h)return-1*g;if(y>h)return 1*g}for(var v=0,_=Math.max(b.length,m.length);v<_;v++){if(r=!(b[v]||"").match(c)&&parseFloat(b[v])||b[v]||0,a=!(m[v]||"").match(c)&&parseFloat(m[v])||m[v]||0,isNaN(r)!==isNaN(a))return(isNaN(r)?1:-1)*g;if(o(r)!==o(a)&&(r+="",a+=""),r<a)return-1*g;if(r>a)return 1*g}return 0},e.numeric_comparator=function(e,t){return(e=parseInt(e))<(t=parseInt(t))?-1:e==t?0:1},Math.round10||(Math.round10=function(e,n){return t("round",e,n)}),Math.floor10||(Math.floor10=function(e,n){return t("floor",e,n)}),Math.ceil10||(Math.ceil10=function(e,n){return t("ceil",e,n)}),e}.apply(t,[]))||(e.exports=r)},75471:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.showOnScroll){var t=r.default.fn.select2.amd.require("select2/utils"),n=function(e,t){this.$element=e,this.options=t,this._dataToConvert=t.get("data")||[]},a=null;a=null!=e.data?r.default.fn.select2.amd.require("select2/data/array"):r.default.fn.select2.amd.require("select2/data/select"),t.Extend(n,a),n.prototype.query=function(e,t){var n=[],o=this;e.page||(e.page=1);this.$element.children().each((function(){var t=(0,r.default)(this);if(t.is("option")||t.is("optgroup")){var a=o.item(t),i=o.matches(e,a);null!==i&&n.push(i)}})),t({results:n.slice(20*(e.page-1),20*e.page),pagination:{more:n.length>=20*e.page}})},e.minimumInputLength>0&&(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/minimumInputLength"))),e.maximumInputLength>0&&(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/maximumInputLength"))),e.maximumSelectionLength>0&&(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/maximumSelectionLength"))),e.tags&&(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/tags"))),null==e.tokenSeparators&&null==e.tokenizer||(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/tokenizer"))),e.dataAdapter=n,o.default.isUndefined(e.ajax)&&(e.ajax={})}return e},n(47042),n(20454);var r=a(n(19755)),o=a(n(81311));function a(e){return e&&e.__esModule?e:{default:e}}},73870:(e,t)=>{var n;void 0===(n=function(){return function(e){var t=Math.abs(e),n=0,r=["bytes","kB","MB","GB","TB","PB"];if(t<10240)return t+" "+r[n];do{t/=1024,n+=1}while(t>10239);return Math.round(t)+" "+r[n]}}.apply(t,[]))||(e.exports=n)},79387:(e,t,n)=>{var r,o=n(19755);n(24812),n(69826),(r=o).extend(!0,window,{Slick:{Plugins:{HeaderButtons:function(e){var t,n=this,o=new window.Slick.EventHandler,a={buttonCssClass:"slick-header-button"};function i(t,n){var o=n.column;if(o.header&&o.header.buttons)for(var a=o.header.buttons.length;a--;){var i=o.header.buttons[a],l=r("<div></div>").addClass(e.buttonCssClass).data("column",o).data("button",i);i.content&&l.append(i.content),i.showOnHover&&l.addClass("slick-header-button-hidden"),i.image&&l.css("backgroundImage","url("+i.image+")"),i.cssClass&&l.addClass(i.cssClass),i.tooltip&&l.attr("title",i.tooltip),i.command&&l.data("command",i.command),i.handler&&l.bind("click",i.handler),l.bind("click",s).prependTo(n.node)}}function l(t,n){var o=n.column;o.header&&o.header.buttons&&r(n.node).find("."+e.buttonCssClass).remove()}function s(e){var o=r(this).data("command"),a=r(this).data("column"),i=r(this).data("button");null!=o&&(n.onCommand.notify({grid:t,column:a,command:o,button:i},e,n),t.updateColumnHeader(a.id)),e.preventDefault(),e.stopPropagation()}r.extend(this,{init:function(n){e=r.extend(!0,{},a,e),t=n,o.subscribe(t.onHeaderCellRendered,i).subscribe(t.onBeforeHeaderCellDestroy,l),t.setColumns(t.getColumns())},destroy:function(){o.unsubscribeAll()},onCommand:new window.Slick.Event})}}}})},5205:(e,t,n)=>{var r,o=n(19755);n(69826),(r=o).extend(!0,window,{Slick:{AutoColumnSize:function(){var e,t,n,o={A:65};function a(e){e.ctrlKey&&e.shiftKey&&e.keyCode===o.A&&i()}function i(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t.find(".slick-header-column"),i=e.getColumns();a.each((function(t,a){var l=r(a).data("column");if(void 0===l.width||isNaN(l.width)||o){var c=u(a),d=e.getColumnIndex(l.id),f=i[d],p=Math.max(c,s(l,d))+1;void 0!==n&&n>0&&(p=Math.min(n,p)),f.width=p+(l.addWidth||0)}})),e.setColumns(i),e.onColumnsResized.notify()}function l(t){var n=r(t.currentTarget).closest(".slick-header-column"),o=n.data("column");if(o&&o.resizable){t.preventDefault(),t.stopPropagation();var a=u(n[0]),i=e.getColumnIndex(o.id),l=e.getColumns(),c=l[i],d=Math.max(a,s(o,i))+1;d!==c.width&&(c.width=d,e.setColumns(l),e.onColumnsResized.notify())}}function s(o,a){var i=[],l=function(){var e=r('<div class="slick-row"><div class="slick-cell"></div></div>');e.find(".slick-cell").css({visibility:"hidden","text-overflow":"initial","white-space":"nowrap"});var n=t.find(".grid-canvas").first();return r(n).append(e),e}(),s=e.getData();window.Slick.Data&&s instanceof window.Slick.Data.DataView&&(s=s.getItems());for(var u=0;u<s.length;u++)i.push(s[u][o.field]);var c=function(e,t){var n=r(e.find(".slick-cell"));return n.append(t),n.find("*").css("position","relative"),n.outerWidth()+1}(l,function(e,t,o,a,i){var l=0,s=null,u=t.formatter;return r(e).each((function(e,c){var d;u&&(c=(d=r("<span>"+u(e,o,c,t,a[e])+"</span>")).text()||c);var f=c?function(e,t){return n.font=e.css("font-size")+" "+e.css("font-family"),n.measureText(t).width}(i,c):0;f>l&&(l=f,s=d||c)})),s}(i,o,a,s,l));return function(e){r(e).remove()}(l),c}function u(e){var t,n=e.cloneNode(!0);return n.style.cssText="position: absolute; visibility: hidden;right: auto;text-overflow: initial;white-space: nowrap;",e.parentNode.insertBefore(n,e),t=n.offsetWidth,n.parentNode.removeChild(n),t}return{init:function(o){(t=r((e=o).getContainerNode())).on("dblclick.autosize",".slick-resizable-handle",l),t.keydown(a),n=document.createElement("canvas").getContext("2d"),e.resizeAllColumns=i},destroy:function(){t.off()}}}}})},81240:(e,t,n)=>{var r,o;function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(41539),n(68309),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(69600),n(15306),n(74916),n(47042),n(54678),n(9653),n(79753),r=[n(19755),n(81311),n(91669),n(28008),n(55455)],void 0===(o=function(e,t,n,r,o){var i={epicRandomString:function(e){for(var t=[],n="0123456789abcdef",r=0;r<36;r++)t[r]=n.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=n.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("").replace(/-/g,"").substr(0,e)},getHash:function(e){for(var t=0,n=e.length,r=0;r<n;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t},calculateColumnWidth:function(t){e("body").append('<span id="pg_text" style="visibility: hidden;">'+t+"</span>");var n=e("#pg_text").width()+23;return e("#pg_text").remove(),n},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},disable_connection_dropdown:function(t){t?(e(".conn-info-dd").prop("disabled",!0),e(".connection-data").css({pointerEvents:"none",cursor:"arrow"})):(e(".conn-info-dd").prop("disabled",!1),e(".connection-data").css({pointerEvents:"auto",cursor:"pointer"}))},previousStatus:null,fetchConnectionStatus:function(t,o,a){var l=r("sqleditor.connection_status",{trans_id:t.transId});if("visible"===document.visibilityState&&"visible"===o.data("panel-visible")&&!a.hasClass("obtaining-conn")){var s=t;e.ajax({url:l,method:"GET"}).done((function(e){if(e&&e.data){var t=e.data.status,r=e.data.message,l=!1;switch(s.update_notifications(e.data.notifies),t){case 1:t!=i.previousStatus||a.hasClass("fa-hourglass-half")||(a.removeClass().addClass("fa fa-hourglass-half"),l=!0);break;case 2:i.previousStatus==t||a.hasClass("fa-clock")||(a.removeClass().addClass("fa fa-clock"),l=!0);break;case 3:i.previousStatus==t||a.hasClass("fa-exclamation-circle")||(a.removeClass().addClass("fa fa-exclamation-circle"),l=!0);break;case 4:i.previousStatus==t||a.hasClass("fa-exclamation-triangle")||(a.removeClass().addClass("fa fa-exclamation-triangle"),l=!0);break;default:i.previousStatus==t||a.hasClass("fa-query_tool_connected")||(a.removeClass().addClass("pg-font-icon icon-connected"),l=!0)}i.previousStatus=t,l&&(o.popover("hide"),o.attr("data-content",r))}else i.previousStatus=-99,r=n("An unexpected error occurred - ensure you are logged into the application."),o.attr("data-content",r),a.hasClass("icon-disconnected")||(o.popover("hide"),a.removeClass().addClass("pg-icon-font icon-disconnected"))})).fail((function(e){i.previousStatus=-1;var t=n("Transaction status check failed.");0==e.readyState?t=n("Not connected to the server or the connection to the server has been closed."):e.responseJSON&&e.responseJSON.errormsg&&(t=e.responseJSON.errormsg),o.attr("data-content",t),a.hasClass("icon-disconnected")||(o.popover("hide"),a.removeClass().addClass("pg-font-icon icon-disconnected"))}))}},updateConnectionStatusFlag:function(t){var n=e(".connection_status");n.data("panel-visible")!=t&&n.data("panel-visible",t)},calcFontSize:function(e){if(e){e=parseFloat(Math.round(parseFloat(e+"e+2"))+"e-2");var t=Number(e);if(t>0)return t+"em"}return"1em"},addEditableIcon:function(e,n){var r={cssClass:"editable-column-header-icon",content:n?'<i class="fa fa-pencil-alt"></i>':'<i class="fa fa-lock"></i>'};t.isUndefined(e.header)||t.isUndefined(e.header.buttons)?e.header={buttons:[r]}:e.header.buttons.push(r)},isModalOpen:function(e){if(Array.isArray(e)){var t,n=a(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;try{if(o.dialog(r)&&o.dialog(r).isOpen())return!0}catch(e){console.warn(e.stack||e)}}}catch(e){n.e(e)}finally{n.f()}}return!1}};return i}.apply(t,r))||(e.exports=o)},77019:(e,t,n)=>{n(79753),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(91038),n(47042),n(68309),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.browserTreeState=t.pgBrowser=void 0,n(32564),n(69600),n(69826),n(64765),n(74916),n(82772),n(23123),n(40561);var r=s(n(81311)),o=s(n(19755)),a=s(n(28008)),i=s(n(91669)),l=s(n(55112));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=l.default.Browser=l.default.Browser||{};t.pgBrowser=d;var f=d.browserTreeState=d.browserTreeState||{};t.browserTreeState=f,r.default.extend(d.browserTreeState,{parent:"server",orig_parent:"server_group",stored_state:{},last_state:{},current_state:{},init:function(){var e=d.get_preference("browser","browser_tree_state_save_interval");r.default.isUndefined(e)||-1===e.value?r.default.isUndefined(e)||o.default.ajax({url:(0,a.default)("settings.reset_tree_state"),type:"DELETE"}).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,i.default)('Error resetting the tree saved state."'),t)})):(setInterval(this.save_state,1e3*e.value),this.fetch_state.apply(this),d.Events.on("pgadmin:browser:tree:expand-from-previous-tree-state",this.expand_from_previous_state,this),d.Events.on("pgadmin:browser:tree:remove-from-tree-state",this.remove_from_cache,this),d.Events.on("pgadmin:browser:tree:update-tree-state",this.update_cache,this))},save_state:function(){var e=d.browserTreeState;e.last_state!=JSON.stringify(e.current_state)&&o.default.ajax({url:(0,a.default)("settings.save_tree_state"),type:"POST",contentType:"application/json",data:JSON.stringify(e.current_state)}).done((function(){e.last_state=JSON.stringify(e.current_state)})).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,i.default)('Error saving the tree state."'),t)}))},fetch_state:function(){var e=this;o.default.ajax({url:(0,a.default)("settings.get_tree_state"),type:"GET",dataType:"json",contentType:"application/json"}).done((function(t){e.stored_state=t})).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,i.default)("Error fetching the tree state."),t)}))},update_cache:function(e){var t,n=e&&d.tree.itemData(e),o=d.tree.getTreeNodeHierarchy(e),a=d.tree.pathId(d.tree.parent(e)),i=a.join(),l=[],s=-1;if(d.tree.hasParent(e)&&this.parent in o){if(t=o[this.parent]._id,d.tree.isOpen(e)){a.push(n.id),l=a.join(),t in this.current_state||(this.current_state[t]={paths:[],selected:{},conn_status:{},is_opened:{}});var u=r.default.find(this.current_state[t].paths,(function(e){return-1!==e.search(l)}));r.default.isUndefined(u)&&(r.default.isUndefined(this.current_state[t].paths)?this.current_state[t].paths=[]:s=this.current_state[t].paths.indexOf(i),-1!==s?this.current_state[t].paths[s]=l:this.current_state[t].paths.push(l))}this.update_database_status(e),this.update_current_selected_item(o)}},remove_from_cache:function(e){var t=this,n=t.stored_state||{},o=e&&d.tree.itemData(e),a=d.tree.getTreeNodeHierarchy(e);if(null!==a&&d.tree.hasParent(e)&&a.hasOwnProperty(t.parent)){var i=a&&a[t.parent]._id,l=a&&a[t.orig_parent].id;if(this.update_database_status(e),o._type!=t.parent&&"database"!=o._type){if(d.tree.isClosed(e)){var s=t.current_state[i].paths,u=void 0;if(a.hasOwnProperty("database")&&(u=a.database.id),!r.default.isUndefined(s)&&!r.default.isUndefined(s.length)){var c=0,f=void 0;r.default.each(s,(function(e){if(!r.default.isUndefined(e)){var n=e.split(",");if(-1!==n.indexOf(o.id)&&(void 0===u||void 0!==u&&-1!==n.indexOf(u))){var a=n.indexOf(o.id);n.splice(a),(f=n.join())==l?t.current_state[i].paths.splice(e,1):t.current_state[i].paths[c]=f}c++}}))}}}else i in n&&"paths"in n[i]&&(n[i].paths=t.current_state[i].paths,t.save_state())}},expand_from_previous_state:function(e){var t=this,n=t.stored_state||{},o=e&&d.tree.itemData(e),a=d.tree.getTreeNodeHierarchy(e);if(null!==a&&d.tree.hasParent(e)&&a.hasOwnProperty(t.parent)&&(o._type!=t.parent||!1!==d.tree.isOpen(e))){var i=n[a[t.parent]._id];if(!("database"==o._type&&i&&"conn_status"in i&&"is_opened"in i)||0!==i.conn_status[o.id]&&0!==i.is_opened[o.id]&&o.id in i.is_opened){if(!r.default.isUndefined(i)&&"paths"in i&&!r.default.isUndefined(i.paths.length)){var l=u(i.paths),s=void 0;a.hasOwnProperty("database")&&(s=a.database.id),r.default.each(l,(function(i){if(!r.default.isUndefined(i)){var l=i.split(",");if(-1!==l.indexOf(o.id)&&(void 0===s||void 0!==s&&-1!==l.indexOf(s))){var u=l.indexOf(o.id);if(d.tree.open(e),u==l.length-1){var c=n[a[t.parent]._id].paths.indexOf(i);n[a[t.parent]._id].paths.splice(c,1)}}}}))}this.select_tree_item(e)}}},update_database_status:function(e){var t=e&&d.tree.itemData(e),n=d.tree.getTreeNodeHierarchy(e);if(n.hasOwnProperty("database")){var r=n.database.id,o=n&&n[this.parent]._id;o in this.current_state&&"selected"in this.current_state[o]&&(n.database.connected?this.current_state[o].conn_status[r]=1:this.current_state[o].conn_status[r]=0,"database"==t._type&&(d.tree.isOpen(e)?this.current_state[o].is_opened[r]=1:this.current_state[o].is_opened[r]=0))}},update_current_selected_item:function(e){if(this.parent in e){var t=e&&e[this.parent]._id,n=d.tree.itemData(d.tree.selected()),o=void 0;n=n?n.id:void 0,e.hasOwnProperty("database")&&(o=e.database.id),t in this.current_state&&"selected"in this.current_state[t]&&!r.default.isUndefined(n)&&(this.current_state[t].selected[e[this.parent].id]=n,r.default.isUndefined(o)||(this.current_state[t].selected[o]=n))}},select_tree_item:function(e){var t=this.stored_state||{},n=e&&d.tree.itemData(e),r=d.tree.getTreeNodeHierarchy(e),o=t[r[this.parent]._id];if(r.hasOwnProperty("database")){var a=r.database.id;o&&"selected"in o&&a in o.selected&&o.selected[a]==n.id&&d.tree.select(e)}}})},79226:(e,t,n)=>{n(82526),n(41817),n(32165),n(78783),n(66992),n(33948),n(38880),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.findInTree=_,t.isValidTreeNodeData=t.Tree=void 0,n(82772),n(23123),n(74916),n(40561),n(57327),n(79753),n(88674),n(41539),n(69600),n(23157),n(89554),n(54747),n(47941),n(15306),n(69070),n(35666);var r=u(n(96486)),o=u(n(19755)),a=u(n(55112)),i=n(46521),l=n(95197),s=n(44092);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,l,"next",e)}function l(e){b(a,r,o,i,l,"throw",e)}i(void 0)}))}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){var o,i=n?n._metadata.data:[],l=a.default.Browser;if(i&&l.Nodes[i._type]){if(o=l.Nodes[i._type],null===l.tree)return;if("dragstart"==t&&l.tree.handleDraggable(e,n),"added"!=t&&"beforeopen"!=t&&"loaded"!=t||l.tree.addNewNode(n.getMetadata("data").id,n.getMetadata("data"),n,n.parent.path),r.default.isObject(o.callbacks)&&t in o.callbacks&&"function"==typeof o.callbacks[t]&&!o.callbacks[t].apply(o,[n,i,l,[],t]))return!0;try{o.trigger("browser-node."+t,o,n,i),l.Events.trigger("pgadmin-browser:tree:"+t,n,i,o)}catch(e){return console.warn(e.stack||e),!1}}return!0}var g=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tree=t,this.tree.onTreeEvents(h),this.rootNode=n.tempTree,this.Nodes=r?r.Nodes:a.default.Browser.Nodes,this.draggableTypes={}}var t,n,s,u,c,f,b,g,w,O,S,j,P,x,C,E,k,D,T,N,R;return t=e,(n=[{key:"refresh",value:(R=m(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.refresh(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"add",value:(N=m(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.create(t.parent,n.itemData);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return N.apply(this,arguments)})},{key:"before",value:(T=m(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.create(t.parent,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return T.apply(this,arguments)})},{key:"update",value:(D=m(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.update(t,n.itemData);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return D.apply(this,arguments)})},{key:"remove",value:(k=m(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.remove(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"append",value:(E=m(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.create(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return E.apply(this,arguments)})},{key:"next",value:function(e){if(e){var t=this.parent(e);if(t&&t.children.length>0){var n=t.children.indexOf(e);if(-1!==n&&t.children.length!==n+1)return t.children[n+1]}}return null}},{key:"prev",value:function(e){if(e){var t=this.parent(e);if(t&&t.children.length>0){var n=t.children.indexOf(e);if(-1!==n&&0!==n)return t.children[n-1]}}return null}},{key:"open",value:(C=m(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isOpen(t)){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,this.tree.toggleDirectory(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"ensureVisible",value:(x=m(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.ensureVisible(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"openPath",value:(P=m(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return parent=t.parent,e.next=3,this.tree.openDirectory(parent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{key:"close",value:(j=m(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.closeDirectory(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return j.apply(this,arguments)})},{key:"toggle",value:(S=m(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.toggleDirectory(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)})},{key:"select",value:(O=m(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],e.next=3,this.tree.setActiveFile(t,n);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)})},{key:"selectNode",value:(w=m(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.length>1&&void 0!==r[1]&&r[1],this.tree.setActiveFile(t,n);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"unload",value:(g=m(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.unload(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"addIcon",value:(b=m(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==t&&void 0!==t.getMetadata("data")&&(t.getMetadata("data").icon=n.icon),e.next=3,this.tree.addIcon(t,n);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"removeIcon",value:function(){}},{key:"setLeaf",value:function(){}},{key:"setLabel",value:(f=m(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.tree.setLabel(t,n);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"setInode",value:(c=m(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._children&&(t._children=null),e.next=3,this.tree.closeDirectory(t);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"setId",value:(u=m(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(t.getMetadata("data").id=n.id);case 1:case"end":return e.stop()}}),e)}))),function(e,t){return u.apply(this,arguments)})},{key:"deselect",value:function(e){this.tree.deSelectActiveFile(e)}},{key:"wasInit",value:function(){return!0}},{key:"wasLoad",value:function(e){return!e||e.type!==i.FileType.Directory||e.isExpanded&&null!=e.children&&e.children.length>0}},{key:"parent",value:function(e){return e.parent}},{key:"first",value:function(e){var t=this.tree.getModel();return null==e&&null!==t.root.children?t.root.children[0]:null!=e&&e.branchSize>0?e.children[0]:null}},{key:"children",value:function(e){var t=this.tree.getModel();return e?null!==e.children?e.children:[]:t.root.children}},{key:"itemFrom",value:function(e){return this.tree.getItemFromDOM(e[0])}},{key:"DOMFrom",value:function(e){return this.tree.getDOMFromItem(e)}},{key:"addCssClass",value:function(e,t){this.tree.addCssClass(e,t)}},{key:"path",value:function(e){if(e)return e.path}},{key:"pathId",value:function(e){if(e){var t=e.path.split("/");return t.splice(0,1),t}return[]}},{key:"itemFromDOM",value:function(e){return this.tree.getItemFromDOM(e[0])}},{key:"siblings",value:function(e){if(this.hasParent(e)){var t=this.parent(e).children.filter((function(t){return t.path!==e.path}));return"object"!==p(t)?[t]:t}return[]}},{key:"hasParent",value:function(e){return!(!e||!e.parent)}},{key:"isOpen",value:function(e){return e.type===i.FileType.Directory&&e.isExpanded}},{key:"isClosed",value:function(e){return e.type===i.FileType.Directory&&!e.isExpanded}},{key:"itemData",value:function(e){return null!=e&&void 0!==e.getMetadata("data")?e._metadata.data:[]}},{key:"getData",value:function(e){return void 0!==e&&void 0!==e.getMetadata("data")?e._metadata.data:[]}},{key:"isRootNode",value:function(e){return e===this.tree.getModel().root}},{key:"isInode",value:function(e){var t=this.children(e);return null!=t&&t.length>0}},{key:"selected",value:function(){return this.tree.getActiveFile()}},{key:"resizeTree",value:function(){this.tree.resize()}},{key:"findNodeWithToggle",value:function(e){var t=this;if(null==e||!Array.isArray(e))return Promise.reject();e="/browser/"+e.join("/");var n=function(t){return void 0!==t&&void 0!==e&&(e.startsWith(t)||e===t)};return function r(o){return new Promise((function(a,i){null!=e&&0!==e.length||a(null),void 0===o.path||n(o.path)?o.path===e?a(o):t.open(o).then((function(){for(var e=o.children,t=0,l=e.length;t<l;t++){var s=e[t];if(n(s.path))return void a(r(s))}i(null)})).catch((function(){i(null)})):i(null)}))}(t.tree.getModel().root)}},{key:"findNodeByDomElement",value:function(e){var t=e.path;if(t&&t[0])return this.findNode(t)}},{key:"addNewNode",value:function(e,t,n,r){var o;return o=this.findNode(r),this.createOrUpdateNode(e,t,o,n)}},{key:"findNode",value:function(e){return null==e||0===e.length?this.rootNode:_(this.rootNode,e)}},{key:"createOrUpdateNode",value:function(e,t,n,r){var o=e;null!=n&&void 0!==n.path&&"/browser"!=n.path&&(o=n.path+"/"+e);var a=this.findNode(o);if(null!==a)return a.data=t,a.domNode=r,a;var i=new l.TreeNode(e,t,r,n);return n===this.rootNode&&(i.parentNode=null),null!=n&&n.children.push(i),i}},{key:"translateTreeNodeIdFromReactTree",value:function(e){for(var t=e,n=[];null!=t&&("/browser"!==t.path&&n.unshift(t.path),this.hasParent(t));)t=this.parent(t);return n}},{key:"getTreeNodeHierarchy",value:function(e){var t=0,n=0,o={};if(void 0!==e){var a=l.TreeNode.prototype.isPrototypeOf(e)?e:this.findNode(e.path);if(void 0!==a){do{var i=a.getData();if(i._type in this.Nodes&&this.Nodes[i._type].hasId){var s=v(i._type,n);void 0===o[s]&&(o[s]=r.default.extend({},i,{priority:t}),t-=1)}n+=1,a=a.hasParent()?a.parent():null}while(a);return o}}}},{key:"registerDraggableType",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"object"==p(e)?Object.keys(e).forEach((function(n){t.registerDraggableType(n,e[n])})):null!=n&&e.replace(/ +/," ").split(" ").forEach((function(e){t.draggableTypes[e]=n}))}},{key:"getDraggable",value:function(e){return this.draggableTypes[e]?this.draggableTypes[e]:null}},{key:"handleDraggable",value:function(e,t){var n=t.getMetadata("data"),a=this.getDraggable(n._type);if(null!=a){var i=a(n,t,this.getTreeNodeHierarchy(t));if("string"==typeof i?i={text:i,cur:{from:i.length,to:i.length}}:i.cur||(i=d(d({},i),{},{cur:{from:i.text.length,to:i.text.length}})),e.dataTransfer.setData("text",JSON.stringify(i)),e.dataTransfer.dropEffect&&(e.dataTransfer.dropEffect="move"),e.dataTransfer.setDragImage){var l=(0,o.default)('\n            <div class="drag-tree-node">\n              <span>'.concat(r.default.escape(i.text),"</span>\n            </div>"));(0,o.default)("body .drag-tree-node").remove(),(0,o.default)("body").append(l),e.dataTransfer.setDragImage(l[0],0,0)}}}}])&&y(t.prototype,n),s&&y(t,s),e}();function v(e,t){return"partition"===e&&t>0?"table":e}function _(e,t){return null===t?e:function e(n){if(void 0!==n.path&&void 0!==t&&!t.startsWith(n.path))return null;for(var r=0,o=n.children.length;r<o;r++){var a=e(n.children[r]);if(null!==a)return a}return n.path===t?n:null}(e)}t.Tree=g;var w=s.isValidData;t.isValidTreeNodeData=w},30726:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveAncestorOfTypeServer=function(e,t,n,r){var a=null,i=t||e.tree.selected(),l=e.tree.findNodeByDomElement(i);if(l){var s,u=l.ancestorNode((function(e){return"database"===(s=e.getData())._type})),c=function(e){return"server"===(s=e.getData())._type};null!==u?s._label.indexOf("=")>=0?r.alert((0,o.default)(n),(0,o.default)("Databases with = symbols in the name cannot be backed up or restored using this utility.")):u.anyParent(c)&&(a=s):l.anyFamilyMember(c)&&(a=s)}null===a&&r.alert((0,o.default)(n),(0,o.default)("Please select server or child node from the browser tree."));return a},t.retrieveAncestorOfTypeDatabase=function(e,t,n,r){var a=null,i=t||e.tree.selected(),l=e.tree.findNodeByDomElement(i);if(l)if("database"===l.getData()._type)a=l.getData();else{var s=null;l.ancestorNode((function(e){return"database"===(s=e.getData())._type&&(a=s,!0)}))}null===a&&r.alert((0,o.default)(n),(0,o.default)("Please select a database or its child node from the browser."));return a},n(82772);var r,o=(r=n(91669))&&r.__esModule?r:{default:r}},28008:(e,t,n)=>{var r,o;n(15306),n(74916),r=[n(8012)],void 0===(o=function(e){return function(t,n){var r=e[t],o=r;return r?o=o.replace(/([<])([^:^>]*:)?([^>]+)([>])/g,(function(e,t,r,o){return o in n?n[o]:e})):r}}.apply(t,r))||(e.exports=o)},44092:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.parseShortcutValue=function(e){var t="";e.alt&&(t+="alt+");e.shift&&(t+="shift+");e.control&&(t+="ctrl+");return t+=e.key.char.toLowerCase()},t.handleKeyNavigation=function(e){var t=(0,o.default)(e.currentTarget).find(".wizard-header"),n=(0,o.default)(e.currentTarget).find(".wizard-footer"),r=(0,o.default)(e.currentTarget).find(".select-row-cell:first"),a=(0,o.default)(e.currentTarget).find(".select-row-cell:last"),i=(0,o.default)(t).find("button:enabled:first"),l=(0,o.default)(t).find("button:enabled:last"),s=(0,o.default)(n).find("button:enabled:last"),u=(0,o.default)(n).find("button:enabled:first");e.shiftKey&&9===e.keyCode?i&&(0,o.default)(i).is((0,o.default)(e.target))?s&&((0,o.default)(s).focus(),e.preventDefault(),e.stopPropagation()):(0,o.default)(u).is((0,o.default)(e.target))&&((0,o.default)(r).find(".custom-control-input").is(":visible")?((0,o.default)(a).find(".custom-control-input").focus(),e.preventDefault(),e.stopPropagation()):(0,o.default)(e.currentTarget).find(".wizard-content").find(".CodeMirror-scroll").is(":visible")&&(0,o.default)(l).focus()):9===e.keyCode?s&&(0,o.default)(s).is((0,o.default)(e.target))?((0,o.default)(i).focus(),e.preventDefault(),e.stopPropagation()):"Name"==e.target.innerText?((0,o.default)(r).find(".custom-control-input").is(":visible")?(0,o.default)(r).find(".custom-control-input").focus():(0,o.default)(u).focus(),e.preventDefault(),e.stopPropagation()):"DIV"==e.target.tagName?((0,o.default)(e.currentTarget).find(".custom-control-input:first").trigger("focus"),e.preventDefault(),e.stopPropagation()):"TEXTAREA"==e.target.tagName&&(0,o.default)(u).focus():27===e.keyCode&&(0,o.default)(t).find("button.ajs-close").click()},t.findAndSetFocus=function(e){if(0==e.length)return;setTimeout((function(){var t=e.find("button.fa-plus:first");0==t.length&&(t=e.find("\n          .pgadmin-controls:first .btn:not(.toggle),\n          .pgadmin-controls:first,\n          .ajs-commands:first,\n          .CodeMirror-scroll,\n          .pgadmin-wizard").find('*[tabindex]:not([tabindex="-1"]),input:enabled')),t.length>0?t[0].focus():e[0].focus()}),200)},t.getEpoch=function(e){var t=e||new Date;return parseInt(t.getTime()/1e3)},t.getGCD=function(e){var t=function e(t,n){return 0==t?n:e(n%t,t)},n=e.length;if(n<=2)return t(e[0],e[1]);for(var r=e[0],o=1;o<n;o++)r=t(e[o],r);return r},t.getMod=function(e,t){return(e%t+t)%t},t.parseFuncParams=function(e){var t=[],n="",r="";if(e.endsWith("()"))n=e.substring(0,e.length-2);else if(e.endsWith(")")){if(!e.endsWith("()")&&e.endsWith(")")){var o=0,a=e.length;for(o=e.length-2;o>=0;){if("("==e[o]){a=o;break}if('"'==e[o])for(o--;'"'!=e[o];)o--;o--}n=e.substring(0,a),r=e.substring(a+1,e.length-1);var i=0,l="",s=["IN","OUT","INOUT","VARIADIC"];for(o=0;o<r.length;){if('"'==r[o])for(o++;'"'!=r[o];)o++;else" "==r[o]?(""==l||s.indexOf(l)>-1)&&(l=r.substring(i,o),i=o+1):","==r[o]&&(t.push([l,r.substring(i,o)]),l="",i=o+1);o++}t.push([l,r.substring(i)])}}else n=e;return{func_name:n,param_string:r,params:t}},t.quote_ident=s,t.fully_qualify=function(e,t,n){var r=e.tree.getTreeNodeHierarchy(n),o="";void 0!==r.schema?o=s(r.schema._label):void 0!==r.view?o=s(r.view._label):void 0!==r.catalog&&(o=s(r.catalog._label));void 0!==r.package&&"package"!=t._type&&(""==o?o=s(r.package._label):o+="."+s(r.package._label));return""!=o?o+"."+s(t._label):s(t._label)},t.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},t.titleize=function(e){return""===e||null===e?e:e.split(" ").map((function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()})).join(" ")},t.sprintf=function(e){try{var t=arguments;return e.split("%s").map((function(e,n){return n>0?n<t.length?[t[n],e].join(""):["%s",e].join(""):e})).join("")}catch(t){return console.error(t),e}},t.CSVToArray=function(e,t,n){t=t||",",n=n||'"';var r=new RegExp("(\\"+t+"|\\r?\\n|\\r|^)"+('"'==n?'(?:"([^"]*(?:""[^"]*)*)"|':"(?:'([^']*(?:''[^']*)*)'|")+('"'==n?'([^"\\'+t+"\\r\\n]*))":"([^'\\"+t+"\\r\\n]*))"),"gi"),o=[[]],a=null;for(;a=r.exec(e);){var i,l=a[1];l.length&&l!==t&&o.push([]),i=a[2]?a[2].replace(new RegExp(n+n,"g"),n):a[3],o[o.length-1].push(i)}return o},t.hasBinariesConfiguration=function(e,t,n){var o="paths",i="pg_bin_dir",l=(0,a.default)("Please configure the PostgreSQL Binary Path in the Preferences dialog.");(t.type&&"ppas"===t.type||"ppas"===t.server_type)&&(i="ppas_bin_dir",l=(0,a.default)("Please configure the EDB Advanced Server Binary Path in the Preferences dialog."));var s=e.get_preference(o,i);if(!s)return n.alert((0,a.default)("Preferences Error"),(0,a.default)("Failed to load preference %s of module %s",i,o)),!1;if(r.default.isUndefined(s.value)||(u=s.value,c=t.version,d=!1,f=!1,p=JSON.parse(u),r.default.each(p,(function(e){c>=e.version&&c<e.next_major_version&&(r.default.isUndefined(e.binaryPath)||r.default.isNull(e.binaryPath)||""===e.binaryPath.trim()||(f=!0)),e.isDefault&&(d=!0)})),!(f|d)))return n.alert((0,a.default)("Configuration required"),l),!1;var u,c,d,f,p;return!0},t.evalFunc=function(e,t,n){if(r.default.isFunction(t))return t.apply(e,[n]);return t},t.registerDetachEvent=function(e){e.on(l.EVENT.DETACHED,(function(){(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").attr({style:"z-index: 1200"})})),e.on(l.EVENT.ORDER_CHANGED,(function(){(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").attr({style:"z-index: 1200"})})),e.on(l.EVENT.ORDER_CHANGED,(function(){var e=this.docker(this._panel).$container.offset(),t=this.$container.offset(),n=this.$container.width(),r=this.$container.height();(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").css("top",t.top-e.top),(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").css("left",t.left-e.left),(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").css("width",n),(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").find(".wcIFrameFloating").css("height",r)}))},t.isString=t.isFunction=t.isValidData=void 0,n(69826),n(32564),n(83710),n(91058),n(27852),n(82772),n(64765),n(74916),n(15306),n(69600),n(21249),n(23123),n(24603),n(39714),n(73210);var r=i(n(81311)),o=i(n(19755)),a=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}n(35816);var l=window.wcDocker;t.isValidData=function(e){return!r.default.isUndefined(e)&&!r.default.isNull(e)};t.isFunction=function(e){return r.default.isFunction(e)};function s(e){var t=!1;return isNaN(parseInt(e))||(t=!0),e.search(/[^a-z0-9_]/g)>-1&&(e=e.replace(/"/g,'""'),t=!0),t?'"'.concat(e,'"'):e}t.isString=function(e){return r.default.isString(e)}},76055:(e,t,n)=>{n(68309),n(91038),n(78783),n(82526),n(41817),n(32165),n(79753),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.minMaxValidator=function(e,t,n,i){if(o.default.isUndefined(t)||o.default.isNull(t)||""===String(t))return null;if(!o.default.isUndefined(n)&&t<n)return(0,r.sprintf)(a.default.Browser.messages.MUST_GR_EQ,e,n);if(!o.default.isUndefined(i)&&t>i)return(0,r.sprintf)(a.default.Browser.messages.MUST_LESS_EQ,e,i);return null},t.numberValidator=function(e,t){if(o.default.isUndefined(t)||o.default.isNull(t)||""===String(t))return null;if(!new RegExp("^-?[0-9]+(.?[0-9]*)?$").test(t))return(0,r.sprintf)(a.default.Browser.messages.MUST_BE_NUM,e);return null},t.integerValidator=function(e,t){if(o.default.isUndefined(t)||o.default.isNull(t)||""===String(t))return null;if(!new RegExp("^-?[0-9]*$").test(t))return(0,r.sprintf)(a.default.Browser.messages.MUST_BE_INT,e);return null},t.emptyValidator=function(e,t){if(d(t))return(0,r.sprintf)(a.default.Browser.messages.CANNOT_BE_EMPTY,e);return null},t.isEmptyString=d,t.checkUniqueCol=function(e,t){if(t){var n,r=s(e.entries());try{for(r.s();!(n=r.n()).done;){var a,i=l(n.value,2),u=i[0],c=i[1],d=s(e.slice(0,u));try{for(d.s();!(a=d.n()).done;){var f=a.value;if(o.default.isEqual(o.default.pick(f,t),o.default.pick(c,t)))return u}}catch(e){d.e(e)}finally{d.f()}}}catch(e){r.e(e)}finally{r.f()}}return-1},n(24603),n(74916),n(39714),n(73210),n(15306),n(41539),n(66992),n(33948),n(47042);var r=n(44092),o=i(n(96486)),a=i(n(55112));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e){return o.default.isUndefined(e)||o.default.isNull(e)||""===String(e).trim()||""==String(e).replace(/^\s+|\s+$/g,"")}},1950:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function e(t){return t.opener&&t.opener.pgAdmin?e(t.opener):t},o=function(){var e=null;try{e=window.opener&&window.opener.pgAdmin?r(window.opener):window.parent&&window.parent.pgAdmin?window.parent:window.top&&window.top.pgAdmin?window.top:window}catch(t){e=window}return e}();t.default=o},92887:(e,t,n)=>{var r,o;n(5735),n(83753),n(32564),n(24812),r=[n(91669),n(28008),n(19755),n(81311),n(55455),n(72316),n(71158),n(12030),n(33883),n(44092),n(5708),n(87332),n(16194)],void 0===(o=function(e,t,n,r,o,a,i,l,s,u,c,d,f){if(s.Backup)return s.Backup;var p=a.Model.extend({idAttribute:"id",defaults:{file:void 0,role:void 0,dqoute:!1,verbose:!0,type:void 0},schema:[{id:"file",label:e("Filename"),type:"text",disabled:!1,control:l.FileControl,dialog_type:"create_file",supp_types:["*","sql","backup"]},{id:"role",label:e("Role name"),control:"node-list-by-name",node:"role",select2:{allowClear:!1}},{type:"nested",control:"fieldset",label:e("Miscellaneous"),contentClass:"row",schema:[{id:"verbose",label:e("Verbose messages"),type:"switch",disabled:!1,group:e("Miscellaneous")},{id:"dqoute",label:e("Force double quote on identifiers"),type:"switch",disabled:!1,group:e("Miscellaneous"),controlLabelClassName:"control-label pg-el-sm-6 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-6 pg-el-12"}]},{id:"globals_note",label:e("Note"),text:e("Only objects global to the entire database will be backed up, in PLAIN format"),type:"note"},{}],validate:function(){return null}}),b=a.Model.extend({idAttribute:"id",defaults:{file:void 0,role:void 0,format:"custom",verbose:!0,blobs:!0,encoding:void 0,schemas:[],tables:[],database:void 0},schema:[{id:"file",label:e("Filename"),type:"text",disabled:!1,control:l.FileControl.extend({render:function(){var e=this.model.toJSON();return"directory"==e.format?this.field.attributes.dialog_type="select_folder":this.field.attributes.dialog_type="create_file",l.InputControl.prototype.render.apply(this,arguments),this}}),dialog_type:"create_file",supp_types:["*","sql","backup"],deps:["format"]},{id:"format",label:e("Format"),type:"text",disabled:!1,control:"select2",select2:{allowClear:!1,width:"100%"},options:[{label:e("Custom"),value:"custom"},{label:e("Tar"),value:"tar"},{label:e("Plain"),value:"plain"},{label:e("Directory"),value:"directory"}],visible:function(e){return!(!r.isUndefined(e.get("type"))&&"server"===e.get("type"))||(setTimeout((function(){e.set("format","plain")}),10),!1)}},{id:"ratio",label:e("Compression ratio"),type:"int",min:0,max:9,deps:["format"],disabled:function(e){return"tar"===e.get("format")},visible:function(e){return!(!r.isUndefined(e.get("type"))&&"server"===e.get("type"))}},{id:"encoding",label:e("Encoding"),type:"text",disabled:!1,node:"database",control:"node-ajax-options",url:"get_encodings",visible:function(e){if(!r.isUndefined(e.get("type"))&&"server"===e.get("type")){var t=s.tree,n=t.selected(),o=n?t.itemData(n):void 0;return!r.isUndefined(o)&&o.version>=11e4}return!0}},{id:"no_of_jobs",label:e("Number of jobs"),type:"int",deps:["format"],disabled:function(e){return"directory"!==e.get("format")},visible:function(e){return!(!r.isUndefined(e.get("type"))&&"server"===e.get("type"))}},{id:"role",label:e("Role name"),control:"node-list-by-name",node:"role",select2:{allowClear:!1}},{id:"server_note",label:e("Note"),text:e("The backup format will be PLAIN"),type:"note",visible:function(e){return"server"===e.get("type")}},{type:"nested",control:"fieldset",label:e("Sections"),group:e("Dump options"),contentClass:"row",schema:[{id:"pre_data",label:e("Pre-data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Sections"),deps:["only_data","only_schema"],disabled:function(e){return e.get("only_data")||e.get("only_schema")}},{id:"data",label:e("Data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Sections"),deps:["only_data","only_schema"],disabled:function(e){return e.get("only_data")||e.get("only_schema")}},{id:"post_data",label:e("Post-data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Sections"),deps:["only_data","only_schema"],disabled:function(e){return e.get("only_data")||e.get("only_schema")}}],visible:function(e){return!(!r.isUndefined(e.get("type"))&&"server"===e.get("type"))}},{type:"nested",control:"fieldset",label:e("Type of objects"),group:e("Dump options"),contentClass:"row",schema:[{id:"only_data",label:e("Only data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Type of objects"),deps:["pre_data","data","post_data","only_schema"],disabled:function(e){return e.get("pre_data")||e.get("data")||e.get("post_data")||e.get("only_schema")}},{id:"only_schema",label:e("Only schema"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Type of objects"),deps:["pre_data","data","post_data","only_data"],disabled:function(e){return e.get("pre_data")||e.get("data")||e.get("post_data")||e.get("only_data")}},{id:"blobs",label:e("Blobs"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Type of objects"),visible:function(e){return!(!r.isUndefined(e.get("type"))&&"server"===e.get("type"))||(setTimeout((function(){e.set("blobs",!1)}),10),!1)}}]},{type:"nested",control:"fieldset",label:e("Do not save"),group:e("Dump options"),contentClass:"row",schema:[{id:"dns_owner",label:e("Owner"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save")},{id:"dns_privilege",label:e("Privilege"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save")},{id:"dns_tablespace",label:e("Tablespace"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save")},{id:"dns_unlogged_tbl_data",label:e("Unlogged table data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save")},{id:"no_comments",label:e("Comments"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save"),visible:function(){var e=s.tree,t=e.selected(),n=r.isUndefined(t)?void 0:e.getTreeNodeHierarchy(t).server;return!r.isUndefined(n)&&n.version>=11e4}}]},{type:"nested",control:"fieldset",label:e("Queries"),group:e("Dump options"),contentClass:"row",schema:[{id:"use_column_inserts",label:e("Use Column Inserts"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Queries")},{id:"use_insert_commands",label:e("Use Insert Commands"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Queries")},{id:"include_create_database",label:e("Include CREATE DATABASE statement"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Queries"),visible:function(e){return!(!r.isUndefined(e.get("type"))&&"server"===e.get("type"))}},{id:"include_drop_database",label:e("Include DROP DATABASE statement"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Queries"),deps:["only_data"],disabled:function(e){return!!e.get("only_data")&&(setTimeout((function(){e.set("include_drop_database",!1)}),10),!0)}},{id:"load_via_partition_root",label:e("Load Via Partition Root"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Queries"),visible:function(e){if(!r.isUndefined(e.get("type"))&&"server"===e.get("type"))return!1;var t=s.tree,n=t.selected(),o=r.isUndefined(n)?void 0:t.getTreeNodeHierarchy(n).server;return!r.isUndefined(o)&&o.version>=11e4}}]},{type:"nested",control:"fieldset",label:e("Disable"),group:e("Dump options"),contentClass:"row",schema:[{id:"disable_trigger",label:e("Trigger"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Disable"),deps:["only_data"],disabled:function(e){return!e.get("only_data")}},{id:"disable_quoting",label:e("$ quoting"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Disable")}]},{type:"nested",control:"fieldset",label:e("Miscellaneous"),group:e("Dump options"),contentClass:"row",schema:[{id:"with_oids",label:e("With OID(s)"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",deps:["use_column_inserts","use_insert_commands"],group:e("Miscellaneous"),disabled:function(e){var t=s.tree,n=t.selected(),o=r.isUndefined(n)?void 0:t.getTreeNodeHierarchy(n).server;return!r.isUndefined(o)&&o.version>=12e4||!(!e.get("use_column_inserts")&&!e.get("use_insert_commands"))&&(setTimeout((function(){e.set("with_oids",!1)}),10),!0)}},{id:"verbose",label:e("Verbose messages"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Miscellaneous")},{id:"dqoute",label:e("Force double quote on identifiers"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Miscellaneous")},{id:"use_set_session_auth",label:e("Use SET SESSION AUTHORIZATION"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Miscellaneous")}]}],validate:function(){return null}});return s.Backup={init:function(){if(!this.initialized){this.initialized=!0;for(var t=[{name:"backup_global",module:this,applies:["tools"],callback:"start_backup_global",priority:12,label:e("Backup Globals..."),icon:"fa fa-save",enable:c.menuEnabledServer,data:{data_disabled:e("Please select any server from the browser tree to take Backup of global objects.")}},{name:"backup_server",module:this,applies:["tools"],callback:"start_backup_server",priority:12,label:e("Backup Server..."),icon:"fa fa-save",enable:c.menuEnabledServer,data:{data_disabled:e("Please select any server from the browser tree to take Server Backup.")}},{name:"backup_global_ctx",module:this,node:"server",applies:["context"],callback:"start_backup_global",priority:12,label:e("Backup Globals..."),icon:"fa fa-save",enable:c.menuEnabledServer,data:{data_disabled:e("Please select any database or schema or table from the browser tree to take Backup.")}},{name:"backup_server_ctx",module:this,node:"server",applies:["context"],callback:"start_backup_server",priority:12,label:e("Backup Server..."),icon:"fa fa-save",enable:c.menuEnabledServer,data:{data_disabled:e("Please select any server from the browser tree to take Server Backup.")}},{name:"backup_object",module:this,applies:["tools"],callback:"backup_objects",priority:11,label:e("Backup..."),icon:"fa fa-save",enable:f.enabled.bind(null,s.tree,c.backupSupportedNodes),data:{data_disabled:e("Please select any database or schema or table from the browser tree to take Backup.")}}],n=0;n<c.backupSupportedNodes.length;n++)t.push({name:"backup_"+c.backupSupportedNodes[n],node:c.backupSupportedNodes[n],module:this,applies:["context"],callback:"backup_objects",priority:11,label:e("Backup..."),icon:"fa fa-save",enable:f.enabled.bind(null,s.tree,c.backupSupportedNodes)});return s.add_menus(t),this}},start_backup_global:function(e,t){new d.BackupDialog(s,n,o,p).draw(e,t,{globals:!0},s.stdW.calc(s.stdW.md),s.stdH.calc(s.stdH.md))},start_backup_server:function(e,t){new d.BackupDialog(s,n,o,b).draw(e,t,{server:!0},s.stdW.calc(s.stdW.md),s.stdH.calc(s.stdH.md))},backup_objects:function(e,t){new d.BackupDialog(s,n,o,b).draw(e,t,null,s.stdW.calc(s.stdW.md),s.stdH.calc(s.stdH.md))}},s.Backup}.apply(t,r))||(e.exports=o)},87332:(e,t,n)=>{var r=n(64492);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.BackupDialog=void 0,n(68304),n(30489);var a=f(n(91669)),i=f(n(12030)),l=n(35433),s=f(n(28008)),u=f(n(9669)),c=n(30726),d=n(44092);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(f,e);var t,n,o,l=y(f);function f(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.default;return p(this,f),l.call(this,(0,a.default)("Backup Error"),"<div class='backup_dialog'></div>",e,t,n,r,o)}return t=f,o=[{key:"typeOfDialog",value:function(e){if(null===e)return"backup_objects";var t="server";return!r.isUndefined(e.globals)&&e.globals&&(t="globals"),t}},{key:"dialogTitle",value:function(e){return"backup_objects"===e?null:"globals"===e?(0,a.default)("Backup Globals..."):(0,a.default)("Backup Server...")}}],(n=[{key:"url_for_utility_exists",value:function(e,t){return(0,s.default)("backup.utility_exists",{sid:e,backup_obj_type:null==t?"objects":"servers"})}},{key:"draw",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=(0,c.retrieveAncestorOfTypeServer)(this.pgBrowser,t,(0,a.default)("Backup Error"),this.alertify);if(i&&(0,d.hasBinariesConfiguration)(this.pgBrowser,i,this.alertify)){var l="database"==i._type?i._pid:i._id,s=this.url_for_utility_exists(l,n),p=this;u.default.get(s).then((function(e){if(e.data.success){var i=f.typeOfDialog(n);p.canExecuteOnCurrentDatabase(t)&&p.createOrGetDialog(f.dialogTitle(i),i)(!0).resizeTo(r,o)}else p.alertify.alert((0,a.default)("Utility not found"),e.data.errormsg)})).catch((function(){p.alertify.alert((0,a.default)("Utility not found"),(0,a.default)("Failed to fetch Utility information"))}))}}},{key:"dialogName",value:function(e){return"backup_objects"===e?e:"BackupDialog_"+e}}])&&b(t.prototype,n),o&&b(t,o),f}(l.Dialog);t.BackupDialog=v},64951:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.BackupDialogWrapper=void 0,n(68309),n(5735),n(83753),n(41539),n(39714),n(83710),n(91058),n(69826),n(68304),n(30489);var o=f(n(9669)),a=f(n(91669)),i=f(n(28008)),l=f(n(81311)),s=n(22378),u=n(7361),c=f(n(6537)),d=f(n(92026));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(f,e);var t,n,r,s=m(f);function f(e,t,n,r,o,a,i,l){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(u=s.call(this,e,t,r,o,a,i,l)).typeOfDialog=n,u}return t=f,(n=[{key:"main",value:function(e){this.set("title",e)}},{key:"setup",value:function(){var e;return{buttons:[{text:"",className:"btn btn-primary-icon pull-left fa fa-info pg-alertify-icon-button",attrs:{name:"object_help",type:"button",url:"backup.html",label:(0,a.default)("Backup"),"aria-label":(0,a.default)("Backup")}},{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,a.default)("Help"),"aria-label":(0,a.default)("Help"),url:(0,i.default)("help.static",{filename:(e=this.typeOfDialog,"globals"==e?"backup_globals_dialog.html":"server"==e?"backup_server_dialog.html":"backup_dialog.html")})}},{text:(0,a.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button","data-btn-name":"cancel"},{text:(0,a.default)("Backup"),key:13,className:"btn btn-primary fa fa-lg fa-save pg-alertify-button","data-btn-name":"backup"}],options:{title:this.dialogTitle,padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}}},{key:"prepare",value:function(){this.disableBackupButton();var e=this.jquery(this.dialogContainerSelector),t=this.getSelectedNode(),n=this.getSelectedNodeData(t);if(n){var r=this.pgBrowser.Nodes[n._type];if(null===this.dialogTitle){var o=(0,a.default)("Backup (%s: %s)",r.label,n.label);this.main(o)}var i=this.pgBrowser.tree.getTreeNodeHierarchy(t),l=this.createDialog(r,i,this.typeOfDialog,e);this.addAlertifyClassToBackupNodeChildNodes(),l.render();var s=this.jquery('<div class=\'pg-prop-status-bar pg-prop-status-bar-absolute pg-el-xs-12 d-none\'>  <div class="error-in-footer">     <div class="d-flex px-2 py-1">       <div class="pr-2">         <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i>       </div>       <div class="alert-text" role="alert"></div>        <div class="ml-auto close-error-bar">           <a aria-label="'+(0,a.default)("Close error bar")+'" class="close-error fa fa-times text-danger"></a>         </div>     </div>   </div> </div>').appendTo(e);this.elements.content.appendChild(e.get(0)),this.focusOnDialog(this),this.setListenersForFilenameChanges(s)}}},{key:"callback",value:function(e){var t=this.getSelectedNode(),n=this.getSelectedNodeData(t),r=n&&this.pgBrowser.Nodes[n._type];if(this.wasHelpButtonPressed(e))return e.cancel=!0,void this.pgBrowser.showHelp(e.button.element.name,e.button.element.getAttribute("url"),r,t.getHtmlIdentifier());if(this.wasBackupButtonPressed(e)){if(!n)return;var l=this.retrieveServerIdentifier(r,t),s=this,f="backup.create_server_job";"backup_objects"===this.typeOfDialog&&(f="backup.create_object_job");var p=(0,i.default)(f,{sid:l}),b=this.pgBrowser.tree.getTreeNodeHierarchy(t);this.setExtraParameters(t,b);var m=this.view.model.toJSON();c.default.current_auth_source!=d.default.KERBEROS||!b.server.gss_authenticated||"globals"!=m.type&&"server"!=m.type||(0,u.fetch_ticket_lifetime)().then((function(e){e<1800&&e>0&&s.alertify.warning("You have "+Math.round(parseInt(e)/60).toString()+' minutes left on your ticket - if the dump takes longer than that, it may fail."')}),(function(){s.alertify.warning((0,a.default)("Please renew your kerberos ticket, it has been expired."))})),o.default.post(p,m).then((function(e){e.data.success?(s.alertify.success((0,a.default)("Backup job created."),5),s.pgBrowser.Events.trigger("pgadmin-bgprocess:created",s)):s.alertify.alert((0,a.default)("Backup job creation failed."),e.data.errormsg)})).catch((function(e){try{var t=e.response.data;s.alertify.alert((0,a.default)("Backup job failed."),t.errormsg)}catch(e){console.warn(e.stack||e)}}))}}},{key:"addAlertifyClassToBackupNodeChildNodes",value:function(){this.jquery(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties")}},{key:"getSelectedNode",value:function(){var e=this.pgBrowser.tree,t=e.selected();return t?e.findNodeByDomElement(t):void 0}},{key:"disableBackupButton",value:function(){this.__internal.buttons[3].element.disabled=!0}},{key:"enableBackupButton",value:function(){this.__internal.buttons[3].element.disabled=!1}},{key:"createDialog",value:function(e,t,n,r){var o={};"backup_objects"!==n&&(o.type=n);var a=new this.dialogModel(o,{node_info:t}),i=this.backform.generateViewSchema(t,a,"create",e,t.server,!0);return this.view=new this.backform.Dialog({el:r,model:a,schema:i})}},{key:"retrieveServerIdentifier",value:function(e,t){return this.pgBrowser.tree.getTreeNodeHierarchy(t).server._id}},{key:"setListenersForFilenameChanges",value:function(e){var t=this;this.view.model.on("change",(function(){var n,r,o,i=this;l.default.isUndefined(this.get("file"))||""===this.get("file")?(t.disableBackupButton(),n=(0,a.default)("Please provide a filename"),r="file",o=n,i.errorModel.set(r,o),e.removeClass("d-none"),e.find(".alert-text").html(o),t.elements.dialog.querySelector(".close-error").addEventListener("click",(function(){e.addClass("d-none"),i.errorModel.set(r,o)}))):(this.errorModel.clear(),e.addClass("d-none"),t.enableBackupButton())}))}},{key:"setExtraParameters",value:function(e,t){if("backup_objects"===this.typeOfDialog){this.view.model.set("database",t.database._label);var n=e.getData();"schema"===n._type&&this.view.model.set("schemas",[n._label]),"table"!==n._type&&"partition"!==n._type||this.view.model.set("tables",[[t.schema._label,n._label]]),l.default.isEmpty(this.view.model.get("ratio"))&&this.view.model.unset("ratio")}}},{key:"wasBackupButtonPressed",value:function(e){return"backup"===e.button["data-btn-name"]}}])&&p(t.prototype,n),r&&p(t,r),f}(s.DialogWrapper);t.BackupDialogWrapper=g},5708:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.menuEnabledServer=function(e){return(0,r.isValidTreeNodeData)(e)&&function(e){return"server"===e._type&&e.connected}(e)},t.backupSupportedNodes=void 0;var r=n(79226);t.backupSupportedNodes=["database","schema","table","partition"]},9807:(e,t,n)=>{var r=n(64492);n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.getDatabaseLabel=s,t.getPanelTitle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=e.get_preferences_for_module("browser");null==t&&null==r&&(t=e.tree.selected());if(null==r){if(null==(r=e.tree.getTreeNodeHierarchy(t)))return;if(u(r))return}a||(a=s(r));var c="";c=o?l.qt_default_placeholder:n||i.qt_tab_title_placeholder;var f={database:a,username:r.server.user.name,server:r.server.label,type:"query_tool"},p=d(c,f);return p},t.setQueryToolDockerTitle=function(e,t,n,a){var i="",l="";c(e,a),a||"true"==a?(l=(0,o.default)("File - ")+n,i="fa fa-file-alt"):"false"==t||0==t?(l=(0,o.default)("View/Edit Data - ")+n,i="pg-font-icon icon-view_data"):(l=(0,o.default)("Query Tool - ")+n,i="pg-font-icon icon-query_tool");e.title('<span title="'+r.escape(l)+'">'+r.escape(n)+"</span>"),e.icon(i)},t.set_renamable_option=c,t.generateTitle=d,t.refresh_db_node=function(e,t){a.default.alert().setting({title:(0,o.default)("Database moved/renamed"),label:(0,o.default)("OK"),message:(0,o.default)(e),onok:function(){l.Browser.Nodes.database.callbacks.refresh(void 0,t)}}).show()},n(68309),n(15306),n(74916),n(24603),n(39714);var o=i(n(91669)),a=i(n(55455));function i(e){return e&&e.__esModule?e:{default:e}}var l=i(n(1950)).default.pgAdmin;function s(e){return e.database?e.database.label:e.server.db}function u(e){return void 0===e.server}function c(e,t){t||"true"==t?e.renamable(!1):e.renamable(!0)}function d(e,t){return"query_tool"==t.type?e=(e=(e=e.replace(new RegExp("%DATABASE%"),r.unescape(t.database))).replace(new RegExp("%USERNAME%"),r.unescape(t.username))).replace(new RegExp("%SERVER%"),r.unescape(t.server)):"datagrid"==t.type?e=(e=(e=(e=(e=e.replace(new RegExp("%DATABASE%"),r.unescape(t.database))).replace(new RegExp("%USERNAME%"),r.unescape(t.username))).replace(new RegExp("%SERVER%"),r.unescape(t.server))).replace(new RegExp("%SCHEMA%"),r.unescape(t.schema))).replace(new RegExp("%TABLE%"),r.unescape(t.table)):"debugger"==t.type?e=(e=(e=(e=e.replace(new RegExp("%FUNCTION%"),r.unescape(t.function_name))).replace(new RegExp("%ARGS%"),r.unescape(t.args))).replace(new RegExp("%SCHEMA%"),r.unescape(t.schema))).replace(new RegExp("%DATABASE%"),r.unescape(t.database)):"psql_tool"==t.type&&(e=(e=(e=e.replace(new RegExp("%DATABASE%"),r.unescape(t.database))).replace(new RegExp("%USERNAME%"),r.unescape(t.username))).replace(new RegExp("%SERVER%"),r.unescape(t.server))),r.escape(e)}},52934:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.showDataGrid=function(e,t,n,r,i,l){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,d=t.tree.findNodeByDomElement(i);if(void 0===d||!d.getData())return void n.alert((0,o.default)("Data Grid Error"),(0,o.default)("No object selected."));var f=t.tree.getTreeNodeHierarchy(i);if(h(f)||!g(f))return;var p=["table","partition","view","mview","foreign_table","catalog_object"];if(-1===p.indexOf(d.getData()._type))return;var _=b(l,r,d.getData(),f),w=v(t,i);if(s){y(n,t);var O=m(d.getData(),f),S=function(t){e.launch_grid(l,_,!1,w,null,t)};u.default.get((0,a.default)("datagrid.filter"),(function(e){n.filterDialog((0,o.default)("Data Filter - %s",w),e,O,c,S).resizeTo(t.stdW.sm,t.stdH.sm)}))}else e.launch_grid(l,_,!1,w)},t.retrieveNameSpaceName=p,t.generateDatagridTitle=v,n(82772),n(69826),n(32564),n(68309);var o=f(n(91669)),a=f(n(28008)),i=n(9807),l=f(n(20811)),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(81240)),u=f(n(19755)),c=f(n(81311));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return void 0!==e.schema?e.schema.label:void 0!==e.view?e.view.label:void 0!==e.catalog?e.catalog.label:""}function b(e,t,n,r){var o=(0,a.default)("datagrid.panel",{trans_id:e});return o+="?is_query_tool=".concat(!1)+"&cmd_type=".concat(t.mnuid)+"&obj_type=".concat(n._type)+"&obj_id=".concat(n._id)+"&sgid=".concat(r.server_group._id)+"&sid=".concat(r.server._id)+"&did=".concat(r.database._id)+"&server_type=".concat(r.server.server_type)}function m(e,t){var n={sid:t.server._id,did:t.database._id,obj_id:e._id};return(0,a.default)("datagrid.filter_validate",n)}function y(e,t){var n=null;e.filterDialog||e.dialog("filterDialog",(function(){return{main:function(e,t,n,r,o){this.set("title",e),this.message=t,this.validateUrl=n,this.okCallback=o,this.preferences=r},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,o.default)("Data Filter"),"aria-label":(0,o.default)("Help"),url:(0,a.default)("help.static",{filename:"viewdata_filter.html"})}},{text:(0,o.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:(0,o.default)("OK"),key:null,className:"btn btn-primary fa fa-check pg-alertify-button"}],options:{modal:0,resizable:!0,maximizable:!1,pinnable:!1,autoReset:!1}}},build:function(){var t=this;e.pgDialogBuild.apply(t),(0,u.default)(t.__internal.buttons[2].element).attr("title",(0,o.default)("Use SHIFT + ENTER to apply filter...")),(0,u.default)(t.elements.body).on("keypress",(function(e){e.shiftKey&&13==e.keyCode&&t.__internal.buttons[2].element.click()}))},prepare:function(){var e=this,r=(0,u.default)(this.message),a=r.find("#sql_filter");(0,u.default)(this.elements.header).attr("data-title",this.get("title")),(0,u.default)(this.elements.body.childNodes[0]).addClass("dataview_filter_dialog"),this.setContent(r.get(0)),e.__internal.buttons[2].element.disabled=!0,n=this.filter_obj=l.default.fromTextArea(a.get(0),{lineNumbers:!0,mode:"text/x-pgsql",extraKeys:t.editor_shortcut_keys,indentWithTabs:!e.preferences.use_spaces,indentUnit:e.preferences.tab_size,tabSize:e.preferences.tab_size,lineWrapping:e.preferences.wrap_code,autoCloseBrackets:e.preferences.insert_pair_brackets,matchBrackets:e.preferences.brace_matching,screenReaderLabel:(0,o.default)("Filter SQL")});var i=s.calcFontSize(e.preferences.sql_font_size);(0,u.default)(this.filter_obj.getWrapperElement()).css("font-size",i),setTimeout((function(){e.filter_obj.refresh(),e.filter_obj.focus()}),500),e.filter_obj.on("change",(function(){""!==e.filter_obj.getValue()?e.__internal.buttons[2].element.disabled=!1:e.__internal.buttons[2].element.disabled=!0}))},callback:function(r){if(r.button.text==(0,o.default)("OK")){var a=this.filter_obj.getValue(),i=this;r.cancel=!0,u.default.ajax({url:i.validateUrl,method:"POST",async:!1,contentType:"application/json",data:JSON.stringify(a)}).done((function(t){t.data.status?(i.okCallback(a),i.close()):e.alert().setting({title:(0,o.default)("Validation Error"),label:(0,o.default)("OK"),message:(0,o.default)(t.data.result),onok:function(){n.focus()}}).show()})).fail((function(n){410===n.status?t.report_error((0,o.default)("Error filtering rows - %s.",n.statusText),n.responseJSON.errormsg):e.alert((0,o.default)("Validation Error"),n)}))}else if(0==r.index)return r.cancel=!0,void t.showHelp(r.button.element.name,r.button.element.getAttribute("url"),null,null)}}}))}function h(e){return void 0===e.server||void 0===e.database}function g(e){return void 0!==e.schema||void 0!==e.view||void 0!==e.catalog}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get_preferences_for_module("browser"),a=e.tree.getTreeNodeHierarchy(t),l=p(a),s=!c.default.isUndefined(r)&&null!=r&&r.hasOwnProperty("db_name")?r.db_name:(0,i.getDatabaseLabel)(a),u=e.tree.findNodeByDomElement(t),d="";d=n||o.vw_edt_tab_title_placeholder;var f={database:s,username:a.server.user.name,server:a.server.label,schema:l,table:u.getData().label,type:"datagrid"},b=(0,i.generateTitle)(d,f);return b}},7167:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.showQueryTool=function(e,t,n,o,i,l){var s=o||"",d=function(e,t){return(0,a.getPanelTitle)(e,t)}(t,i),f=t.tree.findNodeByDomElement(i);if(void 0===f)return void n.alert((0,r.default)("Query Tool Error"),(0,r.default)("No object selected."));var p=t.tree.getTreeNodeHierarchy(f);if(function(e){return void 0===e.server}(p))return;var b=u(l,d,p);c(e,l,b,d,s,n)},t.generateScript=function(e,t,n){var r="".concat(e.database,"/").concat(e.user,"@").concat(e.server),a=(0,i.getRandomInt)(1,9999999),l=(0,o.default)("datagrid.panel",{trans_id:a});l+="?is_query_tool=".concat(!0)+"&sgid=".concat(e.sgid)+"&sid=".concat(e.sid)+"&server_type=".concat(e.stype)+"&did=".concat(e.did),c(t,a,l,r,"",n)},t.showERDSqlTool=function(e,t,n,r,o){var a=(0,i.getRandomInt)(1,9999999);e={server_group:{_id:e.sgid},server:{_id:e.sid,server_type:e.stype},database:{_id:e.did}};var l=u(a,n,e,t);c(r,a,l,n,"",o)},t.launchDataGrid=c,t._set_dynamic_tab=function(e,t){e.docker.findPanels("frm_datagrid").forEach((function(e){t?(0,l.default)("#"+e.$title.index()+" div:first").addClass("wcPanelTab-dynamic"):(0,l.default)("#"+e.$title.index()+" div:first").removeClass("wcPanelTab-dynamic")})),e.docker.findPanels("frm_debugger").forEach((function(e){t?(0,l.default)("#"+e.$title.index()+" div:first").addClass("wcPanelTab-dynamic"):(0,l.default)("#"+e.$title.index()+" div:first").removeClass("wcPanelTab-dynamic")}))},n(92222),n(89554),n(54747);var r=s(n(91669)),o=s(n(28008)),a=n(9807),i=n(44092),l=s(n(19755));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r){var a=(0,o.default)("datagrid.panel",{trans_id:e});return a+="?is_query_tool=".concat(!0)+"&sgid=".concat(n.server_group._id)+"&sid=".concat(n.server._id)+"&server_type=".concat(n.server.server_type),function(e){return e.database}(n)&&(a+="&did=".concat(n.database._id)),r&&(a+="&sql_id=".concat(r)),a}function c(e,t,n,o,a,i){e.launch_grid(t,n,!0,o,a)||i.alert((0,r.default)("Query tool launch error"),(0,r.default)("Please allow pop-ups for this site to perform the desired action. If the main window of pgAdmin is closed then close this window and open a new pgAdmin session."))}},92959:(e,t,n)=>{var r,o;n(32564),n(68309),n(41539),n(66992),n(33948),n(15306),n(74916),n(26699),n(32023),n(73210),n(64765),r=[n(91669),n(28008),n(19755),n(81311),n(58307),n(55112),n(33883),n(72316),n(71158),n(4631),n(12030),n(92323),n(6715),n(7167),n(44092),n(7361),n(9807),n(35816),n(58688)],void 0===(o=function(e,t,n,r,o,a,i,l,s,u,c,d,f,p,b,m,y){var h=a.Tools=a.Tools||{},g=window.wcDocker;return a.Tools.Debugger||(h.Debugger={init:function(){if(!this.initialized){this.initialized=!0,i.add_menus([{name:"direct_debugger",node:"function",module:this,applies:["object","context"],callback:"get_function_information",category:e("Debugging"),priority:10,label:e("Debug"),data:{object:"function"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"global_debugger",node:"function",module:this,applies:["object","context"],callback:"check_func_debuggable",category:e("Debugging"),priority:10,label:e("Set breakpoint"),data:{object:"function",debug_type:"indirect"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"procedure_direct_debugger",node:"procedure",module:this,applies:["object","context"],callback:"get_function_information",category:e("Debugging"),priority:10,label:e("Debug"),data:{object:"procedure"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"procedure_indirect_debugger",node:"procedure",module:this,applies:["object","context"],callback:"check_func_debuggable",category:e("Debugging"),priority:10,label:e("Set breakpoint"),data:{object:"procedure",debug_type:"indirect"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"trigger_function_indirect_debugger",node:"trigger_function",module:this,applies:["object","context"],callback:"check_func_debuggable",priority:10,label:e("Set breakpoint"),category:e("Debugging"),icon:"fa fa-arrow-circle-right",data:{object:"trigger_function",debug_type:"indirect"},enable:"can_debug"},{name:"trigger_indirect_debugger",node:"trigger",module:this,applies:["object","context"],callback:"check_func_debuggable",priority:10,label:e("Set breakpoint"),category:e("Debugging"),icon:"fa fa-arrow-circle-right",data:{object:"trigger",debug_type:"indirect"},enable:"can_debug"},{name:"package_function_direct_debugger",node:"edbfunc",module:this,applies:["object","context"],callback:"get_function_information",category:e("Debugging"),priority:10,label:e("Debug"),data:{object:"edbfunc"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"package_function_global_debugger",node:"edbfunc",module:this,applies:["object","context"],callback:"check_func_debuggable",category:e("Debugging"),priority:10,label:e("Set breakpoint"),data:{object:"edbfunc",debug_type:"indirect"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"package_procedure_direct_debugger",node:"edbproc",module:this,applies:["object","context"],callback:"get_function_information",category:e("Debugging"),priority:10,label:e("Debug"),data:{object:"edbproc"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"package_procedure_global_debugger",node:"edbproc",module:this,applies:["object","context"],callback:"check_func_debuggable",category:e("Debugging"),priority:10,label:e("Set breakpoint"),data:{object:"edbproc",debug_type:"indirect"},icon:"fa fa-arrow-circle-right",enable:"can_debug"}]),this.frame=new i.Frame({name:"frm_debugger",title:e("Debugger"),width:500,isCloseable:!0,isPrivate:!0,icon:"fa fa-bug",url:"about:blank"}),this.frame.load(i.docker);var t=this,n=setInterval((function(){i.preference_version()>0&&(t.preferences=i.get_preferences_for_module("debugger"),clearInterval(n))}),0);i.onPreferencesChange("debugger",(function(){t.preferences=i.get_preferences_for_module("debugger")}))}},can_debug:function(e,t,n){for(var r=i.tree,o=t,a=e;o;){if("catalog"==a._type)return!1;a=(o=r.hasParent(o)?r.parent(o):null)?r.itemData(o):null}var l=i.tree,s=l.selected(),u=s?l.itemData(s):void 0;if(!u)return!1;var c=l.getTreeNodeHierarchy(s);if(n&&n.debug_type&&"indirect"==n.debug_type&&!c.server.user.is_superuser)return!1;var d=c.function&&c.function.funcowner||c.procedure&&c.procedure.funcowner||c.edbfunc&&c.edbfunc.funcowner||c.edbproc&&c.edbproc.funcowner;return!(!c.server.user.is_superuser&&d!=c.server.user.name)&&(null==u.language&&"trigger"==u._type||null==u.language&&"edbfunc"==u._type||null==u.language&&"edbproc"==u._type||("plpgsql"==u.language||"edbspl"==u.language))},generate_url:function(e,n,o){var a="";r.each(r.sortBy(r.values(r.pick(n,(function(e,t){return"server_group"!=t}))),(function(e){return e.priority})),(function(e){a=b.sprintf("%s/%s",a,encodeURI(e._id))}));var i={URL:e,BASEURL:t("debugger.index"),REF:a,OBJTYPE:encodeURI(o.type)};return"{BASEURL}{URL}/{OBJTYPE}{REF}".replace(/{(\w+)}/g,(function(e,t){return i[t]}))},check_func_debuggable:function(t,r){var a=i.tree,l=r||a.selected(),s=l?a.itemData(l):void 0,u=s&&i.Nodes[s._type];if(s){var c=a.getTreeNodeHierarchy(l),d=this.generate_url("init",c,u),f=this;n.ajax({url:d,cache:!1}).done((function(e){f.start_global_debugger(t,r,e.data.trans_id)})).fail((function(t){try{var n=JSON.parse(t.responseText);0==n.success&&o.alert(e("Debugger Error"),n.errormsg)}catch(e){console.warn(e.stack||e)}}))}},start_global_debugger:function(r,a,l){var s=this,u=i.tree,c=a||u.selected(),d=c?u.itemData(c):void 0,p=i.tree.translateTreeNodeIdFromReactTree(c),b=i.tree.findNode(p[3]).domNode;if(d){var h,v=u.getTreeNodeHierarchy(c);"function"==d._type||"edbfunc"==d._type?h=t("debugger.initialize_target_for_function",{debug_type:"indirect",trans_id:l,sid:v.server._id,did:v.database._id,scid:v.schema._id,func_id:f.getFunctionId(v)}):"procedure"==d._type||"edbproc"==d._type?h=t("debugger.initialize_target_for_function",{debug_type:"indirect",trans_id:l,sid:v.server._id,did:v.database._id,scid:v.schema._id,func_id:f.getProcedureId(v)}):"trigger_function"==d._type?h=t("debugger.initialize_target_for_function",{debug_type:"indirect",trans_id:l,sid:v.server._id,did:v.database._id,scid:v.schema._id,func_id:v.trigger_function._id}):"trigger"==d._type&&"table"in v?h=t("debugger.initialize_target_for_trigger",{debug_type:"indirect",trans_id:l,sid:v.server._id,did:v.database._id,scid:v.schema._id,func_id:v.table._id,tri_id:v.trigger._id}):"trigger"==d._type&&"view"in v&&(h=t("debugger.initialize_target_for_trigger",{debug_type:"indirect",trans_id:l,sid:v.server._id,did:v.database._id,scid:v.schema._id,func_id:v.view._id,tri_id:v.trigger._id})),n.ajax({url:h,method:"GET"}).done((function(r){var a=t("debugger.direct",{trans_id:r.data.debuggerTransId}),l=i.get_preferences_for_module("browser"),s=l.new_browser_tab_open;if(s&&s.includes("debugger"))window.open(a,"_blank"),setTimeout((function(){i.send_signal_to_runtime("Runtime new window opened")}),500);else{i.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",(function(e){e.openURL(a)}));var u=i.docker.findPanels("properties"),c=i.docker.addPanel("frm_debugger",g.DOCK.STACKED,u[0]),d=v.database.label;if(r.data.data_obj.db_name!=v.database.label){d=r.data.data_obj.db_name;var p="Current database has been moved or renamed to ".concat(d,". Click on the OK button to refresh the database name.");y.refresh_db_node(p,b)}var m=v.function?v.function.label:v.trigger_function?v.trigger_function.label:v.trigger?v.trigger.label:v.procedure.label;f.setDebuggerTitle(c,l,m,d,d,null,i),c.focus(),c.on(g.EVENT.CLOSED,(function(){var e=t("debugger.close",{trans_id:r.data.debuggerTransId});n.ajax({url:e,method:"DELETE"})})),c.on(g.EVENT.RENAME,(function(t){o.prompt("",t.$titleText[0].textContent,(function(e,t){if(t){t=t.trim();var n=i.get_preferences_for_module("browser"),r=v.function?v.function.label:v.trigger_function?v.trigger_function.label:v.trigger?v.trigger.label:v.procedure.label;f.setDebuggerTitle(c,n,r,v.schema.label,v.database.label,t,i)}}),(function(e){e.cancel=!1})).set({title:e("Rename Panel")})}))}})).fail((function(t){try{var n=JSON.parse(t.responseText);if(-1!==n.errormsg.search("Ticket expired"))m.fetch_ticket().then((function(){s.start_global_debugger()}),(function(t){o.alert(e("Debugger Error"),t)}));else 0==n.success&&o.alert(e("Debugger Error"),n.errormsg)}catch(e){console.warn(e.stack||e)}}))}},get_function_information:function(r,a){var l=i.tree,s=a||l.selected(),u=s?l.itemData(s):void 0,c=u&&i.Nodes[u._type],p=i.tree.translateTreeNodeIdFromReactTree(s),m=i.tree.findNode(p[3]).domNode;if(u){var h="edbproc"==u._type,v=l.getTreeNodeHierarchy(s),_=this.generate_url("init",v,c);n.ajax({url:_,cache:!1}).done((function(r){var a=r.data.debug_info,l=r.data.trans_id;if(a[0].require_input)d(a[0],0,h,l);else{var s=i.tree,u=s.selected(),c=u?s.itemData(u):void 0;if(!c)return;var p,_=s.getTreeNodeHierarchy(u);"function"==c._type||"edbfunc"==c._type?p=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:l,sid:_.server._id,did:_.database._id,scid:_.schema._id,func_id:f.getFunctionId(_)}):"procedure"!=c._type&&"edbproc"!=c._type||(p=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:l,sid:_.server._id,did:_.database._id,scid:_.schema._id,func_id:f.getProcedureId(_)})),n.ajax({url:p,method:"GET"}).done((function(r){var a=r.data,s=t("debugger.direct",{trans_id:l}),u=i.get_preferences_for_module("browser"),c=u.new_browser_tab_open;if(c&&c.includes("debugger"))window.open(s,"_blank"),setTimeout((function(){i.send_signal_to_runtime("Runtime new window opened")}),500);else{i.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",(function(e){e.openURL(s)}));var d=i.docker.findPanels("properties"),p=i.docker.addPanel("frm_debugger",g.DOCK.STACKED,d[0]),h=_.database.label;if(b.registerDetachEvent(p),a&&a.data_obj&&a.data_obj.db_name!=_.database.label){h=a.data_obj.db_name;var w="Current database has been moved or renamed to ".concat(h,". Click on the OK button to refresh the database name.");y.refresh_db_node(w,m)}var O=_.function?_.function.label:_.trigger_function?_.trigger_function.label:_.trigger?_.trigger.label:_.procedure.label;f.setDebuggerTitle(p,u,O,_.schema.label,h,null,i),p.focus(),p.on(g.EVENT.CLOSED,(function(){var e=t("debugger.close",{trans_id:l});n.ajax({url:e,method:"DELETE"})})),p.on(g.EVENT.RENAME,(function(t){o.prompt("",t.$titleText[0].textContent,(function(e,t){if(t){t=t.trim();var n=i.get_preferences_for_module("browser"),r=v.function?v.function.label:v.trigger_function?v.trigger_function.label:v.trigger?v.trigger.label:v.procedure.label;f.setDebuggerTitle(p,n,r,v.schema.label,v.database.label,t,i)}}),(function(e){e.cancel=!1})).set({title:e("Rename Panel")})}))}})).fail((function(t){o.alert(e("Debugger Target Initialization Error"),t.responseJSON.errormsg)}))}})).fail((function(t){try{var n=JSON.parse(t.responseText);0==n.success&&o.alert(e("Debugger Error"),n.errormsg)}catch(e){console.warn(e.stack||e)}}))}}}),a.Tools.Debugger}.apply(t,r))||(e.exports=o)},92323:(e,t,n)=>{var r,o;n(82772),n(15306),n(74916),n(91058),n(54678),n(23123),n(69826),n(32564),n(26699),n(32023),n(73210),r=[n(91669),n(28008),n(19755),n(81311),n(72316),n(55455),n(55112),n(33883),n(71158),n(1950),n(6715),n(44092),n(35816)],void 0===(o=function(e,t,n,r,o,a,i,l,s,u,c,d){var f=window.wcDocker,p=function(e){var t=e.get("type");if(-1!=t.indexOf("[]"))switch(t.replace("[]","")){case"boolean":return s.Extension.InputBooleanArrayCell;case"integer":case"smallint":case"bigint":case"serial":case"smallserial":case"bigserial":case"oid":case"cid":case"xid":case"tid":return s.Extension.InputIntegerArrayCell;case"real":case"numeric":case"double precision":case"decimal":return s.Extension.InputNumberArrayCell;default:return s.Extension.InputStringArrayCell}else switch(t){case"boolean":return s.BooleanCell.extend({formatter:s.BooleanCellFormatter});case"integer":case"smallint":case"bigint":case"serial":case"smallserial":case"bigserial":case"oid":case"cid":case"xid":case"tid":return null!=e.get("value")&&e.set({value:isNaN(parseInt(e.get("value")))?null:parseInt(e.get("value"))},{silent:!0}),s.IntegerCell;case"real":case"numeric":case"double precision":case"decimal":return null!=e.get("value")&&e.set({value:parseFloat(e.get("value"))},{silent:!0}),s.NumberCell;case"string":return s.StringCell;case"date":return s.DateCell;default:return s.Cell}},b=function(e){return-1!=e.get("type").indexOf("[]")?s.StringCell:s.BooleanCell},m=o.Model.extend({defaults:{name:void 0,type:void 0,is_null:void 0,expr:void 0,value:void 0,use_default:void 0,default_value:void 0},validate:function(){if(r.isUndefined(this.get("value"))||r.isNull(this.get("value"))||""==String(this.get("value")).replace(/^\s+|\s+$/g,"")){var t=e("Please enter a value for the parameter.");return this.errorModel.set("value",t),t}return this.errorModel.unset("value"),null}}),y=o.Collection.extend({model:m}),h=function(e){return e instanceof o.Model&&e.get("use_default")},g=function(e){if(e instanceof o.Model)return-1==e.get("type").indexOf("[]")};return function(o,i,m,v){a.debuggerInputArgsDialog||a.dialog("debuggerInputArgsDialog",(function(){return{main:function(o,i,c,d,f){this.preferences=u.default.pgAdmin.Browser.get_preferences_for_module("debugger"),this.set("title",o),this.set("debug_info",i),this.set("restart_debug",c),this.set("trans_id",f),this.set("is_edb_proc",d);var m,v,_,w,O,S,j=this.func_args_data=[];if(0==c){var P=l.tree,x=P.selected(),C=x?P.itemData(x):void 0;if(!C)return;var E,k=P.getTreeNodeHierarchy(x);"function"==C._type?E=t("debugger.get_arguments",{sid:k.server._id,did:k.database._id,scid:k.schema._id,func_id:k.function._id}):"procedure"==C._type?E=t("debugger.get_arguments",{sid:k.server._id,did:k.database._id,scid:k.schema._id,func_id:k.procedure._id}):"edbfunc"==C._type?E=t("debugger.get_arguments",{sid:k.server._id,did:k.database._id,scid:k.schema._id,func_id:k.edbfunc._id}):"edbproc"==C._type&&(E=t("debugger.get_arguments",{sid:k.server._id,did:k.database._id,scid:k.schema._id,func_id:k.edbproc._id}))}else E=t("debugger.get_arguments",{sid:i.server_id,did:i.database_id,scid:i.schema_id,func_id:i.function_id});n.ajax({url:E,method:"GET",async:!1}).done((function(e){if(0!=e.data.args_count)for(x=0;x<e.data.result.length;x++)j.push({arg_id:e.data.result[x].arg_id,is_null:e.data.result[x].is_null,is_expression:e.data.result[x].is_expression,use_default:e.data.result[x].use_default,value:e.data.result[x].value})})).fail((function(){a.alert(e("Debugger Error"),e("Unable to fetch the arguments from server"))}));var D,T,N,R,M,A,I=s.HeaderCell.extend({className:"width_percent_25"}),B=[],L=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"is_null",label:e("Null?"),type:"boolean",cell:"boolean",align_center:!0},{name:"expr",label:e("Expression?"),type:"boolean",cellFunction:b,editable:g,align_center:!0},{name:"value",label:e("Value"),type:"text",editable:!0,cellFunction:p,headerCell:I,align_center:!0},{name:"use_default",label:e("Use Default?"),type:"boolean",cell:"boolean",editable:h},{name:"default_value",label:e("Default"),type:"text",editable:!1,cell:"string"}],F=[],q=[],U=this.input_arg_id=[];if(null!=i.proargmodes){var V=i.proargmodes.split(",");for(D=0;D<V.length;D++)("i"==V[D]||"b"==V[D]||d&&"o"==V[D])&&U.push(D)}else{var H=i.proargtypenames.split(",");for(D=0;D<H.length;D++)U.push(D)}if(v=i.proargtypenames.split(","),null!=i.proargmodes&&(_=i.proargmodes.split(",")),i.pronargdefaults&&(w=i.pronargdefaults,O=i.proargdefaults.split(","),S=w),null!=i.proargnames){for(A=(m=i.proargnames.split(",")).length-1;A>=0;A--)null!=i.proargmodes?_&&("i"==_[A]||"b"==_[A]||d&&"o"==_[A])&&(S?(S-=1,B[A]=O[S]):B[A]="<no default>"):S?(S-=1,B[A]=O[S]):B[A]="<no default>";if(0!=v.length)for(x=0;x<v.length;x++)null!=i.proargmodes?_&&("i"==_[x]||"b"==_[x]||d&&"o"==_[x])&&(M=!1,"<no default>"!=B[x]&&(M=!0),F.push({name:m[x],type:v[x],use_default:M,default_value:B[x]})):(M=!1,"<no default>"!=B[x]&&(M=!0),F.push({name:m[x],type:v[x],use_default:M,default_value:B[x]}));if(0!=j.length)for(x=0;x<j.length;x++)R=j[x].arg_id,null!=i.proargmodes&&_&&"o"==_[R]&&!d||(N=[],-1!=v[R].indexOf("[]")?(T=j[x].value.split(","),r.each(T,(function(e){N.push({value:e})}))):N=j[x].value,q.push({name:m[R],type:v[R],is_null:!!j[x].is_null,expr:!!j[x].is_expression,value:N,use_default:!!j[x].use_default,default_value:B[R]}))}else{var z=[];for(x=0;x<v.length;x++)z[x]="dbgparam"+(x+1);if(i.pronargdefaults){for(A=z.length-1;A>=0;A--)S?(S-=1,B[A]=O[S]):B[A]="<No default value>";for(x=0;x<v.length;x++)(null==i.proargmodes||_&&("i"==_[x]||"b"==_[x]||d&&"o"==_[x]))&&(M=!1,"<No default value>"!=B[x]&&(M=!0),F.push({name:z[x],type:v[x],use_default:M,default_value:B[x]}))}else for(x=0;x<v.length;x++)F.push({name:z[x],type:v[x],use_default:!1,default_value:"<No default value>"}),B[x]="<No default value>";if(0!=j.length)for(x=0;x<j.length;x++)R=j[x].arg_id,N=[],-1!=v[R].indexOf("[]")?(T=j[x].value.split(","),r.each(T,(function(e){N.push({value:e})}))):N=j[x].value,q.push({name:z[R],type:v[R],is_null:!!j[x].is_null,expr:!!j[x].is_expression,value:N,use_default:!!j[x].use_default,default_value:B[R]})}0==j.length?this.debuggerInputArgsColl=new y(F):this.debuggerInputArgsColl=new y(q),this.grid&&(this.grid.remove(),this.grid=null);var W=this.grid=new s.Grid({columns:L,collection:this.debuggerInputArgsColl,className:"backgrid table table-bordered table-noouter-border table-bottom-border"});W.render();var G=document.createElement("div");G.classList.add("debugger-args"),G.appendChild(W.el),n(this.elements.content).html(G);var K=n(W.el).find("input:checkbox").first();K.length&&setTimeout((function(){K.trigger("focus")}),250)},settings:{debug_info:void 0,restart_debug:void 0,trans_id:void 0},setup:function(){return{buttons:[{text:e("Clear All"),className:"btn btn-secondary pull-left fa fa-eraser pg-alertify-button"},{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:e("Debug"),key:13,className:"btn btn-primary fa fa-bug pg-alertify-button"}],options:{padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}},callback:function(r){if(r.button.text===e("Debug")){var o=this;if(0==o.setting("restart_debug")){var i=l.tree,s=i.selected(),p=s?i.itemData(s):void 0;if(!p)return;var b=i.getTreeNodeHierarchy(s)}var m,y=[],h=this.sqlite_func_args_list=[],g=0;if(this.grid.collection.each((function(e){var t;(e.get("is_null")?y.push({name:e.get("name"),type:e.get("type"),value:"NULL"}):e.get("use_default")?y.push({name:e.get("name"),type:e.get("type"),value:e.get("default_value")}):y.push({name:e.get("name"),type:e.get("type"),value:e.get("value")}),0==o.setting("restart_debug"))?("function"==p._type?t=b.function._id:"procedure"==p._type?t=b.procedure._id:"edbfunc"==p._type?t=b.edbfunc._id:"edbproc"==p._type&&(t=b.edbproc._id),h.push({server_id:b.server._id,database_id:b.database._id,schema_id:b.schema._id,function_id:t,arg_id:o.input_arg_id[g],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")})):h.push({server_id:o.setting("debug_info").server_id,database_id:o.setting("debug_info").database_id,schema_id:o.setting("debug_info").schema_id,function_id:o.setting("debug_info").function_id,arg_id:o.input_arg_id[g],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")});g+=1})),0==o.setting("restart_debug"))p&&"function"==p._type?m=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:o.setting("trans_id"),sid:b.server._id,did:b.database._id,scid:b.schema._id,func_id:b.function._id}):p&&"procedure"==p._type?m=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:o.setting("trans_id"),sid:b.server._id,did:b.database._id,scid:b.schema._id,func_id:b.procedure._id}):p&&"edbfunc"==p._type?m=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:o.setting("trans_id"),sid:b.server._id,did:b.database._id,scid:b.schema._id,func_id:b.edbfunc._id}):p&&"edbproc"==p._type&&(m=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:o.setting("trans_id"),sid:b.server._id,did:b.database._id,scid:b.schema._id,func_id:b.edbproc._id})),n.ajax({url:m,method:"POST",data:{data:JSON.stringify(y)}}).done((function(r){var i,s=t("debugger.direct",{trans_id:r.data.debuggerTransId}),m=u.default.pgAdmin.Browser.get_preferences_for_module("browser").new_browser_tab_open;if(m&&m.includes("debugger"))window.open(s,"_blank"),setTimeout((function(){l.send_signal_to_runtime("Runtime new window opened")}),500);else{l.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",(function(e){e.openURL(s)}));var y=l.docker.findPanels("properties"),g=l.docker.addPanel("frm_debugger",f.DOCK.STACKED,y[0]),v=l.get_preferences_for_module("browser"),_=b.function?b.function.label:b.trigger_function?b.trigger_function.label:b.trigger?b.trigger.label:b.procedure.label;c.setDebuggerTitle(g,v,_,b.schema.label,b.database.label,null,l),g.focus(),g.on(f.EVENT.CLOSED,(function(){var e=t("debugger.close",{trans_id:r.data.debuggerTransId});n.ajax({url:e,method:"DELETE"})})),d.registerDetachEvent(g),g.on(f.EVENT.RENAME,(function(t){a.prompt("",t.$titleText[0].textContent,(function(e,t){if(t){t=t.trim();var n=b.function?b.function.label:b.trigger_function?b.trigger_function.label:b.trigger?b.trigger.label:b.procedure.label;c.setDebuggerTitle(g,o.preferences,n,b.schema.label,b.database.label,t,l)}}),(function(e){e.cancel=!1})).set({title:e("Rename Panel")})}))}"function"==p._type?i=t("debugger.set_arguments",{sid:b.server._id,did:b.database._id,scid:b.schema._id,func_id:b.function._id}):"procedure"==p._type?i=t("debugger.set_arguments",{sid:b.server._id,did:b.database._id,scid:b.schema._id,func_id:b.procedure._id}):"edbfunc"==p._type?i=t("debugger.set_arguments",{sid:b.server._id,did:b.database._id,scid:b.schema._id,func_id:b.edbfunc._id}):"edbproc"==p._type&&(i=t("debugger.set_arguments",{sid:b.server._id,did:b.database._id,scid:b.schema._id,func_id:b.edbproc._id})),n.ajax({url:i,method:"POST",data:{data:JSON.stringify(h)}}).done((function(){})).fail((function(){a.alert(e("Debugger Error"),e("Unable to set the arguments on the server"))}))})).fail((function(t){a.alert(e("Debugger Target Initialization Error"),t.responseJSON.errormsg)}));else{m=t("debugger.start_listener",{trans_id:o.setting("debug_info").trans_id}),n.ajax({url:m,method:"POST",data:{data:JSON.stringify(y)}}).done((function(){})).fail((function(t){a.alert(e("Debugger Listener Startup Error"),t.responseJSON.errormsg)}));var v=t("debugger.set_arguments",{sid:o.setting("debug_info").server_id,did:o.setting("debug_info").database_id,scid:o.setting("debug_info").schema_id,func_id:o.setting("debug_info").function_id});n.ajax({url:v,method:"POST",data:{data:JSON.stringify(h)}}).done((function(){})).fail((function(){a.alert(e("Debugger Error"),e("Unable to set the arguments on the server"))}))}return!0}if(r.button.text===e("Cancel"))return n.ajax({method:"DELETE",url:t("debugger.close",{trans_id:this.setting("trans_id")})}),!1;if(r.button.text===e("Clear All")){var _=this,w=null;if(0==_.setting("restart_debug")){var O=l.tree.selected(),S=l.tree.itemData(O);if(!S)return;var j=l.tree.getTreeNodeHierarchy(O);w=t("debugger.clear_arguments",{sid:j.server._id,did:j.database._id,scid:j.schema._id,func_id:S._id})}else w=t("debugger.clear_arguments",{sid:_.setting("debug_info").server_id,did:_.setting("debug_info").database_id,scid:_.setting("debug_info").schema_id,func_id:_.setting("debug_info").function_id});return n.ajax({url:w,method:"POST",data:{data:JSON.stringify(y)}}).done((function(){_.__internal.buttons[2].element.disabled=!0,_.main(_.setting("title"),_.setting("debug_info"),_.setting("restart_debug"),_.setting("is_edb_proc"),_.setting("trans_id")),_.prepare()})).fail((function(t){a.alert(e("Clear failed"),t.responseJSON.errormsg)})),r.cancel=!0,!0}},build:function(){a.pgDialogBuild.apply(this)},prepare:function(){var e;n(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),0==this.func_args_data.length?this.__internal.buttons[2].element.disabled=!0:this.__internal.buttons[2].element.disabled=!1,this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:edited",(e=this,function(){for(var t=!1,n=0;n<this.collection.length;n++)if(this.collection.models[n].get("is_null"))e.__internal.buttons[2].element.disabled=!1,t=!0;else if(null==this.collection.models[n].get("value")||null==this.collection.models[n].get("value")){if(t=!0,!this.collection.models[n].get("use_default")){e.__internal.buttons[2].element.disabled=!0;break}e.__internal.buttons[2].element.disabled=!1}t||(e.__internal.buttons[2].element.disabled=!1)})),this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:error",function(e){return function(){e.__internal.buttons[2].element.disabled=!0}}(this))}}})),a.debuggerInputArgsDialog(e("Debugger"),o,i,m,v).resizeTo(l.stdW.md,l.stdH.md)}}.apply(t,r))||(e.exports=o)},6715:(e,t,n)=>{n(23123),n(74916),n(92222),n(40561);var r=n(9807),o=n(7167);function a(e){var t=e.split("(");t.splice(-1,1);var n=null,r="";for(n=0;n<t.length;n++)r=r.concat(t[n]),n!=t.length-1&&(r=r.concat("("));return r}e.exports={setFocusToDebuggerEditor:function(e,t){t&&9!==(t.which||t.keyCode)&&e.focus()},getFunctionId:function(e){var t;return e&&(e.function&&e.function._id?t=e.function._id:e.edbfunc&&e.edbfunc._id&&(t=e.edbfunc._id)),t},getProcedureId:function(e){var t;return e&&(e.procedure&&e.procedure._id?t=e.procedure._id:e.edbproc&&e.edbproc._id&&(t=e.edbproc._id)),t},setDebuggerTitle:function(e,t,n,i,l){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c="";c=s||t.debugger_tab_title_placeholder;var d=n.split("(");n=a(n);var f=d[d.length-1].split(")"),p="";f.length>0&&(p=p.concat(f[0]));var b={function_name:n,args:p,schema:i,database:l,type:"debugger"},m=(0,r.generateTitle)(c,b);(0,o._set_dynamic_tab)(u,t.dynamic_tabs),e.title("<span>"+m+"</span>")}}},22074:(e,t,n)=>{var r,o;n(32564),n(69826),n(15306),n(74916),n(69600),n(68309),n(24812),n(26699),n(32023),r=[n(91669),n(28008),n(19755),n(81311),n(55455),n(55112),n(33883),n(72316),n(71158),n(12030),n(20811),n(92323),n(72945),n(6715),n(1950),n(35816)],void 0===(o=function(e,t,n,r,o,a,i,l,s,u,c,d,f,p,b){var m=c.default,y=window.wcDocker;null!=a.Browser.tree&&(a=a||window.pgAdmin||{});var h=a.Tools=a.Tools||{};if(h.DirectDebug)return h.DirectDebug;var g=new function(){};r.extend(g,l.Events,{enable:function(e,t){this.trigger("pgDebugger:button:state:"+e,t)},enable_toolbar_buttons:function(){var e=this;e.enable("stop",!0),e.enable("step_over",!0),e.enable("step_into",!0),e.enable("toggle_breakpoint",!0),e.enable("clear_all_breakpoints",!0),e.enable("continue",!0)},disable_toolbar_buttons:function(){var e=this;e.enable("stop",!1),e.enable("step_over",!1),e.enable("step_into",!1),e.enable("toggle_breakpoint",!1),e.enable("clear_all_breakpoints",!1),e.enable("continue",!1)},set_breakpoint:function(r,a,i){var l=t("debugger.set_breakpoint",{trans_id:r,line_no:a,set_type:i});n.ajax({url:l,method:"GET"}).done((function(e){e.data.status})).fail((function(){o.alert(e("Debugger Error"),e("Error while setting debugging breakpoint."))}))},UpdateBreakpoint:function(e){var t=this.GetBreakpointInformation(e);if(1!=t.length||-1!=t[0].linenumber){for(var n,r=new Array,o=0;o<t.length;o++)-1!=t[o].linenumber&&r.push(t[o].linenumber);for(o=0;o<r.length;o++){null!=h.DirectDebug.editor.lineInfo(r[o]-1).gutterMarkers?h.DirectDebug.editor.setGutterMarker(r[o]-1,"breakpoints",null):h.DirectDebug.editor.setGutterMarker(r[o]-1,"breakpoints",(n=void 0,(n=document.createElement("div")).style.color="#822",n.innerHTML="●",n))}}},GetBreakpointInformation:function(r){var a="",i=t("debugger.execute_query",{trans_id:r,query_type:"get_breakpoints"});return n.ajax({url:i,method:"GET",async:!1}).done((function(t){"Success"===t.data.status?a=t.data.result:"NotConnected"===t.data.status&&o.alert(e("Debugger Error"),e("Error while fetching breakpoint information."))})).fail((function(){o.alert(e("Debugger Error"),e("Error while fetching breakpoint information."))})),a},setActiveLine:function(e){var t=this,n=h.DirectDebug.editor;e&&t.active_line_no&&n.removeLineClass(t.active_line_no,"wrap","CodeMirror-activeline-background"),!e&&t.active_line_no&&(e=t.active_line_no),e>0&&(t.active_line_no=e,n.addLineClass(t.active_line_no,"wrap","CodeMirror-activeline-background"),n.centerOnLine(t.active_line_no))},start_execution:function(r,a){var i=this,l=t("debugger.start_execution",{trans_id:r,port_num:a});n.ajax({url:l,method:"GET"}).done((function(t){"Success"===t.data.status?i.execute_query(r):"NotConnected"===t.data.status&&o.alert(e("Debugger Error"),e("Error while starting debugging session."))})).fail((function(){o.alert(e("Debugger Error"),e("Error while starting debugging session."))}))},execute_query:function(r){var a=this,i=t("debugger.execute_query",{trans_id:r,query_type:"wait_for_breakpoint"});n.ajax({url:i,method:"GET"}).done((function(t){"Success"===t.data.status?(null!=t.data.result[0].src&&null!=t.data.result[0].linenumber&&(h.DirectDebug.editor.setValue(t.data.result[0].src),a.setActiveLine(t.data.result[0].linenumber-2)),a.GetStackInformation(r),h.DirectDebug.debug_type&&a.poll_end_execution_result(r)):"NotConnected"===t.data.status&&o.alert(e("Debugger Error"),e("Error while executing requested debugging information."))})).fail((function(){o.alert(e("Debugger Error"),e("Error while executing requested debugging information."))}))},GetLocalVariables:function(r){var a=this,i=t("debugger.execute_query",{trans_id:r,query_type:"get_variables"});n.ajax({url:i,method:"GET"}).done((function(t){"Success"===t.data.status?(a.AddLocalVariables(t.data.result),a.AddParameters(t.data.result),h.DirectDebug.debug_restarted&&(h.DirectDebug.debug_type&&a.poll_end_execution_result(r),h.DirectDebug.debug_restarted=!1)):"NotConnected"===t.data.status&&o.alert(e("Debugger Error"),e("Error while fetching variable information."))})).fail((function(){o.alert(e("Debugger Error"),e("Error while fetching variable information."))}))},GetStackInformation:function(r){var a=this,i=t("debugger.execute_query",{trans_id:r,query_type:"get_stack_info"});n.ajax({url:i,method:"GET"}).done((function(t){"Success"===t.data.status?(a.AddStackInformation(t.data.result),a.GetLocalVariables(h.DirectDebug.trans_id)):"NotConnected"===t.data.status&&o.alert(e("Debugger Error"),e("Error while fetching stack information."))})).fail((function(){o.alert(e("Debugger Error"),e("Error while fetching stack information."))}))},poll_result:function(r){var i=this;if(h.DirectDebug.is_polling_required){var l,s=t("debugger.poll_result",{trans_id:r});l=h.DirectDebug.polling_timeout_idle?1e3:200,setTimeout((function(){n.ajax({url:s,method:"GET",beforeSend:function(e){e.setRequestHeader(a.csrf_token_header,a.csrf_token),n(".debugger-container").addClass("show_progress")}}).done((function(t){n(".debugger-container").removeClass("show_progress"),"Success"===t.data.status?null==t.data.result||0==t.data.result.length?i.poll_result(r):(h.DirectDebug.debug_type||h.DirectDebug.first_time_indirect_debug?(h.DirectDebug.polling_timeout_idle=!1,h.DirectDebug.docker.finishLoading(50),t.data.result[0].src!=h.DirectDebug.editor.getValue()&&(h.DirectDebug.editor.setValue(t.data.result[0].src),i.UpdateBreakpoint(r)),i.setActiveLine(t.data.result[0].linenumber-2),i.GetStackInformation(r)):(h.DirectDebug.docker.finishLoading(50),i.setActiveLine(-1),i.clear_all_breakpoint(r),i.execute_query(r),h.DirectDebug.first_time_indirect_debug=!0,h.DirectDebug.polling_timeout_idle=!1),setTimeout((function(){i.enable_toolbar_buttons()}),500)):"Busy"===t.data.status?(h.DirectDebug.polling_timeout_idle=!0,h.DirectDebug.debug_type||(h.DirectDebug.docker.startLoading(e("Waiting for another session to invoke the target...")),i.disable_toolbar_buttons(),h.DirectDebug.first_time_indirect_debug=!1),i.poll_result(r)):"NotConnected"===t.data.status&&o.alert(e("Debugger Error"),e("Error while polling result."))})).fail((function(){o.alert(e("Debugger Error"),e("Error while polling result."))}))}),l)}},update_messages:function(e){e=r.escape(e);var t,n="";n=(t=h.DirectDebug.messages_panel.$container.find(".messages").html())?(t+"\n"+e).replace(/(?:\r\n|\r|\n)/g,"<br />").replace(/(<br\ ?\/?>)+/g,"<br />"):e,h.DirectDebug.messages_panel.$container.find(".messages").html(n)},poll_end_execution_result:function(r){var a=this;if(h.DirectDebug.is_polling_required){var i,l=t("debugger.poll_end_execution_result",{trans_id:r});i=h.DirectDebug.polling_timeout_idle?1200:250,setTimeout((function(){n.ajax({url:l,method:"GET"}).done((function(t){"Success"===t.data.status?null==t.data.result?(a.setActiveLine(-1),h.DirectDebug.direct_execution_completed=!0,h.DirectDebug.polling_timeout_idle=!0,o.success(t.info,3),t.data.status_message&&a.update_messages(t.data.status_message),n(".debugger-container").removeClass("show_progress"),setTimeout((function(){a.enable("stop",!1),a.enable("step_over",!1),a.enable("step_into",!1),a.enable("toggle_breakpoint",!1),a.enable("clear_all_breakpoints",!1),a.enable("continue",!0)}),500),h.DirectDebug.is_polling_required=!1):null!=t.data.result&&(a.setActiveLine(-1),a.AddResults(t.data.col_info,t.data.result),h.DirectDebug.results_panel.focus(),h.DirectDebug.direct_execution_completed=!0,h.DirectDebug.polling_timeout_idle=!0,o.success(t.info,3),t.data.status_message&&a.update_messages(t.data.status_message),n(".debugger-container").removeClass("show_progress"),setTimeout((function(){a.enable("stop",!1),a.enable("step_over",!1),a.enable("step_into",!1),a.enable("toggle_breakpoint",!1),a.enable("clear_all_breakpoints",!1),a.enable("continue",!0)}),500),h.DirectDebug.is_polling_required=!1):"Busy"===t.data.status?(a.poll_end_execution_result(r),t.data.status_message&&a.update_messages(t.data.status_message)):"NotConnected"===t.data.status?o.alert(e("Debugger poll end execution error"),t.data.result):"ERROR"===t.data.status&&(h.DirectDebug.direct_execution_completed=!0,a.setActiveLine(-1),h.DirectDebug.is_user_aborted_debugging||o.error(t.info,3),t.data.status_message&&a.update_messages(t.data.status_message),h.DirectDebug.messages_panel.focus(),n(".debugger-container").removeClass("show_progress"),a.enable("stop",!1),a.enable("step_over",!1),a.enable("step_into",!1),a.enable("toggle_breakpoint",!1),a.enable("clear_all_breakpoints",!1),h.DirectDebug.is_user_aborted_debugging||(a.enable("continue",!0),h.DirectDebug.is_user_aborted_debugging=!1),h.DirectDebug.is_polling_required=!1)})).fail((function(){o.alert(e("Debugger Error"),e("Error while polling result."))}))}),i)}},Restart:function(r){var a=this,i=t("debugger.restart",{trans_id:r});a.disable_toolbar_buttons(),h.DirectDebug.messages_panel.$container.find(".messages").html(""),n.ajax({url:i}).done((function(i){var l=i.data.restart_debug?1:0;if(h.DirectDebug.polling_timeout_idle=!1,h.DirectDebug.is_polling_required=!0,a.poll_result(r),l&&(h.DirectDebug.debug_restarted=!0),i.data.result.require_input)d(i.data.result,l);else{var s=t("debugger.start_listener",{trans_id:r});n.ajax({url:s,method:"GET"}).done((function(){h.DirectDebug.debug_type&&a.poll_end_execution_result(r)})).fail((function(){o.alert(e("Debugger Error"),e("Error while polling result."))}))}})).fail((function(t){try{var n=JSON.parse(t.responseText);0==n.success&&o.alert(e("Debugger Error"),n.errormsg)}catch(e){console.warn(e.stack||e)}}))},Continue:function(r){var a=this;if(a.disable_toolbar_buttons(),h.DirectDebug.direct_execution_completed&&h.DirectDebug.direct_execution_completed==h.DirectDebug.polling_timeout_idle)a.Restart(r);else{var i=t("debugger.execute_query",{trans_id:r,query_type:"continue"});n.ajax({url:i,method:"GET"}).done((function(t){t.data.status?a.poll_result(r):o.alert(e("Debugger Error"),e("Error while executing continue in debugging session."))})).fail((function(){o.alert(e("Debugger Error"),e("Error while executing continue in debugging session."))}))}},Step_over:function(r){var a=this;a.disable_toolbar_buttons();var i=t("debugger.execute_query",{trans_id:r,query_type:"step_over"});n.ajax({url:i,method:"GET"}).done((function(t){t.data.status?a.poll_result(r):o.alert(e("Debugger Error"),e("Error while executing step over in debugging session."))})).fail((function(){o.alert(e("Debugger Error"),e("Error while executing step over in debugging session."))}))},Step_into:function(r){var a=this;a.disable_toolbar_buttons();var i=t("debugger.execute_query",{trans_id:r,query_type:"step_into"});n.ajax({url:i,method:"GET"}).done((function(t){t.data.status?a.poll_result(r):o.alert(e("Debugger Error"),e("Error while executing step into in debugging session."))})).fail((function(){o.alert(e("Debugger Error"),e("Error while executing step into in debugging session."))}))},Stop:function(r){var a=this;a.disable_toolbar_buttons();var i=t("debugger.execute_query",{trans_id:r,query_type:"abort_target"});n.ajax({url:i,method:"GET"}).done((function(t){t.data.status?(a.setActiveLine(-1),h.DirectDebug.direct_execution_completed=!0,h.DirectDebug.is_user_aborted_debugging=!0,h.DirectDebug.is_polling_required=!1,a.enable("continue",!1),o.success(t.info,3)):"NotConnected"===t.data.status&&o.alert(e("Debugger Error"),e("Error while executing stop in debugging session."))})).fail((function(){o.alert(e("Debugger Error"),e("Error while executing stop in debugging session."))}))},toggle_breakpoint:function(r){var a=this;a.disable_toolbar_buttons();var i="";i=null==h.DirectDebug.editor.lineInfo(a.active_line_no).gutterMarkers?t("debugger.set_breakpoint",{trans_id:r,line_no:a.active_line_no+1,set_type:"1"}):t("debugger.set_breakpoint",{trans_id:r,line_no:a.active_line_no+1,set_type:"0"}),n.ajax({url:i,method:"GET"}).done((function(t){var n;t.data.status?(null!=h.DirectDebug.editor.lineInfo(a.active_line_no).gutterMarkers?h.DirectDebug.editor.setGutterMarker(a.active_line_no,"breakpoints",null):h.DirectDebug.editor.setGutterMarker(a.active_line_no,"breakpoints",((n=document.createElement("div")).style.color="#822",n.innerHTML="●",n)),a.enable_toolbar_buttons()):"NotConnected"===t.data.status&&o.alert(e("Debugger Error"),e("Error while toggling breakpoint."))})).fail((function(){o.alert(e("Debugger Error"),e("Error while toggling breakpoint."))}))},clear_all_breakpoint:function(r){var a=this,i=a.GetBreakpointInformation(r);if(1!=i.length||-1!=i[0].linenumber){a.disable_toolbar_buttons();for(var l=new Array,s=0;s<i.length;s++)-1!=i[s].linenumber&&l.push(i[s].linenumber);var u=t("debugger.clear_all_breakpoint",{trans_id:r});n.ajax({url:u,method:"POST",data:{breakpoint_list:l.join()}}).done((function(e){if(e.data.status)for(var t=0;t<l.length;t++){var n=h.DirectDebug.editor.lineInfo(l[t]-1);n&&null!=n.gutterMarkers&&h.DirectDebug.editor.setGutterMarker(l[t]-1,"breakpoints",null)}a.enable_toolbar_buttons()})).fail((function(){o.alert(e("Debugger Error"),e("Error while clearing all breakpoint."))}))}},AddStackInformation:function(t){var n=this;n.stack_grid&&(n.stack_grid.remove(),n.stack_grid=null);for(var r=l.Model.extend({defaults:{frame_id:0,name:void 0,value:void 0,line_no:void 0}}),o=l.Collection.extend({model:r}),a=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",editable:!1,cell:"string"},{name:"line_no",label:e("Line No."),type:"text",editable:!1,cell:"string"}],i=[],u=0;u<t.length;u++)i.push({frame_id:u,name:t[u].targetname,value:t[u].args,line_no:t[u].linenumber});var c=this.stackColl=new o(i);this.stackColl.on("backgrid:row:selected",n.select_frame,n);var d=this.stack_grid=new s.Grid({emptyText:e("No data found"),columns:a,row:s.Row.extend({events:{click:"rowClick"},rowClick:function(){n.frame_id=this.model.get("frame_id"),this.model.trigger("backgrid:row:selected",this),n.stack_grid.$el.find("td").css("background-color",this.disabledColor),this.$el.find("td").css("background-color",this.highlightColor)}}),collection:c,className:"backgrid table table-bordered table-noouter-border table-bottom-border"});d.render(),h.DirectDebug.stack_pane_panel.$container.find(".stack_pane").append(d.el)},AddResults:function(t,n){var o=this;o.result_grid&&(o.result_grid.remove(),o.result_grid=null);var a=l.Model.extend({defaults:{name:void 0}}),i=l.Collection.extend({model:a}),u=[];r.size(t)&&r.each(t,(function(e){var t={type:"text",editable:!1,cell:"string"};t.name=t.label=e.name,u.push(t)}));var c=this.result_grid=new s.Grid({emptyText:e("No data found"),columns:u,collection:new i(n),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});c.render(),h.DirectDebug.results_panel.$container.find(".debug_results").append(c.el)},AddLocalVariables:function(t){var n=this;n.variable_grid&&(n.variable_grid.remove(),n.variable_grid=null);var r=l.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),o=l.Collection.extend({model:r});o.prototype.on("change",n.deposit_parameter_value,n);var a=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",cell:"string"}],i=[];if(0!=t.length)for(var u=0;u<t.length;u++)"L"==t[u].varclass&&i.push({name:t[u].name,type:t[u].dtype,value:t[u].value});var c=this.variable_grid=new s.Grid({emptyText:e("No data found"),columns:a,collection:new o(i),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});c.collection.on("backgrid:edited",(function(e,t,n){p.setFocusToDebuggerEditor(h.DirectDebug.editor,n)})),c.render(),h.DirectDebug.local_variables_panel.$container.find(".local_variables").append(c.el)},AddParameters:function(t){var n=this;n.param_grid&&(n.param_grid.remove(),n.param_grid=null);var r=l.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),o=n.ParametersCollection=l.Collection.extend({model:r});o.prototype.on("change",n.deposit_parameter_value,n);var a=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",cell:"string"}],i=[];if(0!=t.length)for(var u=0;u<t.length;u++)"A"==t[u].varclass&&i.push({name:t[u].name,type:t[u].dtype,value:t[u].value});var c=this.param_grid=new s.Grid({emptyText:e("No data found"),columns:a,collection:new o(i),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});c.collection.on("backgrid:edited",(function(e,t,n){p.setFocusToDebuggerEditor(h.DirectDebug.editor,n)})),c.render(),h.DirectDebug.parameters_panel.$container.find(".parameters").append(c.el)},deposit_parameter_value:function(r){var a=this,i=[];i.push({name:r.get("name"),type:r.get("type"),value:r.get("value")});var l=t("debugger.deposit_value",{trans_id:h.DirectDebug.trans_id});n.ajax({url:l,method:"POST",data:{data:JSON.stringify(i)}}).done((function(e){e.data.status&&(a.GetLocalVariables(h.DirectDebug.trans_id),e.data.result?o.success(e.data.info,3):o.error(e.data.info,3))})).fail((function(){o.alert(e("Debugger Error"),e("Error while depositing variable value."))}))},select_frame:function(){var r=this,a=t("debugger.select_frame",{trans_id:h.DirectDebug.trans_id,frame_id:r.frame_id});n.ajax({url:a,method:"GET"}).done((function(e){e.data.status&&(h.DirectDebug.editor.setValue(e.data.result[0].src),r.UpdateBreakpoint(h.DirectDebug.trans_id),r.setActiveLine(e.data.result[0].linenumber-2),r.GetLocalVariables(h.DirectDebug.trans_id))})).fail((function(){o.alert(e("Debugger Error"),e("Error while selecting frame."))}))}});var v=l.View.extend({el:".debugger_main_container",initialize:function(){g.on("pgDebugger:button:state:stop",this.enable_stop,this),g.on("pgDebugger:button:state:step_over",this.enable_step_over,this),g.on("pgDebugger:button:state:step_into",this.enable_step_into,this),g.on("pgDebugger:button:state:continue",this.enable_continue,this),g.on("pgDebugger:button:state:toggle_breakpoint",this.enable_toggle_breakpoint,this),g.on("pgDebugger:button:state:clear_all_breakpoints",this.enable_clear_all_breakpoints,this)},events:{"click .btn-stop":"on_stop","click .btn-clear-breakpoint":"on_clear_all_breakpoint","click .btn-toggle-breakpoint":"on_toggle_breakpoint","click .btn-continue":"on_continue","click .btn-step-over":"on_step_over","click .btn-step-into":"on_step_into",keydown:"keyAction"},enable_stop:function(e){var t=this.$el.find(".btn-stop");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_over:function(e){var t=this.$el.find(".btn-step-over");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_into:function(e){var t=this.$el.find(".btn-step-into");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_continue:function(e){var t=this.$el.find(".btn-continue");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_toggle_breakpoint:function(e){var t=this.$el.find(".btn-toggle-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_clear_all_breakpoints:function(e){var t=this.$el.find(".btn-clear-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},on_stop:function(){g.Stop(h.DirectDebug.trans_id)},on_clear_all_breakpoint:function(){g.clear_all_breakpoint(h.DirectDebug.trans_id)},on_toggle_breakpoint:function(){g.toggle_breakpoint(h.DirectDebug.trans_id)},on_continue:function(){g.Continue(h.DirectDebug.trans_id)},on_step_over:function(){g.Step_over(h.DirectDebug.trans_id)},on_step_into:function(){g.Step_into(h.DirectDebug.trans_id)},keyAction:function(e){var t;t=f.processEventDebugger(this.$el,e,this.preferences,h.DirectDebug.docker),r.isNull(t)||r.isUndefined(t)||""==t||setTimeout((function(){i.Events.trigger("pgadmin:debugger:".concat(t,":focus"))}),100)}}),_=function(){};return r.extend(_.prototype,{load:function(a,i,l,s){var u=this;if(r.bindAll(h.DirectDebug,"messages"),!this.initialized){var c;this.initialized=!0,this.trans_id=a,this.debug_type=i,this.first_time_indirect_debug=!1,this.direct_execution_completed=!1,this.polling_timeout_idle=!1,this.debug_restarted=!1,this.is_user_aborted_debugging=!1,this.is_polling_required=!0,this.function_name_with_arguments=l,this.layout=s;var d=b.default.pgAdmin.Browser;this.preferences=d.get_preferences_for_module("debugger"),this.docker=new y("#container",{allowContextMenu:!1,allowCollapse:!1,loadingClass:"pg-sp-icon",themePath:t("static",{filename:"css"}),theme:"webcabin.overrides.css"}),this.panels=[],null==a||i?null!=a?(c=t("debugger.start_listener",{trans_id:a}),n.ajax({url:c,method:"GET"}).done((function(e){e.data.status&&u.messages(a)})).fail((function(t){try{var n=JSON.parse(t.responseText);0==n.success&&o.alert(e("Debugger Error"),n.errormsg)}catch(t){o.alert(e("Debugger Error"),e("Error while starting debugging listener."))}}))):this.intializePanels():(c=t("debugger.start_listener",{trans_id:a}),n.ajax({url:c,method:"GET"}).done((function(e){e.data.status&&(u.intializePanels(),g.enable_toolbar_buttons(),g.poll_result(a))})).fail((function(t){try{var n=JSON.parse(t.responseText);0==n.success&&o.alert(e("Debugger Error"),n.errormsg)}catch(t){o.alert(e("Debugger Error"),e("Error while starting debugging listener."))}})))}},messages:function(r){var a=this,i=t("debugger.messages",{trans_id:r});n.ajax({url:i,method:"GET"}).done((function(t){"Success"===t.data.status?(a.intializePanels(),g.enable_toolbar_buttons(),g.start_execution(r,t.data.result)):"Busy"===t.data.status?a.messages(r):"NotConnected"===t.data.status&&o.alert(e("Not connected to server or connection with the server has been closed."),t.data.result)})).fail((function(){o.alert(e("Debugger Error"),e("Error while fetching messages information."))}))},onBreakPoint:function(e,t,n){var r,o=this;if("breakpoints"==n&&!h.DirectDebug.polling_timeout_idle){var a=e.lineInfo(t);null==a.gutterMarkers||null==a.gutterMarkers.breakpoints?g.set_breakpoint(o.trans_id,t+1,1):g.set_breakpoint(o.trans_id,t+1,0);var i=a.gutterMarkers;null!=i&&null==a.gutterMarkers.breakpoints&&(i=a.gutterMarkers.breakpoints),e.setGutterMarker(t,"breakpoints",i?null:((r=document.createElement("div")).style.color="#822",r.innerHTML="●",r))}},buildDefaultLayout:function(e){var t=e.addPanel("code",y.DOCK.TOP),n=e.addPanel("parameters",y.DOCK.BOTTOM,t);e.addPanel("local_variables",y.DOCK.STACKED,n,{tabOrientation:y.TAB.TOP}),e.addPanel("messages",y.DOCK.STACKED,n),e.addPanel("results",y.DOCK.STACKED,n),e.addPanel("stack_pane",y.DOCK.STACKED,n)},setMessagePanelHeight:function(){var e=this.docker.$container[0];if(e.children.length>2){var t=e.children[2],r=n(t).height()-75;n(n(e).find("#messages")[0]).css({height:r+"px","padding-bottom":"5px"})}},intializePanels:function(){var t=this;this.registerPanel("code",t.function_name_with_arguments,"100%","50%",(function(){var n=new a.Browser.Panel({name:"parameters",title:e("Parameters"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="parameters" class="parameters" tabindex="0"></div>'}),r=new a.Browser.Panel({name:"local_variables",title:e("Local variables"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="local_variables" class="local_variables" tabindex="0"></div>'}),o=new a.Browser.Panel({name:"messages",title:e("Messages"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div role="status" id="messages" class="messages" tabindex="0"></div>'}),i=new a.Browser.Panel({name:"results",title:e("Results"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="debug_results" class="debug_results" tabindex="0"></div>'}),l=new a.Browser.Panel({name:"stack_pane",title:e("Stack"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="stack_pane" class="stack_pane" tabindex="0"></div>'});n.load(t.docker),r.load(t.docker),o.load(t.docker),i.load(t.docker),l.load(t.docker)})),i.restore_layout(t.docker,t.layout,this.buildDefaultLayout.bind(this)),t.setMessagePanelHeight(),t.docker.on(y.EVENT.LAYOUT_CHANGED,(function(){t.setMessagePanelHeight(),i.save_current_layout("Debugger/Layout",t.docker)})),t.code_editor_panel=t.docker.findPanels("code")[0],t.parameters_panel=t.docker.findPanels("parameters")[0],t.local_variables_panel=t.docker.findPanels("local_variables")[0],t.messages_panel=t.docker.findPanels("messages")[0],t.results_panel=t.docker.findPanels("results")[0],t.stack_pane_panel=t.docker.findPanels("stack_pane")[0];var r=n('<div id="stack_editor_pane" class="pg-panel-content info"></div>'),l=n('<textarea aria-label="Code editor area" id="debugger-editor-textarea"></textarea>').appendTo(r);t.code_editor_panel.layout().addItem(r),t.editor=m.fromTextArea(l.get(0),{tabindex:-1,lineNumbers:!0,foldOptions:{widget:"…"},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","breakpoints"],mode:"text/x-pgsql",readOnly:!0,extraKeys:a.Browser.editor_shortcut_keys,indentWithTabs:a.Browser.editor_options.indent_with_tabs,indentUnit:a.Browser.editor_options.tabSize,tabSize:a.Browser.editor_options.tabSize,lineWrapping:a.Browser.editor_options.wrapCode,autoCloseBrackets:a.Browser.editor_options.insert_pair_brackets,matchBrackets:a.Browser.editor_options.brace_matching,screenReaderLabel:e("Debugger SQL editor")}),m.on(t.editor,"keydown",(function(e,t){27==t.keyCode&&document.activeElement.blur()})),i.Events.on("pgadmin:debugger:code:focus",(function(){t.editor.focus()}));t.docker.startLoading(e("Loading...")),t.docker.on(y.EVENT.LOADED,(function(){t.docker.finishLoading(100),t.docker.off(y.EVENT.LOADED),t.editor.on("gutterClick",t.onBreakPoint.bind(t),t),t.docker.$container&&t.docker.$container.parent().focus();var e=setInterval((function(){try{var n=b.default.pgAdmin.Browser;if(n.preference_version()>0){clearInterval(e),t.reflectPreferences();var r=n.get_preferences_for_module("browser").new_browser_tab_open;if(r&&r.includes("debugger")){i.bind_beforeunload();var o=setInterval((function(){b.default.pgAdmin?t.reflectPreferences():clearInterval(o)}),1e3)}}}catch(t){throw clearInterval(e),t}}),0)})),this.toolbarView=new v,n(window).on("keydown",(function(e){t.toolbarView.keyAction&&t.toolbarView.keyAction(e)})),b.default.pgAdmin.Browser.onPreferencesChange("debugger",(function(){t.reflectPreferences()})),i.register_to_activity_listener(document,(function(){o.alert(e("Timeout"),e("Your session has timed out due to inactivity. Please close the window and login again."))})),g.poll_result=i.override_activity_event_decorator(g.poll_result).bind(g),g.poll_end_execution_result=i.override_activity_event_decorator(g.poll_end_execution_result).bind(g)},reflectPreferences:function(){var t=this,n=b.default.pgAdmin.Browser;t.preferences=n.get_preferences_for_module("debugger"),t.toolbarView.preferences=t.preferences,t.toolbarView.$el.find("#btn-step-into").attr("title",f.shortcut_accesskey_title(e("Step into"),t.preferences.btn_step_into)).attr("aria-label",f.shortcut_accesskey_title(e("Step into"),t.preferences.btn_step_into)).attr("accesskey",f.shortcut_key(t.preferences.btn_step_into)),t.toolbarView.$el.find("#btn-step-over").attr("title",f.shortcut_accesskey_title(e("Step over"),t.preferences.btn_step_over)).attr("aria-label",f.shortcut_accesskey_title(e("Step over"),t.preferences.btn_step_over)).attr("accesskey",f.shortcut_key(t.preferences.btn_step_over)),t.toolbarView.$el.find("#btn-continue").attr("title",f.shortcut_accesskey_title(e("Continue/Start"),t.preferences.btn_start)).attr("aria-label",f.shortcut_accesskey_title(e("Continue/Start"),t.preferences.btn_start)).attr("accesskey",f.shortcut_key(t.preferences.btn_start)),t.toolbarView.$el.find("#btn-toggle-breakpoint").attr("title",f.shortcut_accesskey_title(e("Toggle breakpoint"),t.preferences.btn_toggle_breakpoint)).attr("aria-label",f.shortcut_accesskey_title(e("Toggle breakpoint"),t.preferences.btn_toggle_breakpoint)).attr("accesskey",f.shortcut_key(t.preferences.btn_toggle_breakpoint)),t.toolbarView.$el.find("#btn-clear-breakpoint").attr("title",f.shortcut_accesskey_title(e("Clear all breakpoints"),t.preferences.btn_clear_breakpoints)).attr("aria-label",f.shortcut_accesskey_title(e("Clear all breakpoints"),t.preferences.btn_clear_breakpoints)).attr("accesskey",f.shortcut_key(t.preferences.btn_clear_breakpoints)),t.toolbarView.$el.find("#btn-stop").attr("title",f.shortcut_accesskey_title(e("Stop"),t.preferences.btn_stop)).attr("aria-label",f.shortcut_accesskey_title(e("Stop"),t.preferences.btn_stop)).attr("accesskey",f.shortcut_key(t.preferences.btn_stop))},registerPanel:function(e,t,r,o,a){var i=this;this.docker.registerPanelType(e,{title:t,isPrivate:!0,onCreate:function(l){i.panels[e]=l,l.initSize(r,o),t?l.title(t):l.title(!1),l.closeable(!1),l.layout().addItem(n('<div tabindex="0">',{class:"pg-debugger-panel"})),a&&a.apply(i,[l])}})}}),h.DirectDebug=new _,h.DirectDebug.jquery=n,h.DirectDebug}.apply(t,r))||(e.exports=o)},95566:(e,t,n)=>{n(79753),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(47042),n(68309),n(91038),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.setPanelTitle=u,t.initialize=function(e,t,n,r,s,c,d,f){return d.erd||(d.erd={init:function(){if(!this.initialized){this.initialized=!0,c.setPGCSRFToken(s.csrf_token_header,s.csrf_token);var t=[{name:"erd",module:this,applies:["tools"],callback:"showErdTool",priority:1,label:e("New ERD Project"),enable:this.erdToolEnabled,data:{data_disabled:e("The selected tree node does not support this option.")}}];d.add_menus(t);var n=new d.Frame({name:"frm_erdtool",showTitle:!0,isCloseable:!0,isPrivate:!0,url:"about:blank"}),r=this,o=setInterval((function(){d.preference_version()>0&&(r.preferences=d.get_preferences_for_module("erd"),clearInterval(o))}),0);return d.onPreferencesChange("erd",(function(){r.preferences=d.get_preferences_for_module("erd")})),n.load(d.docker),this}},erdToolEnabled:function(e){return!(r.isUndefined(e)||r.isNull(e)||-1!=r.indexOf(s.unsupported_nodes,e._type)||("database"!=e._type||!e.allowConn)&&"database"==e._type)},showErdTool:function(t,s){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==s){var p=d.tree.getTreeNodeHierarchy(s);if(r.isUndefined(p.database))o.default.alert(e("ERD Error"),e("Please select a database/database object."));else{var b=(0,i.getRandomInt)(1,9999999),m=(0,a.getPanelTitle)(d,s),y=this.getPanelUrls(b,m,p,c),h=l(y,2),g=h[0],v=h[1],_='\n        <form id="erdToolForm" action="'.concat(g,'" method="post">\n          <input id="title" name="title" hidden />\n          <input name="close_url" value="').concat(v,'" hidden />\n        </form>\n        <script>\n          document.getElementById("title").value = "').concat(r.escape(m),'";\n          document.getElementById("erdToolForm").submit();\n        <\/script>\n      '),w=d.get_preferences_for_module("browser").new_browser_tab_open;if(w&&w.includes("erd_tool")){var O=window.open("","_blank");O.document.write(_),O.document.title=m,setTimeout((function(){d.send_signal_to_runtime("Runtime new window opened")}),500)}else{var S=d.docker.findPanels("properties"),j=d.docker.addPanel("frm_erdtool",f.DOCK.STACKED,S[0]);u(j,"Untitled"),j.icon("fa fa-sitemap"),j.focus(),j.on(f.EVENT.CLOSED,(function(){n.ajax({url:v,method:"DELETE"})})),(0,i.registerDetachEvent)(j);var P=function(e){var t=n('<div class="pg-sp-container">\n                  <div class="pg-sp-content">\n                      <div class="row">\n                          <div class="col-12 pg-sp-icon"></div>\n                      </div>\n                  </div>\n              </div>').appendTo(n(e).data("embeddedFrame").$container),r=setInterval((function(){if(n(e).data("frameInitialized")){clearInterval(r);var o=n(e).data("embeddedFrame");o&&(o.onLoaded((function(){t.remove()})),o.openHTML(_))}}),100)};P(j)}}}else o.default.alert(e("ERD Error"),e("No object selected."))},getPanelUrls:function(e,n,r,o){var a=t("erd.panel",{trans_id:e});return[a+="?sgid=".concat(r.server_group._id)+"&sid=".concat(r.server._id)+"&server_type=".concat(r.server.server_type)+"&did=".concat(r.database._id)+"&gen=".concat(o),t("erd.close",{trans_id:e,sgid:r.server_group._id,sid:r.server._id,did:r.database._id})]}}),d.erd},n(32564),n(82772),n(92222),n(26699),n(32023);var r,o=(r=n(55455))&&r.__esModule?r:{default:r},a=n(9807),i=n(44092);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){e.title('<span title="'+t+'">'+t+"</span>")}},10474:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165);var o=p(n(91669)),a=p(n(28008)),i=p(n(19755)),l=p(n(81311)),s=p(n(55112)),u=p(n(33883)),c=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(87789)),d=n(95566);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e){return e&&e.__esModule?e:{default:e}}var b=window.wcDocker,m=(0,d.initialize)(o.default,a.default,i.default,l.default,s.default,c,u.default,b);e.exports={pgBrowser:m}},49525:(e,t,n)=>{var r,o;n(24812),n(32564);var a=u(n(67294)),i=u(n(73935)),l=u(n(4394)),s=u(n(15817));function u(e){return e&&e.__esModule?e:{default:e}}r=[n(91669),n(28008),n(19755),n(81311),n(72316),n(55455),n(71158),n(12030),n(33883),n(66235),n(45866),n(44092),n(16194),n(14753),n(63790),n(63563),n(61431)],void 0===(o=function(e,t,n,r,o,u,c,d,f,p,b,m,y){return f.GrantWizard||(f.GrantWizard={init:function(){if(!this.initialized){this.initialized=!0;for(var t=[{name:"grant_wizard_schema",module:this,applies:["tools"],callback:"start_grant_wizard",priority:14,label:e("Grant Wizard..."),icon:"fa fa-unlock",enable:y.enabled.bind(null,f.tree,b.supportedNodes),data:{data_disabled:e("Please select any database, schema or schema objects from the browser tree to access Grant Wizard Tool.")}}],n=0;n<b.supportedNodes.length;n++)t.push({name:"grant_wizard_schema_context_"+b.supportedNodes[n],node:b.supportedNodes[n],module:this,applies:["context"],callback:"start_grant_wizard",priority:14,label:e("Grant Wizard..."),icon:"fa fa-unlock",enable:y.enabled.bind(null,f.tree,b.supportedNodes)});return f.add_menus(t),this}},start_grant_wizard:function(){u.wizardDialog||u.dialog("wizardDialog",(function(){var e=n("<div class='wizard_dlg' id='grantWizardDlg'></div>");return{main:function(){},setup:function(){return{options:{frameless:!0,resizable:!0,autoReset:!1,maximizable:!0,closable:!0,closableByDimmer:!1,modal:!0,pinnable:!1}}},build:function(){this.elements.content.appendChild(e.get(0)),u.pgDialogBuild.apply(this);var t=f.tree,n=t.selected(),r=this.d=n?t.itemData(n):void 0,o=this.info=f.tree.getTreeNodeHierarchy(n),c=o.server._id,d=o.database._id;setTimeout((function(){document.getElementById("grantWizardDlg")&&(i.default.render(a.default.createElement(l.default,null,a.default.createElement(s.default,{sid:c,did:d,nodeInfo:o,nodeData:r})),document.getElementById("grantWizardDlg")),u.wizardDialog().elements.modal.style.maxHeight=0,u.wizardDialog().elements.modal.style.maxWidth="none",u.wizardDialog().elements.modal.style.overflow="visible",u.wizardDialog().elements.dimmer.style.display="none")}),500)},prepare:function(){e.empty().append("<div class='grant_wizard_container'></div>")},hooks:{onclose:function(){return setTimeout((function(){return i.default.unmountComponentAtNode(document.getElementById("grantWizardDlg")),u.wizardDialog().destroy()}),500)}}}})),u.wizardDialog("").set({onmaximize:function(){u.wizardDialog().elements.modal.style.maxHeight="initial"},onrestore:function(){u.wizardDialog().elements.modal.style.maxHeight=0}}).resizeTo(f.stdW.lg,f.stdH.lg)}}),f.GrantWizard}.apply(t,r))||(e.exports=o)},45866:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.supportedNodes=void 0;t.supportedNodes=["schema","coll-function","coll-sequence","coll-table","coll-view","coll-procedure","coll-mview","database","coll-trigger_function","coll-package"]},36037:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o=a(n(91669));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,a=f(i);function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return u(this,i),(t=a.call(this,l({oid:null,privilege:[]},r))).privilegeRoleSchema=e([]),t.fieldOptions=l({},n),t}return t=i,(n=[{key:"idAttribute",get:function(){return"oid"}},{key:"baseFields",get:function(){return[{id:"privilege",label:(0,o.default)("Privileges"),type:"collection",schema:this.privilegeRoleSchema,uniqueCol:["grantee"],editable:!1,mode:["create"],canAdd:!0,canDelete:!0}]}}])&&c(t.prototype,n),r&&c(t,r),i}(a(n(89406)).default);t.default=m},87113:(e,t,n)=>{var r,o;n(68309),n(24812),n(5735),n(83753),n(69826),n(32564),r=[n(91669),n(28008),n(19755),n(81311),n(55455),n(55112),n(33883),n(72316),n(83879),n(95283),n(44092),n(16194),n(12030),n(71158),n(75270)],void 0===(o=function(e,t,n,r,o,a,i,l,s,u,c,d){var f=(a=a||window.pgAdmin||{}).Tools=a.Tools||{};if(a.Tools.import_utility)return a.Tools.import_utility;var p=l.Model.extend({defaults:{is_import:!1,filename:void 0,format:"csv",encoding:void 0,oid:void 0,header:void 0,delimiter:"",quote:'"',escape:"'",null_string:void 0,columns:null,icolumns:[],database:void 0,schema:void 0,table:void 0},schema:[{id:"is_import",label:e("Import/Export"),cell:"switch",type:"switch",group:e("Options"),options:{onText:e("Import"),offText:e("Export"),width:"65"}},{type:"nested",control:"fieldset",label:e("File Info"),group:e("Options"),schema:[{id:"filename",label:e("Filename"),deps:["is_import"],type:"text",control:u.FileControl,group:e("File Info"),dialog_type:"select_file",supp_types:["csv","txt","*"],visible:"importing"},{id:"filename",label:e("Filename"),deps:["is_import"],type:"text",control:u.FileControl,group:e("File Info"),dialog_type:"create_file",supp_types:["csv","txt","*"],visible:"exporting"},{id:"format",label:e("Format"),cell:"string",control:"select2",group:e("File Info"),options:[{label:"binary",value:"binary"},{label:"csv",value:"csv"},{label:"text",value:"text"}],disabled:"isDisabled",select2:{allowClear:!1,width:"100%"}},{id:"encoding",label:e("Encoding"),cell:"string",control:"node-ajax-options",node:"database",url:"get_encodings",first_empty:!0,group:e("File Info")}]},{id:"columns",label:e("Columns to import"),cell:"string",deps:["is_import"],type:"array",first_empty:!1,control:u.NodeListByNameControl.extend({initialize:function(){u.NodeListByNameControl.prototype.initialize.apply(this,arguments);var e=this,t=e.field.get("options"),n=[];if(r.isFunction(t))try{var o=t.apply(e);for(var a in o)n.push(o[a].value)}catch(e){console.warn(e.stack||e)}else for(a in t)n.push(t[a].value);e.model.set("columns",n)}}),transform:function(e){var t=this,n=t.field.get("schema_node"),o=[];return r.each(e,(function(e){if("_id"in e&&e._id>0){var a=r.isFunction(n.node_label)?n.node_label.apply(n,[e,t.model,t]):e.label,i=r.isFunction(n.node_image)?n.node_image.apply(n,[e,t.model,t]):n.node_image||"icon-"+n.type;o.push({value:e.label,image:i,label:a})}})),o},node:"column",url:"nodes",group:e("Columns"),select2:{multiple:!0,allowClear:!1,placeholder:e("Columns for importing..."),first_empty:!1,preserveSelectionOrder:!0},visible:"importing",helpMessage:e("An optional list of columns to be copied. If no column list is specified, all columns of the table will be copied.")},{id:"columns",label:e("Columns to export"),cell:"string",deps:["is_import"],type:"array",control:"node-list-by-name",first_empty:!1,node:"column",url:"nodes",group:e("Columns"),select2:{multiple:!0,allowClear:!0,first_empty:!1,placeholder:e("Columns for exporting..."),preserveSelectionOrder:!0},visible:"exporting",transform:function(e){var t=this,n=t.field.get("schema_node"),o=[];return r.each(e,(function(e){var a=r.isFunction(n.node_label)?n.node_label.apply(n,[e,t.model,t]):e.label,i=r.isFunction(n.node_image)?n.node_image.apply(n,[e,t.model,t]):n.node_image||"icon-"+n.type;o.push({value:e.label,image:i,label:a})})),o},helpMessage:e("An optional list of columns to be copied. If no column list is specified, all columns of the table will be copied.")},{id:"null_string",label:e("NULL Strings"),cell:"string",type:"text",group:e("Columns"),disabled:"isDisabled",deps:["format"],helpMessage:e("Specifies the string that represents a null value. The default is \\N (backslash-N) in text format, and an unquoted empty string in CSV format. You might prefer an empty string even in text format for cases where you don't want to distinguish nulls from empty strings. This option is not allowed when using binary format.")},{id:"icolumns",label:e("Not null columns"),cell:"string",control:"node-list-by-name",node:"column",group:e("Columns"),deps:["format","is_import"],disabled:"isDisabled",type:"array",first_empty:!1,select2:{multiple:!0,allowClear:!0,first_empty:!1,placeholder:e("Not null columns...")},helpMessage:e("Do not match the specified column values against the null string. In the default case where the null string is empty, this means that empty values will be read as zero-length strings rather than nulls, even when they are not quoted. This option is allowed only in import, and only when using CSV format.")},{type:"nested",control:"fieldset",label:e("Miscellaneous"),group:e("Options"),schema:[{id:"oid",label:e("OID"),cell:"string",type:"switch",group:e("Miscellaneous")},{id:"header",label:e("Header"),cell:"string",type:"switch",group:e("Miscellaneous"),deps:["format"],disabled:"isDisabled"},{id:"delimiter",label:e("Delimiter"),cell:"string",first_empty:!0,type:"text",control:"node-ajax-options",group:e("Miscellaneous"),disabled:"isDisabled",deps:["format"],options:[{label:";",value:";"},{label:",",value:","},{label:"|",value:"|"},{label:"[tab]",value:"[tab]"}],select2:{tags:!0,allowClear:!1,width:"100%",placeholder:e("Select from list...")},helpMessage:e("Specifies the character that separates columns within each row (line) of the file. The default is a tab character in text format, a comma in CSV format. This must be a single one-byte character. This option is not allowed when using binary format.")},{id:"quote",label:e("Quote"),cell:"string",first_empty:!0,deps:["format"],type:"text",control:"node-ajax-options",group:e("Miscellaneous"),disabled:"isDisabled",options:[{label:'"',value:'"'},{label:"'",value:"'"}],select2:{tags:!0,allowClear:!1,width:"100%",placeholder:e("Select from list...")},helpMessage:e("Specifies the quoting character to be used when a data value is quoted. The default is double-quote. This must be a single one-byte character. This option is allowed only when using CSV format.")},{id:"escape",label:e("Escape"),cell:"string",first_empty:!0,deps:["format"],type:"text",control:"node-ajax-options",group:e("Miscellaneous"),disabled:"isDisabled",options:[{label:'"',value:'"'},{label:"'",value:"'"}],select2:{tags:!0,allowClear:!1,width:"100%",placeholder:e("Select from list...")},helpMessage:e("Specifies the character that should appear before a data character that matches the QUOTE value. The default is the same as the QUOTE value (so that the quoting character is doubled if it appears in the data). This must be a single one-byte character. This option is allowed only when using CSV format.")}]}],isDisabled:function(e){switch(this.name){case"quote":case"escape":case"header":return"csv"!=e.get("format");case"icolumns":return"csv"!=e.get("format")||!e.get("is_import");case"null_string":case"delimiter":return"binary"==e.get("format");default:return!1}},importing:function(e){return e.get("is_import")},exporting:function(e){return!e.importing.apply(this,arguments)}});return f.import_utility={init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"import",node:"table",module:this,applies:["tools","context"],callback:"callback_import_export",category:"import",priority:10,label:e("Import/Export..."),icon:"fa fa-shopping-cart",enable:d.enabled.bind(null,i.tree,["table"]),data:{data_disabled:e("Please select any table from the browser tree to Import/Export data.")}}]))},callback_import_export:function(l,s){for(var d=s||i.tree.selected(),f=null;d;){var b=i.tree.itemData(d);if("server"==b._type){f=b;break}if(!i.tree.hasParent(d)){o.alert(e("Please select server or child node from tree."));break}d=i.tree.parent(d)}if(f&&c.hasBinariesConfiguration(i,f,o)){var m=i.tree,y=(d=s||m.selected())?m.itemData(d):void 0,h=y&&i.Nodes[y._type];if(y){var g=m&&m.getTreeNodeHierarchy(d);o.ImportDialog||o.dialog("ImportDialog",(function(){return{main:function(e,t,n,r){this.set("title",e),this.setting("pg_node",t),this.setting("pg_item",n),this.setting("pg_item_data",r)},build:function(){o.pgDialogBuild.apply(this)},setup:function(){return{buttons:[{text:e("Cancel"),key:27,"data-btn-name":"cancel",className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button"},{text:e("OK"),key:13,disable:!0,"data-btn-name":"ok",className:"btn btn-primary fa fa-lg fa-check pg-alertify-button"}],options:{modal:!0,padding:!1,overflow:!1}}},settings:{pg_node:null,pg_item:null,pg_item_data:null},callback:function(r){if("ok"===r.button["data-btn-name"]){var a=this.settings.pg_item,l=i.tree.getTreeNodeHierarchy(a);this.view.model.set({database:l.database._label,schema:l.schema._label,table:l.table._label});var s=this;n.ajax({url:t("import_export.create_job",{sid:l.server._id}),method:"POST",data:{data:JSON.stringify(this.view.model.toJSON())}}).done((function(t){t.success?(o.success(e("Import/Export job created."),5),i.Events.trigger("pgadmin-bgprocess:created",s)):o.alert(e("Import/Export job creation failed."),t.errormsg)})).fail((function(t){try{var n=JSON.parse(t.responseText);o.alert(e("Import/Export job failed."),n.errormsg)}catch(e){console.warn(e.stack||e)}}))}},hooks:{onclose:function(){this.view&&this.view.remove({data:!0,internal:!0,silent:!0})},onupdate:function(e,t,n){"resizable"===e&&(n?this.elements.content.removeAttribute("style"):this.elements.content.style.minHeight="inherit")},onshow:function(){var e=n(this.elements.body).find(".tab-content:first > .tab-pane.active:first");n(".select2-search__field").attr("aria-label","select2"),c.findAndSetFocus(e)}},prepare:function(){var t=this;this.__internal.buttons[1].element.disabled=!0;var o=n("<div class='import_dlg'></div>"),a=this.settings.pg_item,l=i.tree.getTreeNodeHierarchy(a),s=new p({},{node_info:l}),c=u.generateViewSchema(l,s,"create",h,l.server,!0),d=this.view=new u.Dialog({el:o,model:s,schema:c});n(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),d.render();var f=n('<div class=\'pg-prop-status-bar pg-prop-status-bar-absolute pg-el-xs-12 d-none\'>  <div class="error-in-footer">     <div class="d-flex px-2 py-1">       <div class="pr-2">         <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i>       </div>       <div class="alert-text" role="alert"></div>        <div class="ml-auto close-error-bar">           <a aria-label="'+e("Close error bar")+'" class="close-error fa fa-times text-danger"></a>         </div>     </div>   </div> </div>').appendTo(o);this.elements.content.appendChild(o.get(0)),this.view.model.on("change",(function(){var n=this,o=function(e,r){n.errorModel.set(e,r),f.removeClass("d-none"),f.find(".alert-text").html(r),t.elements.dialog.querySelector(".close-error").addEventListener("click",(function(){f.addClass("d-none"),n.errorModel.set(e,r)}))};r.isUndefined(this.get("filename"))||""===this.get("filename")?(t.__internal.buttons[1].element.disabled=!0,o("filename",e("Please provide filename"))):(this.errorModel.clear(),f.addClass("d-none"),r.isUndefined(this.get("delimiter"))||r.isNull(this.get("delimiter"))?(t.__internal.buttons[1].element.disabled=!0,o("delimiter",e("Delimiter should contain only one character"))):(this.errorModel.clear(),f.addClass("d-none"),r.isUndefined(this.get("quote"))||""===this.get("quote")||1!=this.get("quote").length?(t.__internal.buttons[1].element.disabled=!0,o("quote",e("Quote should contain only one character"))):(this.errorModel.clear(),f.addClass("d-none"),r.isUndefined(this.get("escape"))||""===this.get("escape")||1!=this.get("escape").length?(t.__internal.buttons[1].element.disabled=!0,o("escape",e("Escape should contain only one character"))):(this.errorModel.clear(),f.addClass("d-none"),t.__internal.buttons[1].element.disabled=!1))))})),d.$el.attr("tabindex",-1),setTimeout((function(){i.keyboardNavigation.getDialogTabNavigator(n(t.elements.dialog))}),200)}}}));var v=t("import_export.utility_exists",{sid:f._id});n.ajax({url:v,type:"GET"}).done((function(t){t.success?o.ImportDialog(e("Import/Export data - table '%s'",g.table.label),h,d,y).set("resizable",!0).resizeTo(a.Browser.stdW.md,a.Browser.stdH.lg):o.alert(e("Utility not found"),t.errormsg)})).fail((function(){o.alert(e("Utility not found"),e("Failed to fetch Utility information"))}))}}}},a.Tools.import_utility}.apply(t,r))||(e.exports=o)},86695:(e,t,n)=>{var r,o;n(68309),n(32564),n(24812),n(82772),n(5735),n(83753),n(69826),r=[n(91669),n(28008),n(19755),n(81311),n(55455),n(55112),n(33883),n(72316),n(83879),n(95283),n(44092),n(88801),n(16194),n(12030),n(71158),n(75270)],void 0===(o=function(e,t,n,r,o,a,i,l,s,u,c,d,f){var p=(a=a||window.pgAdmin||{}).Tools=a.Tools||{};if(a.Tools.maintenance)return a.Tools.maintenance;var b=l.Model.extend({defaults:{op:"VACUUM",vacuum_full:!1,vacuum_freeze:!1,vacuum_analyze:!1,verbose:!0},initialize:function(){var e=arguments[1].node_info;("primary_key"in e||"unique_constraint"in e||"index"in e)&&(this.set("op","REINDEX"),this.set("verbose",!1))},schema:[{id:"op",label:e("Maintenance operation"),cell:"string",type:"radioModern",controlsClassName:"pgadmin-controls col-12 col-sm-8",controlLabelClassName:"control-label col-sm-4 col-12",group:e("Options"),value:"VACUUM",options:[{label:"VACUUM",value:"VACUUM"},{label:"ANALYZE",value:"ANALYZE"},{label:"REINDEX",value:"REINDEX"},{label:"CLUSTER",value:"CLUSTER"}]},{type:"nested",control:"fieldset",label:e("Vacuum"),group:e("Options"),contentClass:"row",schema:[{id:"vacuum_full",group:e("Vacuum"),disabled:"isDisabled",type:"switch",extraToggleClasses:"pg-el-sm-4",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",label:e("FULL"),deps:["op"]},{id:"vacuum_freeze",deps:["op"],disabled:"isDisabled",type:"switch",extraToggleClasses:"pg-el-sm-4",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",label:e("FREEZE"),group:e("Vacuum")},{id:"vacuum_analyze",deps:["op"],disabled:"isDisabled",type:"switch",extraToggleClasses:"pg-el-sm-4",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",label:e("ANALYZE"),group:e("Vacuum")}]},{id:"verbose",group:e("Options"),deps:["op"],type:"switch",label:e("Verbose Messages"),disabled:"isDisabled"}],isDisabled:function(e){var t=this.node_info;switch(this.name){case"vacuum_full":case"vacuum_freeze":case"vacuum_analyze":return"VACUUM"!=e.get("op");case"verbose":return("primary_key"in t||"unique_constraint"in t||"index"in t)&&"REINDEX"==e.get("op")?(setTimeout((function(){e.set("verbose",!1)}),10),!0):"REINDEX"==e.get("op");default:return!1}}});return p.maintenance={init:function(){if(!this.initialized){this.initialized=!0;for(var t=[{name:"maintenance",module:this,applies:["tools"],callback:"callback_maintenance",priority:10,label:e("Maintenance..."),icon:"fa fa-wrench",enable:f.enabled.bind(null,i.tree,d.maintenanceSupportedNodes),data:{data_disabled:e("Please select any database from the browser tree to do Maintenance.")}}],n=0;n<d.maintenanceSupportedNodes.length;n++)t.push({name:"maintenance_context_"+d.maintenanceSupportedNodes[n],node:d.maintenanceSupportedNodes[n],module:this,applies:["context"],callback:"callback_maintenance",priority:10,label:e("Maintenance..."),icon:"fa fa-wrench",enable:f.enabled.bind(null,i.tree,d.maintenanceSupportedNodes),data:{data_disabled:e("Please select any database from the browser tree to do Maintenance.")}});i.add_menus(t)}},callback_maintenance:function(r,l){for(var s=l||i.tree.selected(),d=null;s;){var f=i.tree.itemData(s);if("server"==f._type){d=f;break}if(!i.tree.hasParent(s)){o.alert(e("Please select server or child node from tree."));break}s=i.tree.parent(s)}if(d&&c.hasBinariesConfiguration(i,d,o)){var p=this,m=i.tree;if((s=l||m.selected())?m.itemData(s):void 0)if((m&&m.getTreeNodeHierarchy(s)).database._label.indexOf("=")>=0)o.alert(e("Maintenance error"),e("Maintenance job creation failed. Databases with = symbols in the name cannot be maintained using this utility."));else{o.MaintenanceDialog||o.dialog("MaintenanceDialog",(function(){return{main:function(e){this.set("title",e)},setup:function(){return{buttons:[{text:"",className:"btn btn-primary-icon pull-left fa fa-info pg-alertify-icon-button",attrs:{name:"object_help",type:"button",url:"maintenance.html",label:e("Maintenance"),"aria-label":e("Object Help")}},{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:e("Maintenance"),"aria-label":e("Help"),url:t("help.static",{filename:"maintenance_dialog.html"})}},{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button","data-btn-name":"cancel"},{text:e("OK"),key:13,className:"btn btn-primary fa fa-lg fa-check pg-alertify-button","data-btn-name":"ok"}],options:{modal:0,pinnable:!1,padding:!1,overflow:!1}}},callback:function(r){var a=i.tree.selected(),l=a?i.tree.itemData(a):void 0,s=l&&i.Nodes[l._type];if("dialog_help"==r.button.element.name||"object_help"==r.button.element.name)return r.cancel=!0,void i.showHelp(r.button.element.name,r.button.element.getAttribute("url"),s,a);if("ok"===r.button["data-btn-name"]){var u=void 0,c=void 0,d=void 0,f=void 0,b=void 0;if(!l)return;var m=i.tree.getTreeNodeHierarchy(a);null!=m.schema&&(u=m.schema._label),null!=m.partition?c=m.partition._label:null!=m.table?c=m.table._label:null!=m.mview&&(c=m.mview._label),null!=m.primary_key?d=m.primary_key._label:null!=m.unique_constraint?f=m.unique_constraint._label:null!=m.index&&(b=m.index._label),this.view.model.set({database:m.database._label,schema:u,table:c,primary_key:d,unique_constraint:f,index:b}),n.ajax({url:t("maintenance.create_job",{sid:m.server._id,did:m.database._id}),method:"POST",data:{data:JSON.stringify(this.view.model.toJSON())}}).done((function(t){t.data&&t.data.status?(o.success(t.data.info),i.Events.trigger("pgadmin-bgprocess:created",p)):o.alert(e("Maintenance job creation failed."),t.errormsg)})).fail((function(){o.alert(e("Maintenance job creation failed."))}))}},build:function(){o.pgDialogBuild.apply(this)},hooks:{onclose:function(){this.view&&this.view.remove({data:!0,internal:!0,silent:!0})},onshow:function(){var e=n(this.elements.body).find(".tab-content:first > .tab-pane.active:first");c.findAndSetFocus(e)}},prepare:function(){var e=n("<div class='maintenance_dlg'></div>"),t=i.tree,r=t.selected(),o=r?t.itemData(r):void 0,a=o&&i.Nodes[o._type];if(o){var l=t.getTreeNodeHierarchy(r),s=new b({},{node_info:l}),c=u.generateViewSchema(l,s,"create",a,l.server,!0),d=this.view=new u.Dialog({el:e,model:s,schema:c});if(n(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),d.render(),"primary_key"==o._type||"unique_constraint"==o._type||"index"==o._type){var f=e.find(".btn-group label.btn:lt(2)").addClass("disabled")[1].nextElementSibling;n(f).trigger("click")}d.$el.attr("tabindex",-1),this.elements.content.appendChild(e.get(0))}}}}));var y=t("maintenance.utility_exists",{sid:d._id});n.ajax({url:y,type:"GET"}).done((function(t){t.success?o.MaintenanceDialog(e("Maintenance...")).set("resizable",!0).resizeTo(a.Browser.stdW.md,a.Browser.stdH.md):o.alert(e("Utility not found"),t.errormsg)})).fail((function(){o.alert(e("Utility not found"),e("Failed to fetch Utility information"))}))}}}},a.Tools.maintenance}.apply(t,r))||(e.exports=o)},88801:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.maintenanceSupportedNodes=void 0;t.maintenanceSupportedNodes=["database","table","primary_key","unique_constraint","index","partition"]},19577:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(41539),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165);var o=f(n(91669)),a=f(n(28008)),i=f(n(19755)),l=f(n(81311)),s=f(n(55112)),u=f(n(33883)),c=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(87789));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e){return e&&e.__esModule?e:{default:e}}var p=(0,n(68001).initialize)(o.default,a.default,i.default,l.default,s.default,c,u.default);e.exports={pgBrowser:p}},68001:(e,t,n)=>{n(79753),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(47042),n(68309),n(91038),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.setPanelTitle=h,t.initialize=function(e,t,n,b,y,v,_){var w=_,O=r.Terminal,S=null;return w.psql||(w.psql={init:function(){this.initialized=!0,v.setPGCSRFToken(y.csrf_token_header,y.csrf_token);var t=[{name:"psql",module:this,applies:["tools"],callback:"psql_tool",priority:1,label:e("PSQL Tool"),enable:this.psqlToolEnabled}];this.enable_psql_tool=y.enable_psql,y.enable_psql&&w.add_menus(t);var n=new w.Frame({name:"frm_psqltool",showTitle:!0,isCloseable:!0,isPrivate:!0,url:"about:blank"}),r=this,o=setInterval((function(){w.preference_version()>0&&(r.preferences=w.get_preferences_for_module("psql"),clearInterval(o))}),0);return w.onPreferencesChange("psql",(function(){r.preferences=w.get_preferences_for_module("psql")})),n.load(w.docker),this},psqlToolEnabled:function(t){var n=!(b.isUndefined(t)||b.isNull(t)||!y.enable_psql||-1!=b.indexOf(y.unsupported_nodes,t._type)||("database"!=t._type||!t.allowConn)&&"database"==t._type);return(0,u.enable)(e("PSQL Tool"),n),n},psql_tool:function(t,r){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=(0,d.retrieveAncestorOfTypeServer)(w,r,e("PSQL Error"),s.default);if((0,c.hasBinariesConfiguration)(w,a,s.default)){var i=w.tree.findNodeByDomElement(r);if(void 0!==i&&i.getData())if(S=w.tree.getTreeNodeHierarchy(r),b.isUndefined(S.server))s.default.alert(e("PSQL Error"),e("Please select a server/database object."));else{var l=(0,c.getRandomInt)(1,9999999),u="",f={database:S.database?S.database.label:"postgres",username:S.server.user_name,server:S.server.label,type:"psql_tool"},y=w.get_preferences_for_module("browser").psql_tab_title_placeholder;u=(0,p.generateTitle)(y,f);var v=this.getPanelUrls(l,u,S,o),_=m(v,3),O=_[0],j=_[1],P=_[2],x='\n        <form id="psqlToolForm" action="'.concat(O,'" method="post">\n          <input id="title" name="title" hidden />\n          <input id=\'db\' value=\'').concat(P,'\' hidden />\n          <input name="close_url" value="').concat(j,'" hidden />\n        </form>\n        <script>\n          document.getElementById("title").value = "').concat(b.escape(u),'";\n          document.getElementById("psqlToolForm").submit();\n        <\/script>\n      '),C=w.get_preferences_for_module("browser").new_browser_tab_open;if(C&&C.includes("psql_tool")){var E=window.open("","_blank");E.document.write(x),E.document.title=u}else{var k=w.docker.findPanels("properties"),D=w.docker.addPanel("frm_psqltool",g.DOCK.STACKED,k[0]);(0,c.registerDetachEvent)(D),h(D,u),D.icon("fas fa-terminal psql-tab-style"),D.focus();var T=function(e){var t=n('<div class="pg-sp-container">\n                  <div class="pg-sp-content">\n                      <div class="row">\n                          <div class="col-12 pg-sp-icon"></div>\n                      </div>\n                  </div>\n              </div>').appendTo(n(e).data("embeddedFrame").$container),r=setInterval((function(){if(n(e).data("frameInitialized")){clearInterval(r);var o=n(e).data("embeddedFrame");o&&(o.onLoaded((function(){t.remove()})),o.openHTML(x))}}),100)};T(D)}}else s.default.alert(e("PSQL Error"),e("No object selected."))}},getPanelUrls:function(e,n,r){var o=t("psql.panel",{trans_id:e}),a=w.get_preferences_for_module("misc").theme;o+="?sgid=".concat(r.server_group._id)+"&sid=".concat(r.server._id)+"&did=".concat(r.database._id)+"&server_type=".concat(r.server.server_type)+"&theme=".concat(a);var i="";return r.database&&r.database._id?(i=(i=(i=b.escape(r.database._label.replace("\\","\\\\"))).replace("'","'")).replace('"','"'),o+="&db=".concat(i)):o+="&db=",[o,t("psql.close",{trans_id:e}),i]},psql_terminal:function(){return new O({cursorBlink:!0,macOptionIsMeta:!0,scrollback:5e3})},psql_Addon:function(e){var t=this.psql_fit_screen();e.loadAddon(t);var n=this.psql_web_link();e.loadAddon(n);var r=this.psql_search();return e.loadAddon(r),t.fit(),e.resize(15,50),t.fit(),t},psql_fit_screen:function(){return new o.FitAddon},psql_web_link:function(){return new a.WebLinksAddon},psql_search:function(){return new i.SearchAddon},psql_socket:function(){return(0,l.io)("/pty",{pingTimeout:12e4,pingInterval:25e3})},set_theme:function(e){var t={background:getComputedStyle(document.documentElement).getPropertyValue("--psql-background"),foreground:getComputedStyle(document.documentElement).getPropertyValue("--psql-foreground"),cursor:getComputedStyle(document.documentElement).getPropertyValue("--psql-cursor"),cursorAccent:getComputedStyle(document.documentElement).getPropertyValue("--psql-cursorAccent"),selection:getComputedStyle(document.documentElement).getPropertyValue("--psql-selection")};e.setOption("theme",t)},psql_socket_io:function(e,t,n,r,o,a,i){e.on("pty-output",(function(e){e.error&&i.write("\r\n"),i.write(e.result),e.error&&i.write("\r\n")})),e.on("connect",(function(){"True"==t&&e.emit("start_process",{sid:n,db:r,stype:o}),a.fit(),e.emit("resize",{cols:i.cols,rows:i.rows})})),e.on("conn_error",(function(t){i.write(t.error),a.fit(),e.emit("resize",{cols:i.cols,rows:i.rows})})),e.on("conn_not_allow",(function(){i.write("PSQL connection not allowed"),a.fit(),e.emit("resize",{cols:i.cols,rows:i.rows})})),e.on("disconnect-psql",(function(){e.emit("server-disconnect",{sid:n}),i.write("\r\nServer disconnected, Connection terminated, To create new connection please open another psql tool.")}))},psql_terminal_io:function(t,n,r){t.attachCustomKeyEventHandler((function(e){return e.stopPropagation(),"keydown"!=e.type||!e.metaKey&&!e.ctrlKey||"c"!=e.key&&"C"!=e.key||document.execCommand("copy"),!e.ctrlKey||"win32"!=r})),t.textarea.addEventListener("paste",(function(){navigator.permissions.query({name:"clipboard-read"}).then((function(t){"granted"===t.state||"prompt"===t.state?navigator.clipboard.readText().then((function(e){var t=e;t.length>0&&n.emit("socket_input",{input:t,key_name:"paste"})})):s.default.alert(e("Clipboard read permission required"),e("To paste data on the PSQL terminal, Clipboard read permission required."))}))})),t.onKey((function(e){n.emit("socket_input",{input:e.key,key_name:e.domEvent.code})}))},check_db_name_change:function(e,t){if(e!=t){var n=f.default.pgAdmin.Browser.tree.selected(),r=f.default.pgAdmin.Browser.tree.translateTreeNodeIdFromReactTree(n),o=f.default.pgAdmin.Browser.tree.findNode(r[3]).domNode,a="Current database has been moved or renamed to ".concat(t,". Click on the OK button to refresh the database name, and reopen the psql again.");(0,p.refresh_db_node)(a,o)}}}),w.psql},n(32564),n(82772),n(92222),n(26699),n(32023),n(15306),n(74916);var r=n(12320),o=n(12617),a=n(67511),i=n(747),l=n(74724),s=b(n(55455)),u=n(85530);n(35816);var c=n(44092),d=n(30726),f=b(n(1950)),p=n(9807);function b(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){e.title('<span title="'+t+'">'+t+"</span>")}var g=window.wcDocker},9342:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.restoreSupportedNodes=void 0;t.restoreSupportedNodes=["database","schema","table","function","trigger","index","partition"]},45736:(e,t,n)=>{var r,o;n(5735),n(83753),n(24812),r=[n(91669),n(28008),n(19755),n(81311),n(72316),n(55455),n(33883),n(71158),n(12030),n(44092),n(9342),n(16194),n(77544)],void 0===(o=function(e,t,n,r,o,a,i,l,s,u,c,d,f){if(i.Restore)return i.Restore;var p=o.Model.extend({idAttribute:"id",defaults:{custom:!1,file:void 0,role:void 0,format:"custom",verbose:!0,blobs:!0,encoding:void 0,database:void 0,schemas:void 0,tables:void 0,functions:void 0,triggers:void 0,trigger_funcs:void 0,indexes:void 0},initialize:function(e){var t=e.node_data.type;t&&("function"!==t&&"index"!==t&&"trigger"!==t||this.set({only_schema:!0},{silent:!0}),"table"===t&&this.set({only_data:!0},{silent:!0}),"function"!==t&&"trigger_function"!==t||this.set({clean:!0},{silent:!0})),o.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"format",label:e("Format"),type:"text",disabled:!1,control:"select2",select2:{allowClear:!1,width:"100%"},options:[{label:e("Custom or tar"),value:"custom"},{label:e("Directory"),value:"directory"}]},{id:"file",label:e("Filename"),type:"text",disabled:!1,control:s.FileControl.extend({render:function(){var e=this.model.toJSON();return"directory"==e.format?this.field.attributes.dialog_type="select_folder":this.field.attributes.dialog_type="select_file",s.InputControl.prototype.render.apply(this,arguments),this}}),dialog_type:"select_file",supp_types:["*","backup","sql","patch"],deps:["format"]},{id:"no_of_jobs",label:e("Number of jobs"),type:"int"},{id:"role",label:e("Role name"),control:"node-list-by-name",node:"role",select2:{allowClear:!1}},{type:"nested",control:"fieldset",label:e("Sections"),group:e("Restore options"),contentClass:"row",schema:[{id:"pre_data",label:e("Pre-data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Sections"),deps:["only_data","only_schema"],disabled:function(e){return"function"!==this.node.type&&"table"!==this.node.type&&"trigger"!==this.node.type&&"trigger_function"!==this.node.type&&(e.get("only_data")||e.get("only_schema"))}},{id:"data",label:e("Data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Sections"),deps:["only_data","only_schema"],disabled:function(e){return"function"!==this.node.type&&"table"!==this.node.type&&"trigger"!==this.node.type&&"trigger_function"!==this.node.type&&(e.get("only_data")||e.get("only_schema"))}},{id:"post_data",label:e("Post-data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Sections"),deps:["only_data","only_schema"],disabled:function(e){return"function"!==this.node.type&&"table"!==this.node.type&&"trigger"!==this.node.type&&"trigger_function"!==this.node.type&&(e.get("only_data")||e.get("only_schema"))}}]},{type:"nested",control:"fieldset",label:e("Type of objects"),group:e("Restore options"),contentClass:"row",schema:[{id:"only_data",label:e("Only data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Type of objects"),deps:["pre_data","data","post_data","only_schema"],disabled:function(e){return"database"!==this.node.type&&"schema"!==this.node.type||e.get("pre_data")||e.get("data")||e.get("post_data")||e.get("only_schema")}},{id:"only_schema",label:e("Only schema"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Type of objects"),deps:["pre_data","data","post_data","only_data"],disabled:function(e){return"database"!==this.node.type&&"schema"!==this.node.type||e.get("pre_data")||e.get("data")||e.get("post_data")||e.get("only_data")}}]},{type:"nested",control:"fieldset",label:e("Do not save"),group:e("Restore options"),contentClass:"row",schema:[{id:"dns_owner",label:e("Owner"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save")},{id:"dns_privilege",label:e("Privilege"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save")},{id:"dns_tablespace",label:e("Tablespace"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save")},{id:"no_comments",label:e("Comments"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save"),visible:function(){var e=i.tree,t=e.selected(),n=t?e.itemData(t):void 0,o=r.isUndefined(n)?void 0:i.tree.getTreeNodeHierarchy(t).server;return!r.isUndefined(o)&&o.version>=11e4}}]},{type:"nested",control:"fieldset",label:e("Queries"),group:e("Restore options"),contentClass:"row",schema:[{id:"include_create_database",label:e("Include CREATE DATABASE statement"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Queries")},{id:"clean",label:e("Clean before restore"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Queries"),disabled:function(){return"function"===this.node.type||"trigger_function"===this.node.type}},{id:"single_transaction",label:e("Single transaction"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Queries")}]},{type:"nested",control:"fieldset",label:e("Disable"),group:e("Restore options"),contentClass:"row",schema:[{id:"disable_trigger",label:e("Trigger"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Disable")},{id:"no_data_fail_table",label:e("No data for Failed Tables"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Disable")}]},{type:"nested",control:"fieldset",label:e("Miscellaneous / Behavior"),group:e("Restore options"),contentClass:"row",schema:[{id:"verbose",label:e("Verbose messages"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Miscellaneous / Behavior")},{id:"use_set_session_auth",label:e("Use SET SESSION AUTHORIZATION"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Miscellaneous / Behavior")},{id:"exit_on_error",label:e("Exit on error"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Miscellaneous / Behavior")}]}],validate:function(){return null}});return i.Restore={init:function(){if(!this.initialized){this.initialized=!0;for(var t=[{name:"restore_object",module:this,applies:["tools"],callback:"restore_objects",priority:13,label:e("Restore..."),icon:"fa fa-upload",enable:d.enabled.bind(null,i.tree,c.restoreSupportedNodes),data:{data_disabled:e("Please select any schema or table from the browser tree to Restore data.")}}],n=0;n<c.restoreSupportedNodes.length;n++)t.push({name:"restore_"+c.restoreSupportedNodes[n],node:c.restoreSupportedNodes[n],module:this,applies:["context"],callback:"restore_objects",priority:13,label:e("Restore..."),icon:"fa fa-upload",enable:d.enabled.bind(null,i.tree,c.restoreSupportedNodes)});return i.add_menus(t),this}},restore_objects:function(e,t){new f.RestoreDialog(i,n,a,p).draw(e,t,i.stdW.calc(i.stdW.md),i.stdH.calc(i.stdH.md))}},i.Restore}.apply(t,r))||(e.exports=o)},77544:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.RestoreDialog=void 0,n(68304),n(30489);var o=d(n(91669)),a=d(n(12030)),i=n(35433),l=d(n(28008)),s=d(n(9669)),u=n(30726),c=n(44092);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(d,e);var t,n,r,i=m(d);function d(e,t,n,r){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.default;return f(this,d),i.call(this,(0,o.default)("Restore Error"),"<div class='restore_dialog'></div>",e,t,n,r,l)}return t=d,(n=[{key:"url_for_utility_exists",value:function(e){return(0,l.default)("restore.utility_exists",{sid:e})}},{key:"draw",value:function(e,t,n,r){var a=(0,u.retrieveAncestorOfTypeServer)(this.pgBrowser,t,(0,o.default)("Restore Error"),this.alertify);if(a&&(0,c.hasBinariesConfiguration)(this.pgBrowser,a,this.alertify)){var i="database"==a._type?a._pid:a._id,l=this.url_for_utility_exists(i),d=this;s.default.get(l).then((function(e){if(e.data.success){if(d.canExecuteOnCurrentDatabase(t)){var a=t||d.pgBrowser.tree.selected(),i=d.pgBrowser.tree.findNodeByDomElement(a).getData(),l=d.pgBrowser.Nodes[i._type];if(l){var s=(0,o.default)("Restore (%s: %s)",l.label,i.label);d.createOrGetDialog(s,"restore"),d.alertify.pg_restore(s,a,i,l).resizeTo(n,r)}}}else d.alertify.alert((0,o.default)("Utility not found"),e.data.errormsg)})).catch((function(){d.alertify.alert((0,o.default)("Utility not found"),(0,o.default)("Failed to fetch Utility information"))}))}}},{key:"dialogName",value:function(){return"pg_restore"}}])&&p(t.prototype,n),r&&p(t,r),d}(i.Dialog);t.RestoreDialog=g},9066:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.RestoreDialogWrapper=void 0,n(68309),n(5735),n(83753),n(69826),n(68304),n(30489);var o=s(n(9669)),a=s(n(81311)),i=s(n(91669)),l=s(n(28008));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var t,n,r,s=d(f);function f(e,t,n,r,o,a,i,l){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),s.call(this,e,t,r,o,a,i,l)}return t=f,(n=[{key:"main",value:function(e,t,n,r){this.set("title",e),this.setting("pg_node",r),this.setting("pg_item",t),this.setting("pg_item_data",n)}},{key:"setup",value:function(){return{buttons:[{text:"",className:"btn btn-primary-icon pull-left fa fa-info pg-alertify-icon-button",attrs:{name:"object_help",type:"button",url:"backup.html",label:(0,i.default)("Restore"),"aria-label":(0,i.default)("Object Help")}},{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,i.default)("Restore"),"aria-label":(0,i.default)("Help"),url:(0,l.default)("help.static",{filename:"restore_dialog.html"})}},{text:(0,i.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button",restore:!1,"data-btn-name":"cancel"},{text:(0,i.default)("Restore"),key:13,className:"btn btn-primary fa fa-upload pg-alertify-button",restore:!0,"data-btn-name":"restore"}],options:{title:this.dialogTitle,padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}}},{key:"prepare",value:function(){this.disableRestoreButton();var e=this.jquery(this.dialogContainerSelector),t=this.getSelectedNode(),n=this.getSelectedNodeData(t);if(n){var r=this.pgBrowser.Nodes[n._type],o=this.pgBrowser.tree.getTreeNodeHierarchy(t),a=this.createDialog(r,o,e);this.addAlertifyClassToRestoreNodeChildNodes(),a.render();var l=this.jquery('<div class=\'pg-prop-status-bar pg-prop-status-bar-absolute pg-el-xs-12 d-none\'>  <div class="error-in-footer">     <div class="d-flex px-2 py-1">       <div class="pr-2">         <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i>       </div>       <div class="alert-text" role="alert"></div>        <div class="ml-auto close-error-bar">           <a aria-label="'+(0,i.default)("Close error bar")+'" class="close-error fa fa-times text-danger"></a>         </div>     </div>   </div> </div>').appendTo(e);this.elements.content.appendChild(e.get(0)),this.focusOnDialog(this),this.setListenersForFilenameChanges(l)}}},{key:"callback",value:function(e){var t=this.getSelectedNode(),n=this.getSelectedNodeData(t),r=n&&this.pgBrowser.Nodes[n._type];if(this.wasHelpButtonPressed(e))return e.cancel=!0,void this.pgBrowser.showHelp(e.button.element.name,e.button.element.getAttribute("url"),r,t.getHtmlIdentifier());if(this.wasRestoreButtonPressed(e)){if(!n)return;var a=this.retrieveServerIdentifier(r,t),s=this,u=(0,l.default)("restore.create_job",{sid:a}),c=this.pgBrowser.tree.getTreeNodeHierarchy(t);this.setExtraParameters(t,c),o.default.post(u,this.view.model.toJSON()).then((function(e){e.data.success?(s.alertify.success((0,i.default)("Restore job created."),5),s.pgBrowser.Events.trigger("pgadmin-bgprocess:created",s)):s.alertify.alert((0,i.default)("Restore job creation failed."),e.data.errormsg)})).catch((function(e){try{var t=e.response.data;s.alertify.alert((0,i.default)("Restore job failed."),t.errormsg)}catch(e){console.warn(e.stack||e)}}))}}},{key:"addAlertifyClassToRestoreNodeChildNodes",value:function(){this.jquery(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties")}},{key:"getSelectedNode",value:function(){var e=this.pgBrowser.tree,t=e.selected();return t?e.findNodeByDomElement(t):void 0}},{key:"disableRestoreButton",value:function(){this.__internal.buttons[3].element.disabled=!0}},{key:"enableRestoreButton",value:function(){this.__internal.buttons[3].element.disabled=!1}},{key:"createDialog",value:function(e,t,n){var r=new this.dialogModel({node_data:e},{node_info:t}),o=this.backform.generateViewSchema(t,r,"create",e,t.server,!0);return this.view=new this.backform.Dialog({el:n,model:r,schema:o})}},{key:"retrieveServerIdentifier",value:function(e,t){return this.pgBrowser.tree.getTreeNodeHierarchy(t).server._id}},{key:"setListenersForFilenameChanges",value:function(e){var t=this;this.view.model.on("change",(function(){var n,r,o,l=this;a.default.isUndefined(this.get("file"))||""===this.get("file")?(t.disableRestoreButton(),n=(0,i.default)("Please provide a filename"),r="file",o=n,l.errorModel.set(r,o),e.removeClass("d-none"),e.find(".alert-text").html(o),t.elements.dialog.querySelector(".close-error").addEventListener("click",(function(){e.addClass("d-none"),l.errorModel.set(r,o)}))):(this.errorModel.clear(),e.addClass("d-none"),t.enableRestoreButton())}))}},{key:"setExtraParameters",value:function(e,t){if(this.view.model.set("database",t.database._label),!this.view.model.get("custom")){var n=e.getData();switch(n._type){case"schema":this.view.model.set("schemas",[n._label]);break;case"table":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("tables",[n._label]);break;case"function":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("functions",[n._label]);break;case"index":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("indexes",[n._label]);break;case"trigger":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("triggers",[n._label]);break;case"trigger_func":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("trigger_funcs",[n._label])}}}},{key:"wasRestoreButtonPressed",value:function(e){return"restore"===e.button["data-btn-name"]}}])&&u(t.prototype,n),r&&u(t,r),f}(n(22378).DialogWrapper);t.RestoreDialogWrapper=b},23792:(e,t,n)=>{var r,o;n(32564),n(26699),n(32023),n(73210),n(69826),r=[n(91669),n(28008),n(19755),n(81311),n(55112),n(87789),n(55455),n(44092),n(66235)],void 0===(o=function(e,t,n,r,o,a,i,l){var s=window.wcDocker,u=o.Browser;return u.SchemaDiff||(u.SchemaDiff={init:function(){if(!this.initialized){this.initialized=!0,a.setPGCSRFToken(o.csrf_token_header,o.csrf_token);var t=[{name:"schema_diff",module:this,applies:["tools"],callback:"show_schema_diff_tool",priority:1,label:e("Schema Diff"),enable:!0}];u.add_menus(t);var n=new u.Frame({name:"frm_schemadiff",showTitle:!0,isCloseable:!0,isPrivate:!0,url:"about:blank"}),r=this,i=setInterval((function(){u.preference_version()>0&&(r.preferences=u.get_preferences_for_module("schema_diff"),clearInterval(i))}),0);return u.onPreferencesChange("schema_diff",(function(){r.preferences=u.get_preferences_for_module("schema_diff")})),n.load(u.docker),this}},show_schema_diff_tool:function(){var r=this,o=t("schema_diff.initialize",null);n.ajax({url:o,method:"GET",dataType:"json",contentType:"application/json"}).done((function(t){r.trans_id=t.data.schemaDiffTransId,t.data.panel_title=e("Schema Diff"),r.launch_schema_diff(t.data)})).fail((function(t){r.raise_error_on_fail(e("Schema Diff initialize error"),t)}))},launch_schema_diff:function(o){var a=o.panel_title,c=o.schemaDiffTransId,d=t("schema_diff.panel",{trans_id:c,editor_title:a}),f=u.get_preferences_for_module("browser").new_browser_tab_open;if(f&&f.includes("schema_diff"))window.open(d,"_blank"),setTimeout((function(){u.send_signal_to_runtime("Runtime new window opened")}),500);else{var p=u.docker.findPanels("properties"),b=u.docker.addPanel("frm_schemadiff",s.DOCK.STACKED,p[0]);l.registerDetachEvent(b),b.on(s.EVENT.RENAME,(function(t){i.prompt("",t.$titleText[0].textContent,(function(e,t){t&&(t=t.trim(),b.title("<span>"+r.escape(t)+"</span>"))}),(function(e){e.cancel=!1})).set({title:e("Rename Panel")})})),b.title('<span title="">'+a+"</span>"),b.icon("pg-font-icon icon-compare"),b.focus();!function e(t){n(t).data("embeddedFrame").$container.append(u.SchemaDiff.spinner_el),setTimeout((function(){if(n(t).data("frameInitialized")){var r=n(t).data("embeddedFrame");r&&(r.openURL(d),r.$container.find(".pg-sp-container").delay(1e3).hide(1))}else e(t)}),100)}(b)}}}),u.SchemaDiff}.apply(t,r))||(e.exports=o)},26889:(e,t,n)=>{var r,o;n(82772),r=[n(91669),n(28008),n(19755),n(81311),n(55455),n(55112),n(87789),n(85530),n(97051)],void 0===(o=function(e,t,n,r,o,a,i,l,s){var u=a.Browser;return a.SearchObjects||(a.SearchObjects={init:function(){if(!this.initialized){this.initialized=!0,i.setPGCSRFToken(a.csrf_token_header,a.csrf_token);var t=[{name:"search_objects",module:this,applies:["tools"],callback:"show_search_objects",enable:this.search_objects_enabled,priority:1,label:e("Search Objects..."),data:{data_disabled:e("Please select a database from the browser tree to search the database objects.")}},{name:"search_objects",module:this,applies:["context"],callback:"show_search_objects",enable:this.search_objects_enabled,priority:1,label:e("Search Objects...")}];return u.add_menus(t),this}},search_objects_enabled:function(t){var n=!(r.isUndefined(t)||r.isNull(t)||-1!=r.indexOf(a.unsupported_nodes,t._type)||("database"!=t._type||!t.allowConn)&&"database"==t._type);return l.enable(e("Search objects"),n),n},show_search_objects:function(e,t){new s.default(u,n,o,{}).draw(e,t,{},u.stdW.calc(u.stdW.md),u.stdH.calc(u.stdH.lg))}}),a.SearchObjects}.apply(t,r))||(e.exports=o)},97051:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(68304),n(30489);var o,a=(o=n(91669))&&o.__esModule?o:{default:o},i=n(35433),l=n(9807),s=n(30726);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,o=f(i);function i(e,t,n,r){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return u(this,i),o.call(this,(0,a.default)("Search Objects Error"),"<div class='search_objects_dialog'></div>",e,t,n,r,l)}return t=i,(n=[{key:"dialogName",value:function(){return"search_objects"}},{key:"draw",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=(0,s.retrieveAncestorOfTypeDatabase)(this.pgBrowser,t,(0,a.default)("Search Objects Error"),this.alertify);if(i){var u=(0,l.getPanelTitle)(this.pgBrowser,t);u=(0,a.default)("Search Objects - ")+u;var c=this.createOrGetDialog((0,a.default)("Search Objects..."),"search_objects");c(u).resizeTo(r,o)}}}])&&c(t.prototype,n),r&&c(t,r),i}(i.Dialog);t.default=m},10713:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(12419),n(78011),n(69070),n(82526),n(41817),n(32165),n(78783),n(66992),n(33948),n(91038),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(73210),n(68309),n(79753),n(82772),n(92222),n(32564),n(2707),n(69600),n(15306),n(74916),n(47042),n(23123),n(47941),n(17727),n(88674),n(41539),n(21249),n(24812),n(68304),n(30489);var o=d(n(9669)),a=d(n(91669)),i=d(n(28008));n(20454);var l=n(22378),s=d(n(73409)),u=d(n(55112)),c=d(n(81311));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(d,e);var t,n,r,l=h(d);function d(e,t,n,r,o,a,i,s){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(u=l.call(this,e,t,r,o,a,i,s)).grid=null,u.dataview=null,u.gridContainer=null,u}return t=d,(n=[{key:"showMessage",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};""==e||null==e?this.statusBar.classList.add("d-none"):(t?(this.statusBar.innerHTML='\n          <div class="error-in-footer">\n            <div class="d-flex px-2 py-1">\n              <div class="pr-2">\n                <i class="fa fa-exclamation-triangle" aria-hidden="true" role="img"></i>\n              </div>\n              <div role="alert" class="alert-text">'.concat(e,'</div>\n              <div class="ml-auto close-error-bar">\n                <a class="close-error fa fa-times text-danger"></a>\n              </div>\n            </div>\n          </div>\n        '),this.statusBar.querySelector(".close-error").addEventListener("click",(function(){n.showMessage(null)}))):this.statusBar.innerHTML='\n          <div class="info-in-footer">\n            <div class="d-flex px-2 py-1">\n              <div class="pr-2">\n                <i class="fa fa-info-circle" aria-hidden="true"></i>\n              </div>\n              <div class="alert-text" role="alert">'.concat(e,"</div>\n            </div>\n          </div>\n        "),this.statusBar.classList.remove("d-none"),r(this.statusBar))}},{key:"createDialogDOM",value:function(e){return e.innerHTML='\n      <div class="d-flex flex-column w-100 h-100">\n        <div class="p-2">\n          <div class="row">\n            <div class="col-6">\n              <div class="input-group pgadmin-controls">\n                  <input type="search" class="form-control" id="txtGridSearch" placeholder="'+(0,a.default)("Type at least 3 characters")+'"\n                    tabindex="0" aria-describedby="labelSearch" aria-labelledby="labelSearch" autocomplete="off">\n              </div>\n            </div>\n            <div class="col-4 d-flex">\n              <select aria-label="'+(0,a.default)("Object types")+'" class="node-types"></select>\n            </div>\n            <div class="col-2">\n              <button class="btn btn-primary btn-search w-100" disabled><span class="fa fa-search"></span>&nbsp;'+(0,a.default)("Search")+'</button>\n            </div>\n          </div>\n        </div>\n        <div class="search-result-container flex-grow-1">\n          <div class="pg-sp-container d-none">\n            <div class="pg-sp-content">\n              <div class="row"><div class="col-12 pg-sp-icon"></div></div>\n              <div class="row"><div class="col-12 pg-sp-text"></div></div>\n            </div>\n          </div>\n          <div class="search-result"></div>\n        </div>\n        <div class=\'search-result-count p-1\'>\n        </div>\n        <div class="pg-prop-status-bar">\n        </div>\n      </div>\n    ',e}},{key:"updateDimOfSearchResult",value:function(){var e=this.searchResultContainer.getBoundingClientRect();this.searchResult.style.height=e.height+"px",this.searchResult.style.width=e.width+"px"}},{key:"setLoading",value:function(e){null!=e?(this.loader.classList.remove("d-none"),this.loader.querySelector(".pg-sp-text").innerHTML=e):this.loader.classList.add("d-none")}},{key:"searchBtnEnabled",value:function(e){if(void 0===e)return!this.searchBtn.disabled;this.searchBtn.disabled=!e}},{key:"searchBoxVal",value:function(e){if(void 0===e)return this.searchBox.value.trim();this.searchBox.value=e}},{key:"typesVal",value:function(e){if(void 0===e)return this.typesSelect.value;this.typesSelect.value=e}},{key:"setTypes",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.typesSelect&&(this.jquery(this.typesSelect).empty().select2({data:e}),this.typesSelect.disabled=!t)}},{key:"setResultCount",value:function(e){0==e||e||(e=(0,a.default)("Unknown")),this.searchResultCount.innerHTML=1===e?(0,a.default)("%s match found.",e):(0,a.default)("%s matches found.",e)}},{key:"showOtherInfo",value:function(e){var t=this.dataview.getItem(e);t.name+=" (".concat(t.other_info,")"),t.other_info=null,this.dataview.updateItem(t.id,t)}},{key:"setGridData",value:function(e){this.dataview.setItems(e)}},{key:"prepareGrid",value:function(){var e=this;this.dataview=new s.default.Data.DataView,this.dataview.getItemMetadata=function(t){return e.dataview.getItem(t).show_node?null:{cssClasses:"object-muted"}},this.dataview.setFilter((function(e,t){return!t||"all"==t.type||(Array.isArray(t.type)?-1!=t.type.indexOf(e.type):t.type==e.type)})),this.jquery(this.typesSelect).on("change",(function(){var t=e.typesVal();"constraints"===t&&(t=["constraints","check_constraint","foreign_key","primary_key","unique_constraint","exclusion_constraint"]),e.dataview.setFilterArgs({type:t}),e.dataview.refresh()})),this.dataview.onRowCountChanged.subscribe((function(t,n){e.grid.updateRowCount(),e.grid.render(),e.setResultCount(n.current)})),this.dataview.onRowsChanged.subscribe((function(t,n){e.grid.invalidateRows(n.rows),e.grid.render()})),this.grid=new s.default.Grid(this.searchResult,this.dataview,[{id:"name",name:(0,a.default)("Object name"),field:"name",sortable:!0,width:50,formatter:function(e,t,n,r,o){var a="<i class='wcTabIcon ".concat(o.icon,"'></i>").concat(n);return null!=o.other_info&&""!=o.other_info&&(a+='&nbsp;<span class="object-other-info">(...)</span>'),a}},{id:"type",name:(0,a.default)("Type"),field:"type_label",sortable:!0,width:35},{id:"path",name:(0,a.default)("Browser path"),field:"path",sortable:!1,formatter:function(e,t,n){return n}}],{enableCellNavigation:!0,enableColumnReorder:!1,multiColumnSort:!0,explicitInitialization:!0}),this.grid.registerPlugin(new s.default.AutoColumnSize),this.grid.setSelectionModel(new s.default.RowSelectionModel({selectActiveRow:!0})),this.grid.onKeyDown.subscribe((function(t){!e.grid.getActiveCell()||t.ctrlKey||t.altKey||t.metaKey||9!=t.keyCode||(t.preventDefault(),t.stopImmediatePropagation(),t.shiftKey?e.prevToGrid.focus():e.nextToGrid.focus())})),this.grid.onClick.subscribe((function(t,n){t.target.classList.contains("object-other-info")&&e.showOtherInfo(n.row)})),this.grid.onDblClick.subscribe((function(t,n){var r=e.dataview.getItem(n.row),o=e.pgBrowser.tree;if(!r.show_node)return e.showMessage((0,a.default)('%s objects are disabled in the browser. You can enable them in the <a class="pref-dialog-link">preferences dialog</a>.',r.type_label),!0,(function(e){e.querySelector(".pref-dialog-link").addEventListener("click",(function(){u.default.Preferences&&u.default.Preferences.show()}))})),!1;e.showMessage((0,a.default)("Locating...")),o.findNodeWithToggle(r.id_path).then((function(t){setTimeout((function(){o.select(t,!0)}),100),e.showMessage(null)})).catch((function(t){e.showMessage((0,a.default)("Unable to locate this object in the browser."),!0),console.warn(t,r.id_path)}))})),this.grid.onSort.subscribe((function(t,n){var r=n.sortCols;e.dataview.sort((function(e,t){for(var n=0,o=r.length;n<o;n++){var a=r[n].sortCol.field,i=r[n].sortAsc?1:-1,l=e[a],s=t[a],u=(l==s?0:l>s?1:-1)*i;if(0!=u)return u}return!1}),!0)}))}},{key:"onDialogResize",value:function(){this.updateDimOfSearchResult(),this.grid&&(this.grid.resizeCanvas(),this.grid.autosizeColumns())}},{key:"onDialogShow",value:function(){var e=this;this.focusOnDialog(this),setTimeout((function(){e.grid||e.prepareGrid(),e.updateDimOfSearchResult(),e.grid.init(),e.setGridData([]),e.onDialogResize()}),500)}},{key:"getBaseUrl",value:function(e){return(0,i.default)("search_objects."+e,{sid:this.treeInfo.server._id,did:this.treeInfo.database._id})}},{key:"getCollNode",value:function(e){return"coll-"+e in this.pgBrowser.Nodes?this.pgBrowser.Nodes["coll-"+e]:e in this.pgBrowser.Nodes&&"string"==typeof this.pgBrowser.Nodes[e].collection_type?this.pgBrowser.Nodes[this.pgBrowser.Nodes[e].collection_type]:null}},{key:"getSelectedNode",value:function(){var e=this.pgBrowser.tree,t=e.selected();return t?e.findNodeByDomElement(t):void 0}},{key:"finaliseData",value:function(e){e.icon="icon-"+e.type;var t=f(this.translateSearchObjectsPath(e.path,e.catalog_level),2);return e.path=t[0],e.id_path=t[1],e.id=e.id_path?e.id_path.join("."):c.default.uniqueId(e.name),e.name=c.default.escape(e.name),e.path=c.default.escape(e.path),e.other_info=e.other_info?c.default.escape(e.other_info):e.other_info,e}},{key:"translateSearchObjectsPath",value:function(e,t){var n=this;if(null===e)return[null,null];t=t||"N";var r=[this.treeInfo.server_group.id,this.treeInfo.server.id,this.getCollNode("database").type+"_"+this.treeInfo.server._id,this.treeInfo.database.id],o=this.treeInfo.database._id,a=(e="/"+e).replace(/\/:[a-zA-Z_]+\.[0-9]+:\//g,(function(e){var a=e,i=f((e=e.slice(2,-2)).split("."),3),l=i[0],s=i[1];if(void 0!==i[2])return e;l=-1!=["D","O"].indexOf(t)&&"schema"==l?"catalog":l,l="O"===t&&-1!=["view","table"].indexOf(l)?"catalog_object":l,l="O"===t&&"column"==l?"catalog_object_column":l;var u=n.getCollNode(l);return u?(null!=o&&r.push("".concat(u.type,"_").concat(o)),r.push("".concat(l,"_").concat(s)),o=s,"/".concat(u.label,"/")):l in n.pgBrowser.Nodes?(r.push("".concat(l,"_").concat(s)),o=s,"/"):(o=null,a)}));return[a=a.substring(1),r]}},{key:"prepareDialog",value:function(){var e=this;this.showMessage(null),this.setResultCount(0),this.grid&&(this.grid.destroy(),this.grid=null),this.setTypes([{id:-1,text:(0,a.default)("Loading..."),value:null}],!1),o.default.get(this.getBaseUrl("types")).then((function(t){var n,r=[{id:"all",text:(0,a.default)("All types")}],o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(Object.keys(t.data.data).sort());try{for(o.s();!(n=o.n()).done;){var i=n.value;r.push({id:i,text:t.data.data[i]})}}catch(e){o.e(e)}finally{o.f()}e.setTypes(r)})).catch((function(){e.setTypes([{id:-1,text:(0,a.default)("Failed"),value:null}],!1)}))}},{key:"main",value:function(e){this.set("title",e)}},{key:"setup",value:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,a.default)("Help"),"aria-label":(0,a.default)("Help"),url:(0,i.default)("help.static",{filename:"search_objects.html"})}},{text:(0,a.default)("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button","data-btn-name":"cancel"}],options:{title:this.dialogTitle,padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}}},{key:"build",value:function(){var e=this,t=document.createElement("div");t.innerHTML=this.dialogContainerSelector;var n=t.firstChild;this.elements.content.innerHTML="",this.elements.content.appendChild(n),this.createDialogDOM(n),this.alertify.pgDialogBuild.apply(this),this.loader=n.getElementsByClassName("pg-sp-container")[0],this.searchBox=n.querySelector("#txtGridSearch"),this.searchBtn=n.querySelector(".btn-search"),this.typesSelect=n.querySelector(".node-types"),this.searchResultContainer=n.querySelector(".search-result-container"),this.searchResult=n.querySelector(".search-result"),this.searchResultCount=n.querySelector(".search-result-count"),this.statusBar=n.querySelector(".pg-prop-status-bar"),this.nextToGrid=this.elements.footer.querySelector(".ajs-button"),this.prevToGrid=this.typesSelect,this.setTypes([{id:-1,text:(0,a.default)("Loading..."),value:null}],!1),this.searchBox.addEventListener("input",(function(){e.searchBoxVal().length>=3?e.searchBtnEnabled(!0):e.searchBtnEnabled(!1)})),this.searchBox.addEventListener("keypress",(function(t){13==t.keyCode&&(t.stopPropagation(),e.searchBtnEnabled()&&e.searchBtn.dispatchEvent(new Event("click")))})),this.searchBtn.addEventListener("click",(function(){e.searchBtnEnabled(!1),e.setGridData([]),e.showMessage(null),e.setLoading((0,a.default)("Searching....")),o.default.get(e.getBaseUrl("search"),{params:{text:e.searchBoxVal(),type:e.typesVal()}}).then((function(t){var n=t.data.data.map((function(t){return e.finaliseData(t)}));e.setGridData(n)})).catch((function(t){var n="";n=t.response?t.response.data&&t.response.data.errormsg?t.response.data.errormsg:t.response.statusText:t.request?(0,a.default)("No response received"):t.message,e.showMessage((0,a.default)("An unexpected occurred: %s",n),!0),console.warn(t)})).finally((function(){e.setLoading(null),e.searchBtnEnabled(!0)}))})),this.set({onresized:this.onDialogResize.bind(this),onmaximized:this.onDialogResize.bind(this),onrestored:this.onDialogResize.bind(this),onshow:this.onDialogShow.bind(this)})}},{key:"prepare",value:function(){var e=this.getSelectedNode();this.getSelectedNodeData(e)&&(this.treeInfo=this.pgBrowser.tree.getTreeNodeHierarchy(e),this.prepareDialog(),this.focusOnDialog(this))}},{key:"callback",value:function(e){if(this.wasHelpButtonPressed(e))return e.cancel=!0,void this.pgBrowser.showHelp(e.button.element.name,e.button.element.getAttribute("url"),null,null)}}])&&m(t.prototype,n),r&&m(t,r),d}(l.DialogWrapper);t.default=_},44316:(e,t,n)=>{var r,o;n(24812);var a=n(48987);r=[n(91669),n(28008),n(19755),n(81311),n(55455),n(55112),n(33883),n(87789),n(58386)],void 0===(o=function(e,t,n,r,o,i,l,s){var u="True"==(i=i||window.pgAdmin||{}).server_mode,c=i.Tools=i.Tools||{};if(u)return i.Tools.storage_manager||(c.storage_manager={init:function(){if(!this.initialized){this.initialized=!0,s.setPGCSRFToken(i.csrf_token_header,i.csrf_token);var t=this.callback_storage_manager.bind(this);l.Events.on("pgadmin:tools:storage_manager",t);var n=[{name:"storage_manager",module:this,applies:["tools"],callback:"callback_storage_manager",priority:2,label:e("Storage Manager..."),enable:!0}];l.add_menus(n)}},callback_storage_manager:function(e){var t={supported_types:["sql","csv","*"],dialog_type:"storage_dialog",dialog_title:"Storage Manager",btn_primary:void 0};if(r.isUndefined(e)||r.isNull(e)||r.isEmpty(e))i.FileManager.init(),i.FileManager.show_dialog(t);else{var n,o=(0,a.getTransId)(JSON.stringify(t));4==o.readyState&&(n=JSON.parse(o.responseText));var l=r.isUndefined(n)?0:n.data.fileTransId;(0,a.set_last_traversed_dir)({path:e},l),i.FileManager.init(),i.FileManager.show_dialog(t)}}}),i.Tools.storage_manager}.apply(t,r))||(e.exports=o)},90491:(e,t,n)=>{var r,o;function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(47042),n(91038),n(78783),n(82526),n(41817),n(32165),n(79753),n(26699),n(32023),n(32564),n(68309),n(82772),n(41539),n(39714),n(83710),n(15306),n(74916),n(24812),n(5735),n(83753),n(69600),n(69826),n(66992),n(33948),r=[n(91669),n(28008),n(19755),n(81311),n(55455),n(33883),n(72316),n(83879),n(95283),n(66235),n(12030),n(6537),n(44092),n(92026),n(14753),n(63790)],void 0===(o=function(e,t,n,r,o,l,s,u,c,d,f,p,b,m){if(l.UserManagement)return l.UserManagement;var y=t("user_management.users"),h=t("user_management.roles"),g=t("user_management.auth_sources"),v=m.INTERNAL,_=m.LDAP,w=m.KERBEROS,O=m.OAUTH2,S=!(1!=p.auth_sources.length||!p.auth_sources.includes(v)),j=u.Extension.PasswordDepCell=u.Extension.PasswordCell.extend({initialize:function(){u.Extension.PasswordCell.prototype.initialize.apply(this,arguments),u.Extension.DependentCell.prototype.initialize.apply(this,arguments)},dependentChanged:function(){this.$el.empty(),this.render();var e=this.model,t=this.column,n=this.column.get("editable");return(r.isFunction(n)?!!n.apply(t,[e]):!!n)?this.$el.addClass("editable"):this.$el.removeClass("editable"),this.delegateEvents(),this},render:function(){u.NumberCell.prototype.render.apply(this,arguments);var e=this.model,t=this.column,n=this.column.get("editable"),o=r.isFunction(n)?!!n.apply(t,[e]):!!n;return o?this.$el.addClass("editable"):this.$el.removeClass("editable"),this},remove:u.Extension.DependentCell.prototype.remove});return l.UserManagement={init:function(){if(!this.initialized)return this.initialized=!0,this},change_password:function(n){var r=e("Change Password");o.ChangePassword||o.dialog("ChangePassword",(function(){return{main:function(e,t){this.set({title:e,url:t})},build:function(){o.pgDialogBuild.apply(this)},settings:{url:void 0},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:e("Change Password"),url:t("help.static",{filename:"change_user_password.html"})}},{text:e("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{padding:!1,overflow:!1,modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,closable:!1}}},hooks:{onclose:function(){return setTimeout((function(){return o.ChangePassword().destroy()}),500)}},prepare:function(){var e=document.createElement("iframe");e.frameBorder="no",e.width="100%",e.height="100%",e.src=this.setting("url"),this.elements.content.appendChild(e)},callback:function(e){if("dialog_help"==e.button.element.name)return e.cancel=!0,void l.showHelp(e.button.element.name,e.button.element.getAttribute("url"),null,null)}}})),o.ChangePassword(r,n).resizeTo(l.stdW.lg,l.stdH.md)},isPgaLoginRequired:function(e){return void 0===e.responseJSON&&void 0!==e.data?401===e.status&&e.data&&e.data.info&&"PGADMIN_LOGIN_REQUIRED"===e.data.info:401===e.status&&e.responseJSON&&e.responseJSON.info&&"PGADMIN_LOGIN_REQUIRED"===e.responseJSON.info},pgaLogin:function(n){var r=e("pgAdmin 4 login");n=n||t("security.login"),o.PgaLogin||o.dialog("PgaLogin",(function(){return{main:function(e,t){this.set({title:e,url:t})},build:function(){o.pgDialogBuild.apply(this)},settings:{url:void 0},setup:function(){return{buttons:[{text:e("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{padding:!1,overflow:!1,modal:!0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,closable:!1}}},hooks:{onclose:function(){return setTimeout((function(){return o.PgaLogin().destroy()}))}},prepare:function(){var e=this,t=document.createElement("iframe"),n=this.setting("url");t.onload=function(){-1==(this.contentDocument||this.contentWindow.document).location.href.indexOf(n)&&(this.contentWindow.stop(),this.onload=null,e.close(),l.Events.trigger("pgadmin:user:logged-in"))},t.frameBorder="no",t.width="100%",t.height="100%",t.src=n,e.elements.content.appendChild(t)}}})),o.PgaLogin(r,n).resizeTo(l.stdW.md,l.stdH.md)},show_users:function(){if(p.is_admin){var d=[],m=[],P=l.Node.Model.extend({idAttribute:"id",urlRoot:y,defaults:{id:void 0,username:void 0,email:void 0,active:!0,role:"2",newPassword:void 0,confirmPassword:void 0,auth_source:v,authOnlyInternal:S},schema:[{id:"auth_source",label:e("Authentication source"),type:"text",control:"Select2",url:t("user_management.auth_sources"),cellHeaderClasses:"width_percent_30",visible:function(e){return!e.get("authOnlyInternal")},disabled:!1,cell:"Select2",select2:{allowClear:!1,openOnEnter:!1,first_empty:!1},options:function(){return m},editable:function(e){return e instanceof s.Collection||e.isNew()&&!e.get("authOnlyInternal")}},{id:"username",label:e("Username"),type:"text",cell:u.Extension.StringDepCell,cellHeaderClasses:"width_percent_30",deps:["auth_source"],editable:function(e){return!e.get("authOnlyInternal")&&e.get("auth_source")!=v||(e.isNew()&&null!=e.get("username")&&""!=e.get("username")&&setTimeout((function(){e.set("username",void 0)}),10),!1)},disabled:!1},{id:"email",label:e("Email"),type:"text",cell:u.Extension.StringDepCell,cellHeaderClasses:"width_percent_30",deps:["id"],editable:function(e){return!e.get("authOnlyInternal")||!(e instanceof s.Collection)&&!!e.isNew()}},{id:"role",label:e("Role"),type:"text",control:"Select2",cellHeaderClasses:"width_percent_20",cell:"select2",select2:{allowClear:!1,openOnEnter:!1,first_empty:!1},options:function(e){var t=[];return e instanceof c.Control?r.each(d,(function(e){t.push({label:e.name,value:e.id.toString()})})):r.each(d,(function(e){t.push([e.name,e.id.toString()])})),t},editable:function(e){return e instanceof s.Collection||e.get("id")!=p.id}},{id:"active",label:e("Active"),type:"switch",cell:"switch",cellHeaderClasses:"width_percent_10",sortable:!1,editable:function(e){return e instanceof s.Collection||e.get("id")!=p.id}},{id:"newPassword",label:e("New password"),type:"password",disabled:!1,control:"input",cell:j,cellHeaderClasses:"width_percent_20",deps:["auth_source"],sortable:!1,editable:function(e){return e.get("auth_source")==v}},{id:"confirmPassword",label:e("Confirm password"),type:"password",disabled:!1,control:"input",cell:j,cellHeaderClasses:"width_percent_20",deps:["auth_source"],sortable:!1,editable:function(e){return e.get("auth_source")==v}},{id:"locked",label:e("Locked"),type:"switch",cell:"switch",disabled:!1,sortable:!1,editable:function(e){return e.get("id")!=p.id}}],validate:function(){var t=null,n=this.changed||{};if(this.get("auth_source")==v&&("email"in n||!this.isNew())&&(r.isUndefined(this.get("email"))||r.isNull(this.get("email"))||""==String(this.get("email")).replace(/^\s+|\s+$/g,"")))return t=e("Email address cannot be empty."),this.errorModel.set("email",t),t;if(this.get("email")&&!/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(this.get("email")))return t=e("Invalid email address: %s.",this.get("email")),this.errorModel.set("email",t),t;if(this.get("email")&&this.collection.nonFilter.where({email:this.get("email"),auth_source:v}).length>1)return t=e("The email address %s already exists.",this.get("email")),this.errorModel.set("email",t),t;if(this.errorModel.unset("email"),"role"in n&&(r.isUndefined(this.get("role"))||r.isNull(this.get("role"))||""==String(this.get("role")).replace(/^\s+|\s+$/g,"")))return t=e("Role cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("role",t),t;if(this.errorModel.unset("role"),this.get("auth_source")==v)if(this.isNew()){if("newPassword"in n&&(r.isUndefined(this.get("newPassword"))||r.isNull(this.get("newPassword"))||""==this.get("newPassword")))return t=e("Password cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("newPassword",t),t;if(!r.isUndefined(this.get("newPassword"))&&!r.isNull(this.get("newPassword"))&&this.get("newPassword").length<6)return t=e("Password must be at least 6 characters for user %s.",this.get("email")||""),this.errorModel.set("newPassword",t),t;if(this.errorModel.unset("newPassword"),"confirmPassword"in n&&(r.isUndefined(this.get("confirmPassword"))||r.isNull(this.get("confirmPassword"))||""==this.get("confirmPassword")))return t=e("Confirm Password cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",t),t;if(this.errorModel.unset("confirmPassword"),this.get("newPassword")&&this.get("confirmPassword")&&this.get("newPassword")!=this.get("confirmPassword"))return t=e("Passwords do not match for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",t),t;this.errorModel.unset("confirmPassword")}else if((r.isUndefined(this.get("newPassword"))||r.isNull(this.get("newPassword"))||""==this.get("newPassword"))&&(r.isUndefined(this.get("confirmPassword"))||r.isNull(this.get("confirmPassword"))||""==this.get("confirmPassword")))this.errorModel.unset("newPassword"),""==this.get("newPassword")&&this.set({newPassword:void 0}),this.errorModel.unset("confirmPassword"),""==this.get("confirmPassword")&&this.set({confirmPassword:void 0});else{if(!r.isUndefined(this.get("newPassword"))&&!r.isNull(this.get("newPassword"))&&""==!this.get("newPassword")&&this.get("newPassword").length<6)return t=e("Password must be at least 6 characters for user %s.",this.get("email")||""),this.errorModel.set("newPassword",t),t;if(r.isUndefined(this.get("confirmPassword"))||r.isNull(this.get("confirmPassword"))||""==this.get("confirmPassword"))return t=e("Confirm Password cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",t),t;if(this.get("newPassword")&&this.get("confirmPassword")&&this.get("newPassword")!=this.get("confirmPassword"))return t=e("Passwords do not match for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",t),t;this.errorModel.unset("newPassword"),this.errorModel.unset("confirmPassword")}else{if(this.get("username")&&this.collection.nonFilter.where({username:this.get("username"),auth_source:_}).length>1)return t=e("The username %s already exists.",this.get("username")),this.errorModel.set("username",t),t;if(this.get("username")&&this.collection.nonFilter.where({username:this.get("username"),auth_source:w}).length>1)return t=e("The username %s already exists.",this.get("username")),this.errorModel.set("username",t),t;if(this.get("username")&&this.collection.nonFilter.where({username:this.get("username"),auth_source:O}).length>1)return t=e("The username %s already exists.",this.get("username")),this.errorModel.set("username",t),t}return null}}),x=c.generateGridColumnsFromModel(null,P,"edit"),C=u.Extension.DeleteCell.extend({changeOwnership:function(a,i){var s=this,u=c.Select2Control.extend({fetchData:function(){var e=this,a=e.field.get("url");a=t(a,{uid:i}),n.ajax({url:a,headers:{"Cache-Control":"no-cache"}}).done((function(t){var n=e.field.get("transform");if(t.data.status){var o=t.data.result.data;n&&r.isFunction(n)?e.field.set("options",n.bind(e,o)):e.field.set("options",o)}else n&&r.isFunction(n)?e.field.set("options",n.bind(e,[])):e.field.set("options",[]);c.Select2Control.prototype.render.apply(e,arguments)})).fail((function(e){var t="";t=404==e.status?"Unable to find url.":e.responseJSON.errormsg,o.error(t)}))},render:function(){return this.fetchData(),c.Select2Control.prototype.render.apply(this,arguments)},onChange:function(){c.Select2Control.prototype.onChange.apply(this,arguments)}}),d=l.DataModel.extend({schema:[{id:"note_text_ch_owner",control:c.NoteControl,text:"Select the user that will take ownership of the shared servers created by <b>"+s.model.get("username")+"</b>. <b>"+a.data.shared_servers+"</b> shared servers are currently owned by this user.",group:e("General")},{id:"user",name:"user",label:e("User"),type:"text",editable:!0,select2:{allowClear:!0,width:"100%",first_empty:!0},control:u,url:"user_management.admin_users",helpMessage:e("Note: If no user is selected, the shared servers will be deleted.")}]});o.changeOwnershipDialog||o.dialog("changeOwnershipDialog",(function(){var t=n("<div class='change-ownership'></div>");return{main:function(e){this.msg=e},build:function(){this.elements.content.appendChild(t.get(0)),o.pgDialogBuild.apply(this)},setup:function(){return{buttons:[{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button","data-btn-name":"cancel"},{text:e("OK"),key:13,className:"btn btn-primary fa fa-check pg-alertify-button","data-btn-name":"ok"}],options:{title:"Change ownership",padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!1,pinnable:!1,closableByDimmer:!1,modal:!1,autoReset:!1,closable:!0}}},prepare:function(){var e=this;t.html(""),e.ownershipModel=new d;var n=f.generateViewSchema(null,e.ownershipModel,"create",null,null,!0,null),r=this.view=new f.Dialog({el:"<div></div>",model:e.ownershipModel,schema:n});t.append(r.render().$el[0])},callback:function(t){if("ok"===t.button["data-btn-name"]){t.cancel=!0;var n=this.ownershipModel.toJSON();""==n.user||null==n.user?o.confirm(e("Delete user?"),e("The shared servers owned by <b>"+s.model.get("username")+"</b> will be deleted. Do you wish to continue?"),(function(){s.model.destroy({wait:!0,success:function(){o.success(e("User deleted.")),o.changeOwnershipDialog().destroy(),o.UserManagement().destroy()},error:function(){o.error(e("Error during deleting user."))}}),o.changeOwnershipDialog().destroy()}),(function(){return!0})):s.changeOwner(n.user,i)}else o.changeOwnershipDialog().destroy()}}})),o.changeOwnershipDialog("Change ownership").resizeTo(l.stdW.md,l.stdH.md)},changeOwner:function(r,a){n.ajax({url:t("user_management.change_owner"),method:"POST",data:{new_owner:r,old_owner:a}}).done((function(t){o.changeOwnershipDialog().destroy(),o.UserManagement().destroy(),o.success(e(t.info))})).fail((function(){o.error(e("Unable to change owner."))}))},deleteUser:function(){var t=this;o.confirm(e("Delete user?"),e("Are you sure you wish to delete this user?"),(function(){t.model.destroy({wait:!0,success:function(){o.success(e("User deleted."))},error:function(){o.error(e("Error during deleting user."))}})}),(function(){return!0}))},deleteRow:function(a){var i=this;if(a.preventDefault(),i.model.get("id")==p.id)return o.alert(e("Cannot delete user."),e("Cannot delete currently logged in user."),(function(){return!0})),!0;!(!r.isUndefined(this.column.get("canDeleteRow"))&&r.isFunction(this.column.get("canDeleteRow")))||u.callByNeed(this.column.get("canDeleteRow"),this.column,this.model)?i.model.isNew()?i.model.destroy():1==i.model.get("role")?n.ajax({url:t("user_management.shared_servers",{uid:i.model.get("id")}),method:"GET",async:!1}).done((function(e){e.data.shared_servers>0?i.changeOwnership(e,i.model.get("id")):i.deleteUser()})).fail((function(){i.deleteUser()})):i.deleteUser():o.alert(e("Error"),e("This user cannot be deleted."),(function(){return!0}))}});x.columns.unshift({name:"pg-backform-delete",label:"",cell:C,editable:!1,cell_priority:-1,canDeleteRow:!0}),o.UserManagement||o.dialog("UserManagement",(function(){return{main:function(e){this.set("title",e)},build:function(){o.pgDialogBuild.apply(this)},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:e("Users"),url:t("help.static",{filename:"user_management.html"})}},{text:e("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button user_management_pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{title:e("User Management"),padding:!1,overflow:!1,modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,closable:!1}}},hooks:{onclose:function(){this.view&&(this.view.remove({data:!0,internal:!0,silent:!0}),this.$content.remove())}},prepare:function(){var t=r.template(['<div class="pg-prop-footer" style="visibility:hidden;">',' <div class="pg-prop-status-bar">','    <div class="error-in-footer"> ','      <div class="d-flex px-2 py-1"> ','        <div class="pr-2"> ','          <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i> ',"        </div> ",'        <div class="alert-text" role="status"></div> ','        <div class="ml-auto close-error-bar"> ','          <a class="close-error fa fa-times text-danger"></a> ',"        </div> ","      </div> ","    </div> "," </div>","</div>"].join("\n")),l=n(t()),c=u.Row.extend({userInvalidClass:"bg-user-invalid",initialize:function(){u.Row.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"pgadmin:user:invalid",this.userInvalid),this.listenTo(this.model,"pgadmin:user:valid",this.userValid)},userInvalid:function(){n(this.el).removeClass("new"),n(this.el).addClass(this.userInvalidClass)},userValid:function(){n(this.el).removeClass(this.userInvalidClass)}}),f=s.Collection.extend({model:P,url:y,initialize:function(){s.Collection.prototype.initialize.apply(this,arguments);var e=this;e.changedUser=null,e.invalidUsers={},e.nonFilter=this,e.on("add",e.onModelAdd),e.on("remove",e.onModelRemove),e.on("pgadmin-session:model:invalid",(function(t,n){e.invalidUsers[n.cid]=t,n.trigger("pgadmin:user:invalid",n),l.find(".alert-text").html(t),l.css("visibility","visible")})),e.on("pgadmin-session:model:valid",(function(t){delete e.invalidUsers[t.cid],t.trigger("pgadmin:user:valid",t),this.updateErrorMsg(),this.saveUser(t)}))},onModelAdd:function(e){e.startNewSession()},onModelRemove:function(e){delete this.invalidUsers[e.cid],this.updateErrorMsg()},updateErrorMsg:function(){var e=null;for(var t in this.invalidUsers)if(e=this.invalidUsers[t])break;e?(l.find(".alert-text").html(e),l.css("visibility","visible")):(l.find(".alert-text").empty(),l.css("visibility","hidden"))},saveUser:function(t){var n=t.toJSON(!0);if(t.isNew()&&(t.get("auth_source")==_||t.get("auth_source")==w||t.get("auth_source")==O)&&(!t.get("username")||!t.get("auth_source")||!t.get("role"))||t.isNew()&&t.get("auth_source")==v&&(!t.get("email")||!t.get("role")||!t.get("newPassword")||!t.get("confirmPassword")||t.get("newPassword")!=t.get("confirmPassword"))||!t.isNew()&&t.get("newPassword")!=t.get("confirmPassword"))return!1;t.sessChanged()&&n&&!r.isEmpty(n)&&(t.stopSession(),t.save({},{attrs:n,wait:!0,success:function(){var n=t.get("auth_source");t.set({newPassword:void 0,confirmPassword:void 0,auth_source:void 0}),t.set({auth_source:n}),t.startNewSession(),o.success(e("User '%s' saved.",t.get("username")))},error:function(n,r){t.startNewSession(),o.error(e("Error saving user: '%s'",r.responseJSON.errormsg))}}))}}),p=this.userCollection=new f,S='<div class="navtab-inline-controls pgadmin-controls">\n                    <div class="input-group">\n                      <div class="input-group-prepend">\n                        <span class="input-group-text fa fa-search" id="labelSearch"></span>\n                        </div>\n                          <input type="search" class="form-control" id="txtGridSearch" placeholder="'+e("Search")+'" aria-label="'+e("Search")+'" aria-describedby="labelSearch" />\n                        </div>\n                        <button id="btn_add" type="button" class="btn btn-secondary btn-navtab-inline add" title="'+e("Add")+'">\n                          <span class="fa fa-plus "></span>\n                        </button>\n                      </div>\n                    </div>\n                  </div>',j=r.template(S),C={canAdd:!0,add_title:e("Add new user")},E=n("<div></div>",{class:"user_container flex-grow-1"});n.ajax({url:h,method:"GET",async:!1}).done((function(e){d=e})).fail((function(){setTimeout((function(){o.alert(e("Error"),e("Cannot load user roles."))}),100)})),n.ajax({url:g,method:"GET",async:!1}).done((function(e){m=e})).fail((function(){setTimeout((function(){o.alert(e("Error"),e("Cannot load user Sources."))}),100)}));var k,D=this.view=new u.Grid({row:c,columns:x.columns,collection:p,className:"backgrid table table-bordered table-noouter-border table-bottom-border table-hover"});E.append(D.render().$el[0]),this.$content=n("<div class='user_management object subnode subnode-noouter-border d-flex flex-column'></div>").append(j(C)).append(E).append(l),this.elements.content.appendChild(this.$content[0]),p.nonFilter=(k=p,new u.Extension.ClientSideFilter({collection:k,placeholder:e("Filter by email"),wait:150})).setCustomSearchBox(n("#txtGridSearch")).shadowCollection,p.fetch(),this.$content.find("a.close-error").on("click",(function(){l.find(".alert-text").empty(),l.css("visibility","hidden")})),this.$content.find("button.add").first().on("click",(function(e){e.preventDefault();var t,r=!1,o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}(p.models.entries());try{for(o.s();!(t=o.n()).done;){var l=a(t.value,2),s=l[0];if(l[1].isNew()){var u=D.body.rows[s].$el;u.addClass("new"),n(u).pgMakeVisible("backgrid"),n(u).find(".email").trigger("click"),r=!0}}}catch(e){o.e(e)}finally{o.f()}if(!r){n(D.body.$el.find(n("tr.new"))).removeClass("new");var c=new P(null,{handler:p,top:p,collection:p});p.add(c);var d=D.body.rows[p.indexOf(c)].$el;d.addClass("new"),n(d).pgMakeVisible("backgrid"),n(d).find(".email").trigger("click")}return!1})),b.findAndSetFocus(this.$content)},callback:function(t){if("dialog_help"==t.button.element.name)return t.cancel=!0,void l.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null);if("close"==t.button.element.name){var n=this;r.all(this.userCollection.pluck("id"))&&r.isEmpty(this.userCollection.invalidUsers)||(t.cancel=!0,o.confirm(e("Discard unsaved changes?"),e("Are you sure you want to close the dialog? Any unsaved changes will be lost."),(function(){return n.close(),!0}),(function(){return!0})))}}}})),o.UserManagement(!0).resizeTo(l.stdW.lg,l.stdH.md)}}},l.UserManagement}.apply(t,r))||(e.exports=o)},52677:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(78783),n(66992),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),n(88674),n(41539),n(35666);var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(67294)),i=n(73935),l=n(90999),s=n(79226),u=n(95197),c=n(46521),d=(o=n(55112))&&o.__esModule?o:{default:o};function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,l,"next",e)}function l(e){p(a,r,o,i,l,"throw",e)}i(void 0)}))}}var m=function(){var e=b(regeneratorRuntime.mark((function e(t){var n,r,o,f,p,m,y,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/browser",(r=new u.ManageTreeNodes).init(n),o={pathStyle:"unix",getItems:function(){var e=b(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.readNode(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sortComparator:function(e,t){return e._metadata&&"column"==e._metadata.data._type?0:e.constructor===t.constructor?d.default.natural_sort(e.fileName,t.fileName):e.constructor===c.Directory?-1:t.constructor===c.Directory?1:0}},f=function(){var e=b(regeneratorRuntime.mark((function e(t,n){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=t+"/"+n.id,e.abrupt("return",r.addNode(t,o,n));case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=b(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.removeNode(t,n);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=b(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.updateNode(t,n);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),y=new l.TreeModelX(o,n),h=function(e){return t.tree=new s.Tree(e,r,t),!0},e.next=11,y.root.ensureLoaded();case 11:return e.next=13,(0,i.render)(a.createElement(l.FileTreeX,{model:y,onReady:h,create:f,remove:p,update:m}),document.getElementById("tree"));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.exports={initBrowserTree:m}},95197:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4129),n(78783),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.isCollectionNode=w,t.TreeNode=t.ManageTreeNodes=void 0,n(35666),n(88674),n(41539),n(68309),n(40561),n(82772),n(26699),n(32023),n(15306),n(74916),n(69600),n(66992),n(33948),n(65069),n(19601),n(32564),n(69070);var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(43229)),a=d(n(28008)),i=d(n(55112)),l=d(n(81311)),s=n(46521),u=n(79226),c=n(68016);function d(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,l,"next",e)}function l(e){p(a,r,o,i,l,"throw",e)}i(void 0)}))}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(){function e(t){var n=this;m(this,e),g(this,"init",(function(e){return new Promise((function(t,r){n.tree={},n.tree[e]={name:"root",type:s.FileType.Directory,metadata:{parent:null,children:[],data:null}},t()}))})),g(this,"updateNode",(function(e,t){return new Promise((function(r,o){if(e in n.tree){var a=n.tree[e];a.name=t.label,a.metadata.data=t}r(!0)}))})),g(this,"removeNode",function(){var e=b(regeneratorRuntime.mark((function e(t,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=n.findNode(t))&&o.parentNode&&(o.children=[],o.parentNode.children.splice(o.parentNode.children.indexOf(o),1)),e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g(this,"addNode",(function(e,t,r){return new Promise((function(t,o){r.type=r.inode?s.FileType.Directory:s.FileType.File,r._label=r.label,r.label=l.default.escape(r.label),r.is_collection=w(r._type);var a={parent:e,children:[],data:r},i=n.findNode(e),u=new _(r.id,r,{},i,a,r.type);null!=i&&i.children.push(u),t(u)}))})),g(this,"readNode",(function(e){return new Promise((function(t,r){var l=e,u=n.findNode(e),c=i.default.Browser.URL;u&&u.children.length>0&&(!u.type===s.FileType.File?r("It's a leaf node"):0!=u.children.length&&t(u.children));var d=n;function f(){return(f=b(regeneratorRuntime.mark((function n(){var r,s,f,p,m,y,h,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(m=function(){return(m=b(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest","X-pgA-CSRFToken":i.default.csrf_token}});case 2:if(200!=(n=e.sent).status){e.next=14;break}return e.prev=4,e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r.data);case 11:e.prev=11,e.t0=e.catch(4),console.warn(e.t0);case 14:throw new Error("Node Load Error...");case 16:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)},p=function(e){return m.apply(this,arguments)},r="","/browser"==e?r=(0,a.default)("browser.nodes"):(s=d.generate_url(e),null==u.metadata.data._pid?r=u.metadata.data._type+"/children/"+u.metadata.data._id:u.metadata.data._type.includes("coll-")?(f=u.metadata.data._type.replace("coll-",""),r=f+"/nodes/"+s):r=u.metadata.data._type+"/children/"+s+"/"+u.metadata.data._id,r=c+r,l=u.path,"server"!=u.metadata.data._type||u.metadata.data.connected||(r=null)),y=null,!r){n.next=9;break}return n.next=8,p(r);case 8:y=n.sent;case 9:return h=o.BFSRequire("path"),g=function(){var t=b(regeneratorRuntime.mark((function t(n){var r,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=regeneratorRuntime.keys(n);case 1:if((t.t1=t.t0()).done){t.next=9;break}return r=t.t1.value,o=n[r],a=h.join(e,o.id),t.next=7,d.addNode(l,a,o);case 7:t.next=1;break;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.next=13,g(y);case 13:n.sent,u.children.length>0?t(u.children):t(null);case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){f.apply(this,arguments)}()}))})),g(this,"generate_url",(function(e){for(var t=e,r=[],o=[];"/"!=t;){var a=n.findNode(t),i=c.unix.dirname(t);a.parentNode&&a.parentNode.path==i&&(null===a.parentNode.metadata.data||a.parentNode.metadata.data._type.includes("coll-")||(a.parentNode.metadata.data._type.includes("partition")?o.push(a.parentNode.metadata.data._id):r.push(a.parentNode.metadata.data._id))),t=i}return o.length>0&&(r[0]=o[o.length-1]),r.reverse().join("/")})),this.tree={},this.tempTree=new _(void 0,{})}return h(e,[{key:"findNode",value:function(e){return null==e||0===e.length||"/browser"==e?this.tempTree:(0,u.findInTree)(this.tempTree,e)}}]),e}();t.ManageTreeNodes=v;var _=function(){function e(t,n,r,o,a,i){m(this,e),this.id=t,this.data=n,this.setParent(o),this.children=[],this.domNode=r,this.metadata=a,this.name=a?a.data.label:"",this.type=i||void 0}return h(e,[{key:"hasParent",value:function(){return null!==this.parentNode&&void 0!==this.parentNode}},{key:"parent",value:function(){return this.parentNode}},{key:"setParent",value:function(e){this.parentNode=e,this.path=this.id,this.id&&(null!=e&&void 0!==e.path?this.path=e.path+"/"+this.id:this.path="/browser/"+this.id)}},{key:"getData",value:function(){if(void 0!==this.data)return null===this.data?null:Object.assign({},this.data)}},{key:"getHtmlIdentifier",value:function(){return this.domNode}},{key:"ancestorNode",value:function(e){for(var t=this;t.hasParent();)if(e(t=t.parent()))return t;return null}},{key:"anyFamilyMember",value:function(e){return!!e(this)||null!==this.ancestorNode(e)}},{key:"anyParent",value:function(e){return null!==this.ancestorNode(e)}},{key:"reload",value:function(e){var t=this;return new Promise((function(n){t.unload(e).then((function(){e.setInode(t.domNode),e.deselect(t.domNode),setTimeout((function(){e.selectNode(t.domNode)}),0),n()}))}))}},{key:"unload",value:function(e){var t=this;return new Promise((function(n,r){t.children=[],e.unload(t.domNode).then((function(){n(!0)}),(function(){r()}))}))}},{key:"open",value:function(e,t){var n=this;return new Promise((function(r,o){!t||null!=n.domNode&&void 0!==n.domNode?e.isOpen(n.domNode)?r(!0):e.open(n.domNode).then((function(e){return r(!0)}),(function(e){return o(!0)})):r(!0)}))}}]),e}();function w(e){return!(!i.default.Browser.Nodes||!(e in i.default.Browser.Nodes))&&(void 0!==i.default.Browser.Nodes[e].is_collection&&i.default.Browser.Nodes[e].is_collection)}t.TreeNode=_},92026:t=>{t.exports=e},8012:e=>{e.exports=t},1506:e=>{e.exports=n},96481:e=>{e.exports=r},34622:e=>{e.exports=o},6537:e=>{e.exports=a},52536:e=>{e.exports=i}},s={};function u(e){if(s[e])return s[e].exports;var t=s[e]={id:e,loaded:!1,exports:{}};return l[e].call(t.exports,t,t.exports,u),t.loaded=!0,t.exports}u.m=l,u.x=e=>{},u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var n in t)u.o(t,n)&&!u.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},u.e=()=>Promise.resolve(),u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),u.j=325,(()=>{var e={325:0,528:0,602:0,361:0,953:0},t=[[63586,688,160,196,619]],n=e=>{},r=(r,o)=>{for(var a,i,[l,s,c,d]=o,f=0,p=[];f<l.length;f++)i=l[f],u.o(e,i)&&e[i]&&p.push(e[i][0]),e[i]=0;for(a in s)u.o(s,a)&&(u.m[a]=s[a]);for(c&&c(u),r&&r(o);p.length;)p.shift()();return d&&t.push.apply(t,d),n()},o=self.webpackChunk=self.webpackChunk||[];function a(){for(var n,r=0;r<t.length;r++){for(var o=t[r],a=!0,i=1;i<o.length;i++){var l=o[i];0!==e[l]&&(a=!1)}a&&(t.splice(r--,1),n=u(u.s=o[0]))}return 0===t.length&&(u.x(),u.x=e=>{}),n}o.forEach(r.bind(null,0)),o.push=r.bind(null,o.push.bind(o));var i=u.x;u.x=()=>(u.x=i||(e=>{}),(n=a)())})();var c=u.x();return c=c.default})()));
//# sourceMappingURL=app.bundle.js.map